/*! jQuery v3.3.1 | (c) JS Foundation and other contributors | jquery.org/license */

/*!
 * Bootstrap v3.3.7 (http://getbootstrap.com)
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under the MIT license
 */

if(function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e,t,i){var n,r=(t=t||ae).createElement("script");if(r.text=e,i)for(n in we)i[n]&&(r[n]=i[n]);t.head.appendChild(r).parentNode.removeChild(r)}function n(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?he[pe.call(e)]||"object":typeof e}function r(e){var t=!!e&&"length"in e&&e.length,i=n(e);return!be(e)&&!ye(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function a(e,t,i){return be(t)?xe.grep(e,function(e,n){return!!t.call(e,n,e)!==i}):t.nodeType?xe.grep(e,function(e){return e===t!==i}):"string"!=typeof t?xe.grep(e,function(e){return ue.call(t,e)>-1!==i}):xe.filter(t,e,i)}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function s(e){var t={};return xe.each(e.match(Ee)||[],function(e,i){t[i]=!0}),t}function d(e){return e}function c(e){throw e}function u(e,t,i,n){var r;try{e&&be(r=e.promise)?r.call(e).done(t).fail(i):e&&be(r=e.then)?r.call(e,t,i):t.apply(void 0,[e].slice(n))}catch(e){i.apply(void 0,[e])}}function h(){ae.removeEventListener("DOMContentLoaded",h),e.removeEventListener("load",h),xe.ready()}function p(e,t){return t.toUpperCase()}function g(e){return e.replace(je,"ms-").replace(ze,p)}function f(){this.expando=xe.expando+f.uid++}function v(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Le.test(e)?JSON.parse(e):e)}function m(e,t,i){var n;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(Oe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i=v(i)}catch(e){}He.set(e,t,i)}else i=void 0;return i}function b(e,t,i,n){var r,o,a=20,l=n?function(){return n.cur()}:function(){return xe.css(e,t,"")},s=l(),d=i&&i[3]||(xe.cssNumber[t]?"":"px"),c=(xe.cssNumber[t]||"px"!==d&&+s)&&Ve.exec(xe.css(e,t));if(c&&c[3]!==d){for(s/=2,d=d||c[3],c=+s||1;a--;)xe.style(e,t,c+d),(1-o)*(1-(o=l()/s||.5))<=0&&(a=0),c/=o;c*=2,xe.style(e,t,c+d),i=i||[]}return i&&(c=+c||+s||0,r=i[1]?c+(i[1]+1)*i[2]:+i[2],n&&(n.unit=d,n.start=c,n.end=r)),r}function y(e){var t,i=e.ownerDocument,n=e.nodeName,r=Ye[n];return r||(t=i.body.appendChild(i.createElement(n)),r=xe.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Ye[n]=r,r)}function w(e,t){for(var i,n,r=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i=n.style.display,t?("none"===i&&(r[o]=Me.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&qe(n)&&(r[o]=y(n))):"none"!==i&&(r[o]="none",Me.set(n,"display",i)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}function x(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&o(e,t)?xe.merge([e],i):i}function C(e,t){for(var i=0,n=e.length;i<n;i++)Me.set(e[i],"globalEval",!t||Me.get(t[i],"globalEval"))}function _(e,t,i,r,o){for(var a,l,s,d,c,u,h=t.createDocumentFragment(),p=[],g=0,f=e.length;g<f;g++)if((a=e[g])||0===a)if("object"===n(a))xe.merge(p,a.nodeType?[a]:a);else if(Ze.test(a)){for(l=l||h.appendChild(t.createElement("div")),s=(Qe.exec(a)||["",""])[1].toLowerCase(),d=Ke[s]||Ke._default,l.innerHTML=d[1]+xe.htmlPrefilter(a)+d[2],u=d[0];u--;)l=l.lastChild;xe.merge(p,l.childNodes),(l=h.firstChild).textContent=""}else p.push(t.createTextNode(a));for(h.textContent="",g=0;a=p[g++];)if(r&&xe.inArray(a,r)>-1)o&&o.push(a);else if(c=xe.contains(a.ownerDocument,a),l=x(h.appendChild(a),"script"),c&&C(l),i)for(u=0;a=l[u++];)Je.test(a.type||"")&&i.push(a);return h}function D(){return!0}function T(){return!1}function k(){try{return ae.activeElement}catch(e){}}function $(e,t,i,n,r,o){var a,l;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=void 0);for(l in t)$(e,l,i,n,t[l],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=T;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return xe().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=xe.guid++)),e.each(function(){xe.event.add(this,t,r,n,i)})}function S(e,t){return o(e,"table")&&o(11!==t.nodeType?t:t.firstChild,"tr")?xe(e).children("tbody")[0]||e:e}function R(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function I(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function B(e,t){var i,n,r,o,a,l,s,d;if(1===t.nodeType){if(Me.hasData(e)&&(o=Me.access(e),a=Me.set(t,o),d=o.events)){delete a.handle,a.events={};for(r in d)for(i=0,n=d[r].length;i<n;i++)xe.event.add(t,r,d[r][i])}He.hasData(e)&&(l=He.access(e),s=xe.extend({},l),He.set(t,s))}}function E(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Xe.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function N(e,t,n,r){t=de.apply([],t);var o,a,l,s,d,c,u=0,h=e.length,p=h-1,g=t[0],f=be(g);if(f||h>1&&"string"==typeof g&&!me.checkClone&&at.test(g))return e.each(function(i){var o=e.eq(i);f&&(t[0]=g.call(this,i,o.html())),N(o,t,n,r)});if(h&&(o=_(t,e[0].ownerDocument,!1,e,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(s=(l=xe.map(x(o,"script"),R)).length;u<h;u++)d=o,u!==p&&(d=xe.clone(d,!0,!0),s&&xe.merge(l,x(d,"script"))),n.call(e[u],d,u);if(s)for(c=l[l.length-1].ownerDocument,xe.map(l,I),u=0;u<s;u++)d=l[u],Je.test(d.type||"")&&!Me.access(d,"globalEval")&&xe.contains(c,d)&&(d.src&&"module"!==(d.type||"").toLowerCase()?xe._evalUrl&&xe._evalUrl(d.src):i(d.textContent.replace(lt,""),c,d))}return e}function F(e,t,i){for(var n,r=t?xe.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||xe.cleanData(x(n)),n.parentNode&&(i&&xe.contains(n.ownerDocument,n)&&C(x(n,"script")),n.parentNode.removeChild(n));return e}function P(e,t,i){var n,r,o,a,l=e.style;return(i=i||dt(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||xe.contains(e.ownerDocument,e)||(a=xe.style(e,t)),!me.pixelBoxStyles()&&st.test(a)&&ct.test(t)&&(n=l.width,r=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=i.width,l.width=n,l.minWidth=r,l.maxWidth=o)),void 0!==a?a+"":a}function j(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function z(e){if(e in vt)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=ft.length;i--;)if((e=ft[i]+t)in vt)return e}function A(e){var t=xe.cssProps[e];return t||(t=xe.cssProps[e]=z(e)||e),t}function M(e,t,i){var n=Ve.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function H(e,t,i,n,r,o){var a="width"===t?1:0,l=0,s=0;if(i===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===i&&(s+=xe.css(e,i+Ge[a],!0,r)),n?("content"===i&&(s-=xe.css(e,"padding"+Ge[a],!0,r)),"margin"!==i&&(s-=xe.css(e,"border"+Ge[a]+"Width",!0,r))):(s+=xe.css(e,"padding"+Ge[a],!0,r),"padding"!==i?s+=xe.css(e,"border"+Ge[a]+"Width",!0,r):l+=xe.css(e,"border"+Ge[a]+"Width",!0,r));return!n&&o>=0&&(s+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-s-l-.5))),s}function L(e,t,i){var n=dt(e),r=P(e,t,n),o="border-box"===xe.css(e,"boxSizing",!1,n),a=o;if(st.test(r)){if(!i)return r;r="auto"}return a=a&&(me.boxSizingReliable()||r===e.style[t]),("auto"===r||!parseFloat(r)&&"inline"===xe.css(e,"display",!1,n))&&(r=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(r=parseFloat(r)||0)+H(e,t,i||(o?"border":"content"),a,n,r)+"px"}function O(e,t,i,n,r){return new O.prototype.init(e,t,i,n,r)}function W(){bt&&(!1===ae.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(W):e.setTimeout(W,xe.fx.interval),xe.fx.tick())}function V(){return e.setTimeout(function(){mt=void 0}),mt=Date.now()}function G(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=Ge[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function q(e,t,i){for(var n,r=(X.tweeners[t]||[]).concat(X.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function U(e,t,i){var n,r,o,a,l,s,d,c,u="width"in t||"height"in t,h=this,p={},g=e.style,f=e.nodeType&&qe(e),v=Me.get(e,"fxshow");i.queue||(null==(a=xe._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,xe.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(r=t[n],yt.test(r)){if(delete t[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!v||void 0===v[n])continue;f=!0}p[n]=v&&v[n]||xe.style(e,n)}if((s=!xe.isEmptyObject(t))||!xe.isEmptyObject(p)){u&&1===e.nodeType&&(i.overflow=[g.overflow,g.overflowX,g.overflowY],null==(d=v&&v.display)&&(d=Me.get(e,"display")),"none"===(c=xe.css(e,"display"))&&(d?c=d:(w([e],!0),d=e.style.display||d,c=xe.css(e,"display"),w([e]))),("inline"===c||"inline-block"===c&&null!=d)&&"none"===xe.css(e,"float")&&(s||(h.done(function(){g.display=d}),null==d&&(c=g.display,d="none"===c?"":c)),g.display="inline-block")),i.overflow&&(g.overflow="hidden",h.always(function(){g.overflow=i.overflow[0],g.overflowX=i.overflow[1],g.overflowY=i.overflow[2]})),s=!1;for(n in p)s||(v?"hidden"in v&&(f=v.hidden):v=Me.access(e,"fxshow",{display:d}),o&&(v.hidden=!f),f&&w([e],!0),h.done(function(){f||w([e]),Me.remove(e,"fxshow");for(n in p)xe.style(e,n,p[n])})),s=q(f?v[n]:0,n,h),n in v||(v[n]=s.start,f&&(s.end=s.start,s.start=0))}}function Y(e,t){var i,n,r,o,a;for(i in e)if(n=g(i),r=t[n],o=e[i],Array.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=xe.cssHooks[n])&&"expand"in a){o=a.expand(o),delete e[n];for(i in o)i in e||(e[i]=o[i],t[i]=r)}else t[n]=r}function X(e,t,i){var n,r,o=0,a=X.prefilters.length,l=xe.Deferred().always(function(){delete s.elem}),s=function(){if(r)return!1;for(var t=mt||V(),i=Math.max(0,d.startTime+d.duration-t),n=1-(i/d.duration||0),o=0,a=d.tweens.length;o<a;o++)d.tweens[o].run(n);return l.notifyWith(e,[d,n,i]),n<1&&a?i:(a||l.notifyWith(e,[d,1,0]),l.resolveWith(e,[d]),!1)},d=l.promise({elem:e,props:xe.extend({},t),opts:xe.extend(!0,{specialEasing:{},easing:xe.easing._default},i),originalProperties:t,originalOptions:i,startTime:mt||V(),duration:i.duration,tweens:[],createTween:function(t,i){var n=xe.Tween(e,d.opts,t,i,d.opts.specialEasing[t]||d.opts.easing);return d.tweens.push(n),n},stop:function(t){var i=0,n=t?d.tweens.length:0;if(r)return this;for(r=!0;i<n;i++)d.tweens[i].run(1);return t?(l.notifyWith(e,[d,1,0]),l.resolveWith(e,[d,t])):l.rejectWith(e,[d,t]),this}}),c=d.props;for(Y(c,d.opts.specialEasing);o<a;o++)if(n=X.prefilters[o].call(d,e,c,d.opts))return be(n.stop)&&(xe._queueHooks(d.elem,d.opts.queue).stop=n.stop.bind(n)),n;return xe.map(c,q,d),be(d.opts.start)&&d.opts.start.call(e,d),d.progress(d.opts.progress).done(d.opts.done,d.opts.complete).fail(d.opts.fail).always(d.opts.always),xe.fx.timer(xe.extend(s,{elem:e,anim:d,queue:d.opts.queue})),d}function Q(e){return(e.match(Ee)||[]).join(" ")}function J(e){return e.getAttribute&&e.getAttribute("class")||""}function K(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Ee)||[]:[]}function Z(e,t,i,r){var o;if(Array.isArray(t))xe.each(t,function(t,n){i||Bt.test(e)?r(e,n):Z(e+"["+("object"==typeof n&&null!=n?t:"")+"]",n,i,r)});else if(i||"object"!==n(t))r(e,t);else for(o in t)Z(e+"["+o+"]",t[o],i,r)}function ee(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,r=0,o=t.toLowerCase().match(Ee)||[];if(be(i))for(;n=o[r++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(i)):(e[n]=e[n]||[]).push(i)}}function te(e,t,i,n){function r(l){var s;return o[l]=!0,xe.each(e[l]||[],function(e,l){var d=l(t,i,n);return"string"!=typeof d||a||o[d]?a?!(s=d):void 0:(t.dataTypes.unshift(d),r(d),!1)}),s}var o={},a=e===Wt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function ie(e,t){var i,n,r=xe.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&xe.extend(!0,e,n),e}function ne(e,t,i){for(var n,r,o,a,l=e.contents,s=e.dataTypes;"*"===s[0];)s.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in l)if(l[r]&&l[r].test(n)){s.unshift(r);break}if(s[0]in i)o=s[0];else{for(r in i){if(!s[0]||e.converters[r+" "+s[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==s[0]&&s.unshift(o),i[o]}function re(e,t,i,n){var r,o,a,l,s,d={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)d[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!s&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),s=o,o=c.shift())if("*"===o)o=s;else if("*"!==s&&s!==o){if(!(a=d[s+" "+o]||d["* "+o]))for(r in d)if((l=r.split(" "))[1]===o&&(a=d[s+" "+l[0]]||d["* "+l[0]])){!0===a?a=d[r]:!0!==d[r]&&(o=l[0],c.unshift(l[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+s+" to "+o}}}return{state:"success",data:t}}var oe=[],ae=e.document,le=Object.getPrototypeOf,se=oe.slice,de=oe.concat,ce=oe.push,ue=oe.indexOf,he={},pe=he.toString,ge=he.hasOwnProperty,fe=ge.toString,ve=fe.call(Object),me={},be=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},ye=function(e){return null!=e&&e===e.window},we={type:!0,src:!0,noModule:!0},xe=function(e,t){return new xe.fn.init(e,t)},Ce=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;xe.fn=xe.prototype={jquery:"3.3.1",constructor:xe,length:0,toArray:function(){return se.call(this)},get:function(e){return null==e?se.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=xe.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return xe.each(this,e)},map:function(e){return this.pushStack(xe.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return this.pushStack(se.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:ce,sort:oe.sort,splice:oe.splice},xe.extend=xe.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},l=1,s=arguments.length,d=!1;for("boolean"==typeof a&&(d=a,a=arguments[l]||{},l++),"object"==typeof a||be(a)||(a={}),l===s&&(a=this,l--);l<s;l++)if(null!=(e=arguments[l]))for(t in e)i=a[t],a!==(n=e[t])&&(d&&n&&(xe.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&xe.isPlainObject(i)?i:{},a[t]=xe.extend(d,o,n)):void 0!==n&&(a[t]=n));return a},xe.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==pe.call(e)||(t=le(e))&&("function"!=typeof(i=ge.call(t,"constructor")&&t.constructor)||fe.call(i)!==ve))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){i(e)},each:function(e,t){var i,n=0;if(r(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Ce,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(r(Object(e))?xe.merge(i,"string"==typeof e?[e]:e):ce.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:ue.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,o,a=0,l=[];if(r(e))for(n=e.length;a<n;a++)null!=(o=t(e[a],a,i))&&l.push(o);else for(a in e)null!=(o=t(e[a],a,i))&&l.push(o);return de.apply([],l)},guid:1,support:me}),"function"==typeof Symbol&&(xe.fn[Symbol.iterator]=oe[Symbol.iterator]),xe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){he["[object "+t+"]"]=t.toLowerCase()});var _e=function(e){function t(e,t,i,n){var r,o,a,l,s,c,h,p=t&&t.ownerDocument,g=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return i;if(!n&&((t?t.ownerDocument||t:M)!==B&&I(t),t=t||B,N)){if(11!==g&&(s=fe.exec(e)))if(r=s[1]){if(9===g){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(p&&(a=p.getElementById(r))&&z(t,a)&&a.id===r)return i.push(a),i}else{if(s[2])return Q.apply(i,t.getElementsByTagName(e)),i;if((r=s[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Q.apply(i,t.getElementsByClassName(r)),i}if(w.qsa&&!V[e+" "]&&(!F||!F.test(e))){if(1!==g)p=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((l=t.getAttribute("id"))?l=l.replace(ye,we):t.setAttribute("id",l=A),o=(c=D(e)).length;o--;)c[o]="#"+l+" "+u(c[o]);h=c.join(","),p=ve.test(e)&&d(t.parentNode)||t}if(h)try{return Q.apply(i,p.querySelectorAll(h)),i}catch(e){}finally{l===A&&t.removeAttribute("id")}}}return k(e.replace(oe,"$1"),t,i,n)}function i(){function e(i,n){return t.push(i+" ")>x.cacheLength&&delete e[t.shift()],e[i+" "]=n}var t=[];return e}function n(e){return e[A]=!0,e}function r(e){var t=B.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var i=e.split("|"),n=i.length;n--;)x.attrHandle[i[n]]=t}function a(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function l(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function s(e){return n(function(t){return t=+t,n(function(i,n){for(var r,o=e([],i.length,t),a=o.length;a--;)i[r=o[a]]&&(i[r]=!(n[r]=i[r]))})})}function d(e){return e&&void 0!==e.getElementsByTagName&&e}function c(){}function u(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function h(e,t,i){var n=t.dir,r=t.next,o=r||n,a=i&&"parentNode"===o,l=L++;return t.first?function(t,i,r){for(;t=t[n];)if(1===t.nodeType||a)return e(t,i,r);return!1}:function(t,i,s){var d,c,u,h=[H,l];if(s){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,i,s))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(u=t[A]||(t[A]={}),c=u[t.uniqueID]||(u[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[n]||t;else{if((d=c[o])&&d[0]===H&&d[1]===l)return h[2]=d[2];if(c[o]=h,h[2]=e(t,i,s))return!0}return!1}}function p(e){return e.length>1?function(t,i,n){for(var r=e.length;r--;)if(!e[r](t,i,n))return!1;return!0}:e[0]}function g(e,i,n){for(var r=0,o=i.length;r<o;r++)t(e,i[r],n);return n}function f(e,t,i,n,r){for(var o,a=[],l=0,s=e.length,d=null!=t;l<s;l++)(o=e[l])&&(i&&!i(o,n,r)||(a.push(o),d&&t.push(l)));return a}function v(e,t,i,r,o,a){return r&&!r[A]&&(r=v(r)),o&&!o[A]&&(o=v(o,a)),n(function(n,a,l,s){var d,c,u,h=[],p=[],v=a.length,m=n||g(t||"*",l.nodeType?[l]:l,[]),b=!e||!n&&t?m:f(m,h,e,l,s),y=i?o||(n?e:v||r)?[]:a:b;if(i&&i(b,y,l,s),r)for(d=f(y,p),r(d,[],l,s),c=d.length;c--;)(u=d[c])&&(y[p[c]]=!(b[p[c]]=u));if(n){if(o||e){if(o){for(d=[],c=y.length;c--;)(u=y[c])&&d.push(b[c]=u);o(null,y=[],d,s)}for(c=y.length;c--;)(u=y[c])&&(d=o?K(n,u):h[c])>-1&&(n[d]=!(a[d]=u))}}else y=f(y===a?y.splice(v,y.length):y),o?o(null,a,y,s):Q.apply(a,y)})}function m(e){for(var t,i,n,r=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],l=o?1:0,s=h(function(e){return e===t},a,!0),d=h(function(e){return K(t,e)>-1},a,!0),c=[function(e,i,n){var r=!o&&(n||i!==$)||((t=i).nodeType?s(e,i,n):d(e,i,n));return t=null,r}];l<r;l++)if(i=x.relative[e[l].type])c=[h(p(c),i)];else{if((i=x.filter[e[l].type].apply(null,e[l].matches))[A]){for(n=++l;n<r&&!x.relative[e[n].type];n++);return v(l>1&&p(c),l>1&&u(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(oe,"$1"),i,l<n&&m(e.slice(l,n)),n<r&&m(e=e.slice(n)),n<r&&u(e))}c.push(i)}return p(c)}function b(e,i){var r=i.length>0,o=e.length>0,a=function(n,a,l,s,d){var c,u,h,p=0,g="0",v=n&&[],m=[],b=$,y=n||o&&x.find.TAG("*",d),w=H+=null==b?1:Math.random()||.1,C=y.length;for(d&&($=a===B||a||d);g!==C&&null!=(c=y[g]);g++){if(o&&c){for(u=0,a||c.ownerDocument===B||(I(c),l=!N);h=e[u++];)if(h(c,a||B,l)){s.push(c);break}d&&(H=w)}r&&((c=!h&&c)&&p--,n&&v.push(c))}if(p+=g,r&&g!==p){for(u=0;h=i[u++];)h(v,m,a,l);if(n){if(p>0)for(;g--;)v[g]||m[g]||(m[g]=Y.call(s));m=f(m)}Q.apply(s,m),d&&!n&&m.length>0&&p+i.length>1&&t.uniqueSort(s)}return d&&(H=w,$=b),v};return r?n(a):a}var y,w,x,C,_,D,T,k,$,S,R,I,B,E,N,F,P,j,z,A="sizzle"+1*new Date,M=e.document,H=0,L=0,O=i(),W=i(),V=i(),G=function(e,t){return e===t&&(R=!0),0},q={}.hasOwnProperty,U=[],Y=U.pop,X=U.push,Q=U.push,J=U.slice,K=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ie="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",re=new RegExp(ee+"+","g"),oe=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),le=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),se=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),de=new RegExp(ne),ce=new RegExp("^"+te+"$"),ue={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,me=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),be=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},ye=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,we=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},xe=function(){I()},Ce=h(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(U=J.call(M.childNodes),M.childNodes),U[M.childNodes.length].nodeType}catch(e){Q={apply:U.length?function(e,t){X.apply(e,J.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}w=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=t.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:M;return n!==B&&9===n.nodeType&&n.documentElement?(B=n,E=B.documentElement,N=!_(B),M!==B&&(i=B.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",xe,!1):i.attachEvent&&i.attachEvent("onunload",xe)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(B.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test(B.getElementsByClassName),w.getById=r(function(e){return E.appendChild(e).id=A,!B.getElementsByName||!B.getElementsByName(A).length}),w.getById?(x.filter.ID=function(e){var t=e.replace(me,be);return function(e){return e.getAttribute("id")===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&N){var i=t.getElementById(e);return i?[i]:[]}}):(x.filter.ID=function(e){var t=e.replace(me,be);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},x.find.ID=function(e,t){if(void 0!==t.getElementById&&N){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),x.find.TAG=w.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&N)return t.getElementsByClassName(e)},P=[],F=[],(w.qsa=ge.test(B.querySelectorAll))&&(r(function(e){E.appendChild(e).innerHTML="<a id='"+A+"'></a><select id='"+A+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+A+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+A+"+*").length||F.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=B.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&F.push(":enabled",":disabled"),E.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=ge.test(j=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r(function(e){w.disconnectedMatch=j.call(e,"*"),j.call(e,"[s!='']:x"),P.push("!=",ne)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=ge.test(E.compareDocumentPosition),z=t||ge.test(E.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return R=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===B||e.ownerDocument===M&&z(M,e)?-1:t===B||t.ownerDocument===M&&z(M,t)?1:S?K(S,e)-K(S,t):0:4&i?-1:1)}:function(e,t){if(e===t)return R=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,l=[e],s=[t];if(!r||!o)return e===B?-1:t===B?1:r?-1:o?1:S?K(S,e)-K(S,t):0;if(r===o)return a(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;l[n]===s[n];)n++;return n?a(l[n],s[n]):l[n]===M?-1:s[n]===M?1:0},B):B},t.matches=function(e,i){return t(e,null,null,i)},t.matchesSelector=function(e,i){if((e.ownerDocument||e)!==B&&I(e),i=i.replace(se,"='$1']"),w.matchesSelector&&N&&!V[i+" "]&&(!P||!P.test(i))&&(!F||!F.test(i)))try{var n=j.call(e,i);if(n||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(i,B,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==B&&I(e),z(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==B&&I(e);var i=x.attrHandle[t.toLowerCase()],n=i&&q.call(x.attrHandle,t.toLowerCase())?i(e,t,!N):void 0;return void 0!==n?n:w.attributes||!N?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(ye,we)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,i=[],n=0,r=0;if(R=!w.detectDuplicates,S=!w.sortStable&&e.slice(0),e.sort(G),R){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return S=null,e},C=t.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=C(t);return i},(x=t.selectors={cacheLength:50,createPseudo:n,match:ue,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(me,be),e[3]=(e[3]||e[4]||e[5]||"").replace(me,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return ue.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&de.test(i)&&(t=D(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(me,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=O[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&O(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,i,n){return function(r){var o=t.attr(r,e);return null==o?"!="===i:!i||(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o.replace(re," ")+" ").indexOf(n)>-1:"|="===i&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),l="of-type"===t;return 1===n&&0===r?function(e){return!!e.parentNode}:function(t,i,s){var d,c,u,h,p,g,f=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=l&&t.nodeName.toLowerCase(),b=!s&&!l,y=!1;if(v){if(o){for(;f;){for(h=t;h=h[f];)if(l?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;g=f="only"===e&&!g&&"nextSibling"}return!0}if(g=[a?v.firstChild:v.lastChild],a&&b){for(y=(p=(d=(c=(u=(h=v)[A]||(h[A]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===H&&d[1])&&d[2],h=p&&v.childNodes[p];h=++p&&h&&h[f]||(y=p=0)||g.pop();)if(1===h.nodeType&&++y&&h===t){c[e]=[H,p,y];break}}else if(b&&(y=p=(d=(c=(u=(h=t)[A]||(h[A]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]||[])[0]===H&&d[1]),!1===y)for(;(h=++p&&h&&h[f]||(y=p=0)||g.pop())&&((l?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++y||(b&&((c=(u=h[A]||(h[A]={}))[h.uniqueID]||(u[h.uniqueID]={}))[e]=[H,y]),h!==t)););return(y-=r)===n||y%n==0&&y/n>=0}}},PSEUDO:function(e,i){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[A]?o(i):o.length>1?(r=[e,e,"",i],x.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,r=o(e,i),a=r.length;a--;)e[n=K(e,r[a])]=!(t[n]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:n(function(e){var t=[],i=[],r=T(e.replace(oe,"$1"));return r[A]?n(function(e,t,i,n){for(var o,a=r(e,null,n,[]),l=e.length;l--;)(o=a[l])&&(e[l]=!(t[l]=o))}):function(e,n,o){return t[0]=e,r(t,null,o,i),t[0]=null,!i.pop()}}),has:n(function(e){return function(i){return t(e,i).length>0}}),contains:n(function(e){return e=e.replace(me,be),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:n(function(e){return ce.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(me,be).toLowerCase(),function(t){var i;do{if(i=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===E},focus:function(e){return e===B.activeElement&&(!B.hasFocus||B.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){
for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,i){return[i<0?i+t:i]}),even:s(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:s(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:s(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:s(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}(y);return c.prototype=x.filters=x.pseudos,x.setFilters=new c,D=t.tokenize=function(e,i){var n,r,o,a,l,s,d,c=W[e+" "];if(c)return i?0:c.slice(0);for(l=e,s=[],d=x.preFilter;l;){n&&!(r=ae.exec(l))||(r&&(l=l.slice(r[0].length)||l),s.push(o=[])),n=!1,(r=le.exec(l))&&(n=r.shift(),o.push({value:n,type:r[0].replace(oe," ")}),l=l.slice(n.length));for(a in x.filter)!(r=ue[a].exec(l))||d[a]&&!(r=d[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),l=l.slice(n.length));if(!n)break}return i?l.length:l?t.error(e):W(e,s).slice(0)},T=t.compile=function(e,t){var i,n=[],r=[],o=V[e+" "];if(!o){for(t||(t=D(e)),i=t.length;i--;)(o=m(t[i]))[A]?n.push(o):r.push(o);(o=V(e,b(r,n))).selector=e}return o},k=t.select=function(e,t,i,n){var r,o,a,l,s,c="function"==typeof e&&e,h=!n&&D(e=c.selector||e);if(i=i||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&N&&x.relative[o[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(me,be),t)||[])[0]))return i;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=ue.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[l=a.type]);)if((s=x.find[l])&&(n=s(a.matches[0].replace(me,be),ve.test(o[0].type)&&d(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&u(o)))return Q.apply(i,n),i;break}}return(c||T(e,h))(n,t,!N,i,!t||ve.test(e)&&d(t.parentNode)||t),i},w.sortStable=A.split("").sort(G).join("")===A,w.detectDuplicates=!!R,I(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(B.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(Z,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(e);xe.find=_e,xe.expr=_e.selectors,xe.expr[":"]=xe.expr.pseudos,xe.uniqueSort=xe.unique=_e.uniqueSort,xe.text=_e.getText,xe.isXMLDoc=_e.isXML,xe.contains=_e.contains,xe.escapeSelector=_e.escape;var De=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&xe(e).is(i))break;n.push(e)}return n},Te=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},ke=xe.expr.match.needsContext,$e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;xe.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?xe.find.matchesSelector(n,e)?[n]:[]:xe.find.matches(e,xe.grep(t,function(e){return 1===e.nodeType}))},xe.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(xe(e).filter(function(){for(t=0;t<n;t++)if(xe.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)xe.find(e,r[t],i);return n>1?xe.uniqueSort(i):i},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&ke.test(e)?xe(e):e||[],!1).length}});var Se,Re=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(xe.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||Se,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Re.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof xe?t[0]:t,xe.merge(this,xe.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ae,!0)),$e.test(n[1])&&xe.isPlainObject(t))for(n in t)be(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=ae.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):be(e)?void 0!==i.ready?i.ready(e):e(xe):xe.makeArray(e,this)}).prototype=xe.fn,Se=xe(ae);var Ie=/^(?:parents|prev(?:Until|All))/,Be={children:!0,contents:!0,next:!0,prev:!0};xe.fn.extend({has:function(e){var t=xe(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(xe.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&xe(e);if(!ke.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?a.index(i)>-1:1===i.nodeType&&xe.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(o.length>1?xe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ue.call(xe(e),this[0]):ue.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(xe.uniqueSort(xe.merge(this.get(),xe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),xe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return De(e,"parentNode")},parentsUntil:function(e,t,i){return De(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return De(e,"nextSibling")},prevAll:function(e){return De(e,"previousSibling")},nextUntil:function(e,t,i){return De(e,"nextSibling",i)},prevUntil:function(e,t,i){return De(e,"previousSibling",i)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return o(e,"iframe")?e.contentDocument:(o(e,"template")&&(e=e.content||e),xe.merge([],e.childNodes))}},function(e,t){xe.fn[e]=function(i,n){var r=xe.map(this,t,i);return"Until"!==e.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=xe.filter(n,r)),this.length>1&&(Be[e]||xe.uniqueSort(r),Ie.test(e)&&r.reverse()),this.pushStack(r)}});var Ee=/[^\x20\t\r\n\f]+/g;xe.Callbacks=function(e){e="string"==typeof e?s(e):xe.extend({},e);var t,i,r,o,a=[],l=[],d=-1,c=function(){for(o=o||e.once,r=t=!0;l.length;d=-1)for(i=l.shift();++d<a.length;)!1===a[d].apply(i[0],i[1])&&e.stopOnFalse&&(d=a.length,i=!1);e.memory||(i=!1),t=!1,o&&(a=i?[]:"")},u={add:function(){return a&&(i&&!t&&(d=a.length-1,l.push(i)),function t(i){xe.each(i,function(i,r){be(r)?e.unique&&u.has(r)||a.push(r):r&&r.length&&"string"!==n(r)&&t(r)})}(arguments),i&&!t&&c()),this},remove:function(){return xe.each(arguments,function(e,t){for(var i;(i=xe.inArray(t,a,i))>-1;)a.splice(i,1),i<=d&&d--}),this},has:function(e){return e?xe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=l=[],a=i="",this},disabled:function(){return!a},lock:function(){return o=l=[],i||t||(a=i=""),this},locked:function(){return!!o},fireWith:function(e,i){return o||(i=[e,(i=i||[]).slice?i.slice():i],l.push(i),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},xe.extend({Deferred:function(t){var i=[["notify","progress",xe.Callbacks("memory"),xe.Callbacks("memory"),2],["resolve","done",xe.Callbacks("once memory"),xe.Callbacks("once memory"),0,"resolved"],["reject","fail",xe.Callbacks("once memory"),xe.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return xe.Deferred(function(t){xe.each(i,function(i,n){var r=be(e[n[4]])&&e[n[4]];o[n[1]](function(){var e=r&&r.apply(this,arguments);e&&be(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(t,n,r){function o(t,i,n,r){return function(){var l=this,s=arguments,u=function(){var e,u;if(!(t<a)){if((e=n.apply(l,s))===i.promise())throw new TypeError("Thenable self-resolution");u=e&&("object"==typeof e||"function"==typeof e)&&e.then,be(u)?r?u.call(e,o(a,i,d,r),o(a,i,c,r)):(a++,u.call(e,o(a,i,d,r),o(a,i,c,r),o(a,i,d,i.notifyWith))):(n!==d&&(l=void 0,s=[e]),(r||i.resolveWith)(l,s))}},h=r?u:function(){try{u()}catch(e){xe.Deferred.exceptionHook&&xe.Deferred.exceptionHook(e,h.stackTrace),t+1>=a&&(n!==c&&(l=void 0,s=[e]),i.rejectWith(l,s))}};t?h():(xe.Deferred.getStackHook&&(h.stackTrace=xe.Deferred.getStackHook()),e.setTimeout(h))}}var a=0;return xe.Deferred(function(e){i[0][3].add(o(0,e,be(r)?r:d,e.notifyWith)),i[1][3].add(o(0,e,be(t)?t:d)),i[2][3].add(o(0,e,be(n)?n:c))}).promise()},promise:function(e){return null!=e?xe.extend(e,r):r}},o={};return xe.each(i,function(e,t){var a=t[2],l=t[5];r[t[1]]=a.add,l&&a.add(function(){n=l},i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),r.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,i=t,n=Array(i),r=se.call(arguments),o=xe.Deferred(),a=function(e){return function(i){n[e]=this,r[e]=arguments.length>1?se.call(arguments):i,--t||o.resolveWith(n,r)}};if(t<=1&&(u(e,o.done(a(i)).resolve,o.reject,!t),"pending"===o.state()||be(r[i]&&r[i].then)))return o.then();for(;i--;)u(r[i],a(i),o.reject);return o.promise()}});var Ne=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;xe.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&Ne.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},xe.readyException=function(t){e.setTimeout(function(){throw t})};var Fe=xe.Deferred();xe.fn.ready=function(e){return Fe.then(e).catch(function(e){xe.readyException(e)}),this},xe.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--xe.readyWait:xe.isReady)||(xe.isReady=!0,!0!==e&&--xe.readyWait>0||Fe.resolveWith(ae,[xe]))}}),xe.ready.then=Fe.then,"complete"===ae.readyState||"loading"!==ae.readyState&&!ae.documentElement.doScroll?e.setTimeout(xe.ready):(ae.addEventListener("DOMContentLoaded",h),e.addEventListener("load",h));var Pe=function(e,t,i,r,o,a,l){var s=0,d=e.length,c=null==i;if("object"===n(i)){o=!0;for(s in i)Pe(e,t,s,i[s],!0,a,l)}else if(void 0!==r&&(o=!0,be(r)||(l=!0),c&&(l?(t.call(e,r),t=null):(c=t,t=function(e,t,i){return c.call(xe(e),i)})),t))for(;s<d;s++)t(e[s],i,l?r:r.call(e[s],s,t(e[s],i)));return o?e:c?t.call(e):d?t(e[0],i):a},je=/^-ms-/,ze=/-([a-z])/g,Ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};f.uid=1,f.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[g(t)]=i;else for(n in t)r[g(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][g(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){i=(t=Array.isArray(t)?t.map(g):(t=g(t))in n?[t]:t.match(Ee)||[]).length;for(;i--;)delete n[t[i]]}(void 0===t||xe.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!xe.isEmptyObject(t)}};var Me=new f,He=new f,Le=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;xe.extend({hasData:function(e){return He.hasData(e)||Me.hasData(e)},data:function(e,t,i){return He.access(e,t,i)},removeData:function(e,t){He.remove(e,t)},_data:function(e,t,i){return Me.access(e,t,i)},_removeData:function(e,t){Me.remove(e,t)}}),xe.fn.extend({data:function(e,t){var i,n,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=He.get(o),1===o.nodeType&&!Me.get(o,"hasDataAttrs"))){for(i=a.length;i--;)a[i]&&0===(n=a[i].name).indexOf("data-")&&(n=g(n.slice(5)),m(o,n,r[n]));Me.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){He.set(this,e)}):Pe(this,function(t){var i;if(o&&void 0===t){if(void 0!==(i=He.get(o,e)))return i;if(void 0!==(i=m(o,e)))return i}else this.each(function(){He.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){He.remove(this,e)})}}),xe.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=Me.get(e,t),i&&(!n||Array.isArray(i)?n=Me.access(e,t,xe.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=xe.queue(e,t),n=i.length,r=i.shift(),o=xe._queueHooks(e,t),a=function(){xe.dequeue(e,t)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return Me.get(e,i)||Me.access(e,i,{empty:xe.Callbacks("once memory").add(function(){Me.remove(e,[t+"queue",i])})})}}),xe.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?xe.queue(this[0],e):void 0===t?this:this.each(function(){var i=xe.queue(this,e,t);xe._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&xe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){xe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=xe.Deferred(),o=this,a=this.length,l=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=Me.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(l));return l(),r.promise(t)}});var We=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ve=new RegExp("^(?:([+-])=|)("+We+")([a-z%]*)$","i"),Ge=["Top","Right","Bottom","Left"],qe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&xe.contains(e.ownerDocument,e)&&"none"===xe.css(e,"display")},Ue=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=i.apply(e,n||[]);for(o in t)e.style[o]=a[o];return r},Ye={};xe.fn.extend({show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){qe(this)?xe(this).show():xe(this).hide()})}});var Xe=/^(?:checkbox|radio)$/i,Qe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Je=/^$|^module$|\/(?:java|ecma)script/i,Ke={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td;var Ze=/<|&#?\w+;/;!function(){var e=ae.createDocumentFragment().appendChild(ae.createElement("div")),t=ae.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),me.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",me.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var et=ae.documentElement,tt=/^key/,it=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,nt=/^([^.]*)(?:\.(.+)|)/;xe.event={global:{},add:function(e,t,i,n,r){var o,a,l,s,d,c,u,h,p,g,f,v=Me.get(e);if(v)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&xe.find.matchesSelector(et,r),i.guid||(i.guid=xe.guid++),(s=v.events)||(s=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==xe&&xe.event.triggered!==t.type?xe.event.dispatch.apply(e,arguments):void 0}),d=(t=(t||"").match(Ee)||[""]).length;d--;)p=f=(l=nt.exec(t[d])||[])[1],g=(l[2]||"").split(".").sort(),p&&(u=xe.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=xe.event.special[p]||{},c=xe.extend({type:p,origType:f,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&xe.expr.match.needsContext.test(r),namespace:g.join(".")},o),(h=s[p])||((h=s[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,n,g,a)||e.addEventListener&&e.addEventListener(p,a)),u.add&&(u.add.call(e,c),c.handler.guid||(c.handler.guid=i.guid)),r?h.splice(h.delegateCount++,0,c):h.push(c),xe.event.global[p]=!0)},remove:function(e,t,i,n,r){var o,a,l,s,d,c,u,h,p,g,f,v=Me.hasData(e)&&Me.get(e);if(v&&(s=v.events)){for(d=(t=(t||"").match(Ee)||[""]).length;d--;)if(l=nt.exec(t[d])||[],p=f=l[1],g=(l[2]||"").split(".").sort(),p){for(u=xe.event.special[p]||{},h=s[p=(n?u.delegateType:u.bindType)||p]||[],l=l[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!r&&f!==c.origType||i&&i.guid!==c.guid||l&&!l.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,u.remove&&u.remove.call(e,c));a&&!h.length&&(u.teardown&&!1!==u.teardown.call(e,g,v.handle)||xe.removeEvent(e,p,v.handle),delete s[p])}else for(p in s)xe.event.remove(e,p+t[d],i,n,!0);xe.isEmptyObject(s)&&Me.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,l=xe.event.fix(e),s=new Array(arguments.length),d=(Me.get(this,"events")||{})[l.type]||[],c=xe.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,l)){for(a=xe.event.handlers.call(this,l,d),t=0;(r=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(n=((xe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(l.result=n)&&(l.preventDefault(),l.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,l),l.result}},handlers:function(e,t){var i,n,r,o,a,l=[],s=t.delegateCount,d=e.target;if(s&&d.nodeType&&!("click"===e.type&&e.button>=1))for(;d!==this;d=d.parentNode||this)if(1===d.nodeType&&("click"!==e.type||!0!==d.disabled)){for(o=[],a={},i=0;i<s;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?xe(r,this).index(d)>-1:xe.find(r,this,null,[d]).length),a[r]&&o.push(n);o.length&&l.push({elem:d,handlers:o})}return d=this,s<t.length&&l.push({elem:d,handlers:t.slice(s)}),l},addProp:function(e,t){Object.defineProperty(xe.Event.prototype,e,{enumerable:!0,configurable:!0,get:be(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[xe.expando]?e:new xe.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===k()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&o(this,"input"))return this.click(),!1},_default:function(e){return o(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},xe.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},xe.Event=function(e,t){if(!(this instanceof xe.Event))return new xe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?D:T,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&xe.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[xe.expando]=!0},xe.Event.prototype={constructor:xe.Event,isDefaultPrevented:T,isPropagationStopped:T,isImmediatePropagationStopped:T,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=D,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=D,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=D,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},xe.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&tt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&it.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},xe.event.addProp),xe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){xe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===n||xe.contains(n,r))||(e.type=o.origType,i=o.handler.apply(this,arguments),e.type=t),i}}}),xe.fn.extend({on:function(e,t,i,n){return $(this,e,t,i,n)},one:function(e,t,i,n){return $(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,xe(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=T),this.each(function(){xe.event.remove(this,e,i,t)})}});var rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ot=/<script|<style|<link/i,at=/checked\s*(?:[^=]|=\s*.checked.)/i,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;xe.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,l=e.cloneNode(!0),s=xe.contains(e.ownerDocument,e);if(!(me.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||xe.isXMLDoc(e)))for(a=x(l),n=0,r=(o=x(e)).length;n<r;n++)E(o[n],a[n]);if(t)if(i)for(o=o||x(e),a=a||x(l),n=0,r=o.length;n<r;n++)B(o[n],a[n]);else B(e,l);return(a=x(l,"script")).length>0&&C(a,!s&&x(e,"script")),l},cleanData:function(e){for(var t,i,n,r=xe.event.special,o=0;void 0!==(i=e[o]);o++)if(Ae(i)){if(t=i[Me.expando]){if(t.events)for(n in t.events)r[n]?xe.event.remove(i,n):xe.removeEvent(i,n,t.handle);i[Me.expando]=void 0}i[He.expando]&&(i[He.expando]=void 0)}}}),xe.fn.extend({detach:function(e){return F(this,e,!0)},remove:function(e){return F(this,e)},text:function(e){return Pe(this,function(e){return void 0===e?xe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return N(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||S(this,e).appendChild(e)})},prepend:function(){return N(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=S(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return N(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(xe.cleanData(x(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return xe.clone(this,e,t)})},html:function(e){return Pe(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ot.test(e)&&!Ke[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=xe.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(xe.cleanData(x(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return N(this,arguments,function(t){var i=this.parentNode;xe.inArray(this,e)<0&&(xe.cleanData(x(this)),i&&i.replaceChild(t,this))},e)}}),xe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){xe.fn[e]=function(e){for(var i,n=[],r=xe(e),o=r.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),xe(r[a])[t](i),ce.apply(n,i.get());return this.pushStack(n)}});var st=new RegExp("^("+We+")(?!px)[a-z%]+$","i"),dt=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},ct=new RegExp(Ge.join("|"),"i");!function(){function t(){if(d){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",d.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",et.appendChild(s).appendChild(d);var t=e.getComputedStyle(d);n="1%"!==t.top,l=12===i(t.marginLeft),d.style.right="60%",a=36===i(t.right),r=36===i(t.width),d.style.position="absolute",o=36===d.offsetWidth||"absolute",et.removeChild(s),d=null}}function i(e){return Math.round(parseFloat(e))}var n,r,o,a,l,s=ae.createElement("div"),d=ae.createElement("div");d.style&&(d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",me.clearCloneStyle="content-box"===d.style.backgroundClip,xe.extend(me,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o}}))}();var ut=/^(none|table(?!-c[ea]).+)/,ht=/^--/,pt={position:"absolute",visibility:"hidden",display:"block"},gt={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","Moz","ms"],vt=ae.createElement("div").style;xe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=P(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,l=g(t),s=ht.test(t),d=e.style;if(s||(t=A(l)),a=xe.cssHooks[t]||xe.cssHooks[l],void 0===i)return a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:d[t];"string"==(o=typeof i)&&(r=Ve.exec(i))&&r[1]&&(i=b(e,t,r),o="number"),null!=i&&i===i&&("number"===o&&(i+=r&&r[3]||(xe.cssNumber[l]?"":"px")),me.clearCloneStyle||""!==i||0!==t.indexOf("background")||(d[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(s?d.setProperty(t,i):d[t]=i))}},css:function(e,t,i,n){var r,o,a,l=g(t);return ht.test(t)||(t=A(l)),(a=xe.cssHooks[t]||xe.cssHooks[l])&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=P(e,t,n)),"normal"===r&&t in gt&&(r=gt[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),xe.each(["height","width"],function(e,t){xe.cssHooks[t]={get:function(e,i,n){if(i)return!ut.test(xe.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?L(e,t,n):Ue(e,pt,function(){return L(e,t,n)})},set:function(e,i,n){var r,o=dt(e),a="border-box"===xe.css(e,"boxSizing",!1,o),l=n&&H(e,t,n,a,o);return a&&me.scrollboxSize()===o.position&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-H(e,t,"border",!1,o)-.5)),l&&(r=Ve.exec(i))&&"px"!==(r[3]||"px")&&(e.style[t]=i,i=xe.css(e,t)),M(e,i,l)}}}),xe.cssHooks.marginLeft=j(me.reliableMarginLeft,function(e,t){if(t)return(parseFloat(P(e,"marginLeft"))||e.getBoundingClientRect().left-Ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),xe.each({margin:"",padding:"",border:"Width"},function(e,t){xe.cssHooks[e+t]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];n<4;n++)r[e+Ge[n]+t]=o[n]||o[n-2]||o[0];return r}},"margin"!==e&&(xe.cssHooks[e+t].set=M)}),xe.fn.extend({css:function(e,t){return Pe(this,function(e,t,i){var n,r,o={},a=0;if(Array.isArray(t)){for(n=dt(e),r=t.length;a<r;a++)o[t[a]]=xe.css(e,t[a],!1,n);return o}return void 0!==i?xe.style(e,t,i):xe.css(e,t)},e,t,arguments.length>1)}}),xe.Tween=O,O.prototype={constructor:O,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||xe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(xe.cssNumber[i]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,i=O.propHooks[this.prop];return this.options.duration?this.pos=t=xe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=xe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){xe.fx.step[e.prop]?xe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[xe.cssProps[e.prop]]&&!xe.cssHooks[e.prop]?e.elem[e.prop]=e.now:xe.style(e.elem,e.prop,e.now+e.unit)}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},xe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},xe.fx=O.prototype.init,xe.fx.step={};var mt,bt,yt=/^(?:toggle|show|hide)$/,wt=/queueHooks$/;xe.Animation=xe.extend(X,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return b(i.elem,e,Ve.exec(t),i),i}]},tweener:function(e,t){be(e)?(t=e,e=["*"]):e=e.match(Ee);for(var i,n=0,r=e.length;n<r;n++)i=e[n],X.tweeners[i]=X.tweeners[i]||[],X.tweeners[i].unshift(t)},prefilters:[U],prefilter:function(e,t){t?X.prefilters.unshift(e):X.prefilters.push(e)}}),xe.speed=function(e,t,i){var n=e&&"object"==typeof e?xe.extend({},e):{complete:i||!i&&t||be(e)&&e,duration:e,easing:i&&t||t&&!be(t)&&t};return xe.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in xe.fx.speeds?n.duration=xe.fx.speeds[n.duration]:n.duration=xe.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){be(n.old)&&n.old.call(this),n.queue&&xe.dequeue(this,n.queue)},n},xe.fn.extend({fadeTo:function(e,t,i,n){return this.filter(qe).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var r=xe.isEmptyObject(e),o=xe.speed(t,i,n),a=function(){var t=X(this,xe.extend({},e),o);(r||Me.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,i){var n=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=xe.timers,a=Me.get(this);if(r)a[r]&&a[r].stop&&n(a[r]);else for(r in a)a[r]&&a[r].stop&&wt.test(r)&&n(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(i),t=!1,o.splice(r,1));!t&&i||xe.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){
var t,i=Me.get(this),n=i[e+"queue"],r=i[e+"queueHooks"],o=xe.timers,a=n?n.length:0;for(i.finish=!0,xe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete i.finish})}}),xe.each(["toggle","show","hide"],function(e,t){var i=xe.fn[t];xe.fn[t]=function(e,n,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(G(t,!0),e,n,r)}}),xe.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){xe.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),xe.timers=[],xe.fx.tick=function(){var e,t=0,i=xe.timers;for(mt=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||xe.fx.stop(),mt=void 0},xe.fx.timer=function(e){xe.timers.push(e),xe.fx.start()},xe.fx.interval=13,xe.fx.start=function(){bt||(bt=!0,W())},xe.fx.stop=function(){bt=null},xe.fx.speeds={slow:600,fast:200,_default:400},xe.fn.delay=function(t,i){return t=xe.fx?xe.fx.speeds[t]||t:t,i=i||"fx",this.queue(i,function(i,n){var r=e.setTimeout(i,t);n.stop=function(){e.clearTimeout(r)}})},function(){var e=ae.createElement("input"),t=ae.createElement("select").appendChild(ae.createElement("option"));e.type="checkbox",me.checkOn=""!==e.value,me.optSelected=t.selected,(e=ae.createElement("input")).value="t",e.type="radio",me.radioValue="t"===e.value}();var xt,Ct=xe.expr.attrHandle;xe.fn.extend({attr:function(e,t){return Pe(this,xe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){xe.removeAttr(this,e)})}}),xe.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?xe.prop(e,t,i):(1===o&&xe.isXMLDoc(e)||(r=xe.attrHooks[t.toLowerCase()]||(xe.expr.match.bool.test(t)?xt:void 0)),void 0!==i?null===i?void xe.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=xe.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!me.radioValue&&"radio"===t&&o(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(Ee);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),xt={set:function(e,t,i){return!1===t?xe.removeAttr(e,i):e.setAttribute(i,i),i}},xe.each(xe.expr.match.bool.source.match(/\w+/g),function(e,t){var i=Ct[t]||xe.find.attr;Ct[t]=function(e,t,n){var r,o,a=t.toLowerCase();return n||(o=Ct[a],Ct[a]=r,r=null!=i(e,t,n)?a:null,Ct[a]=o),r}});var _t=/^(?:input|select|textarea|button)$/i,Dt=/^(?:a|area)$/i;xe.fn.extend({prop:function(e,t){return Pe(this,xe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[xe.propFix[e]||e]})}}),xe.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&xe.isXMLDoc(e)||(t=xe.propFix[t]||t,r=xe.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=xe.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),me.optSelected||(xe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),xe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){xe.propFix[this.toLowerCase()]=this}),xe.fn.extend({addClass:function(e){var t,i,n,r,o,a,l,s=0;if(be(e))return this.each(function(t){xe(this).addClass(e.call(this,t,J(this)))});if((t=K(e)).length)for(;i=this[s++];)if(r=J(i),n=1===i.nodeType&&" "+Q(r)+" "){for(a=0;o=t[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(l=Q(n))&&i.setAttribute("class",l)}return this},removeClass:function(e){var t,i,n,r,o,a,l,s=0;if(be(e))return this.each(function(t){xe(this).removeClass(e.call(this,t,J(this)))});if(!arguments.length)return this.attr("class","");if((t=K(e)).length)for(;i=this[s++];)if(r=J(i),n=1===i.nodeType&&" "+Q(r)+" "){for(a=0;o=t[a++];)for(;n.indexOf(" "+o+" ")>-1;)n=n.replace(" "+o+" "," ");r!==(l=Q(n))&&i.setAttribute("class",l)}return this},toggleClass:function(e,t){var i=typeof e,n="string"===i||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):be(e)?this.each(function(i){xe(this).toggleClass(e.call(this,i,J(this),t),t)}):this.each(function(){var t,r,o,a;if(n)for(r=0,o=xe(this),a=K(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==i||((t=J(this))&&Me.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Me.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&(" "+Q(J(i))+" ").indexOf(t)>-1)return!0;return!1}});var Tt=/\r/g;xe.fn.extend({val:function(e){var t,i,n,r=this[0];return arguments.length?(n=be(e),this.each(function(i){var r;1===this.nodeType&&(null==(r=n?e.call(this,i,xe(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=xe.map(r,function(e){return null==e?"":e+""})),(t=xe.valHooks[this.type]||xe.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=xe.valHooks[r.type]||xe.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(r,"value"))?i:"string"==typeof(i=r.value)?i.replace(Tt,""):null==i?"":i:void 0}}),xe.extend({valHooks:{option:{get:function(e){var t=xe.find.attr(e,"value");return null!=t?t:Q(xe.text(e))}},select:{get:function(e){var t,i,n,r=e.options,a=e.selectedIndex,l="select-one"===e.type,s=l?null:[],d=l?a+1:r.length;for(n=a<0?d:l?a:0;n<d;n++)if(((i=r[n]).selected||n===a)&&!i.disabled&&(!i.parentNode.disabled||!o(i.parentNode,"optgroup"))){if(t=xe(i).val(),l)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=xe.makeArray(t),a=r.length;a--;)((n=r[a]).selected=xe.inArray(xe.valHooks.option.get(n),o)>-1)&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),xe.each(["radio","checkbox"],function(){xe.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=xe.inArray(xe(e).val(),t)>-1}},me.checkOn||(xe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),me.focusin="onfocusin"in e;var kt=/^(?:focusinfocus|focusoutblur)$/,$t=function(e){e.stopPropagation()};xe.extend(xe.event,{trigger:function(t,i,n,r){var o,a,l,s,d,c,u,h,p=[n||ae],g=ge.call(t,"type")?t.type:t,f=ge.call(t,"namespace")?t.namespace.split("."):[];if(a=h=l=n=n||ae,3!==n.nodeType&&8!==n.nodeType&&!kt.test(g+xe.event.triggered)&&(g.indexOf(".")>-1&&(g=(f=g.split(".")).shift(),f.sort()),d=g.indexOf(":")<0&&"on"+g,t=t[xe.expando]?t:new xe.Event(g,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=f.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),i=null==i?[t]:xe.makeArray(i,[t]),u=xe.event.special[g]||{},r||!u.trigger||!1!==u.trigger.apply(n,i))){if(!r&&!u.noBubble&&!ye(n)){for(s=u.delegateType||g,kt.test(s+g)||(a=a.parentNode);a;a=a.parentNode)p.push(a),l=a;l===(n.ownerDocument||ae)&&p.push(l.defaultView||l.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)h=a,t.type=o>1?s:u.bindType||g,(c=(Me.get(a,"events")||{})[t.type]&&Me.get(a,"handle"))&&c.apply(a,i),(c=d&&a[d])&&c.apply&&Ae(a)&&(t.result=c.apply(a,i),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(p.pop(),i)||!Ae(n)||d&&be(n[g])&&!ye(n)&&((l=n[d])&&(n[d]=null),xe.event.triggered=g,t.isPropagationStopped()&&h.addEventListener(g,$t),n[g](),t.isPropagationStopped()&&h.removeEventListener(g,$t),xe.event.triggered=void 0,l&&(n[d]=l)),t.result}},simulate:function(e,t,i){var n=xe.extend(new xe.Event,i,{type:e,isSimulated:!0});xe.event.trigger(n,null,t)}}),xe.fn.extend({trigger:function(e,t){return this.each(function(){xe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return xe.event.trigger(e,t,i,!0)}}),me.focusin||xe.each({focus:"focusin",blur:"focusout"},function(e,t){var i=function(e){xe.event.simulate(t,e.target,xe.event.fix(e))};xe.event.special[t]={setup:function(){var n=this.ownerDocument||this,r=Me.access(n,t);r||n.addEventListener(e,i,!0),Me.access(n,t,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=Me.access(n,t)-1;r?Me.access(n,t,r):(n.removeEventListener(e,i,!0),Me.remove(n,t))}}});var St=e.location,Rt=Date.now(),It=/\?/;xe.parseXML=function(t){var i;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||xe.error("Invalid XML: "+t),i};var Bt=/\[\]$/,Et=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Ft=/^(?:input|select|textarea|keygen)/i;xe.param=function(e,t){var i,n=[],r=function(e,t){var i=be(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(e)||e.jquery&&!xe.isPlainObject(e))xe.each(e,function(){r(this.name,this.value)});else for(i in e)Z(i,e[i],t,r);return n.join("&")},xe.fn.extend({serialize:function(){return xe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=xe.prop(this,"elements");return e?xe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!xe(this).is(":disabled")&&Ft.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Xe.test(e))}).map(function(e,t){var i=xe(this).val();return null==i?null:Array.isArray(i)?xe.map(i,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:i.replace(Et,"\r\n")}}).get()}});var Pt=/%20/g,jt=/#.*$/,zt=/([?&])_=[^&]*/,At=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Lt=/^\/\//,Ot={},Wt={},Vt="*/".concat("*"),Gt=ae.createElement("a");Gt.href=St.href,xe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:Mt.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":xe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ie(ie(e,xe.ajaxSettings),t):ie(xe.ajaxSettings,e)},ajaxPrefilter:ee(Ot),ajaxTransport:ee(Wt),ajax:function(t,i){function n(t,i,n,l){var d,h,p,w,x,C=i;c||(c=!0,s&&e.clearTimeout(s),r=void 0,a=l||"",_.readyState=t>0?4:0,d=t>=200&&t<300||304===t,n&&(w=ne(g,_,n)),w=re(g,w,_,d),d?(g.ifModified&&((x=_.getResponseHeader("Last-Modified"))&&(xe.lastModified[o]=x),(x=_.getResponseHeader("etag"))&&(xe.etag[o]=x)),204===t||"HEAD"===g.type?C="nocontent":304===t?C="notmodified":(C=w.state,h=w.data,d=!(p=w.error))):(p=C,!t&&C||(C="error",t<0&&(t=0))),_.status=t,_.statusText=(i||C)+"",d?m.resolveWith(f,[h,C,_]):m.rejectWith(f,[_,C,p]),_.statusCode(y),y=void 0,u&&v.trigger(d?"ajaxSuccess":"ajaxError",[_,g,d?h:p]),b.fireWith(f,[_,C]),u&&(v.trigger("ajaxComplete",[_,g]),--xe.active||xe.event.trigger("ajaxStop")))}"object"==typeof t&&(i=t,t=void 0),i=i||{};var r,o,a,l,s,d,c,u,h,p,g=xe.ajaxSetup({},i),f=g.context||g,v=g.context&&(f.nodeType||f.jquery)?xe(f):xe.event,m=xe.Deferred(),b=xe.Callbacks("once memory"),y=g.statusCode||{},w={},x={},C="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(c){if(!l)for(l={};t=At.exec(a);)l[t[1].toLowerCase()]=t[2];t=l[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==c&&(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)_.always(e[_.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),n(0,t),this}};if(m.promise(_),g.url=((t||g.url||St.href)+"").replace(Lt,St.protocol+"//"),g.type=i.method||i.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(Ee)||[""],null==g.crossDomain){d=ae.createElement("a");try{d.href=g.url,d.href=d.href,g.crossDomain=Gt.protocol+"//"+Gt.host!=d.protocol+"//"+d.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=xe.param(g.data,g.traditional)),te(Ot,g,i,_),c)return _;(u=xe.event&&g.global)&&0==xe.active++&&xe.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Ht.test(g.type),o=g.url.replace(jt,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(Pt,"+")):(p=g.url.slice(o.length),g.data&&(g.processData||"string"==typeof g.data)&&(o+=(It.test(o)?"&":"?")+g.data,delete g.data),!1===g.cache&&(o=o.replace(zt,"$1"),p=(It.test(o)?"&":"?")+"_="+Rt+++p),g.url=o+p),g.ifModified&&(xe.lastModified[o]&&_.setRequestHeader("If-Modified-Since",xe.lastModified[o]),xe.etag[o]&&_.setRequestHeader("If-None-Match",xe.etag[o])),(g.data&&g.hasContent&&!1!==g.contentType||i.contentType)&&_.setRequestHeader("Content-Type",g.contentType),_.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Vt+"; q=0.01":""):g.accepts["*"]);for(h in g.headers)_.setRequestHeader(h,g.headers[h]);if(g.beforeSend&&(!1===g.beforeSend.call(f,_,g)||c))return _.abort();if(C="abort",b.add(g.complete),_.done(g.success),_.fail(g.error),r=te(Wt,g,i,_)){if(_.readyState=1,u&&v.trigger("ajaxSend",[_,g]),c)return _;g.async&&g.timeout>0&&(s=e.setTimeout(function(){_.abort("timeout")},g.timeout));try{c=!1,r.send(w,n)}catch(e){if(c)throw e;n(-1,e)}}else n(-1,"No Transport");return _},getJSON:function(e,t,i){return xe.get(e,t,i,"json")},getScript:function(e,t){return xe.get(e,void 0,t,"script")}}),xe.each(["get","post"],function(e,t){xe[t]=function(e,i,n,r){return be(i)&&(r=r||n,n=i,i=void 0),xe.ajax(xe.extend({url:e,type:t,dataType:r,data:i,success:n},xe.isPlainObject(e)&&e))}}),xe._evalUrl=function(e){return xe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},xe.fn.extend({wrapAll:function(e){var t;return this[0]&&(be(e)&&(e=e.call(this[0])),t=xe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return be(e)?this.each(function(t){xe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=xe(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=be(e);return this.each(function(i){xe(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){xe(this).replaceWith(this.childNodes)}),this}}),xe.expr.pseudos.hidden=function(e){return!xe.expr.pseudos.visible(e)},xe.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},xe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Ut=xe.ajaxSettings.xhr();me.cors=!!Ut&&"withCredentials"in Ut,me.ajax=Ut=!!Ut,xe.ajaxTransport(function(t){var i,n;if(me.cors||Ut&&!t.crossDomain)return{send:function(r,o){var a,l=t.xhr();if(l.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)l[a]=t.xhrFields[a];t.mimeType&&l.overrideMimeType&&l.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)l.setRequestHeader(a,r[a]);i=function(e){return function(){i&&(i=n=l.onload=l.onerror=l.onabort=l.ontimeout=l.onreadystatechange=null,"abort"===e?l.abort():"error"===e?"number"!=typeof l.status?o(0,"error"):o(l.status,l.statusText):o(qt[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}},l.onload=i(),n=l.onerror=l.ontimeout=i("error"),void 0!==l.onabort?l.onabort=n:l.onreadystatechange=function(){4===l.readyState&&e.setTimeout(function(){i&&n()})},i=i("abort");try{l.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}}),xe.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),xe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return xe.globalEval(e),e}}}),xe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),xe.ajaxTransport("script",function(e){if(e.crossDomain){var t,i;return{send:function(n,r){t=xe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){t.remove(),i=null,e&&r("error"===e.type?404:200,e.type)}),ae.head.appendChild(t[0])},abort:function(){i&&i()}}}});var Yt=[],Xt=/(=)\?(?=&|$)|\?\?/;xe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Yt.pop()||xe.expando+"_"+Rt++;return this[e]=!0,e}}),xe.ajaxPrefilter("json jsonp",function(t,i,n){var r,o,a,l=!1!==t.jsonp&&(Xt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(t.data)&&"data");if(l||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=be(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,l?t[l]=t[l].replace(Xt,"$1"+r):!1!==t.jsonp&&(t.url+=(It.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||xe.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},n.always(function(){void 0===o?xe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=i.jsonpCallback,Yt.push(r)),a&&be(o)&&o(a[0]),a=o=void 0}),"script"}),me.createHTMLDocument=function(){var e=ae.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),xe.parseHTML=function(e,t,i){if("string"!=typeof e)return[];"boolean"==typeof t&&(i=t,t=!1);var n,r,o;return t||(me.createHTMLDocument?((n=(t=ae.implementation.createHTMLDocument("")).createElement("base")).href=ae.location.href,t.head.appendChild(n)):t=ae),r=$e.exec(e),o=!i&&[],r?[t.createElement(r[1])]:(r=_([e],t,o),o&&o.length&&xe(o).remove(),xe.merge([],r.childNodes))},xe.fn.load=function(e,t,i){var n,r,o,a=this,l=e.indexOf(" ");return l>-1&&(n=Q(e.slice(l)),e=e.slice(0,l)),be(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&xe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?xe("<div>").append(xe.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},xe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){xe.fn[t]=function(e){return this.on(t,e)}}),xe.expr.pseudos.animated=function(e){return xe.grep(xe.timers,function(t){return e===t.elem}).length},xe.offset={setOffset:function(e,t,i){var n,r,o,a,l,s,d=xe.css(e,"position"),c=xe(e),u={};"static"===d&&(e.style.position="relative"),l=c.offset(),o=xe.css(e,"top"),s=xe.css(e,"left"),("absolute"===d||"fixed"===d)&&(o+s).indexOf("auto")>-1?(a=(n=c.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(s)||0),be(t)&&(t=t.call(e,i,xe.extend({},l))),null!=t.top&&(u.top=t.top-l.top+a),null!=t.left&&(u.left=t.left-l.left+r),"using"in t?t.using.call(e,u):c.css(u)}},xe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){xe.offset.setOffset(this,e,t)});var t,i,n=this[0];return n?n.getClientRects().length?(t=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,n=this[0],r={top:0,left:0};if("fixed"===xe.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),i=n.ownerDocument,e=n.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===xe.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((r=xe(e).offset()).top+=xe.css(e,"borderTopWidth",!0),r.left+=xe.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-xe.css(n,"marginTop",!0),left:t.left-r.left-xe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===xe.css(e,"position");)e=e.offsetParent;return e||et})}}),xe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var i="pageYOffset"===t;xe.fn[e]=function(n){return Pe(this,function(e,n,r){var o;if(ye(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[n];o?o.scrollTo(i?o.pageXOffset:r,i?r:o.pageYOffset):e[n]=r},e,n,arguments.length)}}),xe.each(["top","left"],function(e,t){xe.cssHooks[t]=j(me.pixelPosition,function(e,i){if(i)return i=P(e,t),st.test(i)?xe(e).position()[t]+"px":i})}),xe.each({Height:"height",Width:"width"},function(e,t){xe.each({padding:"inner"+e,content:t,"":"outer"+e},function(i,n){xe.fn[n]=function(r,o){var a=arguments.length&&(i||"boolean"!=typeof r),l=i||(!0===r||!0===o?"margin":"border");return Pe(this,function(t,i,r){var o;return ye(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?xe.css(t,i,l):xe.style(t,i,r,l)},t,a?r:void 0,a)}})}),xe.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){xe.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}),xe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),xe.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),xe.proxy=function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),be(e))return n=se.call(arguments,2),r=function(){return e.apply(t||this,n.concat(se.call(arguments)))},r.guid=e.guid=e.guid||xe.guid++,r},xe.holdReady=function(e){e?xe.readyWait++:xe.ready(!0)},xe.isArray=Array.isArray,xe.parseJSON=JSON.parse,xe.nodeName=o,xe.isFunction=be,xe.isWindow=ye,xe.camelCase=g,xe.type=n,xe.now=Date.now,xe.isNumeric=function(e){var t=xe.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return xe});var Qt=e.jQuery,Jt=e.$;return xe.noConflict=function(t){return e.$===xe&&(e.$=Jt),t&&e.jQuery===xe&&(e.jQuery=Qt),xe},t||(e.jQuery=e.$=xe),xe}),function($){if(Function.prototype.ligerExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.ligerDefer=function(e,t,i){var n=this;return setTimeout(function(){n.apply(e,i||[])},t)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"liger",attrPrev:"data",getId:function(e){e=e||this.managerIdPrev;var t=e+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||arguments[0].id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete liger.managers[e];else if("object"==typeof e)if(e instanceof liger.core.Component)delete liger.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete liger.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"ligeruiid","string"==typeof e||"number"==typeof e)return liger.managers[e];if("object"==typeof e){var i=e.length?e[0]:e,n=i[t]||$(i).attr(t);return n?liger.managers[n]:null}return null},find:function(e){var t=[];for(var i in this.managers){var n=this.managers[i];e instanceof Function?n instanceof e&&t.push(n):e instanceof Array?-1!=$.inArray(n.__getType(),e)&&t.push(n):n.__getType()==e&&t.push(n)}return t},run:function(e,t,i){if(e){if(i=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),e=e.replace(/^ligerGet/,""),e=e.replace(/^liger/,""),null==this||this==window||i.isStatic)return liger.plugins[e]||(liger.plugins[e]={fn:$[liger.pluginPrev+e],isStatic:!0}),new $.ligerui[i.controlNamespace][e]($.extend({},$[i.defaultsNamespace][e]||{},$[i.defaultsNamespace][e+"String"]||{},t.length>0?t[0]:{}));if(liger.plugins[e]||(liger.plugins[e]={fn:$.fn[liger.pluginPrev+e],isStatic:!1}),/Manager$/.test(e))return liger.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var n=liger.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(n&&t.length>0&&n.set(t[0]))}if(!(t.length>=1&&"string"==typeof t[0])){var r=t.length>0?t[0]:null,o=$.extend({},$[i.defaultsNamespace][e],$[i.defaultsNamespace][e+"String"],r);i.propertyToElemnt&&(o[i.propertyToElemnt]=this),i.hasElement?new $.ligerui[i.controlNamespace][e](this,o):new $.ligerui[i.controlNamespace][e](o)}}),0==this.length)return null;if(0==t.length)return liger.get(this,i.idAttrName);if("object"==typeof t[0])return liger.get(this,i.idAttrName);if("string"==typeof t[0]){var n=liger.get(this,i.idAttrName);if(null==n)return;if("option"!=t[0]){var r=t[0];if(!n[r])return;var o=Array.apply(null,t);return o.shift(),n[r].apply(n,o)}if(2==t.length)return n.get(t[1]);if(t.length>=3)return n.set(t[1],t[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(e){return e?liger.run.call(this,e,arguments):liger.get(this)},liger.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(e,t,i){if(e)if("object"!=typeof e){var n=e;if(0==n.indexOf("on"))return void("function"==typeof t&&this.bind(n.substr(2),t));if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[n]=t;var r="_set"+n.substr(0,1).toUpperCase()+n.substr(1);this[r]&&this[r].call(this,t,i),this.trigger("propertychanged",[e,t])}}else{var o;if(this.options!=e?($.extend(this.options,e),o=e):o=$.extend({},e),void 0==t||1==t)for(var a in o)0==a.indexOf("on")&&this.set(a,o[a]);if(void 0==t||0==t)for(var a in o)0!=a.indexOf("on")&&this.set(a,o[a],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return!(!i||!i.length)},trigger:function(e,t){if(e){var i=e.toLowerCase(),n=this.events[i];if(n){t=t||[],t instanceof Array==0&&(t=[t]);for(var r=0;r<n.length;r++){var o=n[r];if(0==o.handler.apply(o.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var n=e.toLowerCase(),r=this.events[n]||[];i=i||this,r.push({handler:t,context:i}),this.events[n]=r}else for(var o in e)this.bind(o,e[o])},unbind:function(e,t){if(!e)return void(this.events={});var i=e.toLowerCase(),n=this.events[i];if(n&&n.length)if(t){for(var r=0,o=n.length;r<o;r++)if(n[r].handler==t){n.splice(r,1);break}}else delete this.events[i]},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(e,t){liger.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(e,t){var i={};if(!e||-1!=e.indexOf("."))return i;var n=liger.defaults[e];if(!n)return i;for(var r in n)if(t.attr(liger.attrPrev+"-"+r)){var o=t.attr(liger.attrPrev+"-"+r);"boolean"==typeof n[r]?i[r]="true"==o||"1"==o:i[r]=o}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||liger.getId(this.__idPrev()):this.id=this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(e,t){liger.controls.Input.base.constructor.call(this,e,t)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e,height:t+2})}}),liger.win={top:!1,mask:function(e){function t(){if(liger.win.windowMask){var e=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .l-dialog:visible,body > .l-window:visible"),i=0,n=t.length;i<n;i++){var r=t.eq(i).attr("ligeruiid");if(!e||e.id!=r){var o=liger.get(r);if(o){if(o.get("modal"))return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t]
;t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){var t=this;if(t.taskbar)return t.tasks[e.id]?t.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),n=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(n),t.activeTask(e),n.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),n},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){var t=this;t.taskbar&&(t.tasks[e.id]&&(t.tasks[e.id].unbind(),t.tasks[e.id].remove(),delete t.tasks[e.id]),t.hasTask()||t.removeTaskbar())},setFront:function(e){var t=liger.find(liger.core.Win);for(var i in t){var n=t[i];n==e?($(n.element).css("z-index","9200"),this.activeTask(n)):$(n.element).css("z-index","9100")}}},liger.core.Win=function(e,t){liger.core.Win.base.constructor.call(this,e,t)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){var t=function(e){return e<10?"0"+e:e},i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=function(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};if(null===e)return"null";var r=typeof e;if("undefined"!==r){if("string"===r)return n(e);if("number"===r||"boolean"===r)return""+e;if("object"===r){if("function"==typeof e.toJSON)return liger.toJSON(e.toJSON());if(e.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null;var o=[];if(e.constructor===Array){for(var a=0,l=e.length;a<l;a++)o.push(liger.toJSON(e[a])||"null");return"["+o.join(",")+"]"}var s,d;for(var c in e){if("number"===(r=typeof c))s='"'+c+'"';else{if("string"!==r)continue;s=n(c)}r=typeof e[c],"function"!==r&&"undefined"!==r&&(d=liger.toJSON(e[c]),o.push(s+":"+d))}return"{"+o.join(",")+"}"}}},liger.getEditor=function(e){var t=e.type,i=e.control,n=e.master;if(!t)return null;var r=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var o={create:function(o,a,l){var s=a.field||a.column,d=l||{},c=!!a.column,u=$.extend({},e.options),h="text";-1!=$.inArray(t,["password","file","checkbox","radio"])&&(h=t),e.password&&(h="password");var p=$("<input type='"+h+"'/>");if(e.body&&(p=e.body.clone()),p.appendTo(o),a.field){var g=s.name,f=$.isFunction(d.prefixID)?d.prefixID(n):d.prefixID||"";if(u.id=s.id||f+s.name,-1!=$.inArray(t,["select","combobox","autocomplete","popup"])&&(g=s.textField||s.comboboxName,s.comboboxName&&!s.id&&(u.id=(d.prefixID||"")+s.comboboxName)),-1!=$.inArray(t,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(u.valueFieldID=f+s.name),!e.body){var v=f+g,m=(new Date).getTime()+"_"+ ++r+"_"+s.name;p.attr($.extend({id:m,name:v},s.attr)),s.cssClass&&p.addClass(s.cssClass),s.validate&&!n.options.unSetValidateAttr&&p.attr("validate",liger.toJSON(s.validate))}$.extend(u,s.options)}if(s.dictionary&&(s.editor=s.editor||{},!s.editor.data)){var b=[],y=s.dictionary.split("|");$(y).each(function(e,t){var i=t.split(","),n=i[0],r=i.length>=2?i[1]:i[0];b.push({id:n,value:n,text:r})}),s.editor.data=b}if(s.editor){s.editor.options&&($.extend(u,s.editor.options),delete s.editor.options),s.editor.valueColumnName&&(u.valueField=s.editor.valueColumnName,delete s.editor.valueColumnName),s.editor.displayColumnName&&(u.textField=s.editor.displayColumnName,delete s.editor.displayColumnName);var w=s.editor.p||s.editor.ext;w&&(w="function"==typeof w?w(a):w,$.extend(u,w),delete s.editor.p,delete s.editor.ext),$.extend(u,s.editor)}c?(u.host_grid=this,u.host_grid_row=a.record,u.host_grid_column=a.column):(u.host_form=this,(s.readonly||u.host_form.get("readonly"))&&(u.readonly=!0));var x=p["liger"+i](u);return c&&setTimeout(function(){p.focus()},100),x},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var n=e.getValue(),r=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&n&&(n=n.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(n=[n,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var o=n.split(";"),a=e.getText().split(";");n=[];for(var l=0;l<o.length;l++)n.push([o[l],a[l]])}return"int"==r||"digits"==r?n=n?parseInt(n,10):0:"float"!=r&&"number"!=r||(n=n?parseFloat(n):0),n}},setValue:function(e,t,i){var n=i.field||i.column;if(e.setValue){if(n&&n.editor&&n.editor.isArrayValue&&t&&(t=t.join(";")),n&&n.editor&&n.editor.isRef&&$.isArray(t)&&(t=t[0]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)){for(var r=[],o=0;o<t.length;o++)r.push(t[o].length>1?t[o][1]:t[o][0]);t=r.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText){var i=e.getText();if(i)return i}},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var n=i.field||i.column;if(t=e.setValue()||i.value||"",n&&n.editor&&n.editor.isRef&&$.isArray(t)&&t.length>1&&(t=t[1]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)&&t.length>1){for(var r=[],o=0;o<t.length;o++)r.push(t[1]);t=r.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){if(e.getSelected)return e.getSelected()},resize:function(e,t,i,n){n.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},o,liger.editorCreatorDefaults||{},e)},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(e,t,i,n){e.set("width",t-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(e,t,i,n){e.set("width",t-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(e,t,i,n){e.set("width",t-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors.string=liger.editors.text,liger.editors.select=liger.editors.combobox,liger.editors.int=liger.editors.digits,liger.editors.float=liger.editors.number,liger.editors.chk=liger.editors.checkbox,liger.editors.popupedit=liger.editors.popup,$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery),function(e){liger.inject={prev:"liger-",defaults:{Grid_detail:{height:null,onShowDetail:null},Grid_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Grid_editor",Grid_popup:"PopupEdit",Grid_grid:"Grid",Grid_condition:"Form",Grid_toolbar:"Toolbar",Grid_fields:"Form_fields",Form_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Form_editor",Form_grid:"Grid",Form_columns:"Grid_columns",Form_condition:"Form",Form_popup:"PopupEdit",Form_buttons:"Button",Portal_panel:"Panel"},config:{Grid:{dynamics:"data,isChecked,detail,rowDraggingRender,toolbar,columns",arrays:"columns",columns:{dynamics:"render,totalSummary,headerRender,columns,editor,columns",arrays:"columns",textProperty:"display",columns:"liger.inject.config.Grid.columns",editor:{dynamics:"data,columns,render,renderItem,grid,condition,ext",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},toolbar:{arrays:"items"}},Form:{dynamics:"validate,fields,buttons",arrays:"fields,buttons",fields:{textProperty:"label",dynamics:"validate,editor",editor:{dynamics:"data,columns,render,renderItem,grid,condition,attr",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},buttons:"liger.inject.config.Button"},PopupEdit:{dynamics:"grid,condition"},Button:{textProperty:"text",dynamics:"click"},ComboBox:{dynamics:"columns,data,tree,grid,condition,render,parms,renderItem"},ListBox:{dynamics:"columns,data,render,parms"},RadioList:{dynamics:"data,parms"},CheckBoxList:{dynamics:"data,parms"},Panel:{},Portal:{dynamics:"rows,columns",arrays:"rows,columns",columns:{dynamics:"panels",arrays:"panels"},rows:{dynamics:"panels",arrays:"panels"},toolbar:{arrays:"items"}}},parse:function(e){try{return null==e?null:new Function("return "+e+";")()}catch(e){return null}},parseDefault:function(t){var i=this;if(!t)return t;var n={};return e(t.split(",")).each(function(t,r){r&&(r=r.substr(0,1).toUpperCase()+r.substr(1),e.extend(n,i.parse("liger.defaults."+r)))}),n},fotmatValue:function(e,t){return"boolean"==t?"true"==e||"1"==e:"number"==t&&e?parseFloat(e.toString()):e},getOptions:function(t){var i=t.jelement,n=t.defaults,r=t.config;r=e.extend({ignores:"",dynamics:"",arrays:""},r);var o,a=this,l={};r.textProperty&&(l[r.textProperty]=i.text());for(var s in n){var d=s.toLowerCase(),c=e("> ."+d,i);if(-1==e.inArray(s,r.ignores.split(",")))if(c.length){var u=t.controlName+"_"+s,h=a.defaults[u]||liger.defaults[u],p=r[s];"string"==typeof h?h=a.parseDefault(h):"funcion"==typeof h&&(h=h()),"string"==typeof p?p=a.parse(p):"funcion"==typeof p&&(p=p()),h&&(-1!=e.inArray(s,r.arrays.split(","))?(o=[],e(">div,>li,>input",c).each(function(){o.push(a.getOptions({defaults:h,controlName:t.controlName,config:p,jelement:e(this)}))}),l[s]=o):l[s]=a.getOptions({defaults:h,controlName:t.controlName,config:p,jelement:c})),c.remove()}else-1!=e.inArray(s,r.dynamics.split(","))||0==s.indexOf("on")?(o=a.parse(i.attr("data-"+s)||i.attr(s)))&&(l[s]=a.fotmatValue(o,typeof n[s])):(o=i.attr("data-"+s)||i.attr(s))&&(l[s]=a.fotmatValue(o,typeof n[s]))}var g=i.attr("data-options")||i.attr("data-property");return g&&(g=a.parse("{"+g+"}")),g&&e.extend(l,g),l},init:function(){var t=this,i=this.config;for(var n in t.defaults)"string"==typeof t.defaults[n]&&(t.defaults[n]=t.parseDefault(t.defaults[n]));for(var r in liger.controls){var o=i[r]||{},a=t.prev+r.toLowerCase();e("."+a).each(function(){var i=e(this),n=e.extend({onrender:null,onrendered:null},liger.defaults[r]),a=t.getOptions({defaults:n,controlName:r,config:o,jelement:i});i[liger.pluginPrev+r](a)})}}},e(function(){liger.inject.init()})}(jQuery),function(e){e.fn.ligerAccordion=function(t){return e.ligerui.run.call(this,"ligerAccordion",arguments)},e.fn.ligerGetAccordionManager=function(){return e.ligerui.get(this)},e.ligerDefaults.Accordion={height:null,speed:"normal",changeHeightOnResize:!1,heightDiff:0},e.ligerMethos.Accordion={},e.ligerui.controls.Accordion=function(t,i){e.ligerui.controls.Accordion.base.constructor.call(this,t,i)},e.ligerui.controls.Accordion.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Accordion"},__idPrev:function(){return"Accordion"},_extendMethods:function(){return e.ligerMethos.Accordion},_render:function(){var t=this,i=this.options;t.accordion=e(t.element),t.accordion.hasClass("l-accordion-panel")||t.accordion.addClass("l-accordion-panel");var n=0;e("> div[lselected=true]",t.accordion).length>0&&(n=e("> div",t.accordion).index(e("> div[lselected=true]",t.accordion))),e("> div",t.accordion).each(function(t,i){var r=e('<div class="l-accordion-header"><div class="l-accordion-toggle"></div><div class="l-accordion-header-inner"></div></div>');t==n&&e(".l-accordion-toggle",r).addClass("l-accordion-toggle-open"),e(i).attr("title")&&(e(".l-accordion-header-inner",r).html(e(i).attr("title")),e(i).attr("title","")),e(i).before(r),e(i).hasClass("l-accordion-content")||e(i).addClass("l-accordion-content"),e(i).attr("data-icon")&&(r.addClass("l-accordion-header-hasicon"),r.append('<i><img src="'+e(i).attr("data-icon")+'" /></i>'))}),e(".l-accordion-header",t.accordion).removeClass("l-accordion-header-downfirst"),e(".l-accordion-content:visible",t.accordion).next(".l-accordion-header:first").addClass("l-accordion-header-downfirst"),e(".l-accordion-toggle",t.accordion).each(function(){e(this).hasClass("l-accordion-toggle-open")||e(this).hasClass("l-accordion-toggle-close")||e(this).addClass("l-accordion-toggle-close"),e(this).hasClass("l-accordion-toggle-close")&&e(this).parent().next(".l-accordion-content:visible").hide()}),e(".l-accordion-header",t.accordion).hover(function(){e(this).addClass("l-accordion-header-over")},function(){e(this).removeClass("l-accordion-header-over")}),e(".l-accordion-toggle",t.accordion).hover(function(){e(this).hasClass("l-accordion-toggle-open")?e(this).addClass("l-accordion-toggle-open-over"):e(this).hasClass("l-accordion-toggle-close")&&e(this).addClass("l-accordion-toggle-close-over")},function(){e(this).hasClass("l-accordion-toggle-open")?e(this).removeClass("l-accordion-toggle-open-over"):e(this).hasClass("l-accordion-toggle-close")&&e(this).removeClass("l-accordion-toggle-close-over")}),e(">.l-accordion-header",t.accordion).click(function(){var n=e(".l-accordion-toggle:first",this);n.hasClass("l-accordion-toggle-close")?(n.removeClass("l-accordion-toggle-close").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over"),n.addClass("l-accordion-toggle-open"),e(this).next(".l-accordion-content").show(i.speed).siblings(".l-accordion-content:visible").hide(i.speed),e(this).siblings(".l-accordion-header").find(".l-accordion-toggle").removeClass("l-accordion-toggle-open").addClass("l-accordion-toggle-close")):(n.removeClass("l-accordion-toggle-open").removeClass("l-accordion-toggle-close-over l-accordion-toggle-open-over").addClass("l-accordion-toggle-close"),e(this).next(".l-accordion-content").hide(i.speed)),e(".l-accordion-header",t.accordion).removeClass("l-accordion-header-downfirst"),e(".l-accordion-content:visible",t.accordion).next(".l-accordion-header:first").addClass("l-accordion-header-downfirst")}),t.headerHoldHeight=0,e("> .l-accordion-header",t.accordion).each(function(){t.headerHoldHeight+=e(this).height()}),i.height&&"string"==typeof i.height&&i.height.indexOf("%")>0?(t.onResize(),i.changeHeightOnResize&&e(window).resize(function(){t.onResize()})):i.height?(t.height=i.heightDiff+i.height,t.accordion.height(t.height),t.setHeight(i.height)):t.header=t.accordion.height(),t.set(i)},onResize:function(){var t=this,i=this.options;if(!i.height||"string"!=typeof i.height||-1==i.height.indexOf("%"))return!1;if("body"==t.accordion.parent()[0].tagName.toLowerCase()){var n=e(window).height();n-=parseInt(t.layout.parent().css("paddingTop")),n-=parseInt(t.layout.parent().css("paddingBottom")),t.height=i.heightDiff+n*parseFloat(t.height)*.01}else t.height=i.heightDiff+t.accordion.parent().height()*parseFloat(i.height)*.01;t.accordion.height(t.height),t.setContentHeight(t.height-t.headerHoldHeight)},setHeight:function(t){var i=this;this.options;i.accordion.height(t),t-=i.headerHoldHeight,e("> .l-accordion-content",i.accordion).height(t)}})}(jQuery),function(e){e.fn.ligerButton=function(t){return e.ligerui.run.call(this,"ligerButton",arguments)},e.fn.ligerGetButtonManager=function(){return e.ligerui.run.call(this,"ligerGetButtonManager",arguments)},e.ligerDefaults.Button={width:60,text:"Button",disabled:!1,click:null,icon:null},e.ligerMethos.Button={},e.ligerui.controls.Button=function(t,i){e.ligerui.controls.Button.base.constructor.call(this,t,i)},e.ligerui.controls.Button.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Button"},__idPrev:function(){return"Button"},_extendMethods:function(){return e.ligerMethos.Button},_render:function(){var t=this,i=this.options;t.button=e(t.element),t.button.addClass("l-button"),t.button.append('<div class="l-button-l"></div><div class="l-button-r"></div><span></span>'),t.button.hover(function(){i.disabled||t.button.addClass("l-button-over")},function(){i.disabled||t.button.removeClass("l-button-over")}),i.click&&t.button.click(function(){i.disabled||i.click()}),t.set(i)},_setIcon:function(e){var t=this;e?(t.button.addClass("l-button-hasicon"),t.button.append('<img src="'+e+'" />')):(t.button.removeClass("l-button-hasicon"),t.button.find("img").remove())},_setEnabled:function(e){e&&this.button.removeClass("l-button-disabled")},_setDisabled:function(e){e?(this.button.addClass("l-button-disabled"),this.options.disabled=!0):(this.button.removeClass("l-button-disabled"),this.options.disabled=!1)},_setWidth:function(e){this.button.width(e)},_setText:function(t){e("span",this.button).html(t)},setValue:function(e){this.set("text",e)},getValue:function(){return this.options.text},setEnabled:function(){this.set("disabled",!1)},setDisabled:function(){this.set("disabled",!0)}})}(jQuery),function(e){e.fn.ligerCheckBox=function(t){return e.ligerui.run.call(this,"ligerCheckBox",arguments)},e.fn.ligerGetCheckBoxManager=function(){return e.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)},e.ligerDefaults.CheckBox={disabled:!1,readonly:!1},e.ligerMethos.CheckBox={},e.ligerui.controls.CheckBox=function(t,i){e.ligerui.controls.CheckBox.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return e.ligerMethos.CheckBox},_render:function(){var t=this,i=this.options;t.input=e(t.element),t.link=e('<a class="l-checkbox"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.link.click(function(){return!t.input.attr("disabled")&&!t.input.attr("readonly")&&(!i.disabled&&!i.readonly&&(0!=t.trigger("beforeClick",[t.element])&&(e(this).hasClass("l-checkbox-checked")?t._setValue(!1):t._setValue(!0),void t.input.trigger("change"))))}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.set(i),this.updateStyle()},_setCss:function(e){this.wrapper.css(e)},_setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("l-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})}(jQuery),function(e){e.fn.ligerCheckBoxList=function(t){return e.ligerui.run.call(this,"ligerCheckBoxList",arguments)},e.ligerDefaults.CheckBoxList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,split:";",data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,css:null,value:null,valueFieldCssClass:null},e.ligerMethos.CheckBoxList=e.ligerMethos.CheckBoxList||{},e.ligerui.controls.CheckBoxList=function(t,i){e.ligerui.controls.CheckBoxList.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBoxList.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBoxList"},_extendMethods:function(){return e.ligerMethos.CheckBoxList},_init:function(){e.ligerui.controls.CheckBoxList.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-ligerid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.checkboxList=e("<div></div>").insertBefore(this.element):t.checkboxList=e(this.element),t.checkboxList.html('<div class="l-checkboxlist-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-checkboxlist-table"></table></div>').addClass("l-checkboxlist").append(t.valueField),t.checkboxList.table=e("table:first",t.checkboxList),t.set(i),t._addClickEven()},destroy:function(){this.checkboxList&&this.checkboxList.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setCss:function(e){e&&this.checkboxList.addClass(e)},_setDisabled:function(t){t?(this.checkboxList.addClass("l-checkboxlist-disabled"),e("input:checkbox",this.radioList).attr("disabled",!0)):(this.checkboxList.removeClass("l-checkboxlist-disabled"),e("input:checkbox",this.radioList).removeAttr("disabled"))},_setWidth:function(e){this.checkboxList.width(e)},_setHeight:function(e){this.checkboxList.height(e)},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var n=0,r=t.data.length;n<r;n++)if("object"==typeof e){if(t.data[n]==e)return n}else if(t.data[n][i.valueField].toString()==e.toString())return n;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var n=i.indexOf(t);-1!=n&&i.data.splice(n,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},_setValue:function(e){var t=this,i=this.options;i.value=e,t.valueField.val(i.value),this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){if(t){var i=this,n=this.options,r=e.isFunction(n.urlParms)?n.urlParms.call(i):n.urlParms;if(r)for(name in r)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+r[name];var o=e.isFunction(n.parms)?n.parms():n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof o&&(o=liger.toJSON(o)),e.ajax({type:n.ajaxType||"post",url:t,data:o,cache:!1,dataType:"json",contentType:n.ajaxContentType,success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}})}},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,n=i.get("parms");n||(n={}),n[e]=t,i.set("parms",n)}},clearContent:function(){var t=this;this.options;e("table",t.checkboxList).html("")},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var e=this,t=this.options,i=this.data;if(this.clearContent(),i){for(var n=[],r=t.rowSize,o=!1,a=t.name||e.id,l=0;l<i.length;l++){var s=i[l][t.valueField],d=i[l][t.textField],c=e.id+"-"+l;l%r==0&&(o&&n.push("</tr>"),n.push("<tr>"),o=!0),n.push("<td><input type='checkbox' name='"+a+"' value='"+s+"' id='"+c+"'/><label for='"+c+"'>"+d+"</label></td>")}o&&n.push("</tr>"),e.checkboxList.table.append(n.join(""))}},_getValue:function(){var t=this,i=this.options,n=i.name||t.id,r=[];return e('input:checkbox[name="'+n+'"]:checked').each(function(){r.push(this.value)}),r.length?r.join(i.split):null},getValue:function(){return this._getValue()},getText:function(){var t=this,i=this.options,n=i.name||t.id,r=[];return e('input:checkbox[name="'+n+'"]:checked').each(function(){r.push(e(this).next("label").text())}),r.length?r.join(i.split):null},updateStyle:function(){this._dataInit()},_dataInit:function(){var e=this,t=(this.options,e.valueField.val());e._changeValue(t)},_changeValue:function(t){var i=this,n=this.options,r=n.name||i.id,o=t?t.split(n.split):[];e("input:checkbox[name='"+r+"']",i.checkboxList).each(function(){this.checked=e.inArray(this.value,o)>-1}),i.valueField.val(t),i.selectedValue=t},_addClickEven:function(){var e=this;this.options;e.checkboxList.click(function(t){var i=e.getValue();i&&e.valueField.val(i)})}})}(jQuery),function(e){e.fn.ligerComboBox=function(t){return e.ligerui.run.call(this,"ligerComboBox",arguments)},e.fn.ligerGetComboBoxManager=function(){return e.ligerui.run.call(this,"ligerGetComboBoxManager",arguments)},e.ligerDefaults.ComboBox={resize:!0,isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:null,selectBoxWidth:null,selectBoxHeight:120,selectBoxPosYDiff:-3,onBeforeSelect:!1,onAfterShowData:null,onSelected:null,initValue:null,value:null,initText:null,valueField:"id",textField:"text",dataParmName:null,valueFieldID:null,ajaxComplete:null,ajaxBeforeSend:null,ajaxContentType:null,slide:!1,split:";",data:null,dataGetter:null,tree:null,treeLeafOnly:!0,condition:null,grid:null,onStartResize:null,onEndResize:null,hideOnLoseFocus:!0,hideGridOnLoseFocus:!1,url:null,urlParms:null,selectBoxRender:null,selectBoxRenderUpdate:null,detailEnabled:!0,detailUrl:null,detailPostIdField:null,detailDataParmName:null,detailParms:null,detailDataGetter:null,delayLoad:!1,triggerToLoad:!1,emptyText:null,addRowButton:"新增",addRowButtonClick:null,triggerIcon:null,onSuccess:null,onBeforeSetData:null,onError:null,onBeforeOpen:null,onButtonClick:null,onTextBoxKeyDown:null,onTextBoxKeyEnter:null,render:null,absolute:!0,cancelable:!0,css:null,parms:null,renderItem:null,autocomplete:!1,autocompleteAllowEmpty:!0,isTextBoxMode:!1,highLight:!1,readonly:!1,ajaxType:"post",alwayShowInTop:!1,alwayShowInDown:!1,valueFieldCssClass:null,isRowReadOnly:null,rowClsRender:null,keySupport:!1,initIsTriggerEvent:!1,conditionSearchClick:null,onChangeValue:null,delayLoadGrid:!0,setTextBySource:!0},e.ligerDefaults.ComboBoxString={Search:"搜索"},e.ligerMethos.ComboBox=e.ligerMethos.ComboBox||{},e.ligerui.controls.ComboBox=function(t,i){e.ligerui.controls.ComboBox.base.constructor.call(this,t,i)},e.ligerui.controls.ComboBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"ComboBox"},_extendMethods:function(){return e.ligerMethos.ComboBox},_init:function(){e.ligerui.controls.ComboBox.base._init.call(this);var t=this.options;t.columns&&(t.isShowCheckBox=!0),t.isMultiSelect&&(t.isShowCheckBox=!0),t.triggerToLoad&&(t.delayLoad=!0)},_render:function(){var t=this,i=this.options;t.data=i.data,t.inputText=null,t.select=null,t.textFieldID="",t.valueFieldID="",t.valueField=null,e(this.element).is(":hidden")?(t.valueField=e(this.element),t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.valueField.attr("validate")&&(t.inputText.attr("validate",t.valueField.attr("validate")),t.valueField.removeAttr("validate")),t.valueField.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.valueField.attr("validateMessage")),t.valueField.removeAttr("validateMessage"))):"input"==this.element.tagName.toLowerCase()?(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id):"select"==this.element.tagName.toLowerCase()&&(e(this.element).hide(),t.select=e(this.element),i.isMultiSelect=!1,i.isShowCheckBox=!1,i.cancelable=!1,t.textFieldID=i.textFieldID||this.element.id+"_txt",t.inputText=e('<input type="text" readonly="true"/>'),t.inputText.attr("id",t.textFieldID).insertAfter(e(this.element)),t.select.attr("validate")&&(t.inputText.attr("validate",t.select.attr("validate")),t.select.removeAttr("validate")),t.select.attr("validateMessage")&&(t.inputText.attr("validateMessage",t.select.attr("validateMessage")),t.select.removeAttr("validateMessage")),!i.value&&this.element.value&&(i.value=this.element.value)),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.inputText.attr("data-comboboxid",t.id),null==t.valueField&&(i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input").filter("input:hidden"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val")),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),null!=i.initValue&&(t.valueField[0].value=i.initValue),t.valueField.attr("data-ligerid",t.id),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),i.triggerIcon&&t.link.find("div:first").addClass(i.triggerIcon),t.selectBox=e('<div class="l-box-select" style="display:none"><div class="l-box-select-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-box-select-table"></table></div></div>'),t.selectBox.table=e("table:first",t.selectBox),t.selectBoxInner=t.selectBox.find(".l-box-select-inner:first"),t.wrapper=t.inputText.wrap('<div class="l-text l-text-combobox"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.textwrapper=t.wrapper.wrap('<div class="l-text-wrapper"></div>').parent(),i.absolute?t.selectBox.appendTo("body").addClass("l-box-select-absolute"):t.textwrapper.append(t.selectBox),t.textwrapper.append(t.valueField),t.inputText.addClass("l-text-field"),i.isShowCheckBox&&!t.select?e("table",t.selectBox).addClass("l-table-checkbox"):(i.isShowCheckBox=!1,e("table",t.selectBox).addClass("l-table-nocheckbox")),t.link.hover(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")},function(){i.disabled||i.readonly||(this.className="l-trigger")}).mousedown(function(){i.disabled||i.readonly||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||i.readonly||(this.className="l-trigger-hover")}).click(function(){if(!i.disabled&&!i.readonly)return 0!=t.trigger("buttonClick")&&(0!=t.trigger("beforeOpen")&&void(i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible"))))}),t.inputText.click(function(){if(!i.disabled&&!i.readonly)return 0!=t.trigger("beforeOpen")&&void(i.autocomplete?t.updateSelectBoxPosition():i.triggerToLoad&&!t.triggerLoaded?(t.triggerLoaded=!0,t._setUrl(i.url,function(){t._toggleSelectBox(t.selectBox.is(":visible"))})):t._toggleSelectBox(t.selectBox.is(":visible")))}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-focus")}).change(function(){t.trigger("changeValue",[this.value])}),t.wrapper.hover(function(){i.disabled||i.readonly||t.wrapper.addClass("l-text-over")},function(){i.disabled||i.readonly||t.wrapper.removeClass("l-text-over")}),t.resizing=!1,t.selectBox.hover(null,function(e){i.hideOnLoseFocus&&t.selectBox.is(":visible")&&!t.boxToggling&&!t.resizing&&t._toggleSelectBox(!0)}),t.bulidContent(),t.set(i,null,"init"),i.selectBoxWidth?t.selectBox.width(i.selectBoxWidth):t.selectBox.css("width",t.wrapper.css("width")),i.grid&&(i.delayLoadGrid?t.bind("show",function(){
t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))}):t.grid||(t.setGrid(i.grid),t.set("SelectBoxHeight",i.selectBoxHeight))),t.updateSelectBoxPosition(),e(document).bind("click.combobox",function(i){t.selectBox.is(":visible")&&0==e(i.target||i.srcElement).closest(".l-box-select, .l-text-combobox").length&&t._toggleSelectBox(!0)})},destroy:function(){this.wrapper&&this.wrapper.remove(),this.selectBox&&this.selectBox.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue("",""),e("a.l-checkbox-checked",this.selectBox).removeClass("l-checkbox-checked"),e("td.l-selected",this.selectBox).removeClass("l-selected"),e(":checkbox",this.selectBox).each(function(){this.checked=!1}),this.trigger("clear")},_setSelectBoxHeight:function(t){if(t){var i=this,n=this.options;if(n.grid)i.grid&&i.grid.set("height",i.getGridHeight(t));else if(n.tree)i.selectBoxInner.height(n.selectBoxHeight);else{var r=e("tr",i.selectBox.table).length;!n.selectBoxHeight&&r<8&&(n.selectBoxHeight=30*r),n.selectBoxHeight&&(r<8?i.selectBoxInner.height("auto"):i.selectBoxInner.height(n.selectBoxHeight))}}},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,n=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),n.disabled||n.readonly||!n.cancelable||i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setReadonly:function(e){e?this.wrapper.addClass("l-text-readonly"):this.wrapper.removeClass("l-text-readonly")},_setLable:function(t){var i=this,n=this.options;t&&(i.labelwrapper?i.labelwrapper.find(".l-text-label:first").html(t+":&nbsp"):(i.labelwrapper=i.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),i.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t+":&nbsp</div>"),i.textwrapper.css("float","left")),n.labelWidth?e(".l-text-label",i.labelwrapper).outerWidth(n.labelWidth):n.labelWidth=e(".l-text-label",i.labelwrapper).outerWidth(),e(".l-text-label",i.labelwrapper).width(n.labelWidth),e(".l-text-label",i.labelwrapper).height(i.wrapper.height()),i.labelwrapper.append('<br style="clear:both;" />'),n.labelAlign&&e(".l-text-label",i.labelwrapper).css("text-align",n.labelAlign),i.textwrapper.css({display:"inline"}),i.labelwrapper.width(i.wrapper.outerWidth()+n.labelWidth+2))},_setWidth:function(e){var t=this,i=this.options;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}),i.selectBoxWidth||t.selectBox.css({width:e}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2))},_setResize:function(t){var i=this,n=this.options;if(!n.columns&&t&&e.fn.ligerResizable){var r=n.selectBoxHeight?"e":"se,s,e";i.selectBox.ligerResizable({handles:r,onStartResize:function(){i.resizing=!0,i.trigger("startResize")},onEndResize:function(){if(i.resizing=!1,0==i.trigger("endResize"))return!1},onStopResize:function(e,t){return!i.grid||(e.newWidth&&i.selectBox.width(e.newWidth),e.newHeight&&i.set({selectBoxHeight:e.newHeight}),i.grid.refreshSize(),i.trigger("endResize"),!1)}}),i.selectBox.append("<div class='l-btn-nw-drop'></div>")}},findTextByValue:function(t){var i=this,n=this.options;if(null==t)return"";var r,o="",a=function(e){for(var i=t.toString().split(n.split),r=0;r<i.length;r++)if(i[r]==e&&""!=i[r])return!0;return!1};return r=i.options.grid&&i.options.grid.data?i.options.grid.data.Rows:i.data,e(r).each(function(e,t){var i=t[n.valueField],r=t[n.textField];a(i)&&(o+=r+n.split)}),o.length>0&&(o=o.substr(0,o.length-1)),o},findValueByText:function(t){var i=this,n=this.options;if(!t&&""==t)return"";var r=function(e){for(var i=t.toString().split(n.split),r=0;r<i.length;r++)if(i[r]==e)return!0;return!1},o="";return e(i.data).each(function(e,t){var i=t[n.valueField],a=t[n.textField];r(a)&&(o+=i+n.split)}),o.length>0&&(o=o.substr(0,o.length-1)),o},insertItem:function(e,t){var i=this;this.options;i.data=i.data||[],i.data.splice(t,0,e),i.setData(i.data)},addItem:function(e){var t=this;this.options;t.insertItem(e,(t.data||[]).length)},_setIsTextBoxMode:function(e){var t=this;this.options;e&&t.inputText.removeAttr("readonly")},_setValue:function(t,i){var n=this,r=this.options,o=!0;if("init"==i&&(i=null,!0,o=!!r.initIsTriggerEvent),i=r.isTextBoxMode?t:i||n.findTextByValue(t),r.tree)setTimeout(function(){r.setTextBySource?n.selectValueByTree(t):n.treeSelectInit(t)},100);else if(r.isMultiSelect){if(n._changeValue(t,i,o),null!=t){var a=t.toString().split(r.split);e("table.l-table-checkbox :checkbox",n.selectBox).each(function(){this.checked=!1});for(var l=0;l<a.length;l++)e("table.l-table-checkbox tr[value="+a[l]+"] :checkbox",n.selectBox).each(function(){this.checked=!0})}}else n._changeValue(t,i,o),e("tr[value='"+t+"'] td",n.selectBox).addClass("l-selected"),e("tr[value!='"+t+"'] td",n.selectBox).removeClass("l-selected");r.selectBoxRenderUpdate&&r.selectBoxRenderUpdate.call(n,{selectBox:n.selectBox,value:t,text:i})},selectValue:function(e){this._setValue(e)},bulidContent:function(){var e=this,t=this.options;this.clearContent(),e.select?e.setSelect():t.tree&&e.setTree(t.tree)},reload:function(){var e=this,t=this.options;t.url?e.set("url",t.url):e.grid&&e.grid.reload()},_setUrl:function(t,i){if(t){var n=this,r=this.options;if(!r.readonly){if(r.delayLoad&&!n.isAccessDelay&&!n.triggerLoaded)return void(n.isAccessDelay=!0);t=e.isFunction(t)?t.call(n):t;var o=e.isFunction(r.urlParms)?r.urlParms.call(n):r.urlParms;if(o)for(name in o)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+o[name];var a=e.isFunction(r.parms)?r.parms.call(n):r.parms;"application/json"==r.ajaxContentType&&"string"!=typeof a&&(a=liger.toJSON(a));var l={type:r.ajaxType,url:t,data:a,cache:!1,dataType:"json",beforeSend:r.ajaxBeforeSend,complete:r.ajaxComplete,success:function(t){var o=e.isFunction(r.dataGetter)?o=r.dataGetter.call(n,t):t;o=r.dataParmName&&o?o[r.dataParmName]:o,0!=n.trigger("beforeSetData",[o])&&(n.setData(o),n.trigger("success",[o]),e.isFunction(i)&&i(o))},error:function(e,t){n.trigger("error",[e,t])}};r.ajaxContentType&&(l.contentType=r.ajaxContentType),e.ajax(l)}}},setUrl:function(e,t){return this._setUrl(e,t)},setParm:function(e,t){if(e){var i=this,n=i.get("parms");n||(n={}),n[e]=t,i.set("parms",n)}},clearContent:function(){var t=this,i=this.options;t&&(e("table",t.selectBox).html(""),t&&t._setSelectBoxHeight(i.selectBoxHeight))},setSelect:function(){var t=this,i=this.options;this.clearContent(),t.data=[],e("option",t.select).each(function(i){var n=e(this).val(),r=e(this).html();t.data.push({text:r,id:n});var o=e("<tr><td index='"+i+"' value='"+n+"' text='"+r+"'>"+r+"</td>");e("table.l-table-nocheckbox",t.selectBox).append(o),e("td",o).hover(function(){e(this).addClass("l-over").siblings("td").removeClass("l-over")},function(){e(this).removeClass("l-over")})}),e("td:eq("+t.select[0].selectedIndex+")",t.selectBox).each(function(){if(e(this).hasClass("l-selected"))return void t.selectBox.hide();e(".l-selected",t.selectBox).removeClass("l-selected"),e(this).addClass("l-selected"),t.select[0].selectedIndex!=e(this).attr("index")&&t.select[0].onchange&&(t.select[0].selectedIndex=e(this).attr("index"),t.select[0].onchange());var n=parseInt(e(this).attr("index"));t.select[0].selectedIndex=n,t.select.trigger("change"),t.selectBox.hide();var r=e(this).attr("value"),o=e(this).html();i.render?t.inputText.val(i.render(r,o)):t.inputText.val(o)}),t._addClickEven()},_setData:function(e){this.setData(e)},getRowIndex:function(e){var t=this,i=this.options;if(!e)return-1;if(!t.data||!t.data.length)return-1;for(var n=0;n<t.data.length;n++)if(null!=t.data[n]){var r=t.data[n][i.valueField];if(r==e)return n}return-1},getRow:function(e){var t=this,i=this.options;if(!e)return null;if(!t.data||!t.data.length)return null;for(var n=0;n<t.data.length;n++)if(null!=t.data[n]){var r=t.data[n][i.valueField];if(r==e)return t.data[n]}return null},setData:function(t){var i=this,n=this.options;if(!i.select){if(n.selectBoxRender)return void n.selectBoxRender.call(i,{selectBox:i.selectBox,data:t});if(t&&t.length||(t=[]),i.data!=t&&(i.data=t),i.data=e.isFunction(i.data)?i.data():i.data,this.clearContent(),n.columns){i.selectBox.table.headrow=e("<tr class='l-table-headerow'><td width='18px'></td></tr>"),i.selectBox.table.append(i.selectBox.table.headrow),i.selectBox.table.addClass("l-box-select-grid");for(var r=0;r<n.columns.length;r++){var o=e("<td columnindex='"+r+"' columnname='"+n.columns[r].name+"'>"+n.columns[r].header+"</td>");n.columns[r].width&&o.width(n.columns[r].width),i.selectBox.table.headrow.append(o)}}var a=[];n.emptyText&&(i.emptyRow={},i.emptyRow[n.textField]=n.emptyText,i.emptyRow[n.valueField]=void 0!=n.emptyValue?n.emptyValue:"",t.splice(0,0,i.emptyRow));for(var l=0;l<t.length;l++){var s=t[l][n.valueField],d=t[l][n.textField],c=!!e.isFunction(n.isRowReadOnly)&&n.isRowReadOnly(t[l]);if(n.columns){a.push("<tr value='"+s+"'"),c&&a.push(" class='rowreadonly'"),a.push(">"),a.push("<td style='width:18px;'  index='"+l+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");for(var r=0;r<n.columns.length;r++){var u=n.columns[r].name;a.push("<td>"+t[l][u]+"</td>")}a.push("</tr>")}else{a.push("<tr value='"+s+"'");var h=[];c&&h.push(" rowreadonly "),e.isFunction(n.rowClsRender)&&h.push(n.rowClsRender(t[l])),h.length&&(a.push(" class='"),a.push(h.join("")),a.push("'")),a.push(">"),n.isShowCheckBox&&a.push("<td style='width:18px;'  index='"+l+"' value='"+s+"' text='"+d+"' ><input type='checkbox' /></td>");var p=d;p=n.renderItem?n.renderItem.call(i,{data:t[l],value:s,text:d,key:i.inputText.val()}):n.autocomplete&&n.highLight?i._highLight(d,i.inputText.val()):"<span>"+p+"</span>",a.push("<td index='"+l+"' value='"+s+"' text='"+d+"' align='left'>"+p+"</td></tr>")}}n.columns?i.selectBox.table.append(a.join("")):n.isShowCheckBox?e("table.l-table-checkbox",i.selectBox).append(a.join("")):e("table.l-table-nocheckbox",i.selectBox).append(a.join("")),n.addRowButton&&n.addRowButtonClick&&!i.addRowButton&&(i.addRowButton=e('<div class="l-box-select-add"><a href="javascript:void(0)" class="link"><div class="icon"></div></a></div>'),i.addRowButton.find(".link").append(n.addRowButton).click(n.addRowButtonClick),i.selectBoxInner.after(i.addRowButton)),i.set("selectBoxHeight",n.selectBoxHeight),n.isShowCheckBox&&e.fn.ligerCheckBox&&e("table input:checkbox",i.selectBox).ligerCheckBox(),e(".l-table-checkbox input:checkbox",i.selectBox).change(function(){if(this.checked&&i.hasBind("beforeSelect")){var t=null;if(null!=(t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent())&&0==i.trigger("beforeSelect",[t.attr("value"),t.attr("text")]))return i.selectBox.slideToggle("fast"),!1}n.isMultiSelect||this.checked&&(e("input:checked",i.selectBox).not(this).each(function(){this.checked=!1,e(".l-checkbox-checked",e(this).parent()).removeClass("l-checkbox-checked")}),i.selectBox.slideToggle("fast")),i._checkboxUpdateValue()}),e("table.l-table-nocheckbox td",i.selectBox).hover(function(){e(this).parent().hasClass("rowreadonly")||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),i._addClickEven(),n.autocomplete||i.updateStyle(),i.trigger("afterShowData",[t])}},setTree:function(t){var i=this,n=this.options;this.clearContent(),i.selectBox.table.remove(),0!=t.checkbox?t.onCheck=function(){var t=i.treeManager.getChecked(),r=[],o=[];e(t).each(function(e,t){n.treeLeafOnly&&t.data.children||(r.push(t.data[n.valueField]),o.push(t.data[n.textField]))}),i._changeValue(r.join(n.split),o.join(n.split),!0)}:(t.onSelect=function(e){if(!(0==i.trigger("BeforeSelect",[e])||n.treeLeafOnly&&e.data.children)){var t=e.data[n.valueField],r=e.data[n.textField];i._changeValue(t,r,!0),i.selectBox.hide()}},t.onCancelSelect=function(e){i._changeValue("","",!0)}),t.onAfterAppend=function(e,t){if(i.treeManager){var r=null;n.initValue?r=n.initValue:""!=i.valueField.val()&&(r=i.valueField.val()),i.selectValueByTree(r)}},i.tree=e("<ul></ul>"),e("div:first",i.selectBox).append(i.tree),i.innerTree=i.tree.ligerTree(t),i.treeManager=i.tree.ligerGetTreeManager()},getTree:function(){return this.innerTree},selectValueByTree:function(e){var t=this,i=this.options;if(null!=e){var n=t.treeSelectInit(e);t._changeValue(e,n,i.initIsTriggerEvent)}},treeSelectInit:function(t){var i=this,n=this.options;if(null!=t){var r="",o=t.toString().split(n.split);return e(o).each(function(e,t){i.treeManager.selectNode(t.toString(),!1),r+=i.treeManager.getTextByID(t),e<o.length-1&&(r+=n.split)}),r}},setGrid:function(t){var i=this,n=this.options;if(!i.grid){n.hideOnLoseFocus=!!n.hideGridOnLoseFocus,this.clearContent(),i.selectBox.addClass("l-box-select-lookup"),i.selectBox.table.remove();var r=e("div:first",i.selectBox),o=e("<div></div>").appendTo(r),a=e("<div></div>").appendTo(r);if(i.conditionPanel=o,n.condition){var l=e.extend({labelWidth:60,space:20,width:n.selectBoxWidth},n.condition);i.condition=o.ligerForm(l)}else o.remove();t=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0,allowUnSelectRow:!0},t,{width:"100%",height:i.getGridHeight(),inWindow:!1,parms:n.parms,isChecked:function(t){var r=i.getValue();return!!r&&(!(!n.valueField||!t[n.valueField])&&-1!=e.inArray(t[n.valueField].toString(),r.split(n.split)))}}),i.grid=i.gridManager=a.ligerGrid(t),i.grid.bind("afterShowData",function(){i.updateSelectBoxPosition()});var s=[],d=function(){var r=[],o=[];e(s).each(function(e,t){r.push(t[n.valueField]),o.push(t[n.textField])}),t.checkbox?i.selected=s:s.length?i.selected=s[0]:i.selected=null,i._changeValue(r.join(n.split),o.join(n.split),!0),i.trigger("gridSelect",{value:r.join(n.split),text:o.join(n.split),data:s})},c=function(e){for(var t=s.length-1;t>=0;t--)s[t][n.valueField]==e[n.valueField]&&s.splice(t,1)},u=function(e){for(var t=s.length-1;t>=0;t--)if(s[t][n.valueField]==e[n.valueField])return;s.push(e)};if(t.checkbox){var h=function(e,t){e&&u(t),!e&&c(t)};i.grid.bind("CheckAllRow",function(t){e(i.grid.rows).each(function(e,i){h(t,i)}),d()}),i.grid.bind("CheckRow",function(e,t){h(e,t),d()})}else i.grid.bind("SelectRow",function(e){s=[e],d(),i._toggleSelectBox(!0)}),i.grid.bind("UnSelectRow",function(){s=[],d()});if(i.bind("show",function(){i.grid.refreshSize()}),i.bind("clear",function(){s=[],i.grid.selecteds=[],i.grid._showData()}),n.condition){var p=e('<li style="margin-right:9px"><div></div></li>'),g=e('<li style="margin-right:9px;float:right"><div></div></li>');e("ul:first",o).append(p).append(g).after('<div class="l-clear"></div>'),e("div",p).ligerButton({text:n.Search,width:40,click:function(){var r=i.condition.toConditions();n.conditionSearchClick?n.conditionSearchClick({grid:i.grid,rules:r}):i.grid.get("url")?(i.grid.setParm(t.conditionParmName||"condition",e.ligerui.toJSON(r)),i.grid.reload()):i.grid.loadData(e.ligerFilter.getFilterFunction(r))}}),e("div",g).ligerButton({text:"关闭",width:40,click:function(){i.selectBox.hide()}})}i.grid.refreshSize()}},getGridHeight:function(e){var t=this;this.options;return e=e||t.selectBox.height(),e-=t.conditionPanel.height()},_getValue:function(){var t=this;return this.options.isTextBoxMode?t.inputText.val():e(this.valueField).val()},getValue:function(){return this._getValue()},getSelected:function(){return this.selected},upFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var n=e.inArray(i,t.grid.rows);n-1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[n-1]))}else t.grid.select(t.grid.rows[0])}else{var r=t.selectBox.table.find("td.l-over").attr("index");if(void 0==r||"0"==r)return;r=parseInt(r)-1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+r+"]").addClass("l-over"),t._scrollAdjust(r)}},downFocus:function(){var t=this;this.options;if(t.grid){if(!t.grid.rows||!t.grid.rows.length)return;var i=t.grid.getSelected();if(i){var n=e.inArray(i,t.grid.rows);n+1<t.grid.rows.length&&(t.grid.unselect(i),t.grid.select(t.grid.rows[n+1]))}else t.grid.select(t.grid.rows[0])}else{var r=t.selectBox.table.find("td.l-over").attr("index");if(r==t.data.length-1)return;r=void 0==r?0:parseInt(r)+1,t.selectBox.table.find("td.l-over").removeClass("l-over"),t.selectBox.table.find("td[index="+r+"]").addClass("l-over"),t._scrollAdjust(r)}},_scrollAdjust:function(t){var i=this,n=(this.options,e(".l-box-select-inner",i.selectBox).height()),r=e(".l-box-select-inner table",i.selectBox).height();if(!(r<=n)){var o=(parseInt(r/n),r/i.data.length),a=parseInt((t+1)*o/n)+((t+1)*o%n?1:0);e(".l-box-select-inner",i.selectBox).scrollTop((a-1)*n)}},getText:function(){return this.inputText.val()},setText:function(e){var t=this;this.options.isTextBoxMode||t.inputText.val(e)},updateStyle:function(){var e=this;this.options.initValue=e._getValue(),e._dataInit()},_dataInit:function(){var t=this,i=this.options,n=null;if(null!=i.initValue&&null!=i.initText&&t._changeValue(i.initValue,i.initText),null!=i.initValue){if(n=i.initValue,i.tree)n&&t.selectValueByTree(n);else if(t.data){var r=t.findTextByValue(n);t._changeValue(n,r)}}else if(""!=t.valueField.val())if(n=t.valueField.val(),i.tree)n&&t.selectValueByTree(n);else if(t.data){var r=t.findTextByValue(n);t._changeValue(n,r)}i.isShowCheckBox?e(":checkbox",t.selectBox).each(function(){var t=null,r=e(this);if(null!=(t="div"==r.parent().get(0).tagName.toLowerCase()?r.parent().parent():r.parent())){e(".l-checkbox",t).removeClass("l-checkbox-checked"),r[0].checked=!1;var o=(n||"").toString().split(i.split);e(o).each(function(i,o){null!=n&&o==t.attr("value")&&(e(".l-checkbox",t).addClass("l-checkbox-checked"),r[0].checked=!0)})}}):e("table tr",t.selectBox).find("td:first").each(function(){null!=n&&n==e(this).attr("value")?e(this).addClass("l-selected"):e(this).removeClass("l-selected")})},_changeValue:function(t,i,n){var r=this,o=this.options;r.valueField.val(t),o&&o.render?r.inputText.val(o.render(t,i)):r.inputText.val(i),r.select&&e("option",r.select).each(function(){e(this).attr("selected",e(this).attr("value")==t)}),r.selectedValue=t,r.selectedText=i,r.inputText.trigger("change"),n&&i&&r.inputText.focus();var a=null;if(t&&"string"==typeof t&&t.indexOf(o.split)>-1){a=[];var l=t.split(o.split);e(l).each(function(e,t){a.push(r.getRow(t))})}else t&&(a=r.getRow(t));n&&r.trigger("selected",[t,i,a])},_checkboxUpdateValue:function(){var t=this,i=this.options,n="",r="";e("input:checked",t.selectBox).each(function(){var t=null;(t="div"==e(this).parent().get(0).tagName.toLowerCase()?e(this).parent().parent():e(this).parent())&&(n+=t.attr("value")+i.split,r+=t.attr("text")+i.split)}),n.length>0&&(n=n.substr(0,n.length-1)),r.length>0&&(r=r.substr(0,r.length-1)),t._changeValue(n,r)},loadDetail:function(t,i){var n=this,r=this.options,o=e.isFunction(r.detailParms)?r.detailParms.call(n):r.detailParms;o[r.detailPostIdField||"id"]=t,"application/json"==r.ajaxContentType&&(o=liger.toJSON(o));var a={type:r.ajaxType,url:r.detailUrl,data:o,cache:!0,dataType:"json",beforeSend:r.ajaxBeforeSend,complete:r.ajaxComplete,success:function(t){var n=e.isFunction(r.detailDataGetter)?r.detailDataGetter(t):t;n=r.detailDataParmName?n[r.detailDataParmName]:n,i&&i(n)}};r.ajaxContentType&&(a.contentType=r.ajaxContentType),e.ajax(a)},enabledLoadDetail:function(){var e=this.options;return!(!e.detailUrl||!e.detailEnabled)},_addClickEven:function(){var t=this,i=this.options;e(".l-table-nocheckbox td",t.selectBox).click(function(){function n(){return t.hasBind("beforeSelect")&&0==t.trigger("beforeSelect",[o,s,l])?(i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide(),!1):(t.selected=l,e(this).hasClass("l-selected")?void(i.slide?t.selectBox.slideToggle("fast"):t.selectBox.hide()):(e(".l-selected",t.selectBox).removeClass("l-selected"),r.addClass("l-selected"),t.select&&t.select[0].selectedIndex!=a&&(t.select[0].selectedIndex=a,t.select.trigger("change")),i.slide?(t.boxToggling=!0,t.selectBox.hide("fast",function(){t.boxToggling=!1})):t.selectBox.hide(),t.lastInputText=s,void t._changeValue(o,s,!0)))}var r=e(this),o=r.attr("value"),a=parseInt(e(this).attr("index")),l=t.data[a],s=r.attr("text");r.parent().hasClass("rowreadonly")||(t.enabledLoadDetail()?t.loadDetail(o,function(e){t.data[a]=l=e,n()}):n())})},updateSelectBoxPosition:function(){var t=this,i=this.options;if(i&&i.absolute){var n=e(document).height();i.alwayShowInTop||Number(t.wrapper.offset().top+1+t.wrapper.outerHeight()+t.selectBox.height())>n&&n>Number(t.selectBox.height()+1)?t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top-1-t.selectBox.height()+(i.selectBoxPosYDiff||0)}):t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()+(i.selectBoxPosYDiff||0)}),i.alwayShowInDown&&t.selectBox.css({left:t.wrapper.offset().left,top:t.wrapper.offset().top+1+t.wrapper.outerHeight()})}else{var r=t.wrapper.offset().top-e(window).scrollTop(),o=t.selectBox.height()+textHeight+4;r+o>e(window).height()&&r>o&&t.selectBox.css("marginTop",-1*(t.selectBox.height()+textHeight+5)+(i.selectBoxPosYDiff||0))}},_toggleSelectBox:function(t){var i=this,n=this.options;if(i&&n){for(var r=e.ligerui.find(e.ligerui.controls.ComboBox),o=0,a=r.length;o<a;o++){var l=r[o];l.id!=i.id&&null!=l.selectBox.is(":visible")&&l.selectBox.is(":visible")&&l.selectBox.hide()}r=e.ligerui.find(e.ligerui.controls.DateEditor);for(var o=0,a=r.length;o<a;o++){var l=r[o];l.id!=i.id&&null!=l.dateeditor.is(":visible")&&l.dateeditor.is(":visible")&&l.dateeditor.hide()}i.wrapper.height();if(i.boxToggling=!0,t)n.slide?i.selectBox.slideToggle("fast",function(){i.boxToggling=!1}):(i.selectBox.hide(),i.boxToggling=!1);else if(i.updateSelectBoxPosition(),n.slide)i.selectBox.slideToggle("fast",function(){if(i.boxToggling=!1,!n.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var t=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:t})}});else if(i._selectBoxShow(),i.boxToggling=!1,!i.tree&&!i.grid&&!n.isShowCheckBox&&e("td.l-selected",i.selectBox).length>0){var s=e("td.l-selected",i.selectBox).offset().top-i.selectBox.offset().top;e(".l-box-select-inner",i.selectBox).animate({scrollTop:s})}i.isShowed=i.selectBox.is(":visible"),i.trigger("toggle",[t]),i.trigger(t?"hide":"show")}},_selectBoxShow:function(){var e=this,t=this.options;if(!t.readonly)return t.grid||t.tree?void e.selectBox.show():void(e.selectBox.table.find("tr").length||t.selectBoxRender&&e.selectBoxInner.html()?e.selectBox.show():e.selectBox.hide())},_highLight:function(e,t){if(!e)return e;var i=e.indexOf(t);return-1==i?e:e.substring(0,i)+"<span class='l-highLight'>"+t+"</span>"+e.substring(t.length+i)},_setAutocomplete:function(t){var i=this,n=this.options;t&&(n.readonly||(i.inputText.removeAttr("readonly"),i.lastInputText=i.inputText.val(),i.inputText.keyup(function(r){38!=r.keyCode&&40!=r.keyCode&&13!=r.keyCode&&(this._acto&&clearTimeout(this._acto),this._acto=setTimeout(function(){if(i.lastInputText!=i.inputText.val()){var r=i.inputText.val();if(r?r=r.replace(/(^\s*)|(\s*$)/g,""):(n.initValue="",i.valueField.val("")),i.lastInputText=i.inputText.val(),e.isFunction(t))return void t.call(i,{key:r,show:function(){i._selectBoxShow()}});if(!n.autocompleteAllowEmpty&&!r)return i.clear(),void i.selectBox.hide();n.url?(i.setParm("key",r),i.setUrl(n.url,function(){i._selectBoxShow()})):n.grid&&(i.grid.setParm("key",r),i.grid.reload()),this._acto=null}},300))})))}}),e.ligerui.controls.ComboBox.prototype.setValue=e.ligerui.controls.ComboBox.prototype.selectValue,e.ligerui.controls.ComboBox.prototype.setInputValue=e.ligerui.controls.ComboBox.prototype._changeValue,function(){e(document).unbind("keydown.ligercombobox"),e(document).bind("keydown.ligercombobox",function(t){function i(){o.selectBox.is(":visible")||o.selectBox.show(),o.downFocus()}function n(){l?(o._changeValue(l[a.valueField],l[a.textField],!0),o.selectBox.hide(),o.trigger("textBoxKeyEnter",[{rowdata:l}])):(o._changeValue(d,s.attr("text"),!0),o.selectBox.hide(),o.trigger("textBoxKeyEnter",[{element:s.get(0)}]))}var r=e("input:focus");if(r.length&&r.attr("data-comboboxid")){var o=liger.get(r.attr("data-comboboxid"));if(!o)return;var a=o.options;if(!o.get("keySupport"))return;if(38==t.keyCode)o.upFocus();else if(40==t.keyCode)o.hasBind("textBoxKeyDown")?o.trigger("textBoxKeyDown",[{callback:function(){i()}}]):i();else if(13==t.keyCode){if(!o.selectBox.is(":visible"))return;var l=null;o.grid&&(l=o.grid.getSelected());var s=o.selectBox.table.find("td.l-over");if(l||s.length){var d=s.attr("value");l&&l.ID&&(d=l.ID),o.enabledLoadDetail()?o.loadDetail(d,function(e){if(!l){var t=o.getRowIndex(d);if(-1==t)return;o.data=o.data||[],o.data[t]=o.selected=e}n()}):n()}}}})}()}(jQuery),function($){$.fn.ligerDateEditor=function(){return $.ligerui.run.call(this,"ligerDateEditor",arguments)},$.fn.ligerGetDateEditorManager=function(){return $.ligerui.run.call(this,"ligerGetDateEditorManager",arguments)},$.ligerDefaults.DateEditor={format:"yyyy-MM-dd hh:mm",width:null,showTime:!1,onChangeDate:!1,absolute:!0,cancelable:!0,readonly:!1},$.ligerDefaults.DateEditorString={dayMessage:["日","一","二","三","四","五","六"],monthMessage:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],todayMessage:"今天",closeMessage:"关闭"},$.ligerMethos.DateEditor={},$.ligerui.controls.DateEditor=function(e,t){$.ligerui.controls.DateEditor.base.constructor.call(this,e,t)},$.ligerui.controls.DateEditor.ligerExtend($.ligerui.controls.Input,{__getType:function(){return"DateEditor"},__idPrev:function(){return"DateEditor"},_extendMethods:function(){return $.ligerMethos.DateEditor},_render:function(){var e=this,t=this.options;if(!t.showTime&&t.format.indexOf(" hh:mm")>-1&&(t.format=t.format.replace(" hh:mm","")),"input"==this.element.tagName.toLowerCase()&&"text"==this.element.type){e.inputText=$(this.element),e.inputText.hasClass("l-text-field")||e.inputText.addClass("l-text-field"),e.link=$('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),e.text=e.inputText.wrap('<div class="l-text l-text-date"></div>').parent(),e.text.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),e.text.append(e.link),e.textwrapper=e.text.wrap('<div class="l-text-wrapper"></div>').parent();var i="";i+="<div class='l-box-dateeditor' style='display:none'>",i+="    <div class='l-box-dateeditor-header'>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevyear'><span></span></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-prevmonth'><span></span></div>",i+="        <div class='l-box-dateeditor-header-text'><a class='l-box-dateeditor-header-month'></a> , <a  class='l-box-dateeditor-header-year'></a></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextmonth'><span></span></div>",i+="        <div class='l-box-dateeditor-header-btn l-box-dateeditor-header-nextyear'><span></span></div>",i+="    </div>",i+="    <div class='l-box-dateeditor-body'>",i+="        <table cellpadding='0' cellspacing='0' border='0' class='l-box-dateeditor-calendar'>",i+="            <thead>",i+="                <tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </thead>",i+="            <tbody>",i+="                <tr class='l-first'><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr><tr><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td><td align='center'></td></tr>",i+="            </tbody>",i+="        </table>",i+="        <ul class='l-box-dateeditor-monthselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-yearselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-hourselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="        <ul class='l-box-dateeditor-minuteselector'><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul>",i+="    </div>",i+="    <div class='l-box-dateeditor-toolbar'>",i+="        <div class='l-box-dateeditor-time'></div>",i+="        <div class='l-button l-button-today'></div>",i+="        <div class='l-button l-button-close'></div>",i+="        <div class='l-clear'></div>",i+="    </div>",i+="</div>",e.dateeditor=$(i),t.absolute?e.dateeditor.appendTo("body").addClass("l-box-dateeditor-absolute"):e.textwrapper.append(e.dateeditor),e.header=$(".l-box-dateeditor-header",e.dateeditor),e.body=$(".l-box-dateeditor-body",e.dateeditor),e.toolbar=$(".l-box-dateeditor-toolbar",e.dateeditor),e.body.thead=$("thead",e.body),e.body.tbody=$("tbody",e.body),e.body.monthselector=$(".l-box-dateeditor-monthselector",e.body),e.body.yearselector=$(".l-box-dateeditor-yearselector",e.body),e.body.hourselector=$(".l-box-dateeditor-hourselector",e.body),e.body.minuteselector=$(".l-box-dateeditor-minuteselector",e.body),e.toolbar.time=$(".l-box-dateeditor-time",e.toolbar),e.toolbar.time.hour=$("<a></a>"),e.toolbar.time.minute=$("<a></a>"),e.buttons={btnPrevYear:$(".l-box-dateeditor-header-prevyear",e.header),btnNextYear:$(".l-box-dateeditor-header-nextyear",e.header),btnPrevMonth:$(".l-box-dateeditor-header-prevmonth",e.header),btnNextMonth:$(".l-box-dateeditor-header-nextmonth",e.header),btnYear:$(".l-box-dateeditor-header-year",e.header),btnMonth:$(".l-box-dateeditor-header-month",e.header),btnToday:$(".l-button-today",e.toolbar),btnClose:$(".l-button-close",e.toolbar)};var n=new Date;e.now={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDay(),date:n.getDate(),hour:n.getHours(),minute:n.getMinutes()},e.currentDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDay(),date:n.getDate(),hour:n.getHours(),minute:n.getMinutes()},e.selectedDate=null,e.usedDate=null,$("td",e.body.thead).each(function(e,i){
$(i).html(t.dayMessage[e])}),$("li",e.body.monthselector).each(function(e,i){$(i).html(t.monthMessage[e])}),e.buttons.btnToday.html(t.todayMessage),e.buttons.btnClose.html(t.closeMessage),t.showTime&&(e.toolbar.time.show(),e.toolbar.time.append(e.toolbar.time.hour).append(":").append(e.toolbar.time.minute),$("li",e.body.hourselector).each(function(e,t){var i=e;e<10&&(i="0"+e.toString()),$(this).html(i)}),$("li",e.body.minuteselector).each(function(e,t){var i=e;e<10&&(i="0"+e.toString()),$(this).html(i)})),e.bulidContent(),t.initValue&&e.inputText.val(t.initValue),""!=e.inputText.val()&&e.onTextChange(),e.dateeditor.hover(null,function(t){e.dateeditor.is(":visible")&&!e.editorToggling&&e.toggleDateEditor(!0)}),e.link.hover(function(){t.disabled||(this.className="l-trigger-hover")},function(){t.disabled||(this.className="l-trigger")}).mousedown(function(){t.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){t.disabled||(this.className="l-trigger-hover")}).click(function(){t.disabled||(e.bulidContent(),e.toggleDateEditor(e.dateeditor.is(":visible")))}),t.disabled&&(e.inputText.attr("readonly","readonly"),e.text.addClass("l-text-disabled")),e.buttons.btnClose.click(function(){e.toggleDateEditor(!0)}),$("td",e.body.tbody).hover(function(){$(this).hasClass("l-box-dateeditor-today")||$(this).addClass("l-box-dateeditor-over")},function(){$(this).removeClass("l-box-dateeditor-over")}).click(function(){$(".l-box-dateeditor-selected",e.body.tbody).removeClass("l-box-dateeditor-selected"),$(this).hasClass("l-box-dateeditor-today")||$(this).addClass("l-box-dateeditor-selected"),e.currentDate.date=parseInt($(this).html()),e.currentDate.day=new Date(e.currentDate.year,e.currentDate.month-1,1).getDay(),$(this).hasClass("l-box-dateeditor-out")&&(0==$("tr",e.body.tbody).index($(this).parent())?0==--e.currentDate.month&&(e.currentDate.month=12,e.currentDate.year--):13==++e.currentDate.month&&(e.currentDate.month=1,e.currentDate.year++)),e.selectedDate={year:e.currentDate.year,month:e.currentDate.month,date:e.currentDate.date},e.showDate(),e.editorToggling=!0,e.dateeditor.slideToggle("fast",function(){e.editorToggling=!1})}),$(".l-box-dateeditor-header-btn",e.header).hover(function(){$(this).addClass("l-box-dateeditor-header-btn-over")},function(){$(this).removeClass("l-box-dateeditor-header-btn-over")}),e.buttons.btnYear.click(function(){e.body.yearselector.is(":visible")||$("li",e.body.yearselector).each(function(t,i){var n=e.currentDate.year+(t-4);n==e.currentDate.year?$(this).addClass("l-selected"):$(this).removeClass("l-selected"),$(this).html(n)}),e.body.yearselector.slideToggle()}),e.body.yearselector.hover(function(){},function(){$(this).slideUp()}),$("li",e.body.yearselector).click(function(){e.currentDate.year=parseInt($(this).html()),e.body.yearselector.slideToggle(),e.bulidContent()}),e.buttons.btnMonth.click(function(){$("li",e.body.monthselector).each(function(t,i){e.currentDate.month==t+1?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.monthselector.slideToggle()}),e.body.monthselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.monthselector).click(function(){var t=$("li",e.body.monthselector).index(this);e.currentDate.month=t+1,e.body.monthselector.slideToggle(),e.bulidContent()}),e.toolbar.time.hour.click(function(){$("li",e.body.hourselector).each(function(t,i){e.currentDate.hour==t?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.hourselector.slideToggle()}),e.body.hourselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.hourselector).click(function(){var t=$("li",e.body.hourselector).index(this);e.currentDate.hour=t,e.body.hourselector.slideToggle(),e.bulidContent(),e.showDate()}),e.toolbar.time.minute.click(function(){$("li",e.body.minuteselector).each(function(t,i){e.currentDate.minute==t?$(this).addClass("l-selected"):$(this).removeClass("l-selected")}),e.body.minuteselector.slideToggle("fast",function(){if($("li",this).index($("li.l-selected",this))>29){var e=$("li.l-selected",this).offset().top-$(this).offset().top;$(this).animate({scrollTop:e})}})}),e.body.minuteselector.hover(function(){},function(){$(this).slideUp("fast")}),$("li",e.body.minuteselector).click(function(){var t=$("li",e.body.minuteselector).index(this);e.currentDate.minute=t,e.body.minuteselector.slideToggle("fast"),e.bulidContent(),e.showDate()}),e.buttons.btnPrevMonth.click(function(){0==--e.currentDate.month&&(e.currentDate.month=12,e.currentDate.year--),e.bulidContent()}),e.buttons.btnNextMonth.click(function(){13==++e.currentDate.month&&(e.currentDate.month=1,e.currentDate.year++),e.bulidContent()}),e.buttons.btnPrevYear.click(function(){e.currentDate.year--,e.bulidContent()}),e.buttons.btnNextYear.click(function(){e.currentDate.year++,e.bulidContent()}),e.buttons.btnToday.click(function(){e.currentDate={year:e.now.year,month:e.now.month,day:e.now.day,date:e.now.date},e.selectedDate={year:e.now.year,month:e.now.month,day:e.now.day,date:e.now.date},e.showDate(),e.dateeditor.slideToggle("fast")}),e.inputText.change(function(){e.onTextChange()}).blur(function(){e.text.removeClass("l-text-focus")}).focus(function(){e.text.addClass("l-text-focus")}),e.text.hover(function(){e.text.addClass("l-text-over")},function(){e.text.removeClass("l-text-over")}),t.label&&(e.labelwrapper=e.textwrapper.wrap('<div class="l-labeltext"></div>').parent(),e.labelwrapper.prepend('<div class="l-text-label" style="float:left;display:inline;">'+t.label+":&nbsp</div>"),e.textwrapper.css("float","left"),t.labelWidth?$(".l-text-label",e.labelwrapper).outerWidth(t.labelWidth):t.labelWidth=$(".l-text-label",e.labelwrapper).outerWidth(),$(".l-text-label",e.labelwrapper).width(t.labelWidth),$(".l-text-label",e.labelwrapper).height(e.text.height()),e.labelwrapper.append('<br style="clear:both;" />'),t.labelAlign&&$(".l-text-label",e.labelwrapper).css("text-align",t.labelAlign),e.textwrapper.css({display:"inline"}),e.labelwrapper.width(e.text.outerWidth()+t.labelWidth+2)),e.set(t),$(document).bind("click.dateeditor",function(t){e.dateeditor.is(":visible")&&0==$(t.target||t.srcElement).closest(".l-box-dateeditor, .l-text-date").length&&e.toggleDateEditor(!0)})}},destroy:function(){this.textwrapper&&this.textwrapper.remove(),this.dateeditor&&this.dateeditor.remove(),this.options=null,$.ligerui.remove(this)},bulidContent:function(){var e=this,t=this.options,i=new Date(e.currentDate.year,e.currentDate.month-1,1).getDay(),n=e.currentDate.month,r=e.currentDate.year;13==++n&&(n=1,r++);var o=new Date(r,n-1,0).getDate(),a=new Date(e.currentDate.year,e.currentDate.month-1,0).getDate();e.buttons.btnMonth.html(t.monthMessage[e.currentDate.month-1]),e.buttons.btnYear.html(e.currentDate.year),e.toolbar.time.hour.html(e.currentDate.hour),e.toolbar.time.minute.html(e.currentDate.minute),1==e.toolbar.time.hour.html().length&&e.toolbar.time.hour.html("0"+e.toolbar.time.hour.html()),1==e.toolbar.time.minute.html().length&&e.toolbar.time.minute.html("0"+e.toolbar.time.minute.html()),$("td",this.body.tbody).each(function(){this.className=""}),$("tr",this.body.tbody).each(function(t,n){$("td",n).each(function(n,r){var l=7*t+(n-i),s=l+1;e.selectedDate&&e.currentDate.year==e.selectedDate.year&&e.currentDate.month==e.selectedDate.month&&l+1==e.selectedDate.date?(0!=n&&6!=n||$(r).addClass("l-box-dateeditor-holiday"),$(r).addClass("l-box-dateeditor-selected"),$(r).siblings().removeClass("l-box-dateeditor-selected")):e.currentDate.year==e.now.year&&e.currentDate.month==e.now.month&&l+1==e.now.date?(0!=n&&6!=n||$(r).addClass("l-box-dateeditor-holiday"),$(r).addClass("l-box-dateeditor-today")):l<0?(s=a+s,$(r).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):l>o-1?(s-=o,$(r).addClass("l-box-dateeditor-out").removeClass("l-box-dateeditor-selected")):0==n||6==n?$(r).addClass("l-box-dateeditor-holiday").removeClass("l-box-dateeditor-selected"):r.className="",$(r).html(s)})})},updateSelectBoxPosition:function(){var e=this;if(this.options.absolute){var t=$(document).height();Number(e.text.offset().top+1+e.text.outerHeight()+e.dateeditor.height())>t&&t>Number(e.dateeditor.height()+1)?e.dateeditor.css({left:e.text.offset().left,top:e.text.offset().top-1-e.dateeditor.height()}):e.dateeditor.css({left:e.text.offset().left,top:e.text.offset().top+1+e.text.outerHeight()})}else e.text.offset().top+4>e.dateeditor.height()&&e.text.offset().top+e.dateeditor.height()+textHeight+4-$(window).scrollTop()>$(window).height()?(e.dateeditor.css("marginTop",-1*(e.dateeditor.height()+textHeight+5)),e.showOnTop=!0):e.showOnTop=!1},toggleDateEditor:function(e){for(var t=this,i=(this.options,$.ligerui.find($.ligerui.controls.ComboBox)),n=0,r=i.length;n<r;n++){var o=i[n];o.id!=t.id&&null!=o.selectBox.is(":visible")&&o.selectBox.is(":visible")&&o.selectBox.hide()}i=$.ligerui.find($.ligerui.controls.DateEditor);for(var n=0,r=i.length;n<r;n++){var o=i[n];o.id!=t.id&&null!=o.dateeditor.is(":visible")&&o.dateeditor.is(":visible")&&o.dateeditor.hide()}t.text.height();t.editorToggling=!0,e?t.dateeditor.hide("fast",function(){t.editorToggling=!1}):(t.updateSelectBoxPosition(),t.dateeditor.slideDown("fast",function(){t.editorToggling=!1}))},showDate:function(){var e=this;this.options;if(this.currentDate){this.currentDate.hour=parseInt(e.toolbar.time.hour.html(),10),this.currentDate.minute=parseInt(e.toolbar.time.minute.html(),10);var t=this.currentDate.year+"/"+this.currentDate.month+"/"+this.currentDate.date+" "+this.currentDate.hour+":"+this.currentDate.minute,i=new Date(t);t=e.getFormatDate(i),this.inputText.val(t),this.onTextChange()}},isDateTime:function(e){var t=(this.options,e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/));if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4])},isLongDateTime:function(e){var t=(this.options,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i=e.match(t);if(null==i)return!1;var n=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return"NaN"!=n&&(n.getFullYear()==i[1]&&n.getMonth()+1==i[3]&&n.getDate()==i[4]&&n.getHours()==i[5]&&n.getMinutes()==i[6])},getFormatDate:function(e){if(null===e||"NaN"==e)return null;var t=this.options,i=t.format,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return i},clear:function(){this.set("value",""),this.usedDate=null},_setCancelable:function(e){var t=this,i=this.options;!e&&t.unselect&&(t.unselect.remove(),t.unselect=null),(e||t.unselect)&&(t.unselect=$('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),t.text.hover(function(){t.unselect.show()},function(){t.unselect.hide()}),!i.disabled&&i.cancelable&&t.text.append(t.unselect),t.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.readonly||t.clear()}))},_rever:function(){var e=this;this.options;e.usedDate?e.inputText.val(e.getFormatDate(e.usedDate)):e.inputText.val("")},_getMatch:function(e){for(var t=[-1,-1,-1,-1,-1,-1],i=0,n="^",r=e||this.options.format;;){var o=r.match(/^yyyy|MM|dd|mm|hh|HH|ss|-|\/|:|\s/);if(!o)return null;var a=o[0].charAt(0),l=o[0].length,s="yMdhms".indexOf(a);if(-1!=s)t[s]=i+1,n+="(\\d{1,"+l+"})";else{n+="("+(" "==a?"\\s":a)+")"}if(i++,l==r.length){n+="$";break}r=r.substring(l)}return{reg:new RegExp(n),position:t}},_bulidDate:function(e){var t=this.options,i=this._getMatch();if(!i)return null;var n=e.match(i.reg);if(!n)return null;var r={y:-1==i.position[0]?1900:n[i.position[0]],M:-1==i.position[1]?0:parseInt(n[i.position[1]],10)-1,d:-1==i.position[2]?1:parseInt(n[i.position[2]],10),h:-1==i.position[3]?0:parseInt(n[i.position[3]],10),m:-1==i.position[4]?0:parseInt(n[i.position[4]],10),s:-1==i.position[5]?0:parseInt(n[i.position[5]],10)};if(r.M<0||r.M>11||r.d<0||r.d>31)return null;var o=new Date(r.y,r.M,r.d);if(t.showTime){if(r.m<0||r.m>59||r.h<0||r.h>23||r.s<0||r.s>59)return null;o.setHours(r.h),o.setMinutes(r.m),o.setSeconds(r.s)}return o},updateStyle:function(){this.onTextChange()},onTextChange:function(){var e=this,t=(this.options,e.inputText.val());if(!t)return e.selectedDate=null,!0;var i=e._bulidDate(t);if(!i)return void e._rever();e.usedDate=i,e.selectedDate={year:e.usedDate.getFullYear(),month:e.usedDate.getMonth()+1,day:e.usedDate.getDay(),date:e.usedDate.getDate(),hour:e.usedDate.getHours(),minute:e.usedDate.getMinutes()},e.currentDate={year:e.usedDate.getFullYear(),month:e.usedDate.getMonth()+1,day:e.usedDate.getDay(),date:e.usedDate.getDate(),hour:e.usedDate.getHours(),minute:e.usedDate.getMinutes()};var n=e.getFormatDate(i);e.inputText.val(n),e.trigger("changeDate",[n]),$(e.dateeditor).is(":visible")&&e.bulidContent()},_setHeight:function(e){var t=this;e>4&&(t.text.css({height:e}),t.inputText.css({height:e}),t.textwrapper.css({height:e}))},_setWidth:function(e){var t=this;e>20&&(t.text.css({width:e}),t.inputText.css({width:e-20}),t.textwrapper.css({width:e}))},_setValue:function(value){var g=this;value||g.inputText.val(""),"string"==typeof value&&(/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),g.inputText.val(value),g.usedDate=value),"object"==typeof value&&value instanceof Date&&(g.inputText.val(g.getFormatDate(value)),g.onTextChange())},_getValue:function(){return this.usedDate},setEnabled:function(){var e=this.options;this.inputText.removeAttr("readonly"),this.text.removeClass("l-text-disabled"),e.disabled=!1},setDisabled:function(){var e=this.options;this.inputText.attr("readonly","readonly"),this.text.addClass("l-text-disabled"),e.disabled=!0}})}(jQuery),function(e){var t=e.ligerui;e(".l-dialog-btn").live("mouseover",function(){e(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-btn-over")}),e(".l-dialog-tc .l-dialog-close").live("mouseover",function(){e(this).addClass("l-dialog-close-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-close-over")}),e.ligerDialog=function(){return t.run.call(null,"ligerDialog",arguments,{isStatic:!0})},e.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/",e.ligerDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,urlParms:null,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"提示",showMax:!1,showToggle:!1,showMin:!1,slide:!e.browser.msie,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},e.ligerDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."},e.ligerMethos.Dialog=e.ligerMethos.Dialog||{},t.controls.Dialog=function(e){t.controls.Dialog.base.constructor.call(this,null,e)},t.controls.Dialog.ligerExtend(t.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return e.ligerMethos.Dialog},_render:function(){function i(){var t=0,i=0,o=r.width||n.dialog.width();1==r.slide&&(r.slide="fast"),null!=r.left?t=r.left:r.left=t=.5*(e(window).width()-o),null!=r.top?i=r.top:r.top=i=.5*(e(window).height()-n.dialog.height())+e(window).scrollTop()-10,t<0&&(r.left=t=0),i<0&&(r.top=i=0),n.dialog.css({left:t,top:i})}var n=this,r=this.options,o="";n.set(r,!0);var a=e('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-winbtns"><div class="l-dialog-winbtn l-dialog-close"></div></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>');if(e("body").append(a),n.dialog=a,2==r.layoutMode&&a.find("td.l-dialog-tl,td.l-dialog-cl,td.l-dialog-bl,td.l-dialog-tr,td.l-dialog-cr,td.l-dialog-br").remove(),n.element=a[0],n.dialog.body=e(".l-dialog-body:first",n.dialog),n.dialog.header=e(".l-dialog-tc-inner:first",n.dialog),n.dialog.winbtns=e(".l-dialog-winbtns:first",n.dialog.header),n.dialog.buttons=e(".l-dialog-buttons:first",n.dialog),n.dialog.content=e(".l-dialog-content:first",n.dialog),n.set(r,!1),0==r.allowClose&&e(".l-dialog-close",n.dialog).remove(),(r.target||r.url||"none"==r.type)&&(r.type=null,n.dialog.addClass("l-dialog-win")),r.cls&&n.dialog.addClass(r.cls),r.id&&n.dialog.attr("id",r.id),n.mask(),r.isDrag&&n._applyDrag(),r.isResize&&n._applyResize(),r.type?n._setImage():(e(".l-dialog-image",n.dialog).remove(),n.dialog.content.addClass("l-dialog-content-noimage")),r.contentCls&&n.dialog.content.addClass(r.contentCls),r.show||(n.unmask(),n.dialog.hide()),r.target)n.dialog.content.prepend(r.target),e(r.target).show();else if(r.url){var l=e.isFunction(r.url)?r.url.call(n):r.url,s=e.isFunction(r.urlParms)?r.urlParms.call(n):r.urlParms;if(r.timeParmName&&(s=s||{},s[r.timeParmName]=(new Date).getTime()),s)for(var d in s)l+=-1==l.indexOf("?")?"?":"&",l+=d+"="+s[d];if(r.load)n.dialog.body.load(l,function(){n._saveStatus(),n.trigger("loaded")});else{n.jiframe=e("<iframe frameborder='0'></iframe>");var c=r.name?r.name:"ligerwindow"+(new Date).getTime();n.jiframe.attr("name",c),n.jiframe.attr("id",c),n.dialog.content.prepend(n.jiframe),n.dialog.content.addClass("l-dialog-content-nopadding l-dialog-content-frame"),setTimeout(function(){0==n.dialog.body.find(".l-dialog-loading:first").length&&n.dialog.body.append("<div class='l-dialog-loading' style='display:block;'></div>");var t=e(".l-dialog-loading:first",n.dialog.body);n.jiframe[0].dialog=n,n.jiframe.attr("src",l).bind("load.dialog",function(){t.hide(),n.trigger("loaded")}),n.frame=window.frames[n.jiframe.attr("name")]},0),o="jquery_ligerui_"+(new Date).getTime(),n.tmpInput=e("<input></input>"),n.tmpInput.attr("id",o),n.dialog.content.prepend(n.tmpInput)}}r.opener&&(n.dialog.opener=r.opener),r.buttons?e(r.buttons).each(function(t,i){var r=e('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');e(".l-dialog-btn-inner",r).html(i.text),e(".l-dialog-buttons-inner",n.dialog.buttons).prepend(r),i.width&&r.width(i.width),i.onclick&&r.click(function(){i.onclick(i,n,t)}),i.cls&&r.addClass(i.cls)}):n.dialog.buttons.remove(),e(".l-dialog-buttons-inner",n.dialog.buttons).append("<div class='l-clear'></div>"),e(".l-dialog-title",n.dialog).bind("selectstart",function(){return!1}),n.dialog.click(function(){t.win.setFront(n)}),e(".l-dialog-tc .l-dialog-close",n.dialog).click(function(){r.isHidden?n.hide():n.close()}),r.fixedType||("auto"==r.width?setTimeout(function(){i()},100):i()),n.show(),e("body").bind("keydown.dialog",function(e){var t=e.which;13==t?n.enter():27==t&&n.esc()}),n._updateBtnsWidth(),n._saveStatus(),n._onReisze(),""!=o&&(e("#"+o).focus(),e("#"+o).remove())},_borderX:12,_borderY:32,doMax:function(i){var n=this,r=this.options,o=e(window).width(),a=e(window).height(),l=0;t.win.taskbar&&(a-=t.win.taskbar.outerHeight(),t.win.top&&(l+=t.win.taskbar.outerHeight())),i?(n.dialog.body.animate({width:o-n._borderX},r.slide),n.dialog.animate({left:0,top:l},r.slide),n.dialog.content.animate({height:a-n._borderY-n.dialog.buttons.outerHeight()},r.slide,function(){n._onReisze()})):(n.set({width:o,height:a,left:0,top:l}),n._onReisze())},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("l-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("l-dialog-extend")?t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),t.maximum=!0,e(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;t.winmax&&(t.winmax.removeClass("l-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),e(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),t.draggable&&t.draggable.set({disabled:!1}),t.maximum=!1},min:function(){var e=this,i=this.options;if(i.minIsHide)e.dialog.hide();else{var n=t.win.getTask(this);i.slide?(e.dialog.body.animate({width:1},i.slide),n.y=n.offset().top+n.height(),n.x=n.offset().left+n.width()/2,e.dialog.animate({left:n.x,top:n.y},i.slide,function(){e.dialog.hide()})):e.dialog.hide()}e.unmask(),e.minimize=!0,e.actived=!1},active:function(){var i=this,n=this.options;if(i.minimize){var r=i._width,o=i._height,a=i._left,l=i._top;i.maximum&&(r=e(window).width(),o=e(window).height(),a=l=0,t.win.taskbar&&(o-=t.win.taskbar.outerHeight(),t.win.top&&(l+=t.win.taskbar.outerHeight()))),n.slide?(i.dialog.body.animate({width:r-i._borderX},n.slide),i.dialog.animate({left:a,top:l},n.slide)):i.set({width:r,height:o,left:a,top:l})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show()},toggle:function(){var e=this;this.options;e.wintoggle&&(e.wintoggle.hasClass("l-dialog-extend")?e.extend():e.collapse())},collapse:function(e){var t=this,i=this.options;t.wintoggle&&(i.slide&&0!=e?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("l-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("l-dialog-extend")}},_updateBtnsWidth:function(){var t=this,i=e(">div",t.dialog.winbtns).length;t.dialog.winbtns.width(22*i)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var n=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[n]))return;i.load?t.dialog.body.height(n):t.dialog.content.height(n),t.trigger("ContentHeightChanged",[n])}},_setShowMax:function(t){var i=this;this.options;t?i.winmax||(i.winmax=e('<div class="l-dialog-winbtn l-dialog-max"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-recover")?e(this).addClass("l-dialog-recover-over"):e(this).addClass("l-dialog-max-over")},function(){e(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){e(this).hasClass("l-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null),i._updateBtnsWidth()},_setShowMin:function(i){var n=this,r=this.options;i?n.winmin||(n.winmin=e('<div class="l-dialog-winbtn l-dialog-min"></div>').appendTo(n.dialog.winbtns).hover(function(){e(this).addClass("l-dialog-min-over")},function(){e(this).removeClass("l-dialog-min-over")}).click(function(){n.min()}),r.minIsHide||t.win.addTask(n)):n.winmin&&(n.winmin.remove(),n.winmin=null),n._updateBtnsWidth()},_setShowToggle:function(t){var i=this;this.options;t?i.wintoggle||(i.wintoggle=e('<div class="l-dialog-winbtn l-dialog-collapse"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-toggle-disabled")||(e(this).hasClass("l-dialog-extend")?e(this).addClass("l-dialog-extend-over"):e(this).addClass("l-dialog-collapse-over"))},function(){e(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){if(!e(this).hasClass("l-dialog-toggle-disabled"))if(i.wintoggle.hasClass("l-dialog-extend")){if(0==i.trigger("extend"))return;i.wintoggle.removeClass("l-dialog-extend"),i.extend(),i.trigger("extended")}else{if(0==i.trigger("collapse"))return;i.wintoggle.addClass("l-dialog-extend"),i.collapse(),i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var e,t=this,i=this.options;void 0!=i.closeWhenEnter?e=i.closeWhenEnter:"warn"!=i.type&&"error"!=i.type&&"success"!=i.type&&"question"!=i.type||(e=!0),e&&t.close()},esc:function(){},_removeDialog:function(){function t(){var t=e("iframe",i.dialog);if(t.length){var n=t[0];if(n.src="about:blank",n.contentWindow&&n.contentWindow.document)try{n.contentWindow.document.write("")}catch(e){}e.browser.msie&&CollectGarbage(),t.remove()}i.dialog.remove()}var i=this,n=this.options;n.showType&&n.fixedType?i.dialog.animate({bottom:-1*n.height},function(){t()}):t()},close:function(){var e=this;this.options;0!=e.trigger("Close")&&(e.doClose(),e.trigger("Closed"))},doClose:function(){var i=this;t.win.removeTask(this),e.ligerui.remove(this),i.unmask(),i._removeDialog(),e("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(t){var i=this;this.options;t&&e(".l-dialog-title",i.dialog).html(t)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){var e=this;t.win.removeTask(e),e.dialog.hide(),e.unmask()},show:function(){var t=this,i=this.options;t.mask(),i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("l-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("l-dialog-fixed"):t.dialog.show(),e.ligerui.win.setFront.ligerDefer(e.ligerui.win,100,[t])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var i=this,n=this.options;e.fn.ligerDrag&&(i.draggable=i.dialog.ligerDrag({handler:".l-dialog-title",animate:!1,onStartDrag:function(){t.win.setFront(i);var n=e("<div class='l-dragging-mask' style='display:block'></div>").height(i.dialog.height());i.dialog.append(n),i.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(e,t){if((t.pageY||t.screenY)<0)return!1},onStopDrag:function(){if(i.dialog.find("div.l-dragging-mask:first").remove(),i.dialog.content.removeClass("l-dialog-content-dragging"),n.target){var r=t.find(e.ligerui.controls.DateEditor),o=t.find(e.ligerui.controls.ComboBox);e(e.merge(r,o)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}i._saveStatus()}}))},_onReisze:function(){var t=this,i=this.options;if(i.target||i.url){var n=e(i.target).liger();if(n||(n=e(i.target).find(":first").liger()),!n)return;var r=t.dialog.content.height(),o=t.dialog.content.width();n.trigger("resize",[{width:o,height:r}])}},_applyResize:function(){var t=this;this.options;e.fn.ligerResizable&&(t.resizable=t.dialog.ligerResizable({onStopResize:function(e,i){var n=0,r=0;return isNaN(parseInt(t.dialog.css("top")))||(n=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(r=parseInt(t.dialog.css("left"))),e.diffLeft&&t.set({left:r+e.diffLeft}),e.diffTop&&t.set({top:n+e.diffTop}),e.newWidth&&(t.set({width:e.newWidth}),t.dialog.body.css({width:e.newWidth-t._borderX})),e.newHeight&&t.set({height:e.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options;if(i.type){var n={paddingLeft:74,paddingRight:15,paddingBottom:30};"success"==i.type||"donne"==i.type||"ok"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-donne").show(),t.dialog.content.css(n)):"error"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-error").show(),t.dialog.content.css(n)):"warn"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-warn").show(),t.dialog.content.css(n)):"question"==i.type&&(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-question").show(),t.dialog.content.css(n))}}}),t.controls.Dialog.prototype.hide=t.controls.Dialog.prototype.hidden,e.ligerDialog.open=function(t){return e.ligerDialog(t)},e.ligerDialog.close=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var n=e[i];n.destroy.ligerDefer(n,5)}t.win.unmask()},e.ligerDialog.show=function(i){var n=t.find(t.controls.Dialog.prototype.__getType());if(n.length)for(var r in n)return void n[r].show();return e.ligerDialog(i)},e.ligerDialog.hide=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){e[i].hide()}},e.ligerDialog.tip=function(t){return t=e.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),e.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog.open(t)},e.ligerDialog.alert=function(t,i,n,r,o){t=t||"","function"==typeof i?(r=i,n=null):"function"==typeof n&&(r=n);var a=function(e,t,i){t.close(),r&&r(e,t,i)};return p={content:t,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:a}]},"string"==typeof i&&""!=i&&(p.title=i),"string"==typeof n&&""!=n&&(p.type=n),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},o||{}),e.ligerDialog(p)},e.ligerDialog.confirm=function(t,i,n){"function"==typeof i&&(n=i,type=null);var r=function(e,t){t.close(),n&&n("ok"==e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:r,type:"ok",cls:"l-dialog-btn-ok"},{text:e.ligerDefaults.DialogString.no,onclick:r,type:"no",cls:"l-dialog-btn-no"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog(p)},e.ligerDialog.warning=function(t,i,n,r){"function"==typeof i&&(n=i,type=null);var o=function(e,t){t.close(),n&&n(e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:o,type:"yes"},{text:e.ligerDefaults.DialogString.no,onclick:o,type:"no"},{text:e.ligerDefaults.DialogString.cancel,onclick:o,type:"cancel"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},r||{}),e.ligerDialog(p)},e.ligerDialog.waitting=function(t){return t=t||e.ligerDefaults.Dialog.waittingMessage,e.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"</div>",allowClose:!1})},e.ligerDialog.closeWaitting=function(){var e=t.find(t.controls.Dialog);for(var i in e){var n=e[i];n.dialog.hasClass("l-dialog-waittingdialog")&&n.close()}},e.ligerDialog.success=function(t,i,n,r){return e.ligerDialog.alert(t,i,"success",n,r)},
e.ligerDialog.error=function(t,i,n,r){return e.ligerDialog.alert(t,i,"error",n,r)},e.ligerDialog.warn=function(t,i,n,r){return e.ligerDialog.alert(t,i,"warn",n,r)},e.ligerDialog.question=function(t,i,n){return e.ligerDialog.alert(t,i,"question",null,n)},e.ligerDialog.prompt=function(t,i,n,r){var o=e('<input type="text" class="l-dialog-inputtext"/>');"function"==typeof n&&(r=n),"function"==typeof i?r=i:"boolean"==typeof i&&(n=i),"boolean"==typeof n&&n&&(o=e('<textarea class="l-dialog-textarea"></textarea>')),"string"!=typeof i&&"int"!=typeof i||o.val(i);var a=function(e,t,i){t.close(),r&&r("yes"==e.type,o.val())};return p={title:t,target:o,width:320,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:a,type:"yes"},{text:e.ligerDefaults.DialogString.cancel,onclick:a,type:"cancel"}]},e.ligerDialog(p)}}(jQuery),function(e){var t=e.ligerui;e.fn.ligerDrag=function(e){return t.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetDragManager=function(){return t.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},t.controls.Drag=function(e){t.controls.Drag.base.constructor.call(this,null,e)},t.controls.Drag.ligerExtend(t.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(n){i.disabled||2!=n.button&&(t.mouseDowned=!0,e(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,n)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){e(document).unbind("selectstart.drag")}),e(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(i){var n=this,r=this.options;if(!n.reverting&&!r.disabled){if(n.current={target:n.target,left:n.target.offset().left,top:n.target.offset().top,startX:i.pageX||i.screenX,startY:i.pageY||i.clientY},0==n.trigger("startDrag",[n.current,i]))return!1;if(n.cursor="move",n._createProxy(r.proxy,i),r.proxy&&!n.proxy)return!1;(n.proxy||n.handler).css("cursor",n.cursor),e(document).bind("mousemove.drag",function(){n._drag.apply(n,arguments)}),t.draggable.dragging=!0,e(document).bind("mouseup.drag",function(){t.draggable.dragging=!1,n._stop.apply(n,arguments)})}},_drag:function(t){var i=this;this.options;if(i.current){var n=t.pageX||t.screenX,r=t.pageY||t.screenY;i.current.diffX=n-i.current.startX,i.current.diffY=r-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(o,a){var l=e(a),s=l.offset();n>s.left&&n<s.left+l.width()&&r>s.top&&r<s.top+l.height()?i.receiveEntered[o]?i.trigger("dragOver",[a,i.proxy||i.target,t]):(i.receiveEntered[o]=!0,i.trigger("dragEnter",[a,i.proxy||i.target,t])):i.receiveEntered[o]&&(i.receiveEntered[o]=!1,i.trigger("dragLeave",[a,i.proxy||i.target,t]))}),i.hasBind("drag")?0!=i.trigger("drag",[i.current,t])?i._applyDrag():i.proxy?i._removeProxy():i._stop():i._applyDrag()}},_stop:function(t){var i=this,n=this.options;e(document).unbind("mousemove.drag"),e(document).unbind("mouseup.drag"),e(document).unbind("selectstart.drag"),i.receive&&i.receive.each(function(e,n){i.receiveEntered[e]&&i.trigger("drop",[n,i.proxy||i.target,t])}),i.proxy&&(n.revert?i.hasBind("revert")?0!=i.trigger("revert",[i.current,t])?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,t]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options;e=e||t.proxy||t.target;var n={},r=e==t.target;t.current.diffX&&(r||null==i.proxyX?n.left=t.current.left+t.current.diffX:n.left=t.current.startX+i.proxyX+t.current.diffX),t.current.diffY&&(r||null==i.proxyY?n.top=t.current.top+t.current.diffY:n.top=t.current.startY+i.proxyY+t.current.diffY),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(n,function(){t.reverting=!1})):e.css(n)},_setReceive:function(t){this.receiveEntered={},t&&(this.receive="string"==typeof t?e(t):t)},_setHandler:function(t){var i=this,n=this.options;i.handler=t?"string"==typeof t?e(t,n.target):t:e(n.target)},_setTarget:function(t){this.target=e(t)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(t,i){if(t){var n=this,r=this.options;"function"==typeof t?n.proxy=t.call(this.options.target,n,i):"clone"==t?(n.proxy=n.target.clone().css("position","absolute"),n.proxy.appendTo("body")):(n.proxy=e("<div class='l-draggable'></div>"),n.proxy.width(n.target.width()).height(n.target.height()),n.proxy.attr("dragid",n.id).appendTo("body")),n.proxy.css({left:null==r.proxyX?n.current.left:n.current.startX+r.proxyX,top:null==r.proxyY?n.current.top:n.current.startY+r.proxyY}).show()}},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)}})}(jQuery),function(e){e.fn.ligerEasyTab=function(){return e.ligerui.run.call(this,"ligerEasyTab",arguments)},e.fn.ligerGetEasyTabManager=function(){return e.ligerui.run.call(this,"ligerGetEasyTabManager",arguments)},e.ligerDefaults.EasyTab={},e.ligerMethos.EasyTab={},e.ligerui.controls.EasyTab=function(t,i){e.ligerui.controls.EasyTab.base.constructor.call(this,t,i)},e.ligerui.controls.EasyTab.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"EasyTab"},__idPrev:function(){return"EasyTab"},_extendMethods:function(){return e.ligerMethos.EasyTab},_render:function(){var t=this,i=this.options;t.tabs=e(this.element),t.tabs.addClass("l-easytab");var n=0;e("> div[lselected=true]",t.tabs).length>0&&(n=e("> div",t.tabs).index(e("> div[lselected=true]",t.tabs))),t.tabs.ul=e('<ul class="l-easytab-header"></ul>'),e("> div",t.tabs).each(function(i,r){var o=e("<li><span></span></li>");i==n&&e("span",o).addClass("l-selected"),e(r).attr("title")&&(e("span",o).html(e(r).attr("title")),e(r).removeAttr("title")),t.tabs.ul.append(o),e(r).hasClass("l-easytab-panelbox")||e(r).addClass("l-easytab-panelbox")}),t.tabs.ul.prependTo(t.tabs),e(".l-easytab-panelbox:eq("+n+")",t.tabs).show().siblings(".l-easytab-panelbox").hide(),e("> ul:first span",t.tabs).click(function(){if(!e(this).hasClass("l-selected")){var i=e("> ul:first span",t.tabs).index(this);e(this).addClass("l-selected").parent().siblings().find("span.l-selected").removeClass("l-selected"),e(".l-easytab-panelbox:eq("+i+")",t.tabs).show().siblings(".l-easytab-panelbox").hide()}}).not("l-selected").hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),t.set(i)}})}(jQuery),function(e){e.fn.ligerFilter=function(){return e.ligerui.run.call(this,"ligerFilter",arguments)},e.fn.ligerGetFilterManager=function(){return e.ligerui.run.call(this,"ligerGetFilterManager",arguments)},e.ligerDefaults.Filter={fields:[],operators:{},editors:{},buttonCls:null},e.ligerDefaults.FilterString={strings:{and:"并且",or:"或者",equal:"相等",notequal:"不相等",startwith:"以..开始",endwith:"以..结束",like:"相似",greater:"大于",greaterorequal:"大于或等于",less:"小于",lessorequal:"小于或等于",in:"包括在...",notin:"不包括...",addgroup:"增加分组",addrule:"增加条件",deletegroup:"删除分组"}},e.ligerDefaults.Filter.operators.string=e.ligerDefaults.Filter.operators.text=["equal","notequal","startwith","endwith","like","greater","greaterorequal","less","lessorequal","in","notin"],e.ligerDefaults.Filter.operators.number=e.ligerDefaults.Filter.operators.int=e.ligerDefaults.Filter.operators.float=e.ligerDefaults.Filter.operators.date=["equal","notequal","greater","greaterorequal","less","lessorequal","in","notin"],e.ligerDefaults.Filter.editors.string={create:function(t,i){var n=e("<input type='text'/>");return t.append(n),n.ligerTextBox(i.editor.options||{}),n},setValue:function(e,t){e.val(t)},getValue:function(e){return e.liger("option","value")},destroy:function(e){e.liger("destroy")}},e.ligerDefaults.Filter.editors.date={create:function(t,i){var n=e("<input type='text'/>");return t.append(n),n.ligerDateEditor(i.editor.options||{}),n},setValue:function(e,t){e.liger("option","value",t)},getValue:function(e,t){return e.liger("option","value")},destroy:function(e){e.liger("destroy")}},e.ligerDefaults.Filter.editors.number={create:function(t,i){var n=e("<input type='text'/>");t.append(n);var r={minValue:i.editor.minValue,maxValue:i.editor.maxValue};return n.ligerSpinner(e.extend(r,i.editor.options||{})),n},setValue:function(e,t){e.val(t)},getValue:function(e,t){return"int"==t.editor.type?parseInt(e.val(),10):parseFloat(e.val())},destroy:function(e){e.liger("destroy")}},e.ligerDefaults.Filter.editors.combobox={create:function(t,i){var n=e("<input type='text'/>");t.append(n);var r={data:i.data,slide:!1,valueField:i.editor.valueField||i.editor.valueColumnName,textField:i.editor.textField||i.editor.displayColumnName};return e.extend(r,i.editor.options||{}),n.ligerComboBox(r),n},setValue:function(e,t){e.liger("option","value",t)},getValue:function(e){return e.liger("option","value")},destroy:function(e){e.liger("destroy")}},e.ligerui.controls.Filter=function(t,i){e.ligerui.controls.Filter.base.constructor.call(this,t,i)},e.ligerui.controls.Filter.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Filter"},__idPrev:function(){return"Filter"},_init:function(){var t=this,i=this.options;e.ligerui.controls.Filter.base._init.call(this);for(var n in liger.editors){var r=liger.editors[n];!r||n in i.editors||(i.editors[n]=liger.getEditor(e.extend({type:n,master:t},r)))}},_render:function(){var t=this,i=this.options;t.set(i),e(t.element).bind("click",function(i){i.preventDefault();var n=e(i.target||i.srcElement),r=n.get(0).className;if(r.indexOf("addgroup")>=0){var o=n.parent().parent().parent().parent();t.addGroup(o)}else if(r.indexOf("deletegroup")>=0){var o=n.parent().parent().parent().parent();t.deleteGroup(o)}else if(r.indexOf("addrule")>=0){var o=n.parent().parent().parent().parent();t.addRule(o)}else if(r.indexOf("deleterole")>=0){var a=n.parent().parent();t.deleteRule(a)}})},_setFields:function(t){var i=this,n=this.options;i.group&&i.group.remove(),i.group=e(i._bulidGroupTableHtml()).appendTo(i.element),n.buttonCls&&i.group.find(".addgroup,.addrule,.deletegroup").addClass(n.buttonCls)},editors:{},editorCounter:0,addGroup:function(t){var i=this,n=this.options;t=e(t||i.group);var r=e(">tbody:first > tr:last",t),o=[];o.push('<tr class="l-filter-rowgroup"><td class="l-filter-cellgroup" colSpan="4">');var a=!t.hasClass("l-filter-group-alt");o.push(i._bulidGroupTableHtml(a,!0)),o.push("</td></tr>");var l=e(o.join(""));n.buttonCls&&l.find(".addgroup,.addrule,.deletegroup").addClass(n.buttonCls),r.before(l);var s=l.find("table:first");return n.addDefult&&i.addRule(s),s},deleteGroup:function(t){var i=this;this.options;e("td.l-filter-value",t).each(function(){var t=e(this).parent();e("select.fieldsel",t).unbind(),i.removeEditor(t)}),e(t).parent().parent().remove()},removeEditor:function(t){var i=this,n=this.options,r=e(t).attr("editortype"),o=e(t).attr("editorid"),a=i.editors[o];a&&n.editors[r].destroy&&n.editors[r].destroy(a),e("td.l-filter-value:first",t).html("")},setData:function(t,i){var n=this,r=this.options;i=i||n.group;var o=e(">tbody:first > tr:last",i);i&&i.find(">tbody:first > tr").not(o).remove(),e("select:first",o).val(t.op),t.rules&&e(t.rules).each(function(){var t=n.addRule(i),o=this.field,a=function(){for(var e=0;e<r.fields.length;e++)if(r.fields[e].name==o)return r.fields[e];return null}();e("select.opsel",t).html(n._bulidOpSelectOptionsHtml(this.type||"string",a.operator)),t.attr("fieldtype",this.type||"string"),e("select.opsel",t).val(this.op),e("select.fieldsel",t).val(this.field).trigger("change");var l=t.attr("editorid");if(l&&n.editors[l]){var a=n.getField(this.field);if(a&&a.editor){var s={field:a,filter:n};r.editors[a.editor.type].setValue.call(n,n.editors[l],this.value,s)}}else e(":text",t).val(this.value)}),t.groups&&e(t.groups).each(function(){var e=n.addGroup(i);n.setData(this,e)})},addRule:function(t){var i=this,n=this.options;t=t||i.group;var r=e(">tbody:first > tr:last",t),o=e(i._bulidRuleRowHtml());return r.before(o),n.fields.length&&i.appendEditor(o,n.fields[0]),e("select.fieldsel",o).bind("change",function(){var t=e(this).parent().next().find("select:first"),n=e(this).val();if(n){var r=i.getField(n),a=r.type||"string";a!=o.attr("fieldtype")&&(t.html(i._bulidOpSelectOptionsHtml(a,r.operator)),o.attr("fieldtype",a));var l=null,s=o.attr("editortype");i.enabledEditor(r)&&(l=r.editor.type),s&&i.removeEditor(o),l?i.appendEditor(o,r):(o.removeAttr("editortype").removeAttr("editorid"),e("td.l-filter-value:first",o).html('<input type="text" class="valtxt l-text" />'))}}),o},deleteRule:function(t){e("select.fieldsel",t).unbind(),this.removeEditor(t),e(t).remove()},appendEditor:function(t,i){var n=this,r=this.options;if(n.enabledEditor(i)){var o=e("td.l-filter-value:first",t).html(""),a=r.editors[i.editor.type],l=++n.editorCounter,s={filter:n};s.field=e.extend(!0,{},i),s.field.name=i.name+"_"+l,n.editors[l]=a.create.call(this,o,s),t.attr("editortype",i.editor.type).attr("editorid",l)}},getData:function(t){var i=this;this.options;t=t||i.group;var n={};return e("> tbody > tr",t).each(function(t,r){var o=e(r).hasClass("l-filter-rowlast");if(e(r).hasClass("l-filter-rowgroup")){var a=e("> td:first > table:first",r);a.length&&(n.groups||(n.groups=[]),n.groups.push(i.getData(a)))}else if(o)n.op=e(".groupopsel:first",r).val();else{var l=e("select.fieldsel:first",r).val(),s=i.getField(l),d=e(".opsel:first",r).val(),c=i._getRuleValue(r,s),u=e(r).attr("fieldtype")||"string";n.rules||(n.rules=[]),null!=c&&n.rules.push({field:l,op:d,value:c,type:u})}}),n},_getRuleValue:function(t,i){var n=this,r=this.options,o=e(t).attr("editorid"),a=e(t).attr("editortype"),l=n.editors[o],s={field:i,filter:n};return l?r.editors[a].getValue.call(n,l,s):e(".valtxt:first",t).val()},enabledEditor:function(e){var t=this.options;return!(!e.editor||!e.editor.type)&&e.editor.type in t.editors},getField:function(e){for(var t=this.options,i=0,n=t.fields.length;i<n;i++){var r=t.fields[i];if(r.name==e)return r}return null},_bulidGroupTableHtml:function(e,t){var i=this.options,n=[];return n.push('<table cellpadding="0" cellspacing="0" border="0" class="l-filter-group'),e&&n.push(" l-filter-group-alt"),n.push('"><tbody>'),n.push('<tr class="l-filter-rowlast"><td class="l-filter-rowlastcell" align="right" colSpan="4">'),n.push('<select class="groupopsel">'),n.push('<option value="and">'+i.strings.and+"</option>"),n.push('<option value="or">'+i.strings.or+"</option>"),n.push("</select>"),n.push('<input type="button" value="'+i.strings.addgroup+'" class="addgroup">'),n.push('<input type="button" value="'+i.strings.addrule+'" class="addrule">'),t&&n.push('<input type="button" value="'+i.strings.deletegroup+'" class="deletegroup">'),n.push("</td></tr>"),n.push("</tbody></table>"),n.join("")},_bulidRuleRowHtml:function(e){var t=this,i=this.options;e=e||i.fields;var n=[],r=e&&e.length&&e[0].type?e[0].type:"string";n.push('<tr fieldtype="'+r+'"><td class="l-filter-column">'),n.push('<select class="fieldsel">');for(var o=0,a=e.length;o<a;o++){var l=e[o];n.push('<option value="'+l.name+'"'),0==o&&n.push(" selected "),n.push(">"),n.push(l.display),n.push("</option>")}return n.push("</select>"),n.push("</td>"),n.push('<td class="l-filter-op">'),n.push('<select class="opsel">'),n.push(t._bulidOpSelectOptionsHtml(r,e&&e.length?e[0].operator:null)),n.push("</select>"),n.push("</td>"),n.push('<td class="l-filter-value">'),n.push('<input type="text" class="valtxt" />'),n.push("</td>"),n.push("<td>"),n.push('<div class="l-icon-cross deleterole"></div>'),n.push("</td>"),n.push("</tr>"),n.join("")},_bulidOpSelectOptionsHtml:function(e,t){var i=this.options,n=i.operators[e],r=[];t&&t.length&&(n=t.split(",")),n&&n.length||(n=["equal","notequal"]);for(var o=0,a=n.length;o<a;o++){var l=n[o];r[r.length]='<option value="'+l+'">',r[r.length]=i.strings[l],r[r.length]="</option>"}return r.join("")}}),e.ligerFilter=function(){},e.ligerFilter.filterTranslator={translateGroup:function(e){var t=[];if(null==e)return" 1==1 ";var i=!1;if(t.push("("),null!=e.rules)for(var n in e.rules)if("indexOf"!=n){var r=e.rules[n];i&&t.push(this.getOperatorQueryText(e.op)),t.push(this.translateRule(r)),i=!0}if(null!=e.groups)for(var o in e.groups){var a=e.groups[o];i&&t.push(this.getOperatorQueryText(e.op)),t.push(this.translateGroup(a)),i=!0}return t.push(")"),0==i?" 1==1 ":t.join("")},translateRule:function(e){var t=[];return null==e?" 1==1 ":"like"==e.op||"startwith"==e.op||"endwith"==e.op?(t.push("/"),"startwith"==e.op&&t.push("^"),t.push(e.value),"endwith"==e.op&&t.push("$"),t.push("/i.test("),t.push('o["'),t.push(e.field),t.push('"]'),t.push(")"),t.join("")):(t.push('o["'),t.push(e.field),t.push('"]'),t.push(this.getOperatorQueryText(e.op)),t.push('"'),t.push(e.value),t.push('"'),t.join(""))},getOperatorQueryText:function(e){switch(e){case"equal":return" == ";case"notequal":return" != ";case"greater":return" > ";case"greaterorequal":return" >= ";case"less":return" < ";case"lessorequal":return" <= ";case"and":return" && ";case"or":return" || ";default:return" == "}}},e.ligerFilter.getFilterFunction=function(t){e.isArray(t)&&(t={op:"and",rules:t});var i=" return  "+e.ligerFilter.filterTranslator.translateGroup(t);return new Function("o",i)}}(jQuery),function($){function getInvalidInf(e){var t=[];return $(e).each(function(e,i){var n=$(i.element).parents("li:first").prev("li:first").html(),r=i.message;t.push("<div>"+n+" "+r+"</div>")}),t.join("")}$.fn.ligerForm=function(){return $.ligerui.run.call(this,"ligerForm",arguments)},$.ligerui.getConditions=function(e,t){return e?(e=liger.get($(e)),e&&e.toConditions?e.toConditions():void 0):null},$.ligerDefaults=$.ligerDefaults||{},$.ligerDefaults.Form={width:null,inputWidth:180,labelWidth:90,space:40,rightToken:"：",labelAlign:"left",align:"left",autoTypePrev:"ui-",fields:[],appendID:!0,prefixID:null,toJSON:$.ligerui.toJSON,labelCss:null,fieldCss:null,spaceCss:null,onAfterSetFields:null,buttons:null,readonly:!1,editors:{},validate:null,unSetValidateAttr:!1,tab:null,clsTab:"ui-tabs-nav ui-helper-clearfix",clsTabItem:"ui-state-default",clsTabItemSelected:"ui-tabs-selected",clsTabContent:"ui-tabs-panel ui-widget-content"},$.ligerDefaults.FormString={invalidMessage:"存在{errorCount}个字段验证不通过，请检查!",detailMessage:"详细",okMessage:"确定"},$.ligerDefaults.Form.editors.textarea={create:function(e,t,i){var n=$('<textarea class="l-textarea" />'),r=(i.prefixID||"")+t.field.name;return $("#"+r).length&&(n=$("#"+r)),n.attr({id:r,name:r}),t.field.editor&&t.field.editor.height&&n.height(t.field.editor.height),i.readonly&&n.attr("readonly",!0),e.append(n),n},getValue:function(e,t){return e.val()},setValue:function(e,t,i){e.val(t)},resize:function(e,t,i,n){e.css({width:t-2}).parent().css("width","auto")}},$.ligerDefaults.Form.editors.hidden={create:function(e,t,i){var n=$('<input type = "hidden"  />'),r=(i.prefixID||"")+t.field.name;$("#"+r).length&&(n=$("#"+r)),n.attr($.extend({id:r,name:r},t.field.attr));var o=t.field.editor||t.field.options;return o&&n.val(o.value),e.append(n),n},getValue:function(e,t){return e.val()},setValue:function(e,t,i){e.val(t)}},$.ligerDefaults.Form_fields={name:null,textField:null,type:null,editor:null,label:null,labelInAfter:!1,afterContent:null,beforeContent:null,hideSpace:!1,hideLabel:!1,rightToken:null,attrRender:null,style:null,containerCls:null,newline:!0,op:null,vt:null,attr:null,validate:null},$.ligerDefaults.Form_editor={},$.ligerDefaults.Form.editorBulider=function(e){var t=this.options;if(e&&e.length){var i={},n=e.attr("ltype"),r={};t.readonly&&(i.readonly=!0),i=$.extend({width:(r.width||t.inputWidth)-2},r.options,r.editor,i);var o=null;if("autocomplete"==n&&(i.autocomplete=!0),e.is("select")&&"none"!=n)o=e.ligerComboBox(i);else if(e.is(":password")&&"none"!=n)o=e.ligerTextBox(i);else if(e.is(":radio")&&"none"!=n)o=e.ligerRadio(i);else if(e.is(":checkbox")&&"none"!=n)o=e.ligerCheckBox(i);else if(e.is("textarea")&&"none"!=n)e.addClass("l-textarea"),o={getValue:function(){return e.val()},setValue:function(t){e.val(t)}};else if(n&&"none"!=n){if(e.is(":text"))switch(n){case"select":case"combobox":case"autocomplete":o=e.ligerComboBox(i);break;case"spinner":o=e.ligerSpinner(i);break;case"date":o=e.ligerDateEditor(i);break;case"popup":o=e.ligerPopupEdit(i);break;case"currency":o=i.currency=!0;case"float":case"number":i.number=!0,o=e.ligerTextBox(i);break;case"int":case"digits":i.digits=!0;default:o=e.ligerTextBox(i)}else if(e.is(":hidden"))switch(n){case"select":case"combobox":case"autocomplete":o=e.ligerComboBox(i);break;case"checkboxlist":o=e.ligerCheckBoxList(i);break;case"radiolist":o=e.ligerRadioList(i);break;case"listbox":o=e.ligerListBox(i)}}else{var a=e.get(0).className;if(a){var l=t.autoTypePrev||"ui-";-1!=a.indexOf(l)&&(a=a.replace(l,""))}if(!a&&(e.is(":hidden")||e.is(":text"))&&e.attr("name"))o={getValue:function(){return e.val()},setValue:function(t){e.val(t)}};else switch(a){case"textbox":case"password":o=e.ligerTextBox(i);break;case"datepicker":o=e.ligerDateEditor(i);break;case"spinner":o=e.ligerSpinner(i);break;case"checkbox":o=e.ligerCheckBox(i);break;case"combobox":o=e.ligerComboBox(i);break;case"checkboxlist":o=e.ligerCheckBoxList(i);break;case"radiolist":o=e.ligerRadioList(i);break;case"listbox":o=e.ligerListBox(i)}}return o?{name:e.attr("name"),control:o}:null}},$.ligerui.controls.Form=function(e,t){$.ligerui.controls.Form.base.constructor.call(this,e,t)},$.ligerui.controls.Form.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"Form"},__idPrev:function(){return"Form"},_init:function(){var e=this,t=this.options;$.ligerui.controls.Form.base._init.call(this);for(var i in liger.editors){var n=liger.editors[i];!n||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},n)))}},_render:function(){var g=this,p=this.options,jform=$(this.element);if(g.form=jform.is("form")?jform:jform.parents("form:first"),$("input,select,textarea",jform).each(function(){var e=p.editorBulider.call(g,$(this));e&&(g.autoEditors=g.autoEditors||[],g.autoEditors.push(e))}),g.autoEditors&&g.autoEditors.length&&p.validate&&(g.validate=g.validate||{},$(g.autoEditors).each(function(){var name=this.name,control=this.control;if(name&&control.inputText&&control.inputText.attr("validate")){var v=null,vm=null;eval("v = "+control.inputText.attr("validate")),v&&(g.validate.rules=g.validate.rules||{},g.validate.rules[name]=v),control.inputText.attr("validateMessage")&&(eval("vm = "+control.inputText.attr("validateMessage")),vm&&(g.validate.messages=g.validate.messages||{},g.validate.messages[name]=vm))}})),g.set(p),g.initValidate(),p.buttons){var jbuttons=$('<ul class="l-form-buttons"></ul>').appendTo(jform);$(p.buttons).each(function(){var e=$("<li><div></div></li>").appendTo(jbuttons);$("div:first",e).ligerButton(this)})}g.element.id||(g.element.id=g.id),$("#"+g.element.id+" .togglebtn").live("click",function(){$(this).hasClass("togglebtn-down")?$(this).removeClass("togglebtn-down"):$(this).addClass("togglebtn-down");for(var e=$(this).parent().nextAll("ul,div"),t=0;t<e.length;t++){var i=$(e[t]);if(i.hasClass("l-group"))break;$(this).hasClass("togglebtn-down")?i.hide():i.show()}})},_setWidth:function(e){var t=this;this.options;e&&t.form.width(e)},getEditor:function(e){function t(t,r){for(var o=null==t?n.fields:t.fields,a=0,l=o.length;a<l;a++){var s=o[a],d=null==r?a:"tab"+r+"_"+a;if(s.name==e&&i.editors[d])return i.editors[d].control}}var i=this,n=this.options;if(i.editors){var r=t(null);if(r)return r;if(n.tab&&n.tab.items)for(var o=0;o<n.tab.items.length;o++){var a=n.tab.items[o],r=t(a,o);if(r)return r}return null}},getField:function(e){var t=this.options;return t.fields?t.fields[e]:null},toConditions:function(){var e=this,t=this.options,i=[];return $(t.fields).each(function(t,n){var r=n.name,o=(n.textField,e.editors[t]);if(o&&r){var a=o.editor.getValue.call(e,o.control,{field:n});null!=a&&""!==a&&i.push({op:n.operator||"like",field:r,value:a,type:n.type||"string"})}}),i},_preSetFields:function(e){var t=this.options,i=null,n=null;$(t.fields).each(function(e,r){(t.readonly||r.readonly||r.editor&&r.editor.readonly)&&delete r.validate,"hidden"!=r.type&&(r.type=r.type||"text",null==r.newline&&(r.newline=!0),i&&!r.group&&(r.group=i,r.groupicon=n),r.group&&(r.group=r.group.toString().replace(/^\s\s*/,"").replace(/\s\s*$/,""),i=r.group,n=r.groupicon))})},_setReadonly:function(e){var t=this;this.options;if(e&&t.editors)for(var i in t.editors){var n=t.editors[i].control;n&&n._setReadonly&&n._setReadonly(!0)}},_setFields:function(e){var t=this,i=this.options;$.isFunction(i.prefixID)&&(i.prefixID=i.prefixID(t));var n=$(t.element).addClass("l-form");t._initFieldsValidate({fields:e}),t._initFieldsHtml({panel:n,fields:e}),t._createEditors({fields:e}),t.trigger("afterSetFields")},_initFieldsValidate:function(e){var t=this,i=this.options,n=e.fields;t.validate=t.validate||{},n&&n.length&&$(n).each(function(e,n){var r=(n.name,!!(n.readonly||n.editor&&n.editor.readonly)),o=(i.prefixID||"")+(n.textField||n.id||n.name);n.validate&&!r&&(t.validate.rules=t.validate.rules||{},t.validate.rules[o]=n.validate,n.validateMessage&&(t.validate.messages=t.validate.messages||{},t.validate.messages[o]=n.validateMessage))})},_initFieldsHtml:function(e){var t=this,i=this.options,n=e.panel,r=e.fields,o=e.idPrev||t.id,a=e.tabindex;$(">.l-form-container",n).remove();var l=0,s=0;if(r&&r.length){t._preSetFields(r);var d=['<div class="l-form-container">'],c=!1,u=null,h=[];$(r).each(function(e,t){t.group||(t.group=""),-1==$.inArray(t.group,h)&&h.push(t.group)}),$(h).each(function(n,h){$(r).each(function(n,p){if(p.group==h){var g=$.inArray(p,r),f=p.id||p.name,v=p.newline,m=(i.prefixID||"")+(p.id||p.name);if(f){if("hidden"==p.type)return void($("#"+m).length||d.push('<div style="display:none" id="'+o+"|"+n+'"></div>'));var b=p.group&&p.group!=u;if((0==g||b)&&(v=!0),v&&(l=0,c&&(d.push("</ul>"),c=!1),b&&(d.push('<div class="l-group'),p.groupicon&&d.push(" l-group-hasicon"),d.push('">'),p.groupicon&&d.push('<img src="'+p.groupicon+'" />'),d.push("<span>"+p.group+"</span></div>"),u=p.group),d.push("<ul>"),c=!0),d.push('<li class="l-fieldcontainer'),v&&d.push(" l-fieldcontainer-first"),p.containerCls&&d.push(" "+p.containerCls),d.push('"'),p.style&&d.push(' style="'+p.style+'"'),d.push(' fieldindex="'+g+'"'),null!=a&&d.push(' tabindex="'+a+'"'),p.attrRender&&d.push(" "+p.attrRender()),d.push("><ul>"),p.beforeContent){var y=$.isFunction(p.beforeContent)?p.afterContent(p):p.beforeContent;y&&d.push(y)}if(p.hideLabel||p.labelInAfter||d.push(t._buliderLabelContainer(p,g)),d.push(t._buliderControlContainer(p,g,e.idPrev)),p.labelInAfter&&d.push(t._buliderLabelContainer(p,g)),p.afterContent){var w=$.isFunction(p.afterContent)?p.afterContent(p):p.afterContent;w&&d.push(w)}p.hideSpace||d.push(t._buliderSpaceContainer(p,g)),d.push("</ul></li>"),l+=p.width||i.inputWidth||0,l+=p.space||i.space||0,l+=p.labelWidth||i.labelWidth||0,l>s&&(s=l)}}})}),c&&(d.push("</ul>"),c=!1),d.push('<div class="l-clear"></div>'),d.push("</div>"),n.append(d.join("")),!i.width||i.width,$(".l-group .togglebtn",n).remove(),$(".l-group",n).width(.95*n.width()).append("<div class='togglebtn'></div>")}},_createEditors:function(e){var t=this,i=this.options,n=e.fields,r=e.idPrev||t.id,o=e.editPrev||"";t.editors=t.editors||{};$(t.element);$(n).each(function(e,n){var a=document.getElementById(r+"|"+e),l=i.editors[n.type],s=o+e;if(a){a=$(a);var d=t._createEditor(l,a,{field:n},a.width(),a.height());d&&(t.editors[s]&&t.editors[s].control&&t.editors[s].control.destroy&&t.editors[s].control.destroy(),t.editors[s]={control:d,editor:l})}})},getChanges:function(){var e=this,t=(this.options,e.data),i=e.getData();e.data=t;var n={};for(var r in t)i[r]!=t[r]&&(n[r]=i[r]);return n},setEnabled:function(e,t){function i(e,i){$(e).each(function(e,o){var a=o.name,l=(o.textField,null==i?"":"tab"+i+"_"),s=r.editors[l+e];s&&a&&s.editor&&s.editor.setEnabled&&-1!=$.inArray(a,n)&&s.editor.setEnabled(s.control,t)})}var n=[];$.isArray(e)&&(n=e),"string"==typeof e&&n.push(e);var r=this,o=this.options;if(i(o.fields),o.tab&&o.tab.items)for(var a=0;a<o.tab.items.length;a++){var l=o.tab.items[a];i(l.fields,a)}},setVisible:function(e,t){function i(e,i){$(e).each(function(e,o){var a=o.name;-1!=$.inArray(a,n)&&r._setFieldPanelVisible(i,e,t)})}var n=[];$.isArray(e)&&(n=e),"string"==typeof e&&n.push(e);var r=this,o=this.options;if(i(o.fields),o.tab&&o.tab.items)for(var a=0;a<o.tab.items.length;a++){var l=o.tab.items[a];i(l.fields,a)}},_setFieldPanelVisible:function(e,t,i){var n=this,r=this.options;null==e?$("li.l-fieldcontainer[fieldindex="+t+"]",n.element)[i?"show":"hide"]():$("div."+r.clsTabContent+"[data-index="+e+"] li.l-fieldcontainer[fieldindex="+t+"]",n.element)[i?"show":"hide"]()},getData:function(){function e(e,i){$(e).each(function(e,n){var r=n.name,o=n.textField,a=null==i?"":"tab"+i+"_",l=t.editors[a+e];if(l){if(r){var s=l.editor.getValue.call(t,l.control,{field:n});t._setValueByName(t.data,r,s)}if(o&&l.editor.getText){var s=l.editor.getText.call(t,l.control,{field:n});t._setValueByName(t.data,o,s)}}})}var t=this,i=this.options;if(t.data=t.formData||{},t.autoEditors&&t.autoEditors.length&&$(t.autoEditors).each(function(){var e=this.name,i=this.control;e&&i&&i.getValue&&(t.data[e]=i.getValue())}),e(i.fields),i.tab&&i.tab.items)for(var n=0;n<i.tab.items.length;n++){var r=i.tab.items[n];e(r.fields,n)}return t.data},_setData:function(e){this.setData(e)},setData:function(e){function t(e,t){$(e).each(function(e,n){var r=n.name,o=n.textField,a=null==t?"":"tab"+t+"_",l=i.editors[a+e];if(l){if(r&&r in i.data){var s=i._getValueByName(i.data,r);l.editor.setValue.call(i,l.control,s,{field:n})}if(o&&o in i.data){var d=i._getValueByName(i.data,o);l.editor.setText.call(i,l.control,d,{field:n})}}})}var i=this,n=this.options;if(i.data=e||{},i.autoEditors&&i.autoEditors.length&&$(i.autoEditors).each(function(){var e=this.name,t=this.control;e&&i.data[e]&&t&&t.setValue&&t.setValue(i.data[e])}),t(n.fields),n.tab&&n.tab.items)for(var r=0;r<n.tab.items.length;r++){var o=n.tab.items[r];t(o.fields,r)}},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(e){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(e){return null}},valid:function(){var e=this;this.options;return!e.form||!e.validator||e.form.valid()},showFieldError:function(e,t){var i=$("[name="+e+"]",this.element);i.hasClass("l-textarea")?i.addClass("l-textarea-invalid"):i.hasClass("l-text-field")&&i.parent().addClass("l-text-invalid"),$(i).removeAttr("title").ligerHideTip(),$(i).attr("title",t).ligerTip({distanceX:5,distanceY:-3,auto:!0})},hideFieldError:function(e){var t=$("[name="+e+"]",this.element);t.hasClass("l-textarea")?t.removeClass("l-textarea-invalid"):t.parent().removeClass("l-text-invalid"),$(t).removeAttr("title").ligerHideTip()},initValidate:function(){var e=this,t=this.options;if(!e.form||!t.validate||!e.form.validate)return void(e.validator=null);var i=1==t.validate?{}:t.validate,n=$.extend({errorPlacement:function(e,t){if($(e).html()){if(!t.attr("id")){var i=(new Date).getTime();t.attr("id",i),
e.attr("for",i)}t.hasClass("l-textarea")?t.addClass("l-textarea-invalid"):t.hasClass("l-text-field")&&t.parent().addClass("l-text-invalid"),$(t).removeAttr("title").ligerHideTip(),$(t).attr("title",$(e).html()).ligerTip({distanceX:5,distanceY:-3,auto:!0})}},success:function(e){var t=e.attr("for");if(t){var i=$("#"+t);i.hasClass("l-textarea")?i.removeClass("l-textarea-invalid"):i.parent().removeClass("l-text-invalid"),$(i).removeAttr("title").ligerHideTip()}}},i,{rules:e.validate.rules,messages:e.validate.messages});e.validator=e.form.validate(n)},setFieldValidate:function(e,t,i){var n=$("[name="+e+"]");if(n.length&&n.rules){var r=n.rules("remove");if(r&&(n.hasClass("l-text-field")&&n.parent().removeClass("l-text-invalid"),n.removeAttr("title").ligerHideTip(),r.required&&n.parents("li:first").next("li:first").find(".l-star").remove()),t){var o=$.extend({},t,{messages:i});n.rules("add",o),t.required&&n.parents("li:first").next("li:first").append('<span class="l-star">*</span>')}}},showInvalid:function(){var e=this,t=this.options;if(e.validator){var i=t.invalidMessage.replace("{errorCount}",e.validator.errorList.length);if(t.showInvalid)t.showInvalid(i);else{var n=$('<div><div class="invalid">'+i+'<a class="viewInvalidDetail" href="javascript:void(0)">'+t.detailMessage+'</a></div><div class="invalidDetail" style="display:none;">'+getInvalidInf(e.validator.errorList)+"</div></div>");n.find("a.viewInvalidDetail:first").bind("click",function(){$(this).parent().next("div.invalidDetail").toggle()}),$.ligerDialog.open({type:"error",width:350,showMax:!1,showToggle:!1,showMin:!1,target:n,buttons:[{text:t.okMessage,onclick:function(e,t){t.close()}}]})}}},_createEditor:function(e,t,i,n,r){var o=this.options;try{var a=e.create.call(this,t,i,o);return a&&e.resize&&e.resize.call(this,a,n,r,i),a}catch(e){return null}},_buliderLabelContainer:function(e){var t=this.options,i=e.label||e.display,n=e.labelWidth||e.labelwidth||t.labelWidth,r=e.labelAlign||t.labelAlign;if(i){var o=e.rightToken;null!=o&&""!=o||(o=t.rightToken),i+=o}var a=[];return a.push("<li"),t.labelCss&&a.push(' class="'+t.labelCss+'"'),a.push(' style="'),/px$/i.test(n)||/auto/i.test(n)||/%$/i.test(n)?a.push("width:"+n+";"):n&&a.push("width:"+n+"px;"),r&&"top"!=r&&a.push("text-align:"+r+";"),a.push('">'),i&&a.push(i),a.push("</li>"),a.join("")},_buliderControlContainer:function(e,t,i){var n=this,r=this.options,o=e.width||r.inputWidth,a=e.align||e.textAlign||e.textalign||r.align,l=[],i=i||n.id,s=e.labelAlign||r.labelAlign;return l.push("<li"),l.push(' id="'+i+"|"+t+'"'),r.fieldCss&&l.push(' class="'+r.fieldCss+'"'),l.push(' style="'),/px$/i.test(o)||/auto/i.test(o)||/%$/i.test(o)?l.push("width:"+o+";"):o&&l.push("width:"+o+"px;"),a&&l.push("text-align:"+a+";"),"top"==s&&l.push("clear:both;"),l.push('">'),l.push("</li>"),l.join("")},_buliderSpaceContainer:function(e){var t=this.options,i=e.space||e.spaceWidth||t.space;0!==e.space&&0!==e.spaceWidth||(i=0);var n=[];return n.push("<li"),t.spaceCss&&n.push(' class="'+t.spaceCss+'"'),n.push(' style="'),(/px$/i.test(i)||/auto/i.test(i)||/%$/i.test(i))&&n.push("width:"+i+";"),i&&n.push("width:"+i+"px;"),n.push('">'),e.validate&&e.validate.required&&n.push("<span class='l-star'>*</span>"),n.push("</li>"),n.join("")},_getInputAttrHtml:function(e){var t=[],i=(e.type||"text").toLowerCase();if("textarea"==i&&(e.cols&&t.push('cols="'+e.cols+'" '),e.rows&&t.push('rows="'+e.rows+'" ')),t.push('ltype="'+i+'" '),e.op&&t.push('op="'+e.op+'" '),e.vt&&t.push('vt="'+e.vt+'" '),e.attr)for(var n in e.attr)t.push(n+'="'+e.attr[n]+'" ');return t.join("")},_setTab:function(e){var t=this,i=this.options;if(e&&e.items){for(var n=$('<div class="l-form-tabs"></div>').appendTo(t.element),r=$('<ul class="'+i.clsTab+'" original-title="">').appendTo(n),o=0;o<e.items.length;o++){var a=e.items[o],l=$('<li class="'+i.clsTabItem+'"><a href="javascript:void(0)"></a></li>').appendTo(r),s=$('<div class="'+i.clsTabContent+'">').appendTo(n),d=t.id+"|tdb"+o;l.add(s).attr("data-index",o),a.id&&l.attr("data-id",a.id),l.find("a:first").text(a.title),t._initFieldsValidate({fields:a.fields}),t._initFieldsHtml({panel:s,fields:a.fields,tabindex:o,idPrev:d}),t._createEditors({fields:a.fields,idPrev:d,editPrev:"tab"+o+"_"})}r.find("li").click(function(){$(this).addClass(i.clsTabItemSelected)},function(){$(this).removeClass(i.clsTabItemSelected)}).click(function(){var e=$(this).attr("data-index");t.selectTab(e)}),t.selectTab(0)}},selectTab:function(e){var t=this,i=this.options,n=$(t.element).find(".l-form-tabs:first"),r=n.find(".ui-tabs-nav li"),o=n.find(".ui-tabs-panel");r.filter("[data-index="+e+"]").addClass(i.clsTabItemSelected),r.filter("[data-index!="+e+"]").removeClass(i.clsTabItemSelected),o.filter("[data-index="+e+"]").show(),o.filter("[data-index!="+e+"]").hide()},destroy:function(){try{var e=this;this.options;liger.remove(this);for(var t in e.editors){var i=e.editors[t].control;i&&i.destroy&&i.destroy()}$(e.element).remove()}catch(e){}}})}(jQuery),function($){function removeArrItem(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])&&e.splice(i,1)}var l=$.ligerui;$.fn.ligerGrid=function(e){return $.ligerui.run.call(this,"ligerGrid",arguments)},$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)},$.ligerDefaults.Grid={title:null,width:"auto",height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:28,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:3,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null},$.ligerDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"显示从{from}到{to}，总 {total} 条 。每页显示：{pagesize}",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"},$.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:!0,isSort:!1,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:!1,editor:null,render:null,textField:null},$.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null},$.ligerMethos.Grid=$.ligerMethos.Grid||{},$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{},$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{},$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{},$.ligerDefaults.Grid.sorters.date=function(e,t){return e<t?-1:e>t?1:0},$.ligerDefaults.Grid.sorters.int=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.ligerDefaults.Grid.sorters.float=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.ligerDefaults.Grid.sorters.string=function(e,t){return!!e&&e.localeCompare(t)},$.ligerDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.ligerDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?e.length>1?e[1]:e[0]:e},$.ligerui.controls.Grid=function(e,t){$.ligerui.controls.Grid.base.constructor.call(this,e,t)},$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var e=this,t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),0==t.isScroll&&(t.height="auto"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.detailToEdit&&(t.enabledEdit=!0,t.clickToEdit=!1,t.detail={height:"auto",onShowDetail:function(i,n,r){function o(){$(n).parent().parent().remove(),e.collapseDetail(i)}$(n).addClass("l-grid-detailpanel-edit"),e.beginEdit(i,function(e,i){var r=$("<div class='l-editbox'></div>");return r.width(120).height(t.rowHeight+1),r.appendTo(n),r}),$("<div class='l-clear'></div>").appendTo(n),$("<div class='l-button'>"+t.saveMessage+"</div>").appendTo(n).click(function(){e.endEdit(i),o()}),$("<div class='l-button'>"+t.applyMessage+"</div>").appendTo(n).click(function(){e.submitEdit(i)}),$("<div class='l-button'>"+t.cancelMessage+"</div>").appendTo(n).click(function(){e.cancelEdit(i),o()})}}),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){return t.tree.childrenName in e},t.tree.isExtend=t.tree.isExtend||function(e){return!("isextend"in e&&0==e.isextend)});for(var i in liger.editors){var n=liger.editors[i];!n||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},n)))}},_render:function(){var e=this,t=this.options;e.grid=$(e.element),e.grid.addClass("l-panel");var i=[];if(i.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>"),i.push("                    <div class='l-grid-loading'></div>"),i.push("        <div class='l-panel-topbar' style='display:none'><div class='l-panel-topbarinner'></div></div><div class='l-clear'></div>"),i.push("        <div class='l-panel-bwarp'>"),i.push("            <div class='l-panel-body'>"),i.push("                <div class='l-grid'>"),i.push("                    <div class='l-grid-dragging-line'></div>"),i.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                  <div class='l-grid1'>"),i.push("                      <div class='l-grid-header l-grid-header1'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body1'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                  <div class='l-grid2'>"),i.push("                      <div class='l-grid-header l-grid-header2'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                 </div>"),i.push("              </div>"),i.push("         </div>"),i.push("         <div class='l-panel-bar'>"),i.push("            <div class='l-panel-bbar-inner'>"),i.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>"),i.push("            <div class='l-bar-group l-bar-selectpagesize'></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-clear'></div>"),i.push("            </div>"),i.push("         </div>"),e.grid.html(i.join("")),e.header=$(".l-panel-header:first",e.grid),e.body=$(".l-panel-body:first",e.grid),e.toolbar=$(".l-panel-bar:first",e.grid),e.popup=$(".l-grid-popup:first",e.grid),e.gridloading=$(".l-grid-loading:first",e.grid),e.draggingline=$(".l-grid-dragging-line",e.grid),e.topbar=$(".l-panel-topbarinner:first",e.grid),e.gridview=$(".l-grid:first",e.grid),e.gridview.attr("id",e.id+"grid"),e.gridview1=$(".l-grid1:first",e.gridview),e.gridview2=$(".l-grid2:first",e.gridview),e.gridheader=$(".l-grid-header:first",e.gridview2),e.gridbody=$(".l-grid-body:first",e.gridview2),t.autoFilter){var n={text:"高级查询",gridid:e.id,click:function(){e.showFilter()},icon:"search2"};t.toolbar&&t.toolbar.items?t.toolbar.items.push(n):t.toolbar={items:[n]}}e.f={},e.f.gridheader=$(".l-grid-header:first",e.gridview1),e.f.gridbody=$(".l-grid-body:first",e.gridview1),e.currentData=null,e.changedCells={},e.editors={},e.editor={editing:!1},e.cacheData={},"auto"==t.height&&e.bind("SysGridHeightChanged",function(){e.enabledFrozen()&&e.gridview.height(Math.max(e.gridview1.height(),e.gridview2.height()))});var r=$.extend({},t);this._bulid(),this._setColumns(t.columns),delete r.columns,delete r.data,delete r.url,e.set(r),t.delayLoad||(t.url?e.set({url:t.url}):t.data&&e.set({data:t.data}))},_setFrozen:function(e){e?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(e){this.grid.addClass(e)},_setLoadingMessage:function(e){this.gridloading.html(e)},_setToolbar:function(e){var t=this,i=this.options;if(e&&$.fn.ligerToolBar){if(t.topbar.parent().show(),t.toolbarManager=t.topbar.ligerToolBar(e),e.title){var n=$("<div class='l-panel-topbartitle'><span>"+e.title+"</span></div>");e.icon&&(n.append("<img class='l-panel-topbaricon' src='"+e.icon+"'></img>"),n.addClass("l-panel-topbartitle-hasicon")),t.topbar.parent().append(n)}i.toolbarShowInLeft&&t.topbar.addClass("l-panel-topbarinner-left")}else t.topbar.parent().remove()},isHorizontalScrollShowed:function(){var e=this,t=e.gridbody.find(".l-grid-body-inner:first");return!!t.length&&e.gridbody.width()-20<t.width()},_setHeight:function(e){var t=this,i=this.options;if(t.unbind("SysGridHeightChanged"),"auto"==e)return void t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(t.gridview1.height(),t.gridview2.height()))});if((e=t._calculateGridBodyHeight(e))>0){if(t.gridbody.height(e),i.frozen){var n=t.gridbody.width(),r=$(":first-child",t.gridbody).width();r&&r+18>n?e>18&&t.f.gridbody.height(e-18):t.f.gridbody.height(e)}var o=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;t.gridview.height(e+o)}t._updateHorizontalScrollStatus.ligerDefer(t,10)},_calculateGridBodyHeight:function(e){var t=this,i=this.options;return"string"==typeof e&&e.indexOf("%")>0&&(e=i.inWindow?$(window).height()*parseInt(e)*.01:t.grid.parent().height()*parseInt(e)*.01),i.title&&(e-=24),(i.usePager&&i.pagerRender||!i.scrollToPage)&&(e-=t.toolbar.outerHeight()),i.totalRender&&(e-=25),i.toolbar&&(e-=t.topbar.outerHeight()),e-=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("l-grid-hashorizontal"):e.gridview.removeClass("l-grid-hashorizontal")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),t>0&&e.gridview2.css({width:t})}},_setWidth:function(e){var t=this;this.options;t.enabledFrozen()&&t._onResize()},_setUrl:function(e){this.options.url=e,e?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(e){var t=this,i=t.get("parms");i||(i={}),i instanceof Array?removeArrItem(i,function(t){return t.name==e}):delete i[e],t.set("parms",i)},setParm:function(e,t){var i=this,n=i.get("parms");n||(n={}),n instanceof Array?(removeArrItem(n,function(t){return t.name==e}),n.push({name:e,value:t})):n[e]=t,i.set("parms",n)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(e,t){var i=this,n=this.options;i.loading=!0,i.trigger("loadData");var r=null,o=!0;"function"==typeof e?(r=e,i.lastData?i.data=i.lastData:(i.data=i.currentData,i.data||(i.data={}),i.data[n.root]||(i.data[n.root]=[]),i.lastData=i.data),o=!1):"boolean"==typeof e?o=e:"object"==typeof e&&e?(o=!1,n.dataType="local",n.data=e):"number"==typeof e&&(n.newPage=e),n.newPage||(n.newPage=1),"server"==n.dataAction&&(n.sortOrder||(n.sortOrder="asc"));var a=[];if(n.parms){var l=$.isFunction(n.parms)?n.parms():n.parms;if(l.length){$(l).each(function(){a.push({name:this.name,value:this.value})});for(var s=l.length-1;s>=0;s--)l[s].temp&&l.splice(s,1)}else if("object"==typeof l)for(var d in l)a.push({name:d,value:l[d]})}"server"==n.dataAction&&(n.usePager&&(a.push({name:n.pageParmName,value:n.newPage}),a.push({name:n.pagesizeParmName,value:n.pageSize})),n.sortName&&(a.push({name:n.sortnameParmName,value:n.sortName}),a.push({name:n.sortorderParmName,value:n.sortOrder}))),$(".l-bar-btnload span",i.toolbar).addClass("l-disabled"),"local"==n.dataType?(i.filteredData=$.extend(!0,{},n.data||i.currentData),r&&(i.filteredData[n.root]=i._searchData(i.filteredData[n.root],r)),n.usePager?i.currentData=i._getCurrentPageData(i.filteredData):i.currentData=i.filteredData,i._convertTreeData(),i._showData()):"local"!=n.dataAction||o?i.loadServerData(a,r,t):i.data&&i.data[n.root]&&(i.filteredData=i.data,r&&(i.filteredData[n.root]=i._searchData(i.filteredData[n.root],r)),i.currentData=i._getCurrentPageData(i.filteredData),i._convertTreeData(),i._showData()),i.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField&&(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length)},loadServerData:function(e,t,i){var n=this,r=this.options,o=r.url;$.isFunction(o)&&(o=o.call(n));var a=$.isFunction(r.urlParms)?r.urlParms.call(n):r.urlParms;if(a)for(name in a)o+=-1==o.indexOf("?")?"?":"&",o+=name+"="+a[name];var l={type:r.method,url:o,data:e,async:r.async,dataType:"json",beforeSend:function(){n.hasBind("loading")?n.trigger("loading"):n.toggleLoading(!0)},success:function(e){if(n.trigger("success",[e,n]),!e||!e[r.root]||!e[r.root].length)return n.currentData=n.data={},n.currentData[r.root]=n.data[r.root]=[],e&&e[r.record]?n.currentData[r.record]=n.data[r.record]=e[r.record]:n.currentData[r.record]=n.data[r.record]=0,n._convertTreeData(),void n._showData(i);n.data=e,null!=n.data[r.record]&&(n.cacheData.records=n.data[r.record]),"server"==r.dataAction?(n.currentData=n.data,null==n.currentData[r.record]&&n.cacheData.records&&(n.currentData[r.record]=n.cacheData.records)):(n.filteredData=n.data,t&&(n.filteredData[r.root]=n._searchData(n.filteredData[r.root],t)),r.usePager?n.currentData=n._getCurrentPageData(n.filteredData):n.currentData=n.filteredData),n._convertTreeData(),n._showData.ligerDefer(n,10,[i])},complete:function(){n.trigger("complete",[n]),n.hasBind("loaded")?n.trigger("loaded",[n]):n.toggleLoading.ligerDefer(n,10,[!1])},error:function(e,t,i){n.currentData=n.data={},n.currentData[r.root]=n.data[r.root]=[],n.currentData[r.record]=n.data[r.record]=0,n.toggleLoading.ligerDefer(n,10,[!1]),$(".l-bar-btnload span",n.toolbar).removeClass("l-disabled"),n.trigger("error",[e,t,i])}};r.contentType&&(l.contentType=r.contentType),"application/json"==r.contentType&&"string"!=typeof parms&&(l.data=function(e){if(!e)return"null";var t=e,i={};if($.isArray(t))for(var n=0;n<t.length;n++)i[t[n].name]=t[n].value;else i=t;return liger.toJSON(i)}(e)),$.ajax(l)},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(e,t,i,n,r){var o=e.create.call(this,t,i);return e.setValue&&e.setValue.call(this,o,i.value,i),i.column.editor&&i.column.editor.initSelect&&(o.element&&$(o.element).is(":text")&&$(o.element).select(),o instanceof jQuery&&(o.is(":text")?o.select():o.find(":text").select())),e.setText&&i.column.textField&&e.setText.call(this,o,i.text,i),e.resize&&e.resize.call(this,o,n,r,i),o},beginEdit:function(e,t){var i=this,n=this.options;if(n.enabledEdit){var r=i.getRow(e);if(!r._editing&&0!=i.trigger("beginEdit",{record:r,rowindex:r.__index})){i.editors[r.__id]={},r._editing=!0,i.reRender({rowdata:r}),t=t||function(e,t){var n=i.getCellObj(e,t),r=$(n).html("");return i.setCellEditing(e,t,!0),r};for(var o=0,a=i.columns.length;o<a;o++){var l=i.columns[o];if(l.name&&l.editor&&l.editor.type&&n.editors[l.editor.type]){var s=n.editors[l.editor.type],d={record:r,value:i._getValueByName(r,l.name),column:l,rowindex:r.__index,grid:i},c=t(r,l),u=c.width(),h=c.height(),p=i._createEditor(s,c,d,u,h);i.editors[r.__id][l.__id]={editor:s,input:p,editParm:d,container:c}}}i.trigger("afterBeginEdit",{record:r,rowindex:r.__index})}}},cancelEdit:function(e){var t=this;if(void 0==e)for(var i in t.editors)t.cancelEdit(i);else{var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.trigger("beforeCancelEdit",{record:n,rowindex:n.__index}))return;for(var r in t.editors[n.__id]){var o=t.editors[n.__id][r];o.editor.destroy&&o.editor.destroy(o.input,o.editParm)}delete t.editors[n.__id],delete n._editing,t.reRender({rowdata:n})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(void 0==e)for(var i in t.editors)t.submitEdit(i);else{var n=t.getRow(e),r={};if(!n||!t.editors[n.__id])return;for(var o in t.editors[n.__id]){var a=t.editors[n.__id][o],l=a.editParm.column;l.name&&(r[l.name]=a.editor.getValue(a.input,a.editParm)),l.textField&&a.editor.getText&&(r[l.textField]=a.editor.getText(a.input,a.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:n,rowindex:n.__index,newdata:r}))return!1;t.updateRow(n,r),t.trigger("afterSubmitEdit",{record:n,rowindex:n.__index,newdata:r})}},_enabledEditByCell:function(e){var t=this,i=(this.options,t.getColumn(e));return!!i&&(i.editor&&i.editor.type)},endEditToNext:function(){function e(){return r.parent("tr").next(".l-grid-row").find("td:first")}var t=this,i=(this.options,t.editor),n=null,r=null;if(i){var o=i.editParm,a=o.column,l=($.inArray(a,t.columns),t.getCellObj(o.record,o.column));if(r=$(l),n=r.next(),n.length||(n=e()),n.length)for(;!t._enabledEditByCell(n.get(0));)r=n,n=n.next(),n.length||(n=e())}t.endEdit(),n&&n.length&&t._applyEditor(n.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){var i=t.editor;t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(void 0!=e){var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.submitEdit(e))return!1;for(var r in t.editors[n.__id]){var i=t.editors[n.__id][r];i.editor.destroy&&i.editor.destroy(i.input,i.editParm)}delete t.editors[n.__id],delete n._editing,t.trigger("afterEdit",{record:n,rowindex:n.__index})}else for(var o in t.editors)t.endEdit(o);t._fixHeight.ligerDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return!!this.options.checkbox},enabledFrozen:function(){var e=this,t=this.options;if(!t.frozen)return!1;var i=e.columns||[];if(e.enabledDetail()&&t.frozenDetail||e.enabledCheckbox()&&t.frozenCheckbox||t.frozenRownumbers&&t.rownumbers)return!0;for(var n=0,r=i.length;n<r;n++)if(i[n].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return!!this.enabledDetail()&&!!this.options.detailToEdit},enabledDetail:function(){return!(!this.options.detail||!this.options.detail.onShowDetail)},enabledGroup:function(){return!!this.options.groupColumnName},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.ligerDefer(this,10,[t])}this.reRender.ligerDefer(this,20)}},removeRange:function(e){var t=this;this.options;$.each(e,function(){t._removeData(this)}),t.reRender()},remove:function(e){var t=this;this.options,t.getRow(e);t._removeData(e),t.reRender()},deleteRange:function(e){var t=this;this.options;$.each(e,function(){t._deleteData(this)}),t.reRender()},deleteRow:function(e){var t=this,i=(this.options,t.getRow(e));i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,n=t.getRow(e);if(n[i.statusName]="delete",i.tree){var r=t.getChildren(n,!0);if(r)for(var o=0,a=r.length;o<a;o++)r[o][i.statusName]="delete"}t.deletedRows=t.deletedRows||[],t.deletedRows.push(n),t._removeSelected(n)},updateCell:function(e,t,i){var n,r,o,a=this,l=this.options;if("string"!=typeof e){if("number"==typeof e)n=a.columns[e],o=a.getRow(i),r=a.getCellObj(o,n);else if("object"==typeof e&&e.__id)n=e,o=a.getRow(i),r=a.getCellObj(o,n);else{r=e;var s=r.id.split("|"),d=s[s.length-1];n=a._columns[d];var c=$(r).parent();o=o||a.getRow(c[0])}null!=t&&n.name&&(a._setValueByName(o,n.name,t),"add"!=o[l.statusName]&&(o[l.statusName]="update"),a.isDataChanged=!0),a.reRender({rowdata:o,column:n})}else for(var u=0,h=a.columns.length;u<h;u++)a.columns[u].name==e&&a.updateCell(u,t,i)},addRows:function(e,t,i,n){var r=this;this.options;$(e).each(function(){r.addRow(this,t,i,n)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var n=this,r=this.options;if(n.recordNumber++,e.__id=n._createRowid(),e.__previd=t,t&&-1!=t){var o=n.records[t];if(o.__nextid&&-1!=o.__nextid){var a=n.records[o.__nextid];a&&(a.__previd=e.__id)}o.__nextid=e.__id,e.__index=o.__index+1}else e.__index=0;if(r.tree){if(i&&-1!=i){var l=n.records[i];e.__pid=i,e.__level=l.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=!!e[r.tree.childrenName]}return e[r.statusName]=e[r.statusName]||"nochanged",n.rows[e.__index]=e,n.records[e.__id]=e,e},_getRows:function(e){function t(e){if(e&&e.length)for(var r=0,o=e.length;r<o;r++){var a=e[r];n.push(a),a[i.tree.childrenName]&&t(a[i.tree.childrenName])}}var i=this.options,n=[];return t(e),n},_updateGridData:function(){function e(r,o){if(r&&r.length)for(var a=0,l=r.length;a<l;a++){var s=r[a];t.formatRecord(s),"delete"!=s[i.statusName]&&(t._addNewRecord(s,n,o),n=s.__id,s.__hasChildren&&e(s[i.tree.childrenName],s.__id))}}var t=this,i=this.options;t.recordNumber=0,t.rows=[],t.records={};var n=-1;return e(t.currentData[i.root],-1),t.rows},_moveData:function(e,t,i){var n,r,o=this,a=(this.options,o.getRow(e)),l=o.getRow(t),s=o._getParentChildren(a);n=$.inArray(a,s),s.splice(n,1),s=o._getParentChildren(l),r=$.inArray(l,s),s.splice(r+(i?1:0),0,a)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var n in e)this._moveData(e[n],t,i);this.reRender()},up:function(e){var t=this,i=(this.options,t.getRow(e)),n=t._getParentChildren(i),r=$.inArray(i,n);if(-1!=r&&0!=r){var o=t.getSelected();t.move(i,n[r-1],!1),t.select(o)}},down:function(e){var t=this,i=(this.options,t.getRow(e)),n=t._getParentChildren(i),r=$.inArray(i,n);if(-1!=r&&r!=n.length-1){var o=t.getSelected();t.move(i,n[r+1],!0),t.select(o)}},addRow:function(e,t,i,n){var r=this,o=this.options;if(e=e||{},r._addData(e,n,t,i),r.reRender(),e[o.statusName]="add",o.tree){var a=r.getChildren(e,!0);if(a)for(var l=0,s=a.length;l<s;l++)a[l][o.statusName]="add"}return r.isDataChanged=!0,o.total=o.total?o.total+1:1,o.pageCount=Math.ceil(o.total/o.pageSize),r._buildPager(),r.trigger("SysGridHeightChanged"),r.trigger("afterAddRow",[e]),e},updateRow:function(e,t){var i=this,n=this.options,r=i.getRow(e);return i.isDataChanged=!0,$.extend(r,t||{}),"add"!=r[n.statusName]&&(r[n.statusName]="update"),i.reRender.ligerDefer(i,10,[{rowdata:r}]),r},setCellEditing:function(e,t,i){var n=this,r=(this.options,n.getCellObj(e,t)),o=i?"addClass":"removeClass";if($(r)[o]("l-grid-row-cell-editing"),0!=e.__id){var a=$(n.getRowObj(e.__id)).prev();if(!a.length||a.length<=0||null==a[0].id||""==a[0].id)return;var l=n.getRow(a[0]),s=n.getCellObj(l,t);if(!s)return;$(s)[o]("l-grid-row-cell-editing-topcell")}if(-1!=t.__previd&&null!=t.__previd){var s=$(n.getCellObj(e,t)).prev();$(s)[o]("l-grid-row-cell-editing-leftcell")}},reRender:function(e){function t(e){if(e.totalSummary)for(var t=0;t<i.totalNumber;t++){var r=document.getElementById(i.id+"|total"+t+"|"+e.__id);$("div:first",r).html(i._getTotalCellContent(e,i.groups&&i.groups[t]?i.groups[t]:i.currentData[n.root]))}}var i=this,n=this.options;e=e||{};var r=e.rowdata,o=e.column,a=e.totalOnly;if(!(o&&(o.isdetail||o.ischeckbox)||r&&"delete"==r[n.statusName]))if(a)$(i.columns).each(function(){t(this)});else if(r&&o){var l=i.getCellObj(r,o);$(l).html(i._getCellHtml(r,o)),o.issystem||i.setCellEditing(r,o,!1)}else if(r)$(i.columns).each(function(){i.reRender({rowdata:r,column:this})});else if(o){for(var s in i.records)i.reRender({rowdata:i.records[s],column:o});t(o)}else i._showData()},
getData:function(e,t){var i=this,n=this.options,r=[];void 0==t&&(t=!0);for(var o in i.records){var a=$.extend(!0,{},i.records[o]);a[n.statusName]!=e&&void 0!=e||r.push(i.formatRecord(a,t))}return r},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var e=this,t=(this.options,[]);return this.deletedRows&&$(this.deletedRows).each(function(){var i=$.extend(!0,{},this);t.push(e.formatRecord(i,!1))}),$.merge(t,e.getData("update",!1)),$.merge(t,e.getData("add",!1)),t},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"==typeof e&&1==e.nodeType){var i=e.id.split("|"),n=i[i.length-1];return t._columns[n]}return e},getColumnByName:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i];return null},getColumnType:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){for(var e=this,t=(this.options,0);t<e.columns.length;t++)if(e.columns[t].totalSummary)return!0;return!1},getColumns:function(e){var t=this,i=(this.options,[]);for(var n in t._columns){var r=t._columns[n];void 0!=e?r.__level==e&&i.push(r):r.__leaf&&i.push(r)}return i},changeSort:function(e,t){var i=this,n=this.options;if(i.loading)return!0;if("local"==n.dataAction){var r=i.getColumnType(e);if(i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[n.root])return;n.sortName==e?i.sortedData[n.root].reverse():i.sortedData[n.root].sort(function(t,n){return i._compareData(t,n,e,r)}),n.usePager?i.currentData=i._getCurrentPageData(i.sortedData):i.currentData=i.sortedData,i._showData()}n.sortName=e,n.sortOrder=t,"server"==n.dataAction&&i.loadData(n.where)},changePage:function(e){var t=this,i=this.options;if(t.loading)return!0;if("local"!=i.dataAction&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;switch(i.pageCount=parseInt($(".pcontrol span",t.toolbar).html()),e){case"first":if(1==i.page)return;i.newPage=1;break;case"prev":if(1==i.page)return;i.page>1&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":var n=parseInt($(".pcontrol input",t.toolbar).val());isNaN(n)&&(n=1),n<1?n=1:n>i.pageCount&&(n=i.pageCount),$(".pcontrol input",t.toolbar).val(n),i.newPage=n}if(i.newPage==i.page)return!1;if(1==i.newPage?($(".l-bar-btnfirst span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnfirst span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).removeClass("l-disabled")),i.newPage==i.pageCount?($(".l-bar-btnlast span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnlast span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).removeClass("l-disabled")),t.trigger("changePage",[i.newPage]),"server"==i.dataAction)i.parms||(i.parms=[]),$.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",t.loadData(i.where);else{if(t.currentData=t._getCurrentPageData(t.filteredData),i.tree){var r=i.tree.childrenName;$(t.filteredData[i.root]).each(function(e,t){t[r]&&(t[r]=[])}),t._convertTreeData()}t._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){var i=this;this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",-1!=e.__pid){for(var n=!0,r=this._columns[e.__pid],o=0;r&&o<r.columns.length;o++)if(!r.columns[o]._hide){n=!1;break}n&&(r._hide=!0,document.getElementById(r.__domid).style.display="none",this._setColumnVisible(r,t))}}else if(e._hide=!1,document.getElementById(e.__domid).style.display="",-1!=e.__pid){var r=i._columns[e.__pid];r._hide&&(document.getElementById(r.__domid).style.display="",this._setColumnVisible(r,t))}},toggleCol:function(e,t,i){var n,r=this;this.options;if("number"==typeof e)n=r.columns[e];else if("object"==typeof e&&e.__id)n=e;else if("string"==typeof e){if(!r._isColumnId(e))return void $(r.columns).each(function(){this.name==e&&r.toggleCol(this,t,i)});n=r._columns[e]}if(n){var o=n.__leafindex,a=document.getElementById(n.__domid);if(a){a=$(a);var l=[];for(var s in r.rows){var d=r.getCellObj(r.rows[s],n);d&&l.push(d)}for(var s=0;s<r.totalNumber;s++){var c=document.getElementById(r.id+"|total"+s+"|"+n.__id);c&&l.push(c)}var u=n._width;t&&n._hide?(n.frozen?r.f.gridtablewidth+=parseInt(u)+1:r.gridtablewidth+=parseInt(u)+1,r._setColumnVisible(n,!1),$(l).show()):t||n._hide||(n.frozen?r.f.gridtablewidth-=parseInt(u)+1:r.gridtablewidth-=parseInt(u)+1,r._setColumnVisible(n,!0),$(l).hide()),n.frozen?($("div:first",r.f.gridheader).width(r.f.gridtablewidth),$("div:first",r.f.gridbody).width(r.f.gridtablewidth)):($("div:first",r.gridheader).width(r.gridtablewidth+40),r.gridtablewidth?$("div:first",r.gridbody).width(r.gridtablewidth):$("div:first",r.gridbody).css("width","auto")),r._updateFrozenWidth(),i||$(":checkbox[columnindex="+o+"]",r.popup).each(function(){if(this.checked=t,$.fn.ligerCheckBox){var e=$(this).ligerGetCheckBoxManager();e&&e.updateStyle()}})}}},setColumnWidth:function(e,t){var i=this,n=this.options;if(t){t=parseInt(t,10);var r;if("number"==typeof e)r=i.columns[e];else if("object"==typeof e&&e.__id)r=e;else if("string"==typeof e){if(!i._isColumnId(e))return void $(i.columns).each(function(){this.name==e&&i.setColumnWidth(this,t)});r=i._columns[e]}if(r){var o=n.minColumnWidth;r.minWidth&&(o=r.minWidth),t=t<o?o:t;var a=t-r._width;if(0!=i.trigger("beforeChangeColumnWidth",[r,t])){r._width=t,r.frozen?(i.f.gridtablewidth+=a,$("div:first",i.f.gridheader).width(i.f.gridtablewidth),$("div:first",i.f.gridbody).width(i.f.gridtablewidth)):(i.gridtablewidth+=a,$("div:first",i.gridheader).width(i.gridtablewidth+40),$("div:first",i.gridbody).width(i.gridtablewidth)),$(document.getElementById(r.__domid)).css("width",t);var l=[];for(var s in i.records){var d=i.getCellObj(i.records[s],r);if(d&&l.push(d),!i.enabledDetailEdit()&&i.editors[s]&&i.editors[s][r.__id]){var c=i.editors[s][r.__id];c.editor.resize&&c.editor.resize(c.input,t,c.container.height(),c.editParm)}}for(var u=0;u<i.totalNumber;u++){var h=document.getElementById(i.id+"|total"+u+"|"+r.__id);h&&l.push(h)}$(l).css("width",t).find("> div.l-grid-row-cell-inner:first").css("width",t-8),i._updateFrozenWidth(),i._updateHorizontalScrollStatus.ligerDefer(i,10),i.trigger("afterChangeColumnWidth",[r,t])}}}},changeHeaderText:function(e,t){var i,n=this,r=this.options;if("number"==typeof e)i=n.columns[e];else if("object"==typeof e&&e.__id)i=e;else if("string"==typeof e){if(!n._isColumnId(e))return void $(n.columns).each(function(){this.name==e&&n.changeHeaderText(this,t)});i=n._columns[e]}if(i){var o=i.__leafindex,a=document.getElementById(i.__domid);$(".l-grid-hd-cell-text",a).html(t),r.allowHideColumn&&$(":checkbox[columnindex="+o+"]",n.popup).parent().next().html(t)}},changeCol:function(e,t,i){var n=this,r=this.options;if(e&&t){var o=n.getColumn(e),a=n.getColumn(t);o.frozen=a.frozen;var l,s,d=-1==o.__pid?r.columns:n._columns[o.__pid].columns,c=-1==a.__pid?r.columns:n._columns[a.__pid].columns;l=$.inArray(o,d),s=$.inArray(a,c);var u=d==c;o.__level,a.__level;c.splice(s+(i?1:0),0,o),u?i?d.splice(l,1):d.splice(l+1,1):d.splice(l,1),n._setColumns(r.columns),n.reRender()}},collapseDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var n=0,r=t.columns.length;n<r;n++)if(t.columns[n].isdetail){var o=t.getRowObj(i),a=t.getCellObj(i,t.columns[n]);return $(o).next("tr.l-grid-detailpanel").hide(),$(".l-grid-row-cell-detailbtn:first",a).removeClass("l-open"),void t.trigger("SysGridHeightChanged")}},extendDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var n=0,r=t.columns.length;n<r;n++)if(t.columns[n].isdetail){var o=t.getRowObj(i),a=t.getCellObj(i,t.columns[n]);return $(o).next("tr.l-grid-detailpanel").show(),$(".l-grid-row-cell-detailbtn:first",a).addClass("l-open"),void t.trigger("SysGridHeightChanged")}},getParent:function(e){var t=this;if(!this.options.tree)return null;var i=t.getRow(e);return i&&i.__pid in t.records?t.records[i.__pid]:null},getChildren:function(e,t){function i(e){if(e[r.tree.childrenName])for(var n=0,o=e[r.tree.childrenName].length;n<o;n++){var l=e[r.tree.childrenName][n];"delete"!=l[r.statusName]&&(a.push(l),t&&i(l))}}var n=this,r=this.options;if(!r.tree)return null;var o=n.getRow(e);if(!o)return null;var a=[];return i(o),a},isLeaf:function(e){var t=this,i=(this.options,t.getRow(e));if(i)return!i.__hasChildren},hasChildren:function(e){var t=this.options,i=this.getRow(e);if(i)return!(!i[t.tree.childrenName]||!i[t.tree.childrenName].length)},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(e){var t=this;if(this.options.tree){var i=t.getChildren(e,!0);if(i)for(var n=0,r=i.length;n<r;n++){var o=$.inArray(i[n],t.selected);-1!=o&&t.selected.splice(o,1)}}var a=$.inArray(e,t.selected);-1!=a&&t.selected.splice(a,1)},_getParentChildren:function(e){var t=this,i=this.options,n=t.getRow(e);return i.tree&&t.existRecord(n)&&n.__pid in t.records?t.records[n.__pid][i.tree.childrenName]:t.currentData[i.root]},_removeData:function(e){var t=this,i=(this.options,t._getParentChildren(e)),n=$.inArray(e,i);-1!=n&&i.splice(n,1),t._removeSelected(e)},_addData:function(e,t,i,n){var r=this,o=this.options;r.currentData||(r.currentData={}),r.currentData[o.root]||(r.currentData[o.root]=[]);var a=r.currentData[o.root];if(i){o.tree&&(t?a=t[o.tree.childrenName]:i.__pid in r.records&&(a=r.records[i.__pid][o.tree.childrenName]));var l=$.inArray(i,a);a.splice(-1==l?-1:l+(n?0:1),0,e)}else o.tree&&t&&(a=t[o.tree.childrenName]),a.push(e)},_appendData:function(e,t,i,n){var r=this;e[this.options.statusName]="update",r._removeData(e),r._addData(e,t,i,n)},appendRange:function(e,t,i,n){var r=this,o=(this.options,!1);$.each(e,function(e,a){a.__id&&r.existRecord(a)?(r.isLeaf(t)&&r.upgrade(t),r._appendData(a,t,i,n),o=!0):r.appendRow(a,t,i,n)}),o&&r.reRender()},appendRow:function(e,t,i,n){var r=this;this.options;return $.isArray(e)?void r.appendRange(e,t,i,n):e.__id&&r.existRecord(e)?(r._appendData(e,t,i,n),void r.reRender()):(t&&r.isLeaf(t)&&r.upgrade(t),void r.addRow(e,i,!!n,t))},upgrade:function(e){var t=this,i=this.options,n=t.getRow(e);if(n&&i.tree){n[i.tree.childrenName]=n[i.tree.childrenName]||[],n.__hasChildren=!0;var r=[t.getRowObj(n)];t.enabledFrozen()&&r.push(t.getRowObj(n,!0)),$("> td > div > .l-grid-tree-space:last",r).addClass("l-grid-tree-link l-grid-tree-link-open")}},demotion:function(e){var t=this,i=this.options,n=t.getRow(e);if(n&&i.tree){var r=[t.getRowObj(n)];if(t.enabledFrozen()&&r.push(t.getRowObj(n,!0)),$("> td > div > .l-grid-tree-space:last",r).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close"),t.hasChildren(n))for(var o=t.getChildren(n),a=0,l=o.length;a<l;a++)t.deleteRow(o[a]);n.__hasChildren=!1}},collapseAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var n=e.getRowObj(i);$(".l-grid-tree-link",n).hasClass("l-grid-tree-link-close")||e.toggle(i)})},expandAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var n=e.getRowObj(i);$(".l-grid-tree-link",n).hasClass("l-grid-tree-link-open")||e.toggle(i)})},collapse:function(e){var t=this,i=(this.options,t.getRowObj(e));$(".l-grid-tree-link",i).hasClass("l-grid-tree-link-close")||t.toggle(e)},expand:function(e){var t=this,i=(this.options,t.getRowObj(e));$(".l-grid-tree-link",i).hasClass("l-grid-tree-link-open")||t.toggle(e)},toggle:function(e){function t(e){for(var i=0,n=e.length;i<n;i++){var r=e[i],a=o.getChildren(r,!1),l=!(!a||!a.length),s=$([o.getRowObj(r.__id)]);o.enabledFrozen()&&(s=s.add(o.getRowObj(r.__id,!0))),l?$(".l-grid-tree-link",s).hasClass("l-grid-tree-link-close")?s.show():(s.show(),t(a)):($(".l-grid-tree-link",s).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s.show())}}function i(){var e=[];if(!c)return e=o.getChildren(a,!0),$(e).each(function(){$(o.getRowObj(this)).hide(),o.enabledFrozen()&&$(o.getRowObj(this,!0)).hide()}),void o.trigger("treeCollapsed",[a]);e=o.getChildren(a,!1),t(e),o.trigger("treeExpanded",[a])}function n(){d.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),-1!=(s=$.inArray(a,o.collapsedRows))&&o.collapsedRows.splice(s,1)}function r(){d.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open"),-1==(s=$.inArray(a,o.collapsedRows))&&o.collapsedRows.push(a)}if(e){var o=this,a=(this.options,o.getRow(e)),l=[o.getRowObj(a)];o.enabledFrozen()&&l.push(o.getRowObj(a,!0));var s,d=(a.__level,$(".l-grid-tree-link:first",l)),c=!0;o.collapsedRows=o.collapsedRows||[];if(d.hasClass("l-grid-tree-link-close")){var u={update:function(){n(),i()}};if(o.hasBind("treeExpand")&&0==o.trigger("treeExpand",[a,u]))return!1;n()}else{var u={update:function(){r(),i()}};if(o.hasBind("treeCollapse")&&0==o.trigger("treeCollapse",[a,u]))return!1;c=!1,r()}i()}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){var t=this;t._initColumns(),t._initBuildGridHeader(),t._initBuildPopup()},_initBuildHeader:function(){var e=this,t=this.options;t.title?($(".l-panel-header-text",e.header).html(t.title),t.headerImg&&e.header.append("<img src='"+t.headerImg+"' />").addClass("l-panel-header-hasicon")):e.header.hide(),t.toolbar?$.fn.ligerToolBar&&(e.toolbarManager=e.topbar.ligerToolBar(t.toolbar),0==e.topbar.height()?e.topbar.parent().height(25):e.topbar.parent().height(e.topbar.height())):e.topbar.parent().remove()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){function e(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}function t(n,r,o,a){if(n.editorType&&(n.editor=n.editor||{},n.editor.type=n.editorType),e(n,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),r>i._columnMaxLevel&&(i._columnMaxLevel=r),i._columnCount++,n.__id=i._createColumnId(n),n.__domid=i.id+"|hcell|"+n.__id,i._columns[n.__id]=n,n.columns&&n.columns.length||(n.__leafindex=i._columnLeafCount++),n.__level=r,n.__pid=o,n.__previd=a,!n.columns||!n.columns.length)return n.__leaf=!0,1;for(var l=0,s=-1,d=0,c=n.columns.length;d<c;d++){var u=n.columns[d];l+=t(u,r+1,n.__id,s),s=u.__id}return n.__leafcount=l,l}var i=this,n=this.options;if(i._columns={},i._columnCount=0,i._columnLeafCount=0,i._columnMaxLevel=1,n.columns){var r=-1;if(n.rownumbers){var o=!i.enabledGroup()&&(n.frozen&&n.frozenRownumbers),a={isrownumber:!0,issystem:!0,width:n.rownumbersColWidth,frozen:o};t(a,1,-1,r),r=a.__id}if(i.enabledDetail()){var l=!i.enabledGroup()&&(n.frozen&&n.frozenDetail),a={isdetail:!0,issystem:!0,width:n.detailColWidth,frozen:l};t(a,1,-1,r),r=a.__id}if(i.enabledCheckbox()){var s=!i.enabledGroup()&&(n.frozen&&n.frozenCheckbox),a={ischeckbox:!0,issystem:!0,width:n.detailColWidth,frozen:s};t(a,1,-1,r),r=a.__id}for(var d=0,c=n.columns.length;d<c;d++){var a=n.columns[d];a&&(t(a,1,-1,r),r=a.__id)}for(var u in i._columns){var a=i._columns[u];a.__leafcount>1&&(a.__colSpan=a.__leafcount),a.__leaf&&a.__level!=i._columnMaxLevel&&(a.__rowSpan=i._columnMaxLevel-a.__level+1)}i.columns=i.getColumns(),$(i.columns).each(function(e,t){t.columnname=t.name,t.columnindex=e,t.type=t.type||"string",t.islast=e==i.columns.length-1,t.isSort=0!=t.isSort,t.frozen=!!t.frozen,t._width=i._getColumnWidth(t),t._hide=!!t.hide})}},_getColumnWidth:function(e){var t=this,i=this.options;if(e._width)return e._width;var n=e.width||i.columnWidth;if(!n||"auto"==n){var r=0,o=0;$(t.columns).each(function(e,n){var a=n.width||i.columnWidth;a&&"auto"!=a?o+=parseInt(t._getColumnWidth(n))+1:r++}),n=parseInt((t.grid.width()-o)/r)-1}if("string"==typeof n&&n.indexOf("%")>0){var a=0;t.enabledDetail()&&(a+=i.detailColWidth),t.enabledCheckbox()&&(a+=i.checkboxColWidth),t.options.rownumbers&&(a+=t.options.rownumbersColWidth),e._width=n=parseInt(.01*parseInt(n)*(t.grid.width()-a-t.columns.length/2-1))}return e.minWidth&&n<e.minWidth&&(n=e.minWidth),e.maxWidth&&n>e.maxWidth&&(n=e.maxWidth),n},_createHeaderCell:function(e){var t=this,i=this.options,n=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");if(n.attr("id",e.__domid),e.__leaf||n.addClass("l-grid-hd-cell-mul"),e.columnindex==t.columns.length-1&&n.addClass("l-grid-hd-cell-last"),e.isrownumber&&(n.addClass("l-grid-hd-cell-rownumbers"),n.html("<div class='l-grid-hd-cell-inner'></div>")),e.ischeckbox&&(n.addClass("l-grid-hd-cell-checkbox"),n.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")),e.isdetail&&(n.addClass("l-grid-hd-cell-detail"),n.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")),e.heightAlign&&$(".l-grid-hd-cell-inner:first",n).css("textAlign",e.heightAlign),e.__colSpan&&n.attr("colSpan",e.__colSpan),e.__rowSpan){n.attr("rowSpan",e.__rowSpan),n.height(i.headerRowHeight*e.__rowSpan);var r=(i.headerRowHeight*e.__rowSpan-i.headerRowHeight)/2-5;$(".l-grid-hd-cell-inner:first",n).css("paddingTop",r)}else n.height(i.headerRowHeight);e.__leaf&&(n.width(e._width),n.attr("columnindex",e.__leafindex));var o=n.height();!e.__rowSpan&&o>10&&$(">div:first",n).height(o),e._hide&&n.hide(),e.name&&n.attr({columnname:e.name});var a="";return a=e.display&&""!=e.display?e.display:e.headerRender?e.headerRender(e):"&nbsp;",$(".l-grid-hd-cell-text:first",n).html(a),!e.issystem&&e.__leaf&&!1!==e.resizable&&$.fn.ligerResizable&&i.allowAdjustColWidth&&(t.colResizable[e.__id]=n.ligerResizable({handles:"e",onStartResize:function(e,i){this.proxy.hide(),t.draggingline.css({height:t.body.height(),top:0,left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}).show()},onResize:function(e,i){t.colresizing=!0,t.draggingline.css({left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}),$("body").add(n).css("cursor","e-resize")},onStopResize:function(i){return t.colresizing=!1,$("body").add(n).css("cursor","default"),t.draggingline.hide(),t.setColumnWidth(e,parseInt(e._width)+i.diffX),!1}})),t.trigger("headerCellBulid",[n,e]),n},_initBuildGridHeader:function(){var e=this,t=this.options;if(e.gridtablewidth=0,e.f.gridtablewidth=0,e.colResizable){for(var i in e.colResizable)e.colResizable[i].destroy();e.colResizable=null}e.colResizable={},$("tbody:first",e.gridheader).html(""),$("tbody:first",e.f.gridheader).html("");for(var n=1;n<=e._columnMaxLevel;n++){var r=e.getColumns(n),o=n==e._columnMaxLevel,a=$("<tr class='l-grid-hd-row'></tr>"),l=$("<tr class='l-grid-hd-row'></tr>");o||a.add(l).addClass("l-grid-hd-mul"),$("tbody:first",e.gridheader).append(a),$("tbody:first",e.f.gridheader).append(l),$(r).each(function(t,i){if((i.frozen?l:a).append(e._createHeaderCell(i)),i.__leaf){var n=i._width;i.frozen?e.f.gridtablewidth+=(parseInt(n)?parseInt(n):0)+1:e.gridtablewidth+=(parseInt(n)?parseInt(n):0)+1}})}if(e._columnMaxLevel>0){var s=t.headerRowHeight*e._columnMaxLevel;e.gridheader.add(e.f.gridheader).height(s),t.rownumbers&&t.frozenRownumbers&&e.f.gridheader.find("td:first").height(s)}e._updateFrozenWidth(),$("div:first",e.gridheader).width(e.gridtablewidth+40)},_initBuildPopup:function(){var e=this,t=this.options;if($(":checkbox",e.popup).unbind(),$("tbody tr",e.popup).remove(),$(e.columns).each(function(t,i){if(!i.issystem&&0!=i.isAllowHide){var n='checked="checked"';i._hide&&(n="");var r=i.display;$("tbody",e.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+n+' class="l-checkbox" columnindex="'+t+'"/></td><td class="l-column-right">'+r+"</td></tr>")}}),$.fn.ligerCheckBox&&$("input:checkbox",e.popup).ligerCheckBox({onBeforeClick:function(i){return!i.checked||!($("input:checked",e.popup).length<=t.minColToggle)}}),t.allowHideColumn){$("tr",e.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var i=function(){if($("input:checked",e.popup).length+1<=t.minColToggle)return!1;e.toggleCol(parseInt($(this).attr("columnindex")),this.checked,!0)};$.fn.ligerCheckBox?$(":checkbox",e.popup).bind("change",i):$(":checkbox",e.popup).bind("click",i)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var e=this,t=this.options;if(t.usePager){if(t.pagerRender)return void e.toolbar.html(t.pagerRender.call(e));if(t.scrollToPage)return void e.toolbar.hide();var i="",n=-1;$(t.pageSizeOptions).each(function(e,r){t.pageSize==r&&(n=e),i+="<option value='"+r+"'  >"+r+"</option>"}),$(".l-bar-selectpagesize",e.toolbar).append("<select name='rp'>"+i+"</select>"),-1!=n&&($(".l-bar-selectpagesize select",e.toolbar)[0].selectedIndex=n),t.switchPageSizeApplyComboBox&&$.fn.ligerComboBox&&$(".l-bar-selectpagesize select",e.toolbar).ligerComboBox({onBeforeSelect:function(){return!(t.url&&e.isDataChanged&&!confirm(t.isContinueByDataChanged))},width:45})}else e.toolbar.hide()},_searchData:function(e,t){for(var i=(this.options,new Array),n=0;n<e.length;n++)t(e[n],n)&&(i[i.length]=e[n]);return i},_clearGrid:function(){var e=this;this.options;e._fixRows();for(var t in e.rows){var i=$(e.getRowObj(e.rows[t]));e.enabledFrozen()&&(i=i.add(e.getRowObj(e.rows[t],!0))),i.unbind()}e.gridbody.html(""),e.f.gridbody.html(""),e.recordNumber=0,e.records={},e.rows=[],e._fixRows(),e.selected=[],e.totalNumber=0,e.editorcounter=0},_fixRows:function(){var e=this;this.options;if(e.rows)for(var t in e.rows)$.isFunction(e.rows[t])&&delete e.rows[t]},_fillGridBody:function(e,t,i){var n=this,r=this.options,o="scrollappend"==i?[]:['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(n.enabledGroup()){var a=[],l=[];n.groups=l;for(var s in e){var d=e[s],c=d[r.groupColumnName],u=$.inArray(c,a);-1==u&&(a.push(c),u=a.length-1,l.push([])),l[u].push(d)}$(l).each(function(e,i){1==l.length&&o.push('<tr class="l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"'),e==l.length-1?o.push('<tr class="l-grid-grouprow l-grid-grouprow-last"'):0==e?o.push('<tr class="l-grid-grouprow l-grid-grouprow-first"'):o.push('<tr class="l-grid-grouprow"'),o.push(' groupindex"='+e+'" >'),o.push('<td colSpan="'+n.columns.length+'" class="l-grid-grouprow-cell">'),o.push('<span class="l-grid-group-togglebtn">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),r.groupRender?o.push(r.groupRender(a[e],i,r.groupColumnDisplay)):o.push(r.groupColumnDisplay+":"+a[e]),o.push("</td>"),o.push("</tr>"),o.push(n._getHtmlFromData(i,t)),n.isTotalSummary()&&o.push(n._getTotalSummaryHtml(i,"l-grid-totalsummary-group",t))})}else o.push(n._getHtmlFromData(e,t));if("scrollappend"==!i&&o.push("</tbody></table></div>"),"scrollappend"==i?(t?n.f.gridbody:n.gridbody).find("tbody:first").append(o.join("")):(t?n.f.gridbody:n.gridbody).html(o.join("")),t&&(n.f.gridbody.find(">l-jplace").remove(),n.f.gridbody.append('<div class="l-jplace"></div>')),r.usePager&&r.scrollToPage&&!r.scrollToAppend){var h=t?n.f.gridbody.find("> .l-grid-body-inner"):n.gridbody.find("> .l-grid-body-inner"),p=h.find("> .l-scrollreplacetop");p=p.length?p:$('<div class="l-scrollreplacetop"></div>').prependTo(h),p.css("width","80%").height(n.lastScrollTop),p=h.find("> .l-scrollreplacebottom"),p=p.length?p:$('<div class="l-scrollreplacebottom"></div>').appendTo(h),p.css("width","80%").height((r.pageCount-r.newPage)*n._getOnePageHeight())}n.enabledGroup()||n._bulidTotalSummary(t),$("> div:first",n.gridbody).width(n.gridtablewidth),n._onResize()},_showData:function(e){var t=this,i=this.options;t.changedCells={};var n=t.currentData[i.root];if(i.usePager&&("server"==i.dataAction&&t.data&&t.data[i.record]?i.total=t.data[i.record]:t.filteredData&&t.filteredData[i.root]?i.total=t.filteredData[i.root].length:t.data&&t.data[i.root]?i.total=t.data[i.root].length:n&&(i.total=n.length),i.page=i.newPage,i.total||(i.total=0),i.page||(i.page=1),i.pageCount=Math.ceil(i.total/i.pageSize),i.pageCount||(i.pageCount=1),i.scrollToPage||t._buildPager()),$(".l-bar-btnloading:first",t.toolbar).removeClass("l-bar-btnloading"),0!=t.trigger("beforeShowData",[t.currentData])){if("scrollappend"!=e&&t._clearGrid(),t.isDataChanged=!1,!n||!n.length)return t.gridview.addClass("l-grid-empty"),$(t.element).addClass("l-empty"),$("<div></div>").addClass("l-grid-body-inner").appendTo(t.gridbody).css({width:t.gridheader.find(">div:first").width(),height:t.gridbody.height()}),i.pagerRender?void t.toolbar.html(i.pagerRender.call(t)):void t._onResize.ligerDefer(t,50);if(t.gridview.removeClass("l-grid-empty"),$(t.element).removeClass("l-empty"),$(".l-bar-btnload:first span",t.toolbar).removeClass("l-disabled"),t._updateGridData(),t.enabledFrozen()&&t._fillGridBody(t.rows,!0,e),t._fillGridBody(t.rows,!1,e),t.trigger("SysGridHeightChanged"),"scroll"==e&&t.trigger("sysScrollLoaded"),i.totalRender&&($(".l-panel-bar-total",t.element).remove(),$(".l-panel-bar",t.element).before('<div class="l-panel-bar-total">'+i.totalRender(t.data,t.filteredData)+"</div>")),i.mouseoverRowCssClass)for(var r in t.rows){var o=$(t.getRowObj(t.rows[r]));t.enabledFrozen()&&(o=o.add(t.getRowObj(t.rows[r],!0))),o.bind("mouseover.gridrow",function(){t._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){t._onRowOver(this,!1)})}if(t._fixHeight(),i.pagerRender)return void t.toolbar.html(i.pagerRender.call(t));t.gridbody.trigger("scroll.grid"),t.trigger("afterShowData",[t.currentData])}},_fixHeight:function(){var e=this,t=this.options;if(!t.fixedCellHeight&&t.frozen){var i,n;for(var r in e.columns){var o=e.columns[r];if(i&&n)break;!o.frozen||i?o.frozen||n||(n=o):i=o}if(i&&n)for(var a in e.records){var l=e.getCellObj(a,i),s=e.getCellObj(a,n),d=Math.max($(l).height(),$(s).height());$(l).add(s).height(d)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(e,t){if(!e)return"";for(var i=this,n=this.options,r=[],o=0,a=e.length;o<a;o++){var l=e[o],s=l.__id;if(l){if(r.push("<tr"),r.push(' id="'+i._getRowDomId(l,t)+'"'),r.push(' class="l-grid-row'),!t&&i.enabledCheckbox()&&n.isChecked&&n.isChecked(l)?(i.select(l),r.push(" l-selected")):i.isSelected(l)?r.push(" l-selected"):n.isSelected&&n.isSelected(l)&&(i.select(l),r.push(" l-selected")),l.__index%2==1&&n.alternatingRow&&r.push(" l-grid-row-alt"),n.rowClsRender){var d=n.rowClsRender(l,s);d&&r.push(" "+d)}if(r.push('" '),n.rowAttrRender&&r.push(n.rowAttrRender(l,s)),n.tree&&i.collapsedRows&&i.collapsedRows.length){var c=function(){for(var e=i.getParent(l);e;){if(-1!=$.inArray(e,i.collapsedRows))return!0;e=i.getParent(e)}return!1};c()&&r.push(' style="display:none;" ')}else if(n.tree&&n.tree.isExtend){var c=function(){for(var e=i.getParent(l);e;){if(0==n.tree.isExtend(e))return!0;e=i.getParent(e)}return!1};c()&&r.push(' style="display:none;" ')}r.push(">"),$(i.columns).each(function(e,o){if(t==o.frozen){if(r.push("<td"),r.push(' id="'+i._getCellDomId(l,this)+'"'),this.isrownumber)return r.push(' class="l-grid-row-cell l-grid-row-cell-rownumbers" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),n.fixedCellHeight?r.push(' style = "height:'+n.rowHeight+'px;" '):r.push(' style = "min-height:'+n.rowHeight+'px;" '),void r.push(">"+(parseInt(l.__index)+1)+"</div></td>");if(this.ischeckbox)return r.push(' class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),n.fixedCellHeight?r.push(' style = "height:'+n.rowHeight+'px;" '):r.push(' style = "min-height:'+n.rowHeight+'px;" '),r.push(">"),r.push('<span class="l-grid-row-cell-btn-checkbox"></span>'),void r.push("</div></td>");if(this.isdetail)return r.push(' class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),n.fixedCellHeight?r.push(' style = "height:'+n.rowHeight+'px;" '):r.push(' style = "min-height:'+n.rowHeight+'px;" '),r.push(">"),n.isShowDetailToggle&&!n.isShowDetailToggle(l)||r.push('<span class="l-grid-row-cell-detailbtn"></span>'),void r.push("</div></td>");var a=this._width;r.push(' class="l-grid-row-cell '),i.changedCells[s+"_"+this.__id]&&r.push("l-grid-row-cell-edited "),this.islast&&r.push("l-grid-row-cell-last "),r.push('"'),r.push(' style = "'),r.push("width:"+a+"px; "),o._hide&&r.push("display:none;"),r.push(' ">'),r.push(i._getCellHtml(l,o)),r.push("</td>")}}),r.push("</tr>")}}return r.join("")},_getCellHtml:function(e,t){var i=this,n=this.options;if(t.isrownumber)return'<div class="l-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var r=[];r.push('<div class="l-grid-row-cell-inner"'),r.push(' style = "width:'+parseInt(t._width-8)+"px;"),n.fixedCellHeight&&r.push("height:"+n.rowHeight+"px;"),r.push("min-height:"+n.rowHeight+"px; "),t.align&&r.push("text-align:"+t.align+";");var o=i._getCellContent(e,t);return r.push('">'+o+"</div>"),r.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(e){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(e){return null}},_getCellContent:function(e,t){var i=this,n=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;var r=(e.__id,e.__index),o=i._getValueByName(e,t.name),a=i._getValueByName(e,t.textField),l="";return t.render?l=t.render.call(i,e,r,o,t):n.formatters[t.type]?l=n.formatters[t.type].call(i,o,t):null!=a?l=a.toString():null!=o&&(l=o.toString()),n.tree&&(null!=n.tree.columnName&&n.tree.columnName==t.name||null!=n.tree.columnId&&n.tree.columnId==t.id)&&(l=i._getTreeCellHtml(l,e)),l||""},_getTreeCellHtml:function(e,t){var i=t.__level,n=this,r=this.options,o=null==n.collapsedRows?r.tree.isExtend(t):-1==$.inArray(t,n.collapsedRows||[]),a=r.tree.isParent(t),l="";i=parseInt(i)||1
;for(var s=1;s<i;s++)l+="<div class='l-grid-tree-space'></div>";return l+=o&&a?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>":a?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>":"<div class='l-grid-tree-space'></div>",l+="<span class='l-grid-tree-content'>"+e+"</span>"},_applyEditor:function(e){var t=this,i=this.options,n=e,r=n.id.split("|"),o=r[r.length-1],a=t._columns[o],l=$(n).parent(),s=t.getRow(l[0]),d=s.__id,c=s.__index;if(a&&a.editor){var u=a.name;a.columnindex;if(a.editor.type&&i.editors[a.editor.type]){var h=t._getValueByName(s,u),p={record:s,value:h,column:a,rowindex:c};if(a.textField&&(p.text=t._getValueByName(s,a.textField)),0==t.trigger("beforeEdit",[p]))return!1;t.lastEditRow=s,liger.lastEditGrid=t;var g=i.editors[a.editor.type],f=$(n),v=($(n).offset(),$(n).width()),m=$(n).height(),b=$("<div class='l-grid-editor'></div>").appendTo(t.grid),y=0,w=0,x=f.position(),C=t.gridbody.position(),_=t.gridview2.position(),D=(i.toolbar?t.topbar.parent().outerHeight():0)+(i.title?t.header.outerHeight():0),y=x.left+C.left+_.left,w=x.top+C.top+_.top+D;f.html(""),t.setCellEditing(s,a,!0);var T=!!(window.ActiveXObject||"ActiveXObject"in window),k=0==$.browser.version.indexOf("8");T?(m-=k?1:2,w-=1,y-=1):$.browser.mozilla?(m-=1,w-=1,y-=1):$.browser.safari?w-=1:m-=1,y+=i.editorLeftDiff||0,w+=i.editorTopDiff||0,m+=i.editorHeightDiff||0,b.css({left:y,top:w}).show(),a.textField&&(p.text=t._getValueByName(s,a.textField));var S=t._createEditor(g,b,p,v,m-1);t.editor={editing:!0,editor:g,input:S,editParm:p,container:b},t.unbind("sysEndEdit"),t.bind("sysEndEdit",function(){var e=g.getValue(S,p);a.textField&&g.getText&&(p.text=g.getText(S,p)),g.getSelected&&(p.selected=g.getSelected(S,p)),e!=h&&($(n).addClass("l-grid-row-cell-edited"),t.changedCells[d+"_"+a.__id]=!0,p.value=e),a.editor.onChange&&a.editor.onChange.call(S,p),t._checkEditAndUpdateCell(p)&&a.editor.onChanged&&a.editor.onChanged.call(S,p)})}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),!0},_getCurrentPageData:function(e){var t=this.options,n={};if(n[t.root]=[],!e||!e[t.root]||!e[t.root].length)return n[t.record]=0,n;for(n[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)n[t.root].push(e[t.root][i]);return n},_compareData:function(e,t,i,n){var r=this,o=this.options,a=e[i],l=t[i];return null==a&&null!=l?1:null==a&&null==l?0:null!=a&&null==l?-1:o.sorters[n]?o.sorters[n].call(r,a,l):a<l?-1:a>l?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var n=0,r=0,o=0,a=0,l=0;if(t&&t.length){l=parseFloat(t[0][e.name]),a=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){r+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),d=parseFloat(d),d&&(n+=d,d>l&&(l=d),d<a&&(a=d))}o=1*n/t.length}return{sum:n,count:r,avg:o,min:a,max:l}}catch(e){return{}}},_getTotalCellContent:function(e,t){var i=this,n=(this.options,[]);if(e.totalSummary){var r=function(e){for(var t=0;t<l.length;t++)if(l[t].toLowerCase()==e.toLowerCase())return!0;return!1},o=i._getTotalInfo(e,t);if(e.totalSummary.render){var a=e.totalSummary.render(o,e,i.data);n.push(a)}else if(e.totalSummary.type&&o){var l=e.totalSummary.type.split(",");r("sum")&&n.push("<div>Sum="+o.sum.toFixed(2)+"</div>"),r("tsum")&&n.push("<div>"+sum.toFixed(0)+"</div>"),r("count")&&n.push("<div>Count="+o.count+"</div>"),r("max")&&n.push("<div>Max="+o.max.toFixed(2)+"</div>"),r("min")&&n.push("<div>Min="+o.min.toFixed(2)+"</div>"),r("avg")&&n.push("<div>Avg="+o.avg.toFixed(2)+"</div>")}}return n.join("")},_getTotalSummaryHtml:function(e,t,i){var n=this,r=(this.options,[]);return t?r.push('<tr class="l-grid-totalsummary '+t+'">'):r.push('<tr class="l-grid-totalsummary">'),$(n.columns).each(function(t,o){if(this.frozen==i){if(this.isrownumber)return void r.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.ischeckbox)return void r.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.isdetail)return void r.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style="width:'+this.width+'px"><div>&nbsp;</div></td>');r.push('<td class="l-grid-totalsummary-cell'),this.islast&&r.push(" l-grid-totalsummary-cell-last"),r.push('" '),r.push('id="'+n.id+"|total"+n.totalNumber+"|"+o.__id+'" '),r.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&r.push('columnname="'+columnname+'" '),r.push('columnindex="'+t+'" '),r.push('><div class="l-grid-totalsummary-cell-inner"'),o.align&&r.push(' style="text-Align:'+o.align+';"'),r.push(">"),r.push(n._getTotalCellContent(o,e)),r.push("</div></td>")}}),r.push("</tr>"),i||n.totalNumber++,r.join("")},_bulidTotalSummary:function(e){var t=this,i=this.options;if(!t.isTotalSummary())return!1;if(!t.currentData||0==t.currentData[i.root].length)return!1;var n=$(t._getTotalSummaryHtml(t.currentData[i.root],null,e));$("tbody:first",e?t.f.gridbody:t.gridbody).append(n),e?t.totalRow1=n:t.totalRow2=n},updateTotalSummary:function(){var e=this;this.options;e.reRender({totalOnly:!0})},_buildPager:function(){var e=this,t=this.options;if(!t.pagerRender){$(".pcontrol input",e.toolbar).val(t.page),t.pageCount||(t.pageCount=1),$(".pcontrol span",e.toolbar).html(t.pageCount);var i=parseInt((t.page-1)*t.pageSize)+1,n=parseInt(i)+parseInt(t.pageSize)-1;t.total||(t.total=0),t.total<n&&(n=t.total),t.total||(i=n=0),i<0&&(i=0),n<0&&(n=0);var r=t.pageStatMessage;r=r.replace(/{from}/,i),r=r.replace(/{to}/,n),r=r.replace(/{total}/,t.total),r=r.replace(/{pagesize}/,t.pageSize),$(".l-bar-text",e.toolbar).html(r),t.total||$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",e.toolbar).addClass("l-disabled"),t.hideLoadButton&&($(".l-bar-btnload:first",e.toolbar).parent().hide(),$(".l-bar-btnload:first",e.toolbar).parent().next().hide()),1==t.page?($(".l-bar-btnfirst span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).addClass("l-disabled")):t.page>t.pageCount&&t.pageCount>0&&($(".l-bar-btnfirst span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).removeClass("l-disabled")),t.page==t.pageCount?($(".l-bar-btnlast span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).addClass("l-disabled")):t.page<t.pageCount&&t.pageCount>0&&($(".l-bar-btnlast span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).removeClass("l-disabled"))}},_getRowIdByDomId:function(e){return e.split("|")[2]},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(e){var t=this;if(e.hasClass("l-box-dateeditor")||e.hasClass("l-box-select"))return!0;if(e.hasClass("l-dialog")){var i=[];if(e.find(".l-dialog").each(function(){var e=$(this).attr("ligeruiid");e&&i.push(e)}),t._editorIncludeCotrols(i))return!0}return!1},_getSrcElementByEvent:function(e){var t=this,i=e.target||e.srcElement,n=$(i).parents().add(i),r=function(e){for(var t=0,i=n.length;t<i;t++)if("string"==typeof e){if($(n[t]).hasClass(e))return n[t]}else if("object"==typeof e&&n[t]==e)return n[t];return null};if(r("l-grid-editor"))return{editing:!0,editor:r("l-grid-editor")};if(-1==n.index(this.element))return t._isEditing(n)?{editing:!0}:{out:!0};var o=!1;if(n.hasClass("l-grid-detailpanel")&&t.detailrows)for(var a=0,l=t.detailrows.length;a<l;a++)if(-1!=n.index(t.detailrows[a])){o=!0;break}var s={grid:r("l-panel"),indetail:o,frozen:!!r(t.gridview1[0]),header:r("l-panel-header"),gridheader:r("l-grid-header"),gridbody:r("l-grid-body"),total:r("l-panel-bar-total"),popup:r("l-grid-popup"),toolbar:r("l-panel-bar")};if(s.gridheader&&(s.hrow=r("l-grid-hd-row"),s.hcell=r("l-grid-hd-cell"),s.hcelltext=r("l-grid-hd-cell-text"),s.checkboxall=r("l-grid-hd-cell-checkbox"),s.hcell)){var d=s.hcell.id.split("|")[2];s.column=t._columns[d]}return s.gridbody&&(s.row=r("l-grid-row"),s.cell=r("l-grid-row-cell"),s.checkbox=r("l-grid-row-cell-btn-checkbox"),s.groupbtn=r("l-grid-group-togglebtn"),s.grouprow=r("l-grid-grouprow"),s.detailbtn=r("l-grid-row-cell-detailbtn"),s.detailrow=r("l-grid-detailpanel"),s.totalrow=r("l-grid-totalsummary"),s.totalcell=r("l-grid-totalsummary-cell"),s.rownumberscell=$(s.cell).hasClass("l-grid-row-cell-rownumbers")?s.cell:null,s.detailcell=$(s.cell).hasClass("l-grid-row-cell-detail")?s.cell:null,s.checkboxcell=$(s.cell).hasClass("l-grid-row-cell-checkbox")?s.cell:null,s.treelink=r("l-grid-tree-link"),s.editor=r("l-grid-editor"),s.row&&(s.data=this._getRowByDomId(s.row.id)),s.cell&&(s.editing=$(s.cell).hasClass("l-grid-row-cell-editing")),s.editor&&(s.editing=!0),s.editing&&(s.out=!1)),s.toolbar&&(s.first=r("l-bar-btnfirst"),s.last=r("l-bar-btnlast"),s.next=r("l-bar-btnnext"),s.prev=r("l-bar-btnprev"),s.load=r("l-bar-btnload"),s.button=r("l-bar-button")),s},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var n in t.editors[i]){var r=t.editors[i][n];if(r&&r.input&&t._controlIncludeCotrols(r.input,e))return!0}return!1},_controlIncludeCotrols:function(e,t){this.options;if(!e||!e.includeControls||!e.includeControls.length)return!1;for(var i=0;i<e.includeControls.length;i++){var n=e.includeControls[i];if(-1!=$.inArray(n.id,t))return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var e=this,t=this.options;e.grid.bind("mousedown.grid",function(t){e._onMouseDown.call(e,t)}),e.grid.bind("dblclick.grid",function(t){e._onDblClick.call(e,t)}),e.grid.bind("contextmenu.grid",function(t){return e._onContextmenu.call(e,t)}),$(document).bind("mouseup.grid",function(t){e._onMouseUp.call(e,t)}),$(document).bind("click.grid",function(t){e._onClick.call(e,t)}),$(window).bind("resize.grid",function(t){e._onResize.call(e)}),$(document).bind("keydown.grid",function(t){t.ctrlKey&&(e.ctrlKey=!0)}),$(document).bind("keyup.grid",function(t){delete e.ctrlKey}),e.gridbody.bind("scroll.grid",function(){var i=e.gridbody.scrollLeft(),n=e.gridbody.scrollTop();if(null!=i&&(e.gridheader[0].scrollLeft=i),null!=n&&(e.f.gridbody[0].scrollTop=n),t.scrollToPage&&t.usePager&&!e.loading){var r=e.gridbody.find(".l-grid-body-inner:first").height(),o=n+e.gridbody.height();if(t.scrollToAppend)t.newPage!=t.pageCount&&o>=r&&e.reload(t.newPage+1,"scrollappend");else{var a=o>=r?t.pageCount:Math.ceil(o/e._getOnePageHeight());e.scrollLoading||(e.scrollLoading=!0,e.lastScrollTop=n,e.unbind("sysScrollLoaded"),e.bind("sysScrollLoaded",function(){e.gridbody.scrollTop(n),setTimeout(function(){e.scrollLoading=!1},500)}),e.scrollLoading=!0,e.reload(a,"scroll"))}}e.trigger("SysGridHeightChanged")}),$("select",e.toolbar).change(function(){if(e.isDataChanged&&"local"!=t.dataAction&&!confirm(t.isContinueByDataChanged))return!1;t.newPage=1,t.pageSize=this.value,e.loadData("local"!=t.dataAction&&t.where)}),$("span.pcontrol :text",e.toolbar).blur(function(t){e.changePage("input")}),$("div.l-bar-button",e.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}),$.fn.ligerDrag&&t.colDraggable&&(e.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e.gridheader.add(e.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(t,i){var n=e._getSrcElementByEvent(i);if(n.hcell&&n.column){var r=$(".l-grid-hd-cell-text:first",n.hcell).html(),o=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return o.append(r),o}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;this.set("cursor","default");var n=e._getSrcElementByEvent(i);if(!n.hcell||!n.column||n.column.issystem||n.hcelltext)return!1;if(-1!=$(n.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=n.column,e.coldragging=!0;var r=e.grid.offset();this.validRange={top:r.top,bottom:r.top+e.gridheader.height(),left:r.left-10,right:r.left+e.grid.width()+10}},onDrag:function(i,n){this.set("cursor","default");var r=this.draggingColumn;if(!r)return!1;if(e.colresizing)return!1;null==e.colDropIn&&(e.colDropIn=-1);var o=n.pageX,a=n.pageY,l=!1,s=(e.grid.offset(),this.validRange);if(o<s.left||o>s.right||a>s.bottom||a<s.top)return e.colDropIn=-1,e.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var d in e._columns){var c=e._columns[d];if(r!=c){if(!c.issystem){var u=c.__level==r.__level,h=!!u&&!!l;if(r.frozen!=c.frozen&&(h=!c.frozen),-1==e.colDropIn||e.colDropIn==d){var p=document.getElementById(c.__domid),g=$(p).offset(),f={top:g.top,bottom:g.top+$(p).height(),left:g.left-10,right:g.left+10};if(h){var v=$(p).width();f.left+=v,f.right+=v}if(o>f.left&&o<f.right&&a>f.top&&a<f.bottom){var m=t.headerRowHeight;c.__rowSpan&&(m*=c.__rowSpan),e.colDroptip.css({left:f.left+5,top:f.top-9,height:m+18}).show(),e.colDropIn=d,e.colDropDir=h?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=e.colDropIn&&(e.colDropIn=-1,e.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else l=!0}},onStopDrag:function(t,i){var n=this.draggingColumn;e.coldragging=!1,-1!=e.colDropIn&&(e.changeCol.ligerDefer(e,0,[n,e.colDropIn,"right"==e.colDropDir]),e.colDropIn=-1),e.colDroptip.hide(),this.set("cursor","default")}})),$.fn.ligerDrag&&t.rowDraggable&&(e.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),e.gridbody.add(e.f.gridbody).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,n){if(e._getSrcElementByEvent(n).row){var r=t.draggingMessage.replace(/{count}/,i.draggingRows?i.draggingRows.length:1);return t.rowDraggingRender&&(r=t.rowDraggingRender(i.draggingRows,i,e)),$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+r+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;if(!e.columns.length)return!1;this.set("cursor","default");var n=e._getSrcElementByEvent(i);if(!n.cell||!n.data||n.checkbox)return!1;var r=n.cell.id.split("|"),o=e._columns[r[r.length-1]];if(!(n.rownumberscell||n.detailcell||n.checkboxcell||o==e.columns[0]))return!1;if(e.enabledCheckbox()){if(this.draggingRows=e.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[n.data];this.draggingRow=n.data,this.set("cursor","move"),e.rowdragging=!0,this.validRange={top:e.gridbody.offset().top,bottom:e.gridbody.offset().top+e.gridbody.height(),left:e.grid.offset().left-10,right:e.grid.offset().left+e.grid.width()+10}},onDrag:function(i,n){var r=this.draggingRow;if(!r)return!1;var o=this.draggingRows?this.draggingRows:[r];if(e.colresizing)return!1;null==e.rowDropIn&&(e.rowDropIn=-1);var a=n.pageX,l=n.pageY,s=!1,d=this.validRange;if(a<d.left||a>d.right||l>d.bottom||l<d.top)return e.rowDropIn=-1,e.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c in e.rows){var u=e.rows[c],h=u.__id;if(r==u&&(s=!0),-1==$.inArray(u,o)){var p=!!s;if(-1==e.rowDropIn||e.rowDropIn==h){var g=e.getRowObj(h),f=$(g).offset(),v={top:f.top-4,bottom:f.top+$(g).height()+4,left:e.grid.offset().left,right:e.grid.offset().left+e.grid.width()};if(a>v.left&&a<v.right&&l>v.top&&l<v.bottom){var m=f.top;p&&(m+=$(g).height()),e.rowDroptip.css({left:v.left,top:m,width:v.right-v.left}).show(),e.rowDropIn=h,e.rowDropDir=p?"bottom":"top",t.tree&&l>v.top+5&&l<v.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),e.rowDroptip.hide(),e.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),e.rowDroptip.show(),e.rowDropInParent=!1);break}-1!=e.rowDropIn&&(e.rowDropIn=-1,e.rowDropInParent=!1,e.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,n){var r=this.draggingRows;e.rowdragging=!1;for(var o=0;o<r.length;o++){var a=r[o].children;a&&(r=$.grep(r,function(e,t){return-1==$.inArray(e,a)}))}if(-1!=e.rowDropIn){if(t.tree){var l,s;e.rowDropInParent?s=e.getRow(e.rowDropIn):(l=e.getRow(e.rowDropIn),s=e.getParent(l)),e.appendRange(r,s,l,"bottom"!=e.rowDropDir),e.trigger("rowDragDrop",{rows:r,parent:s,near:l,after:"bottom"==e.rowDropDir})}else e.moveRange(r,e.rowDropIn,"bottom"==e.rowDropDir),e.trigger("rowDragDrop",{rows:r,parent:s,near:e.getRow(e.rowDropIn),after:"bottom"==e.rowDropDir});e.rowDropIn=-1}e.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(e,t){if(!l.draggable.dragging){var i=this,n=this.options,r=i.getRow(e),o=t?"addClass":"removeClass";t&&i.editor.editing&&$("tr."+n.mouseoverRowCssClass,i.gridview).removeClass(n.mouseoverRowCssClass),i.enabledFrozen()&&$(i.getRowObj(r,!0))[o](n.mouseoverRowCssClass),$(i.getRowObj(r,!1))[o](n.mouseoverRowCssClass)}},_onMouseUp:function(e){var t=this;this.options;if(l.draggable.dragging){var i=t._getSrcElementByEvent(e);i.hcell&&i.column?t.trigger("dragdrop",[{type:"header",column:i.column,cell:i.hcell},e]):i.row&&t.trigger("dragdrop",[{type:"row",record:i.data,row:i.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(e){var t=this,i=this.options,n=t._getSrcElementByEvent(e);if(n.row){if(i.whenRClickToSelect&&t.select(n.data),t.hasBind("contextmenu"))return t.trigger("contextmenu",[{data:n.data,rowindex:n.data.__index,row:n.row},e])}else if(n.hcell){if(!i.allowHideColumn)return!0;var r=$(n.hcell).attr("columnindex");if(void 0==r)return!0;var o=e.pageX-t.body.offset().left+parseInt(t.body[0].scrollLeft);return r==t.columns.length-1&&(o-=50),t.popup.css({left:o,top:t.gridheader.height()+1}),t.popup.toggle(),!1}},_onDblClick:function(e){var t=this,i=(this.options,t._getSrcElementByEvent(e));i.row&&t.trigger("dblClickRow",[i.data,i.data.__id,i.row])},_onClick:function(e){var t=e.target||e.srcElement,i=this,n=this.options,r=i._getSrcElementByEvent(e);if(r.out)return i.editor.editing&&!$.ligerui.win.masking&&i.endEdit(),void(n.allowHideColumn&&i.popup.hide());if(!r.indetail&&!r.editing)if(i.editor.editing&&i.endEdit(),n.allowHideColumn&&(r.popup||i.popup.hide()),r.checkboxall){var o=$(r.hrow),a=o.hasClass("l-checked");if(0==i.trigger("beforeCheckAllRow",[!a,i.element]))return!1;a?o.removeClass("l-checked"):o.addClass("l-checked"),i.selected=[];for(var l in i.records)a?i.unselect(i.records[l]):i.select(i.records[l]);i.trigger("checkAllRow",[!a,i.element])}else if(r.hcelltext){var s=$(r.hcelltext).parent().parent();if(!n.enabledSort||!r.column)return;if(0==r.column.isSort)return;if(n.url&&"local"!=n.dataAction&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return;var d=$(".l-grid-hd-cell-sort:first",s),c=r.column.name;if(!c)return;d.length>0?d.hasClass("l-grid-hd-cell-sort-asc")?(d.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),s.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),i.trigger("ChangeSort",[c,"desc"]),i.changeSort(c,"desc")):d.hasClass("l-grid-hd-cell-sort-desc")&&(d.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")):(s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),$(r.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")),$(".l-grid-hd-cell-sort",i.gridheader).add($(".l-grid-hd-cell-sort",i.f.gridheader)).not($(".l-grid-hd-cell-sort:first",s)).remove()}else if(r.detailbtn&&n.detail){var u=r.data,o=$([i.getRowObj(u,!1)]);i.enabledFrozen()&&(o=o.add(i.getRowObj(u,!0)));var l=u.__id;if($(r.detailbtn).hasClass("l-open"))n.detail.onCollapse&&n.detail.onCollapse(u,$(".l-grid-detailpanel-inner:first",h)[0]),o.next("tr.l-grid-detailpanel").hide(),$(r.detailbtn).removeClass("l-open");else{var h=o.next("tr.l-grid-detailpanel");if(h.length>0)return h.show(),n.detail.onExtend&&n.detail.onExtend(u,$(".l-grid-detailpanel-inner:first",h)[0]),$(r.detailbtn).addClass("l-open"),void i.trigger("SysGridHeightChanged");$(r.detailbtn).addClass("l-open");for(var p=0,g=0;g<i.columns.length;g++)i.columns[g].frozen&&p++;var f=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),v=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");f.find("div:first").width(i.gridheader.find("div:first").width()-50),f.attr("id",i.id+"|detail|"+l),i.detailrows=i.detailrows||[],i.detailrows.push(f[0]),i.detailrows.push(v[0]);var m=$("div:first",f);m.parent().attr("colSpan",i.columns.length-p),o.eq(0).after(f),p>0&&(v.find("td:first").attr("colSpan",p),o.eq(1).after(v)),n.detail.onShowDetail?(n.detail.onShowDetail(u,m[0],function(){i.trigger("SysGridHeightChanged")}),$("div:first",v).add(m).show().height(n.detail.height||n.detailHeight)):n.detail.render&&(m.append(n.detail.render()),m.show()),i.trigger("SysGridHeightChanged")}}else if(r.groupbtn){var b=$(r.grouprow),y=!0;$(r.groupbtn).hasClass("l-grid-group-togglebtn-close")?($(r.groupbtn).removeClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width("auto")):(y=!1,$(r.groupbtn).addClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width(i.gridtablewidth));for(var w=b.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");;){if(0==w.length)break;y?(w.show(),w.hasClass("l-grid-detailpanel")&&!w.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&w.hide()):w.hide(),w=w.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}i.trigger(y?"groupExtend":"groupCollapse"),i.trigger("SysGridHeightChanged")}else if(r.treelink)i.toggle(r.data);else if(r.row&&i.enabledCheckbox()){var x=!!n.selectRowButtonOnly;if(n.enabledEdit&&(x=!0),"a"==t.tagName.toLowerCase())return;if((r.checkbox||!x)&&0!=n.selectable){var o=$(r.row),a=o.hasClass("l-selected");if(0==i.trigger("beforeCheckRow",[!a,r.data,r.data.__id,r.row]))return!1;var C=a?"unselect":"select";if(i[C](r.data),n.tree&&n.autoCheckChildren)for(var _=i.getChildren(r.data,!0),g=0,D=_.length;g<D;g++)i[C](_[g]);i.trigger("checkRow",[!a,r.data,r.data.__id,r.row])}!r.checkbox&&r.cell&&n.enabledEdit&&n.clickToEdit&&i._applyEditor(r.cell)}else if(r.row&&!i.enabledCheckbox()&&0!=n.selectable)if(r.cell&&n.enabledEdit&&n.clickToEdit&&i._applyEditor(r.cell),$(r.row).hasClass("l-selected")){if(!n.allowUnSelectRow)return void $(r.row).addClass("l-selected-again");i.unselect(r.data)}else i.select(r.data);else if(r.toolbar)if(r.first){if(0==i.trigger("toFirst",[i.element]))return!1;i.changePage("first")}else if(r.prev){if(0==i.trigger("toPrev",[i.element]))return!1;i.changePage("prev")}else if(r.next){if(0==i.trigger("toNext",[i.element]))return!1;i.changePage("next")}else if(r.last){if(0==i.trigger("toLast",[i.element]))return!1;i.changePage("last")}else if(r.load){if($("span",r.load).hasClass("l-disabled"))return!1;if(0==i.trigger("reload",[i.element]))return!1;if(n.url&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return!1;i.loadData(n.where)}},select:function(e){var t=this,i=this.options,n=t.getRow(e),r=n.__id,o=t.getRowObj(r);if(i.rowSelectable&&0!=t.trigger("beforeSelectRow",[n,r,o])){var a=t.getRowObj(r,!0);if(!t.enabledCheckbox()&&!t.ctrlKey||i.isSingleCheck){for(var l in t.selected){var s=t.selected[l];s.__id in t.records&&($(t.getRowObj(s)).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(t.getRowObj(s,!0)).removeClass("l-selected l-selected-again"))}t.selected=[]}o&&$(o).addClass("l-selected"),a&&$(a).addClass("l-selected"),t.selected[t.selected.length]=n,t.trigger("selectRow",[n,r,o])}},unselect:function(e){var t=this,i=(this.options,t.getRow(e)),n=i.__id,r=t.getRowObj(n),o=t.getRowObj(n,!0);$(r).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(o).removeClass("l-selected l-selected-again"),t._removeSelected(i),t.trigger("unSelectRow",[i,n,r])},isSelected:function(e){var t=this,i=(this.options,t.getRow(e));for(var n in t.selected)if(t.selected[n]==i)return!0;return!1},arrayToTree:function(e,t,i){function n(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var r=this.options,o="children";if(r.tree&&(o=r.tree.childrenName),!e||!e.length)return[];for(var a=[],l={},s=e.length,d=0;d<s;d++){var c=e[d],u=n(c[t]);l[u]=c}for(var d=0;d<s;d++){var h=e[d],u=n(h[i]),p=l[u];p?(p[o]=p[o]||[],p[o].push(h)):a.push(h)}return a},_onResize:function(){var e=this,t=this.options;if(t.height&&"auto"!=t.height){var i=$(window).height(),n=0,r=null;if("string"==typeof t.height&&t.height.indexOf("%")>0){var o=e.grid.parent();t.inWindow?(r=i,r-=parseInt($("body").css("paddingTop")),r-=parseInt($("body").css("paddingBottom"))):r=o.height(),n=r*parseInt(t.height)*.01,(t.inWindow||"body"==o[0].tagName.toLowerCase())&&(n-=e.grid.offset().top-parseInt($("body").css("paddingTop")))}else n=parseInt(t.height);n+=t.heightDiff,e.windowHeight=i,e._setHeight(n)}else e._updateHorizontalScrollStatus.ligerDefer(e,10);if(e.enabledFrozen()){var a=e.gridview1.width(),l=e.gridview.width();l-a<=0?e.gridview2.css({width:"auto"}):e.gridview2.css({width:l-a})}e.trigger("SysGridHeightChanged")},showFilter:function(){function e(){var e=o.getData();"server"==n.options.dataType?t(e):i(e)}function t(e){e&&e.rules&&e.rules.length?n.setParm("where",JSON.stringify(e)):n.removeParm("where"),n.loadData()}function i(e){n.loadData($.ligerFilter.getFilterFunction(e))}var n=this;this.options;if(n.winfilter)return void n.winfilter.show();var r=$('<div id="'+n.id+'_filtercontainer"></div>').width(380).height(120).hide(),o=r.ligerFilter({fields:function(){var e=[];return $(n.columns).each(function(){var t={name:this.name,display:this.display},i="int"==this.type||"number"==this.type||"float"==this.type,n="date"==this.type;i&&(t.type="number"),n&&(t.type="date"),this.editor&&(t.editor=this.editor),e.push(t)}),e}()});return o.addRule($(o.element.firstChild)),n.winfilter=$.ligerDialog.open({width:420,height:208,target:r,isResize:!0,top:50,buttons:[{text:"确定",onclick:function(t,i){e(),i.hide()}},{text:"取消",onclick:function(e,t){t.hide()}}]})}}),$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary,$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow,$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow,$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow,$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs,$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set,$.ligerui.controls.Grid.prototype.reload=$.ligerui.controls.Grid.prototype.loadData,$.ligerui.controls.Grid.prototype.refreshSize=$.ligerui.controls.Grid.prototype._onResize,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRange}(jQuery),function(e){e.fn.ligerLayout=function(t){return e.ligerui.run.call(this,"ligerLayout",arguments)},e.fn.ligerGetLayoutManager=function(){return e.ligerui.run.call(this,"ligerGetLayoutManager",arguments)},e.ligerDefaults.Layout={topHeight:50,bottomHeight:50,leftWidth:110,centerWidth:300,rightWidth:170,centerBottomHeight:100,allowCenterBottomResize:!0,inWindow:!0,heightDiff:0,height:"100%",onHeightChanged:null,isLeftCollapse:!1,isRightCollapse:!1,allowLeftCollapse:!0,allowRightCollapse:!0,allowLeftResize:!0,allowRightResize:!0,allowTopResize:!0,allowBottomResize:!0,space:3,onEndResize:null,minLeftWidth:80,minRightWidth:80,onLeftToggle:null,onRightToggle:null},e.ligerMethos.Layout={},e.ligerui.controls.Layout=function(t,i){e.ligerui.controls.Layout.base.constructor.call(this,t,i)},e.ligerui.controls.Layout.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Layout"},__idPrev:function(){return"Layout"},_extendMethods:function(){return e.ligerMethos.Layout},_init:function(){e.ligerui.controls.Layout.base._init.call(this);var t=this.options;null!=t.InWindow&&null==t.inWindow&&(t.inWindow=t.InWindow)},_render:function(){var t=this,i=this.options;if(t.layout=e(this.element),t.layout.addClass("l-layout"),t.width=t.layout.width(),e("> div[position=top]",t.layout).length>0&&(t.top=e("> div[position=top]",t.layout).wrap('<div class="l-layout-top" style="top:0px;"></div>').parent(),t.top.content=e("> div[position=top]",t.top),t.top.content.hasClass("l-layout-content")||t.top.content.addClass("l-layout-content"),t.topHeight=i.topHeight,t.topHeight&&t.top.height(t.topHeight)),e("> div[position=bottom]",t.layout).length>0){t.bottom=e("> div[position=bottom]",t.layout).wrap('<div class="l-layout-bottom"></div>').parent(),t.bottom.content=e("> div[position=bottom]",t.bottom),t.bottom.content.hasClass("l-layout-content")||t.bottom.content.addClass("l-layout-content"),t.bottomHeight=i.bottomHeight,t.bottomHeight&&t.bottom.height(t.bottomHeight);var n=t.bottom.content.attr("title");n&&(t.bottom.header=e('<div class="l-layout-header"></div>'),t.bottom.prepend(t.bottom.header),t.bottom.header.html(n),t.bottom.content.attr("title",""))}if(e("> div[position=left]",t.layout).length>0){t.left=e("> div[position=left]",t.layout).wrap('<div class="l-layout-left" style="left:0px;"></div>').parent(),t.left.header=e('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>'),t.left.prepend(t.left.header),t.left.header.toggle=e(".l-layout-header-toggle",t.left.header),t.left.content=e("> div[position=left]",t.left),t.left.content.hasClass("l-layout-content")||t.left.content.addClass("l-layout-content"),i.allowLeftCollapse||e(".l-layout-header-toggle",t.left.header).remove();var r=t.left.content.attr("title");r&&(t.left.content.attr("title",""),e(".l-layout-header-inner",t.left.header).html(r)),t.left.content.attr("hidetitle")&&(t.left.content.attr("title",""),t.left.header.remove()),t.leftWidth=i.leftWidth,t.leftWidth&&t.left.width(t.leftWidth)}if(e("> div[position=center]",t.layout).length>0){t.center=e("> div[position=center]",t.layout).wrap('<div class="l-layout-center" ></div>').parent(),t.center.content=e("> div[position=center]",t.center),t.center.content.addClass("l-layout-content");var o=t.center.content.attr("title");if(o&&(t.center.content.attr("title",""),t.center.header=e('<div class="l-layout-header"></div>'),t.center.prepend(t.center.header),t.center.header.html(o)),
t.center.content.attr("hidetitle")&&(t.center.content.attr("title",""),t.center.header.remove()),t.centerWidth=i.centerWidth,t.centerWidth&&t.center.width(t.centerWidth),e("> div[position=centerbottom]",t.layout).length>0){t.centerBottom=e("> div[position=centerbottom]",t.layout).wrap('<div class="l-layout-centerbottom" ></div>').parent(),t.centerBottom.content=e("> div[position=centerbottom]",t.centerBottom),t.centerBottom.content.addClass("l-layout-content");var o=t.centerBottom.content.attr("title");o&&(t.centerBottom.content.attr("title",""),t.centerBottom.header=e('<div class="l-layout-header"></div>'),t.centerBottom.prepend(t.centerBottom.header),t.centerBottom.header.html(o)),t.centerBottom.content.attr("hidetitle")&&(t.centerBottom.content.attr("title",""),t.centerBottom.header&&t.centerBottom.header.remove()),t.centerWidth&&t.centerBottom.width(t.centerWidth)}}if(e("> div[position=right]",t.layout).length>0){t.right=e("> div[position=right]",t.layout).wrap('<div class="l-layout-right"></div>').parent(),t.right.header=e('<div class="l-layout-header"><div class="l-layout-header-toggle"></div><div class="l-layout-header-inner"></div></div>'),t.right.prepend(t.right.header),t.right.header.toggle=e(".l-layout-header-toggle",t.right.header),i.allowRightCollapse||e(".l-layout-header-toggle",t.right.header).remove(),t.right.content=e("> div[position=right]",t.right),t.right.content.hasClass("l-layout-content")||t.right.content.addClass("l-layout-content");var a=t.right.content.attr("title");a&&(t.right.content.attr("title",""),e(".l-layout-header-inner",t.right.header).html(a)),t.right.content.attr("hidetitle")&&(t.right.content.attr("title",""),t.right.header.remove()),t.rightWidth=i.rightWidth,t.rightWidth&&t.right.width(t.rightWidth)}t.layout.lock=e("<div class='l-layout-lock'></div>"),t.layout.append(t.layout.lock),t._addDropHandle(),t.isLeftCollapse=i.isLeftCollapse,t.isRightCollapse=i.isRightCollapse,t.leftCollapse=e('<div class="l-layout-collapse-left" style="display: none; "><div class="l-layout-collapse-left-toggle"></div></div>'),t.rightCollapse=e('<div class="l-layout-collapse-right" style="display: none; "><div class="l-layout-collapse-right-toggle"></div></div>'),t.layout.append(t.leftCollapse).append(t.rightCollapse),t.leftCollapse.toggle=e("> .l-layout-collapse-left-toggle",t.leftCollapse),t.rightCollapse.toggle=e("> .l-layout-collapse-right-toggle",t.rightCollapse),t._setCollapse(),t._bulid(),e(window).resize(function(){t._onResize()}),t.set(i),t.mask.height(t.layout.height())},setLeftCollapse:function(e){var t=this;this.options;if(!t.left)return!1;t.isLeftCollapse=e,t.isLeftCollapse?(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()):(t.leftCollapse.hide(),t.leftDropHandle&&t.leftDropHandle.show(),t.left.show()),t._onResize(),t.trigger("leftToggle",[e])},setRightCollapse:function(e){var t=this;this.options;if(!t.right)return!1;t.isRightCollapse=e,t._onResize(),t.isRightCollapse?(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide()):(t.rightCollapse.hide(),t.rightDropHandle&&t.rightDropHandle.show(),t.right.show()),t._onResize(),t.trigger("rightToggle",[e])},_bulid:function(){var t=this,i=this.options;e("> .l-layout-left .l-layout-header,> .l-layout-right .l-layout-header",t.layout).hover(function(){e(this).addClass("l-layout-header-over")},function(){e(this).removeClass("l-layout-header-over")}),e(".l-layout-header-toggle",t.layout).hover(function(){e(this).addClass("l-layout-header-toggle-over")},function(){e(this).removeClass("l-layout-header-toggle-over")}),e(".l-layout-header-toggle",t.left).click(function(){t.setLeftCollapse(!0)}),e(".l-layout-header-toggle",t.right).click(function(){t.setRightCollapse(!0)}),t.middleTop=0,t.top&&(t.middleTop+=t.top.height(),t.middleTop+=parseInt(t.top.css("borderTopWidth")),t.middleTop+=parseInt(t.top.css("borderBottomWidth")),t.middleTop+=i.space),t.left&&(t.left.css({top:t.middleTop}),t.leftCollapse.css({top:t.middleTop})),t.center&&t.center.css({top:t.middleTop}),t.right&&(t.right.css({top:t.middleTop}),t.rightCollapse.css({top:t.middleTop})),t.left&&t.left.css({left:0}),t._onResize(),t._onResize()},_setCollapse:function(){var t=this;this.options;t.leftCollapse.hover(function(){e(this).addClass("l-layout-collapse-left-over")},function(){e(this).removeClass("l-layout-collapse-left-over")}),t.leftCollapse.toggle.hover(function(){e(this).addClass("l-layout-collapse-left-toggle-over")},function(){e(this).removeClass("l-layout-collapse-left-toggle-over")}),t.rightCollapse.hover(function(){e(this).addClass("l-layout-collapse-right-over")},function(){e(this).removeClass("l-layout-collapse-right-over")}),t.rightCollapse.toggle.hover(function(){e(this).addClass("l-layout-collapse-right-toggle-over")},function(){e(this).removeClass("l-layout-collapse-right-toggle-over")}),t.leftCollapse.toggle.click(function(){t.setLeftCollapse(!1)}),t.rightCollapse.toggle.click(function(){t.setRightCollapse(!1)}),t.left&&t.isLeftCollapse&&(t.leftCollapse.show(),t.leftDropHandle&&t.leftDropHandle.hide(),t.left.hide()),t.right&&t.isRightCollapse&&(t.rightCollapse.show(),t.rightDropHandle&&t.rightDropHandle.hide(),t.right.hide())},_addDropHandle:function(){var t=this,i=this.options;t.left&&i.allowLeftResize&&(t.leftDropHandle=e("<div class='l-layout-drophandle-left'></div>"),t.layout.append(t.leftDropHandle),t.leftDropHandle&&t.leftDropHandle.show(),t.leftDropHandle.mousedown(function(e){t._start("leftresize",e)})),t.right&&i.allowRightResize&&(t.rightDropHandle=e("<div class='l-layout-drophandle-right'></div>"),t.layout.append(t.rightDropHandle),t.rightDropHandle&&t.rightDropHandle.show(),t.rightDropHandle.mousedown(function(e){t._start("rightresize",e)})),t.top&&i.allowTopResize&&(t.topDropHandle=e("<div class='l-layout-drophandle-top'></div>"),t.layout.append(t.topDropHandle),t.topDropHandle.show(),t.topDropHandle.mousedown(function(e){t._start("topresize",e)})),t.bottom&&i.allowBottomResize&&(t.bottomDropHandle=e("<div class='l-layout-drophandle-bottom'></div>"),t.layout.append(t.bottomDropHandle),t.bottomDropHandle.show(),t.bottomDropHandle.mousedown(function(e){t._start("bottomresize",e)})),t.centerBottom&&i.allowCenterBottomResize&&(t.centerBottomDropHandle=e("<div class='l-layout-drophandle-centerbottom'></div>"),t.layout.append(t.centerBottomDropHandle),t.centerBottomDropHandle.show(),t.centerBottomDropHandle.mousedown(function(e){t._start("centerbottomresize",e)})),t.draggingxline=e("<div class='l-layout-dragging-xline'></div>"),t.draggingyline=e("<div class='l-layout-dragging-yline'></div>"),t.mask=e("<div class='l-dragging-mask'></div>"),t.layout.append(t.draggingxline).append(t.draggingyline).append(t.mask)},_setDropHandlePosition:function(){var e=this,t=this.options;e.leftDropHandle&&e.leftDropHandle.css({left:e.left.width()+parseInt(e.left.css("left")),height:e.middleHeight,top:e.middleTop}),e.rightDropHandle&&e.rightDropHandle.css({left:parseInt(e.right.css("left"))-t.space,height:e.middleHeight,top:e.middleTop}),e.topDropHandle&&e.topDropHandle.css({top:e.top.height()+parseInt(e.top.css("top")),width:e.top.width()}),e.bottomDropHandle&&e.bottomDropHandle.css({top:parseInt(e.bottom.css("top"))-t.space,width:e.bottom.width()}),e.centerBottomDropHandle&&e.centerBottomDropHandle.css({top:parseInt(e.centerBottom.css("top"))-t.space,left:parseInt(e.center.css("left")),width:e.center.width()})},_onResize:function(){var t=this,i=this.options,n=t.layout.height(),r=0,o=e(window).height(),a=null;if("string"==typeof i.height&&i.height.indexOf("%")>0){var l=t.layout.parent();i.inWindow||"body"==l[0].tagName.toLowerCase()?(a=o,a-=parseInt(e("body").css("paddingTop")),a-=parseInt(e("body").css("paddingBottom"))):a=l.height(),r=a*parseFloat(i.height)*.01,(i.inWindow||"body"==l[0].tagName.toLowerCase())&&(r-=t.layout.offset().top-parseInt(e("body").css("paddingTop")))}else r=parseInt(i.height);if(r+=i.heightDiff,t.layout.height(r),t.layoutHeight=t.layout.height(),t.middleWidth=t.layout.width(),t.middleHeight=t.layout.height(),t.top&&(t.middleHeight-=t.top.height(),t.middleHeight-=parseInt(t.top.css("borderTopWidth")),t.middleHeight-=parseInt(t.top.css("borderBottomWidth")),t.middleHeight-=i.space),t.bottom&&(t.middleHeight-=t.bottom.height(),t.middleHeight-=parseInt(t.bottom.css("borderTopWidth")),t.middleHeight-=parseInt(t.bottom.css("borderBottomWidth")),t.middleHeight-=i.space),t.middleHeight-=2,t.hasBind("heightChanged")&&t.layoutHeight!=n&&t.trigger("heightChanged",[{layoutHeight:t.layoutHeight,diff:t.layoutHeight-n,middleHeight:t.middleHeight}]),t.center){t.centerWidth=t.middleWidth,t.left&&(t.isLeftCollapse?(t.centerWidth-=t.leftCollapse.width(),t.centerWidth-=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.leftCollapse.css("left")),t.centerWidth-=i.space):(t.centerWidth-=t.leftWidth,t.centerWidth-=parseInt(t.left.css("borderLeftWidth")),t.centerWidth-=parseInt(t.left.css("borderRightWidth")),t.centerWidth-=parseInt(t.left.css("left")),t.centerWidth-=i.space)),t.right&&(t.isRightCollapse?(t.centerWidth-=t.rightCollapse.width(),t.centerWidth-=parseInt(t.rightCollapse.css("borderLeftWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("borderRightWidth")),t.centerWidth-=parseInt(t.rightCollapse.css("right")),t.centerWidth-=i.space):(t.centerWidth-=t.rightWidth,t.centerWidth-=parseInt(t.right.css("borderLeftWidth")),t.centerWidth-=parseInt(t.right.css("borderRightWidth")),t.centerWidth-=i.space)),t.centerLeft=0,t.left&&(t.isLeftCollapse?(t.centerLeft+=t.leftCollapse.width(),t.centerLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.centerLeft+=parseInt(t.leftCollapse.css("left")),t.centerLeft+=i.space):(t.centerLeft+=t.left.width(),t.centerLeft+=parseInt(t.left.css("borderLeftWidth")),t.centerLeft+=parseInt(t.left.css("borderRightWidth")),t.centerLeft+=i.space)),t.center.css({left:t.centerLeft}),t.centerWidth>=0&&t.center.width(t.centerWidth),t.middleHeight>=0&&t.center.height(t.middleHeight);var s=t.middleHeight;t.center.header&&(s-=t.center.header.height()),s>=0&&t.center.content.height(s),t._updateCenterBottom(!0)}t.left&&(t.leftCollapse.height(t.middleHeight),t.left.height(t.middleHeight)),t.right&&(t.rightCollapse.height(t.middleHeight),t.right.height(t.middleHeight),t.rightLeft=0,t.left&&(t.isLeftCollapse?(t.rightLeft+=t.leftCollapse.width(),t.rightLeft+=parseInt(t.leftCollapse.css("borderLeftWidth")),t.rightLeft+=parseInt(t.leftCollapse.css("borderRightWidth")),t.rightLeft+=i.space):(t.rightLeft+=t.left.width(),t.rightLeft+=parseInt(t.left.css("borderLeftWidth")),t.rightLeft+=parseInt(t.left.css("borderRightWidth")),t.rightLeft+=parseInt(t.left.css("left")),t.rightLeft+=i.space)),t.center&&(t.rightLeft+=t.center.width(),t.rightLeft+=parseInt(t.center.css("borderLeftWidth")),t.rightLeft+=parseInt(t.center.css("borderRightWidth")),t.rightLeft+=i.space),t.right.css({left:t.rightLeft})),t.bottom&&(t.bottomTop=t.layoutHeight-t.bottom.height()-2,t.bottom.css({top:t.bottomTop})),t._setDropHandlePosition()},_updateCenterBottom:function(e){var t=this,i=this.options;if(t.centerBottom){if(e){var n=t.centerBottomHeight||i.centerBottomHeight;t.centerBottom.css({left:t.centerLeft}),t.centerWidth>=0&&t.centerBottom.width(t.centerWidth);var r=t.center.height(),o=parseInt(t.center.css("top"));t.centerBottom.height(n),t.centerBottom.css({top:o+r-n+2}),t.center.height(r-n-2)}var a=parseInt(t.center.css("left"));t.centerBottom.width(t.center.width()).css({left:a})}},_start:function(t,i){var n=this;this.options;if(n.dragtype=t,"leftresize"==t||"rightresize"==t)n.xresize={startX:i.pageX},n.draggingyline.css({left:i.pageX-n.layout.offset().left,height:n.middleHeight,top:n.middleTop}).show(),e("body").css("cursor","col-resize"),n.mask.height(n.layout.height()).removeClass("l-layout-ymask").addClass("l-layout-xmask").show();else if("topresize"==t||"bottomresize"==t)n.yresize={startY:i.pageY},n.draggingxline.css({top:i.pageY-n.layout.offset().top,width:n.layout.width()}).show(),e("body").css("cursor","row-resize"),n.mask.height(n.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show();else{if("centerbottomresize"!=t)return;n.yresize={startY:i.pageY},n.draggingxline.css({top:i.pageY-n.layout.offset().top,width:n.layout.width()}).show(),e("body").css("cursor","row-resize"),n.mask.height(n.layout.height()).removeClass("l-layout-xmask").addClass("l-layout-ymask").show()}n.layout.lock.width(n.layout.width()),n.layout.lock.height(n.layout.height()),n.layout.lock.show(),(e.browser.msie||e.browser.safari)&&e("body").bind("selectstart",function(){return!1}),e(document).bind("mouseup",function(){n._stop.apply(n,arguments)}),e(document).bind("mousemove",function(){n._drag.apply(n,arguments)})},_drag:function(t){var i=this;this.options;i.xresize?(i.xresize.diff=t.pageX-i.xresize.startX,i.draggingyline.css({left:t.pageX-i.layout.offset().left}),e("body").css("cursor","col-resize")):i.yresize&&(i.yresize.diff=t.pageY-i.yresize.startY,i.draggingxline.css({top:t.pageY-i.layout.offset().top}),e("body").css("cursor","row-resize"))},_stop:function(t){var i,n=this,r=this.options;if(n.xresize&&void 0!=n.xresize.diff){if(i=n.xresize.diff,"leftresize"==n.dragtype){if(r.minLeftWidth&&n.leftWidth+n.xresize.diff<r.minLeftWidth)return;n.leftWidth+=n.xresize.diff,n.left.width(n.leftWidth),n.center?n.center.width(n.center.width()-n.xresize.diff).css({left:parseInt(n.center.css("left"))+n.xresize.diff}):n.right&&n.right.width(n.left.width()-n.xresize.diff).css({left:parseInt(n.right.css("left"))+n.xresize.diff})}else if("rightresize"==n.dragtype){if(r.minRightWidth&&n.rightWidth-n.xresize.diff<r.minRightWidth)return;n.rightWidth-=n.xresize.diff,n.right.width(n.rightWidth).css({left:parseInt(n.right.css("left"))+n.xresize.diff}),n.center?n.center.width(n.center.width()+n.xresize.diff):n.left&&n.left.width(n.left.width()+n.xresize.diff)}n._updateCenterBottom()}else if(n.yresize&&void 0!=n.yresize.diff)if(i=n.yresize.diff,"topresize"==n.dragtype)n.top.height(n.top.height()+n.yresize.diff),n.middleTop+=n.yresize.diff,n.middleHeight-=n.yresize.diff,n.left&&(n.left.css({top:n.middleTop}).height(n.middleHeight),n.leftCollapse.css({top:n.middleTop}).height(n.middleHeight)),n.center&&n.center.css({top:n.middleTop}).height(n.middleHeight),n.right&&(n.right.css({top:n.middleTop}).height(n.middleHeight),n.rightCollapse.css({top:n.middleTop}).height(n.middleHeight)),n._updateCenterBottom(!0);else if("bottomresize"==n.dragtype)n.bottom.height(n.bottom.height()-n.yresize.diff),n.middleHeight+=n.yresize.diff,n.bottomTop+=n.yresize.diff,n.bottom.css({top:n.bottomTop}),n.left&&(n.left.height(n.middleHeight),n.leftCollapse.height(n.middleHeight)),n.center&&n.center.height(n.middleHeight),n.right&&(n.right.height(n.middleHeight),n.rightCollapse.height(n.middleHeight)),n._updateCenterBottom(!0);else if("centerbottomresize"==n.dragtype){n.centerBottomHeight=n.centerBottomHeight||r.centerBottomHeight,n.centerBottomHeight-=n.yresize.diff;var o=parseInt(n.centerBottom.css("top"));n.centerBottom.css("top",o+n.yresize.diff),n.centerBottom.height(n.centerBottom.height()-n.yresize.diff),n.center.height(n.center.height()+n.yresize.diff)}n.trigger("endResize",[{direction:n.dragtype?n.dragtype.replace(/resize/,""):"",diff:i},t]),n._setDropHandlePosition(),n.draggingxline.hide(),n.draggingyline.hide(),n.mask.hide(),n.xresize=n.yresize=n.dragtype=!1,n.layout.lock.hide(),(e.browser.msie||e.browser.safari)&&e("body").unbind("selectstart"),e(document).unbind("mousemove",n._drag),e(document).unbind("mouseup",n._stop),e("body").css("cursor","")}})}(jQuery),function(e){e.fn.ligerListBox=function(t){return e.ligerui.run.call(this,"ligerListBox",arguments)},e.ligerDefaults.ListBox={isMultiSelect:!1,isShowCheckBox:!1,columns:null,width:150,height:100,onSelect:!1,onSelected:null,valueField:"id",textField:"text",valueFieldID:null,split:";",data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,render:null,css:null,value:null,valueFieldCssClass:null},e.ligerMethos.ListBox=e.ligerMethos.ListBox||{},e.ligerui.controls.ListBox=function(t,i){e.ligerui.controls.ListBox.base.constructor.call(this,t,i)},e.ligerui.controls.ListBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"ListBox"},_extendMethods:function(){return e.ligerMethos.ListBox},_init:function(){e.ligerui.controls.ListBox.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-ligerid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.selectBox=e("<div></div>").insertBefore(this.element):t.selectBox=e(this.element),t.selectBox.html('<div class="l-listbox-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-listbox-table"></table></div>').addClass("l-listbox").append(t.valueField),t.selectBox.table=e("table:first",t.selectBox),t.set(i),t._addClickEven()},destroy:function(){this.selectBox&&this.selectBox.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setIsShowCheckBox:function(t){t?e("table",this.selectBox).addClass("l-table-checkbox"):e("table",this.selectBox).addClass("l-table-nocheckbox")},_setCss:function(e){e&&this.selectBox.addClass(e)},_setDisabled:function(e){e?this.selectBox.addClass("l-text-disabled"):this.selectBox.removeClass("l-text-disabled")},_setWidth:function(e){this.selectBox.width(e)},_setHeight:function(e){this.selectBox.height(e)},getText:function(){var e=this.getValue();return this.findTextByValue(e)},findTextByValue:function(t){var i=this,n=this.options;if(null==t||""==t)return"";var r=[],o=function(e){for(var i=t.toString().split(n.split),r=0;r<i.length;r++)if(i[r]==e)return!0;return!1};return e(i.data).each(function(e,t){var i=t[n.valueField],a=t[n.textField];o(i)&&r.push(a)}),r.join(n.split)},getDataByValue:function(e){for(var t=this,i=this.options,n=0,r=t.data.length;n<r;n++)if(t.data[n][i.valueField]==e)return t.data[n];return null},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var n="object"==typeof e,r=0,o=t.data.length;r<o;r++)if(n){if(t.data[r]==e)return r}else if(t.data[r][i.valueField]&&t.data[r][i.valueField].toString()==e.toString())return r;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var n=i.indexOf(t);-1!=n&&i.data.splice(n,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},getSelectedItems:function(){var t=this,i=this.options;if(!t.data)return null;var n=t.getValue();if(!n)return null;var r=[];return e(n.split(i.split)).each(function(){var e=t.indexOf(this.toString());-1!=e&&r.push(t.data[e])}),r},_setValue:function(e){this.options.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){if(t){var i=this,n=this.options,r=e.isFunction(n.urlParms)?n.urlParms.call(i):n.urlParms;if(r)for(name in r)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+r[name];var o=e.isFunction(n.parms)?n.parms():n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof o&&(o=liger.toJSON(o));var a={type:n.ajaxType||"post",url:t,data:o,cache:!1,dataType:"json",success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}};n.ajaxContentType&&(a.contentType=n.ajaxContentType),e.ajax(a)}},reload:function(){this.set("url",this.options.url)},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,n=i.get("parms");n||(n={}),n[e]=t,i.set("parms",n)}},clearContent:function(){var t=this;this.options;e("table",t.selectBox).html("")},_setColumns:function(e){var t=this;this.options.columns=e,t.refresh()},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var t=this,i=this.options,n=this.data;if(this.clearContent(),n){if(i.columns){t.selectBox.table.headrow=e("<tr class='l-table-headerow'><td width='18px' class='l-checkboxrow'></td></tr>"),t.selectBox.table.append(t.selectBox.table.headrow),t.selectBox.table.addClass("l-listbox-grid");for(var r=0;r<i.columns.length;r++){var o=e("<td columnindex='"+r+"' columnname='"+i.columns[r].name+"'>"+i.columns[r].header+"</td>");i.columns[r].width&&o.width(i.columns[r].width),t.selectBox.table.headrow.append(o)}}for(var a=[],l=0;l<n.length;l++){var s=n[l][i.valueField],d=n[l][i.textField],c=" value='"+s+"' index='"+l+"'";if(i.columns){a.push("<tr "+c+"><td style='width:18px;' class='l-checkboxrow'><input type='checkbox' "+c+"/></td>");for(var r=0;r<i.columns.length;r++){var u=i.columns[r].name;a.push("<td>"+n[l][u]+"</td>")}a.push("</tr>")}else{a.push("<tr "+c+">"),a.push("<td style='width:18px;' class='l-checkboxrow'><input type='checkbox'"+c+"/></td>");var h=d;i.render&&(h=i.render({data:n[l],value:s,text:d})),a.push("<td align='left'>"+h+"</td></tr>")}}t.selectBox.table.append(a.join(""))}},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},updateStyle:function(){this._dataInit()},selectAll:function(){var t=this,i=this.options,n=[];e("tr",t.selectBox).each(function(){var t=e(this);n.push(t.attr("value"))}),e("tr",t.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=!0}),t.valueField.val(n.join(i.split))},_dataInit:function(){var t=this,i=this.options,n=i.value;null!=n?t._changeValue(n):""!=t.valueField.val()&&(i.value=t.valueField.val());var r=(n||"").toString().split(i.split);e("tr.l-selected",t.selectBox).removeClass("l-selected").find(":checkbox").each(function(){this.checked=!1}),e(r).each(function(i,n){e("tr[value='"+n+"']",t.selectBox).addClass("l-selected").find(":checkbox").each(function(){this.checked=!0})})},_changeValue:function(e){var t=this;this.options;t.valueField.val(e),t.selectedValue=e},_updateValue:function(){var t=this,i=this.options,n=[];e("tr",t.selectBox).each(function(){var t=e(this);t.hasClass("l-selected")&&n.push(t.attr("value"))}),t._changeValue(n.join(i.split))},_addClickEven:function(){var t=this,i=this.options;t.selectBox.click(function(n){var r=n.target||n.srcElement,o=e(r).parents("tr:first");if(o.length){var a=o.attr("value"),l=t.findTextByValue(a),s=t.getDataByValue(a);if(t.hasBind("select")&&0==t.trigger("select",[a,l,s]))return!1;i.isMultiSelect||e("tr.l-selected",t.selectBox).not(o).removeClass("l-selected").find(":checkbox").each(function(){this.checked=!1}),o.hasClass("l-selected")?o.removeClass("l-selected"):o.addClass("l-selected"),o.find(":checkbox").each(function(){this.checked=o.hasClass("l-selected")}),t._updateValue(),t.trigger("selected",[a,l,s])}})}})}(jQuery),function(e){e.ligerMenu=function(t){return e.ligerui.run.call(null,"ligerMenu",arguments)},e.ligerDefaults.Menu={width:120,top:0,left:0,cls:null,items:null,shadow:!0},e.ligerMethos.Menu={},e.ligerui.controls.Menu=function(t){e.ligerui.controls.Menu.base.constructor.call(this,null,t)},e.ligerui.controls.Menu.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Menu"},__idPrev:function(){return"Menu"},_extendMethods:function(){return e.ligerMethos.Menu},_render:function(){var t=this,i=this.options;t.menuItemCount=0,t.menus={},t.menu=t.createMenu(),t.element=t.menu[0],t.menu.css({top:i.top,left:i.left,width:i.width}),i.cls&&t.menu.addClass(i.cls),i.items&&e(i.items).each(function(e,i){t.addItem(i)}),e(document).bind("click.menu",function(){for(var e in t.menus){var i=t.menus[e];if(!i)return;i.hide(),i.shadow&&i.shadow.hide()}}),t.set(i)},show:function(e,t){var i=this;this.options;void 0==t&&(t=i.menu),e&&void 0!=e.left&&t.css({left:e.left}),e&&void 0!=e.top&&t.css({top:e.top}),t.show(),i.updateShadow(t)},updateShadow:function(e){this.options.shadow&&(e.shadow.css({left:e.css("left"),top:e.css("top"),width:e.outerWidth(),height:e.outerHeight()}),e.is(":visible")?e.shadow.show():e.shadow.hide())},hide:function(e){var t=this;this.options;void 0==e&&(e=t.menu),t.hideAllSubMenu(e),e.hide(),t.updateShadow(e)},toggle:function(){var e=this;this.options;e.menu.toggle(),e.updateShadow(e.menu)},removeItem:function(t){var i=this;this.options;e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).remove()},setEnabled:function(t){var i=this;this.options;e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).removeClass("l-menu-item-disable")},setMenuText:function(t,i){var n=this;this.options;e("> .l-menu-item[menuitemid="+t+"] >.l-menu-item-text:first",n.menu.items).html(i)},setDisabled:function(t){var i=this;this.options;e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).addClass("l-menu-item-disable")},isEnable:function(t){var i=this;this.options;return!e("> .l-menu-item[menuitemid="+t+"]",i.menu.items).hasClass("l-menu-item-disable")},getItemCount:function(){var t=this;this.options;return e("> .l-menu-item",t.menu.items).length},addItem:function(t,i){var n=this,r=this.options;if(t){if(void 0==i&&(i=n.menu),t.line)return void i.items.append('<div class="l-menu-item-line"></div>');var o=e('<div class="l-menu-item"><div class="l-menu-item-text"></div> </div>'),a=e("> .l-menu-item",i.items).length;if(i.items.append(o),o.attr("ligeruimenutemid",++n.menuItemCount),t.id&&o.attr("menuitemid",t.id),t.text&&e(">.l-menu-item-text:first",o).html(t.text),t.icon&&o.prepend('<div class="l-menu-item-icon l-icon-'+t.icon+'"></div>'),t.img&&o.prepend('<div class="l-menu-item-icon"><img style="width:16px;height:16px;margin:2px;" src="'+t.img+'" /></div>'),(t.disable||t.disabled)&&o.addClass("l-menu-item-disable"),t.children){o.append('<div class="l-menu-item-arrow"></div>');var l=n.createMenu(o.attr("ligeruimenutemid"));n.menus[o.attr("ligeruimenutemid")]=l,l.width(r.width),l.hover(null,function(){l.showedSubMenu||n.hide(l)}),e(t.children).each(function(){n.addItem(this,l)})}t.click&&o.click(function(){e(this).hasClass("l-menu-item-disable")||t.click(t,a)}),t.dblclick&&o.dblclick(function(){e(this).hasClass("l-menu-item-disable")||t.dblclick(t,a)});var s=e("> .l-menu-over:first",i);o.hover(function(){if(!e(this).hasClass("l-menu-item-disable")){var r=e(this).offset().top,o=r-i.offset().top;if(s.css({top:o}),n.hideAllSubMenu(i),t.children){var a=e(this).attr("ligeruimenutemid");if(!a)return;n.menus[a]&&(n.show({top:r,left:e(this).offset().left+e(this).width()-5},n.menus[a]),i.showedSubMenu=!0)}}},function(){if(!e(this).hasClass("l-menu-item-disable")){e(this).attr("ligeruimenutemid");if(t.children){if(!e(this).attr("ligeruimenutemid"))return}}})}},hideAllSubMenu:function(t){var i=this;this.options;void 0==t&&(t=i.menu),e("> .l-menu-item",t.items).each(function(){if(e("> .l-menu-item-arrow",this).length>0){var t=e(this).attr("ligeruimenutemid");if(!t)return;i.menus[t]&&i.hide(i.menus[t])}}),t.showedSubMenu=!1},createMenu:function(t){var i=this,n=this.options,r=e('<div class="l-menu" style="display:none"><div class="l-menu-yline"></div><div class="l-menu-over"><div class="l-menu-over-l"></div> <div class="l-menu-over-r"></div></div><div class="l-menu-inner"></div></div>');return t&&r.attr("ligeruiparentmenuitemid",t),r.items=e("> .l-menu-inner:first",r),r.appendTo("body"),n.shadow&&(r.shadow=e('<div class="l-menu-shadow"></div>').insertAfter(r),i.updateShadow(r)),r.hover(null,function(){r.showedSubMenu||e("> .l-menu-over:first",r).css({top:-24})}),t?i.menus[t]=r:i.menus[0]=r,r}}),e.ligerui.controls.Menu.prototype.setEnable=e.ligerui.controls.Menu.prototype.setEnabled,e.ligerui.controls.Menu.prototype.setDisable=e.ligerui.controls.Menu.prototype.setDisabled}(jQuery),function(e){e.fn.ligerMenuBar=function(t){return e.ligerui.run.call(this,"ligerMenuBar",arguments)},e.fn.ligerGetMenuBarManager=function(){return e.ligerui.run.call(this,"ligerGetMenuBarManager",arguments)},e.ligerDefaults.MenuBar={},e.ligerMethos.MenuBar={},e.ligerui.controls.MenuBar=function(t,i){e.ligerui.controls.MenuBar.base.constructor.call(this,t,i)},e.ligerui.controls.MenuBar.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"MenuBar"},__idPrev:function(){return"MenuBar"},_extendMethods:function(){return e.ligerMethos.MenuBar},_render:function(){var t=this,i=this.options;t.menubar=e(this.element),t.menubar.hasClass("l-menubar")||t.menubar.addClass("l-menubar"),i&&i.items&&e(i.items).each(function(e,i){t.addItem(i)}),e(document).click(function(){e(".l-panel-btn-selected",t.menubar).removeClass("l-panel-btn-selected")}),t.set(i)},addItem:function(t){var i=this,n=(this.options,e('<div class="l-menubar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div><div class="l-menubar-item-down"></div></div>'));if(i.menubar.append(n),t.id&&n.attr("menubarid",t.id),t.text&&e("span:first",n).html(t.text),t.disable&&n.addClass("l-menubar-item-disable"),t.click&&n.click(function(){t.click(t)}),t.menu){var r=e.ligerMenu(t.menu);n.hover(function(){i.actionMenu&&i.actionMenu.hide();var t=e(this).offset().left,n=e(this).offset().top+e(this).height();r.show({top:n,left:t}),i.actionMenu=r,e(this).addClass("l-panel-btn-over l-panel-btn-selected").siblings(".l-menubar-item").removeClass("l-panel-btn-selected")},function(){e(this).removeClass("l-panel-btn-over")})}else n.hover(function(){e(this).addClass("l-panel-btn-over")},function(){e(this).removeClass("l-panel-btn-over")}),e(".l-menubar-item-down",n).remove()}})}(jQuery),function(e){e.ligerMessageBox=function(t){return e.ligerui.run.call(null,"ligerMessageBox",arguments,{isStatic:!0})},e.ligerDefaults.MessageBox={isDrag:!0},e.ligerMethos.MessageBox={},e.ligerui.controls.MessageBox=function(t){e.ligerui.controls.MessageBox.base.constructor.call(this,null,t)},e.ligerui.controls.MessageBox.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"MessageBox"},__idPrev:function(){return"MessageBox"},_extendMethods:function(){return e.ligerMethos.MessageBox},_render:function(){var t=this,i=this.options,n="";n+='<div class="l-messagebox">',n+='        <div class="l-messagebox-lt"></div><div class="l-messagebox-rt"></div>',n+='        <div class="l-messagebox-l"></div><div class="l-messagebox-r"></div> ',n+='        <div class="l-messagebox-image"></div>',n+='        <div class="l-messagebox-title">',n+='            <div class="l-messagebox-title-inner"></div>',n+='            <div class="l-messagebox-close"></div>',n+="        </div>",n+='        <div class="l-messagebox-content">',n+="        </div>",n+='        <div class="l-messagebox-buttons"><div class="l-messagebox-buttons-inner">',n+="        </div></div>",n+="    </div>",t.messageBox=e(n),e("body").append(t.messageBox),t.messageBox.close=function(){t._removeWindowMask(),t.messageBox.remove()},i.width&&t.messageBox.width(i.width),i.title&&e(".l-messagebox-title-inner",t.messageBox).html(i.title),i.content&&e(".l-messagebox-content",t.messageBox).html(i.content),i.buttons&&(e(i.buttons).each(function(i,n){
var r=e('<div class="l-messagebox-btn"><div class="l-messagebox-btn-l"></div><div class="l-messagebox-btn-r"></div><div class="l-messagebox-btn-inner"></div></div>');e(".l-messagebox-btn-inner",r).html(n.text),e(".l-messagebox-buttons-inner",t.messageBox).append(r),n.width&&r.width(n.width),n.onclick&&r.click(function(){n.onclick(n,i,t.messageBox)})}),e(".l-messagebox-buttons-inner",t.messageBox).append("<div class='l-clear'></div>"));var r=t.messageBox.width(),o=0;e(".l-messagebox-buttons-inner .l-messagebox-btn",t.messageBox).each(function(){o+=e(this).width()}),e(".l-messagebox-buttons-inner",t.messageBox).css({marginLeft:parseInt(.5*(r-o))}),t._applyWindowMask(),t._applyDrag(),t._setImage();var a=0,l=0,s=i.width||t.messageBox.width();null!=i.left?a=i.left:i.left=a=.5*(e(window).width()-s),null!=i.top?l=i.top:i.top=l=.5*(e(window).height()-t.messageBox.height())+e(window).scrollTop()-10,a<0&&(i.left=a=0),l<0&&(i.top=l=0),t.messageBox.css({left:a,top:l}),e(".l-messagebox-btn",t.messageBox).hover(function(){e(this).addClass("l-messagebox-btn-over")},function(){e(this).removeClass("l-messagebox-btn-over")}),e(".l-messagebox-close",t.messageBox).hover(function(){e(this).addClass("l-messagebox-close-over")},function(){e(this).removeClass("l-messagebox-close-over")}).click(function(){t.messageBox.close()}),t.set(i)},close:function(){this.options;this.g._removeWindowMask(),this.messageBox.remove()},_applyWindowMask:function(){this.options;e(".l-window-mask").remove(),e("<div class='l-window-mask' style='display: block;'></div>").appendTo(e("body"))},_removeWindowMask:function(){this.options;e(".l-window-mask").remove()},_applyDrag:function(){var t=this;this.options.isDrag&&e.fn.ligerDrag&&t.messageBox.ligerDrag({handler:".l-messagebox-title-inner",animate:!1})},_setImage:function(){var t=this,i=this.options;i.type&&("success"==i.type||"donne"==i.type?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-donne").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):"error"==i.type?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-error").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):"warn"==i.type?(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-warn").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:30})):"question"==i.type&&(e(".l-messagebox-image",t.messageBox).addClass("l-messagebox-image-question").show(),e(".l-messagebox-content",t.messageBox).css({paddingLeft:64,paddingBottom:40})))}}),e.ligerMessageBox.show=function(t){return e.ligerMessageBox(t)},e.ligerMessageBox.alert=function(t,i,n,r){t=t||"",i=i||t;var o=function(e,t,i){i.close(),r&&r(e,t,i)};return p={title:t,content:i,buttons:[{text:"确定",onclick:o}]},n&&(p.type=n),e.ligerMessageBox(p)},e.ligerMessageBox.confirm=function(t,i,n){var r=function(e,t,i){i.close(),n&&n(0==t)};return p={type:"question",title:t,content:i,buttons:[{text:"是",onclick:r},{text:"否",onclick:r}]},e.ligerMessageBox(p)},e.ligerMessageBox.success=function(t,i,n){return e.ligerMessageBox.alert(t,i,"success",n)},e.ligerMessageBox.error=function(t,i,n){return e.ligerMessageBox.alert(t,i,"error",n)},e.ligerMessageBox.warn=function(t,i,n){return e.ligerMessageBox.alert(t,i,"warn",n)},e.ligerMessageBox.question=function(t,i){return e.ligerMessageBox.alert(t,i,"question")}}(jQuery),function(e){e.fn.ligerPanel=function(t){return e.ligerui.run.call(this,"ligerPanel",arguments)},e.ligerDefaults.Panel={width:400,height:300,title:"Panel",content:null,url:null,urlParms:null,frameName:null,data:null,showClose:!1,showToggle:!0,showRefresh:!1,icon:null,onClose:null,onClosed:null,onLoaded:null,onToggle:null},e.ligerDefaults.PanelString={refreshMessage:"刷新",closeMessage:"关闭",expandMessage:"展开",collapseMessage:"收起"},e.ligerMethos.Panel={},e.ligerui.controls.Panel=function(t,i){e.ligerui.controls.Panel.base.constructor.call(this,t,i)},e.ligerui.controls.Panel.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Panel"},__idPrev:function(){return"Panel"},_extendMethods:function(){return e.ligerMethos.Panel},_init:function(){var t=this,i=this.options;e.ligerui.controls.Panel.base._init.call(this),i.content=i.content||e(t.element).html()},_render:function(){var t=this,i=this.options;t.panel=e(t.element).addClass("l-panel").html(""),t.panel.append('<div class="l-panel-header"><span></span><div class="icons"></div></div><div class="l-panel-content"></div>'),t.set(i),t.panel.find(".l-panel-header").hover(function(){e(this).addClass("l-panel-header-hover")},function(){e(this).removeClass("l-panel-header-hover")}),t.panel.bind("click.panel",function(i){var n=i.target||i.srcElement,r=e(n);if(r.hasClass("l-panel-header-toggle")){var o=!t.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide");t.toggle(),t.trigger("toggle",[o])}else r.hasClass("l-panel-header-close")?t.close():r.hasClass("l-panel-header-refresh")&&t.refresh()})},_setChildren:function(t){var i=this,n=(this.options,{input:["textbox","combobox","select"]}),r={grid:"ligerGrid",toolbar:"ligerToolBar",tree:"ligerTree",form:"ligerForm",menu:"ligerMenu",menubar:"ligerMenuBar",portal:"ligerPortal",combobox:"ligerComboBox",textbox:"ligerTextBox",spinner:"ligerSpinner",listbox:"ligerListBox",checkbox:"ligerCheckBox",radio:"ligerRadio",checkboxlist:"ligerCheckBoxList",radiolist:"ligerRadioList",popupedit:"ligerPopupEdit",button:"ligerButton",dateeditor:"ligerDateEditor",dialog:"ligerDialog",panel:"ligerPanel",layout:"ligerLayout",accordion:"ligerAccordion",tab:"ligerTab"};if(t&&t.length)for(var o=0;o<t.length;o++){var a=t[o],l=a.type,s=n[l]||"div",d=r[l];if(d){var c=document.createElement(s);i.panel.find(".l-panel-content").append(c);var u=e.extend({},a);u.type=null,e(c)[d](u)}}},collapse:function(){var e=this;this.options;e.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide")||e.toggle()},expand:function(){var e=this;this.options;e.panel.find(".l-panel-header .l-panel-header-toggle:first").hasClass("l-panel-header-toggle-hide")&&e.toggle()},toggle:function(){var e=this,t=this.options,i=e.panel.find(".l-panel-header .l-panel-header-toggle:first");i.hasClass("l-panel-header-toggle-hide")?(i.removeClass("l-panel-header-toggle-hide"),i.attr("title",t.collapseMessage)):(i.addClass("l-panel-header-toggle-hide"),i.attr("title",t.expandMessage)),e.panel.find(".l-panel-content:first").toggle()},refresh:function(){var e=this,t=this.options;e.set("url",t.url)},_setShowToggle:function(t){var i=this,n=this.options,r=i.panel.find(".l-panel-header:first");if(t){var o=e("<a class='l-panel-icon l-panel-header-toggle'></a>");o.appendTo(r.find(".icons")),o.attr("title",n.collapseMessage)}else r.find(".l-panel-header-toggle").remove()},_setContent:function(e){var t=this,i=(this.options,t.panel.find(".l-panel-content:first"));e&&i.html(e)},_setUrl:function(t){var i=this,n=this.options,r=i.panel.find(".l-panel-content:first");if(t){var o=e.isFunction(n.urlParms)?n.urlParms.call(i):n.urlParms;if(o)for(name in o)t+=-1==t.indexOf("?")?"?":"&",t+=name+"="+o[name];if(!i.jiframe){i.jiframe=e("<iframe frameborder='0'></iframe>");var a=n.frameName?n.frameName:"ligerpanel"+(new Date).getTime();i.jiframe.attr("name",a),i.jiframe.attr("id",a),r.prepend(i.jiframe),i.jiframe[0].panel=i,i.frame=window.frames[i.jiframe.attr("name")]}setTimeout(function(){0==r.find(".l-panel-loading:first").length&&r.append("<div class='l-panel-loading' style='display:block;'></div>");var n=e(".l-panel-loading:first",r);i.jiframe.attr("src",t).bind("load.panel",function(){n.hide(),i.trigger("loaded")})},0)}},_setShowClose:function(t){var i=this,n=this.options,r=i.panel.find(".l-panel-header:first");if(t){var o=e("<a class='l-panel-icon l-panel-header-close'></a>");o.appendTo(r.find(".icons")),o.attr("title",n.closeMessage)}else r.find(".l-panel-header-close").remove()},_setShowRefresh:function(t){var i=this,n=this.options,r=i.panel.find(".l-panel-header:first");if(t){var o=e("<a class='l-panel-icon l-panel-header-refresh'></a>");o.appendTo(r.find(".icons")),o.attr("title",n.refreshMessage)}else r.find(".l-panel-header-refresh").remove()},close:function(){var e=this;this.options;0!=e.trigger("close")&&(e.panel.remove(),e.trigger("closed"))},show:function(){this.panel.show()},_setIcon:function(e){var t=this;e?(t.panel.addClass("l-panel-hasicon"),t.panel.append('<img src="'+e+'" />')):(t.panel.removeClass("l-panel-hasicon"),t.panel.find("img").remove())},_setWidth:function(e){"string"==typeof e?e.indexOf("%")>-1?this.panel.width(e):this.panel.width(parseInt(e)):this.panel.width(e)},_setHeight:function(e){var t=this,i=(this.options,t.panel.find(".l-panel-header:first"));this.panel.find(".l-panel-content:first").height(e-i.height())},_setTitle:function(e){this.panel.find(".l-panel-header span:first").text(e)}})}(jQuery),function(e){e.fn.ligerPopupEdit=function(t){return e.ligerui.run.call(this,"ligerPopupEdit",arguments)},e.fn.ligerGetPopupEditManager=function(){return e.ligerui.run.call(this,"ligerGetPopupEditManager",arguments)},e.ligerDefaults.PopupEdit={valueFieldID:null,css:null,onButtonClick:null,nullText:null,disabled:!1,method:"post",async:!0,cancelable:!0,width:200,heigth:null,render:null,split:";",data:[],grid:null,condition:null,valueField:"id",textField:"text",parms:null,onSelect:null,onSelected:null,valueFieldCssClass:null,searchClick:null},e.ligerMethos.PopupEdit=e.ligerMethos.PopupEdit||{},e.ligerui.controls.PopupEdit=function(t,i){e.ligerui.controls.PopupEdit.base.constructor.call(this,t,i)},e.ligerui.controls.PopupEdit.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"PopupEdit"},_extendMethods:function(){return e.ligerMethos.PopupEdit},_init:function(){e.ligerui.controls.PopupEdit.base._init.call(this)},_render:function(){var t=this,i=this.options;t.inputText=null,"input"==this.element.tagName.toLowerCase()&&(this.element.readOnly=!0,t.inputText=e(this.element),t.textFieldID=this.element.id),void 0==t.inputText[0].name&&(t.inputText[0].name=t.textFieldID),t.valueField=null,i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),void 0==t.valueField[0].name&&(t.valueField[0].id=t.valueField[0].name=i.valueFieldID)):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.textFieldID+"_val"),void 0==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.link=e('<div class="l-trigger"><div class="l-trigger-icon"></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text l-text-popup"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link),t.wrapper.append(t.valueField),t.valueField.attr("data-ligerid",t.id),t.inputText.addClass("l-text-field"),t.link.hover(function(){i.disabled||(this.className="l-trigger-hover")},function(){i.disabled||(this.className="l-trigger")}).mousedown(function(){i.disabled||(this.className="l-trigger-pressed")}).mouseup(function(){i.disabled||(this.className="l-trigger-hover")}).click(function(){if(!i.disabled)return 0!=t.trigger("buttonClick")&&void 0}),t.inputText.click(function(){i.disabled}).blur(function(){i.disabled||t.wrapper.removeClass("l-text-focus")}).focus(function(){i.disabled||t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("l-text-over")},function(){i.disabled||t.wrapper.removeClass("l-text-over")}),t.set(i),t.setTextByVal(t.getValue())},destroy:function(){this.wrapper&&this.wrapper.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){var e=this;this.options;e.inputText.val(""),e.valueField.val("")},_setCss:function(e){e&&this.wrapper.addClass(e)},_setCancelable:function(t){var i=this,n=this.options;!t&&i.unselect&&(i.unselect.remove(),i.unselect=null),(t||i.unselect)&&(i.unselect=e('<div class="l-trigger l-trigger-cancel"><div class="l-trigger-icon"></div></div>').hide(),i.wrapper.hover(function(){i.unselect.show()},function(){i.unselect.hide()}),!n.disabled&&n.cancelable&&i.wrapper.append(i.unselect),i.unselect.hover(function(){this.className="l-trigger-hover l-trigger-cancel"},function(){this.className="l-trigger l-trigger-cancel"}).click(function(){i.clear()}))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_setWidth:function(e){var t=this;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2))},getData:function(){var t=this,i=this.options,n=[],r=e(t.valueField).val(),o=e(t.inputText).val(),a=r?r.split(i.split):null,l=o?o.split(i.split):null;return e(a).each(function(e){var t={};t[i.textField]=l[e],t[i.valueField]=a[e],n.push(t)}),n},_getText:function(){return e(this.inputText).val()},_getValue:function(){return e(this.valueField).val()},getValue:function(){return this._getValue()},getText:function(){return this._getText()},setValue:function(e,t){if(""!=e){var i=this;this.options;if(arguments.length>=2)return i.setValue(e),void i.setText(t);i.valueField.val(e)}},setTextByVal:function(t){if(""!=(t="string"!=typeof t?t.toString:t)){var i=this,n=[],r=this.options,o=[];i.valueField.val()!=t&&i.valueField.val(t);var a=r.grid;e.isFunction(a)&&(a=a());var l=e.extend({parms:r.parms},a);if(r.data.length>0)o=r.data.Rows;else{if(l.url)return void i.loadServerData(l.url,t);o=l.data.Rows}var s=t.split(r.split);e(o).each(function(t,i){-1!=e.inArray(i[r.valueField],s)&&n.push(i[r.textField])}),n=n.join(r.split),i.setText(n)}},loadServerData:function(t,i){var n=this,r=this.options;e.isFunction(t)&&(t=t());var o={type:r.method,url:t,async:r.async,dataType:"json",success:function(t){gridData=e.extend(!0,{},t),r.data=gridData,gridData=t.Rows;var o=i.split(r.split),a=[];e(gridData).each(function(t,i){-1!=e.inArray(i[r.valueField],o)&&a.push(i[r.textField])}),a=a.join(r.split),n.setText(a)},error:function(e,t,i){}};e.ajax(o)},setText:function(e){var t=this,i=this.options;i.render?t.inputText.val(i.render(e)):t.inputText.val(e)},addValue:function(t,i){var n=this,r=this.options;if(t){var o=n.getValue(),a=n.getText();if(o){for(var l=[],s=[],d=o.split(r.split),t=t.split(r.split),i=i.split(r.split),c=0,u=t.length;c<u;c++)-1==e.inArray(t[c],d)&&(l.push(t[c]),s.push(i[c]));l.length&&(n.setValue(o+r.split+l.join(r.split)),n.setText(a+r.split+s.join(r.split)))}else n.setValue(t),n.setText(i)}},removeValue:function(t,i){var n=this,r=this.options;if(t){var o=n.getValue(),a=n.getText();if(o){for(var l=o.split(r.split),s=a.split(r.split),t=t.split(r.split),d=0,c=-1,u=t.length;d<u;d++)-1!=(c=e.inArray(t[d],l))&&(l.splice(c,1),s.splice(c,1));n.setValue(l.join(r.split)),n.setText(s.join(r.split))}}},_setGrid:function(t){if(t){var i=this,n=this.options,r=e.extend({parms:n.parms},n.grid);this.bind("buttonClick",function(){if(!i.popupFn){var t={grid:r,condition:n.condition,valueField:n.valueField,textField:n.textField,split:n.split,searchClick:n.searchClick,lastSelected:function(){try{return i.getData()}catch(e){return null}}(),onSelect:function(e){0!=i.trigger("select",e)&&(n.grid.checkbox?(i.addValue(e.value,e.text),i.removeValue(e.remvoeValue,e.remvoeText)):(i.setValue(e.value),i.setText(e.text)),i.trigger("selected",e))},selectInit:function(t){var r=i.getValue();return!!r&&(!(!n.valueField||!t[n.valueField])&&-1!=e.inArray(t[n.valueField].toString(),r.split(n.split)))}};i.popupFn=e.ligerui.getPopupFn(t,i)}i.popupFn()})}}}),e.ligerui.getPopupFn=function(t,i){function n(){function n(e){return e=e||t.height,e-=c.height()}if(a)return l._showData(),a.show(),l.refreshSize(),void(d=l.selected.concat());var r=e("<div></div>"),c=e("<div></div>"),u=e("<div></div>");if(r.append(c).append(u),t.condition){var h=e.extend({labelWidth:60,space:20},t.condition);setTimeout(function(){s=c.ligerForm(h)},50)}else c.remove();var p=e.extend({columnWidth:120,alternatingRow:!1,frozen:!0,rownumbers:!0},t.grid,{width:"100%",height:n(),isChecked:t.selectInit,isSelected:t.selectInit,inWindow:!1});l=u.ligerGrid(p),t.condition&&setTimeout(function(){var i=e('<li style="margin-right:9px"><div></div></li>');e("ul:first",c).append(i).after('<div class="l-clear"></div>'),e("div",i).ligerButton({text:"搜索",click:function(){var i=s.toConditions();t.searchClick?t.searchClick({grid:l,rules:i}):l.get("url")?(l.setParm(l.conditionParmName||"condition",e.ligerui.toJSON(i)),l.reload()):l.loadData(e.ligerFilter.getFilterFunction(i))}})},100),a=e.ligerDialog.open({title:t.title,width:t.width,height:"auto",top:t.top,left:t.left,target:r,isResize:!0,cls:"l-selectorwin",onContentHeightChange:function(e){return l.set("height",n(e)),!1},onStopResize:function(){l.refreshSize()},buttons:[{text:"选择",onclick:function(e,t){o(),t.hide()}},{text:"取消",onclick:function(e,t){t.hide()}}]}),i&&(i.includeControls=i.includeControls||[],i.includeControls.push(a)),l.refreshSize()}function r(e,i){for(var n=0;i&&i[n];n++){if(i[n][t.valueField]==e)return!0}return!1}function o(){var i=l.selected||[],n=[],o=[],a=[];e(i).each(function(i,r){t.valueField&&n.push(r[t.valueField]),t.textField&&o.push(r[t.textField]);var s=e.extend(!0,{},this);l.formatRecord(s,!0),a.push(s)});var s=[];e(d).each(function(e,n){!r(n[t.valueField],i)&&r(n[t.valueField],l.rows)&&s.push(n)});var c=[],u=[],h=[];e(s).each(function(i,n){t.valueField&&c.push(n[t.valueField]),t.textField&&u.push(n[t.textField]);var r=e.extend(!0,{},this);l.formatRecord(r,!0),h.push(r)}),t.onSelect({value:n.join(t.split),text:o.join(t.split),data:a,remvoeValue:c.join(t.split),remvoeText:u.join(t.split),removeData:h})}if(t=e.extend({title:"选择数据",width:700,height:320,top:null,left:null,split:";",valueField:null,textField:null,grid:null,condition:null,onSelect:function(e){},searchClick:t.searchClick,selectInit:function(e){return!1}},t),t.grid){var a,l,s,d=t.lastSelected||[];return function(){return n(),!1}}}}(jQuery),function(e){e.fn.ligerPortal=function(t){return e.ligerui.run.call(this,"ligerPortal",arguments)},e.ligerDefaults.Portal={width:null,rows:null,columns:null,url:null,method:"get",parms:null,draggable:!1,onLoaded:null},e.ligerDefaults.Portal_rows={width:null,height:null},e.ligerDefaults.Portal_columns={width:null,height:null},e.ligerMethos.Portal={},e.ligerui.controls.Portal=function(t,i){e.ligerui.controls.Portal.base.constructor.call(this,t,i)},e.ligerui.controls.Portal.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Portal"},__idPrev:function(){return"Portal"},_extendMethods:function(){return e.ligerMethos.Portal},_init:function(){var t=this,i=this.options;e.ligerui.controls.Portal.base._init.call(this),e(">div",t.element).length&&(i.columns=[],e(">div",t.element).each(function(e,t){i.columns[e]={panels:[]}}),t.tempInitPanels=e("<div></div>"),e(">div",t.element).appendTo(t.tempInitPanels)),!i.rows&&i.columns&&(i.rows=[{columns:i.columns}])},_render:function(){var t=this,i=this.options;t.portal=e(t.element).addClass("l-portal").html(""),t.set(i)},_setRows:function(t){var i=this;this.options;if(i.rows=[],t&&t.length)for(var n=0;n<t.length;n++){var r=t[n],o=e('<div class="l-row"></div>').appendTo(i.portal);i.rows[n]=i._renderRow({row:r,rowIndex:n,jrow:o}),o.append('<div class="l-clear"></div>')}},_renderRow:function(t){var i=t.row,n=t.rowIndex,r=t.jrow,o=this,a=(this.options,{element:r[0]});if(i.width&&("string"==typeof i.width?i.width.indexOf("%")>-1?r.width(i.width):r.width(parseInt(i.width)):r.width(i.width)),i.height&&r.height(i.height),i.columns&&(a.columns=[]),i.columns&&i.columns.length)for(var l=0;l<i.columns.length;l++){var s=i.columns[l],d=e('<div class="l-column"></div>').appendTo(r);a.columns[l]=o._renderColumn({column:s,columnIndex:l,jcolumn:d,rowIndex:n})}return a},remove:function(e){var t=this,i=(this.options,e.rowIndex),n=e.columnIndex,r=e.index;if(null==r&&(r=-1),r>=0&&t.rows[i]&&t.rows[i].columns&&t.rows[i].columns[n]&&t.rows[i].columns[n].panels){var o=t.rows[i].columns[n].panels[r];o&&o.close(),t._updatePortal()}},add:function(t){var i=this,n=this.options,r=t.rowIndex,o=t.columnIndex,a=t.index,l=t.panel;if(null==a&&(a=-1),i.rows[r]&&i.rows[r].columns&&i.rows[r].columns[o]){var s,d=i.rows[r].columns[o],c=n.rows[r].columns[o];e(d.element);if(c.panels=c.panels||[],d.panels=d.panels||[],c.panels.splice(a,0,l),a<0){var u=e("<div></div>").insertBefore(d.jplace);s=u.ligerPanel(l)}else if(d.panels[a]){var u=e("<div></div>").insertBefore(d.panels[a].panel);s=u.ligerPanel(l)}s&&(s.bind("closed",i._createPanelClosed()),i.setPanelEvent({panel:s}),d.panels.splice(a,0,s)),i._updatePortal()}},_createPanelClosed:function(){var t=this,i=this.options;return function(){var n,r,o,a=this,l=t.getPanels();e(l).each(function(){this.panel==a&&(n=this.rowIndex,r=this.columnIndex,o=this.index)}),i.rows[n].columns[r].panels.splice(o,1),t.rows[n].columns[r].panels.splice(o,1)}},_renderColumn:function(t){var i=t.column,n=t.columnIndex,r=t.jcolumn,o=(t.rowIndex,this),a=(this.options,{element:r[0]});if(i.width&&r.width(i.width),i.height&&r.height(i.height),i.panels&&(a.panels=[]),i.panels&&i.panels.length)for(var l=0;l<i.panels.length;l++){var s=i.panels[l],d=e("<div></div>").appendTo(r);a.panels[l]=d.ligerPanel(s),a.panels[l].bind("closed",o._createPanelClosed()),o.setPanelEvent({panel:a.panels[l]})}else if(o.tempInitPanels){var c=o.tempInitPanels.find(">div:eq("+n+")");if(c.length){a.panels=[];var u={},h=c.clone();liger.inject&&liger.inject.getOptions&&(u=liger.inject.getOptions({jelement:h,defaults:e.ligerDefaults.Panel,config:liger.inject.config.Panel})),a.panels[0]=h.appendTo(r).ligerPanel(u),a.panels[0].bind("closed",o._createPanelClosed()),o.setPanelEvent({panel:a.panels[0]})}}return a.jplace=e('<div class="l-column-place"></div>').appendTo(r),a},setPanelEvent:function(t){var n=t.panel,r=n.panel,o=this,a=this.options;e.fn.ligerDrag&&a.draggable&&r.addClass("l-panel-draggable").ligerDrag({proxy:!1,revert:!0,handler:".l-panel-header span:first",onRendered:function(){},onStartDrag:function(t,i){o.portal.find(">.l-row").addClass("l-row-dragging"),this.jplace=e('<div class="l-panel-place"></div>'),this.jplace.height(r.height()),r.width(r.width()),r.addClass("l-panel-dragging"),r.css("position","absolute"),r.after(this.jplace),o._updatePortal()},onDrag:function(e,t){function a(e,t,i,n){var r=e?e.jpanel:t.jplace;if(!r)return null;var o=r.height(),a=r.width(),l=r.offset().left,s=r.offset().top;if(i>l-3&&i<l+a+3){if(n>s-3&&n<s+o/2+3)return{panel:e,column:t,position:"top"};if(n>s+o/2-3&&n<s+o+3)return{panel:e,column:t,position:e?"bottom":"top"}}return null}var s=(t.pageX||t.screenX,t.pageY||t.screenY,r.height(),r.width()),d=r.offset(),c=d.left+s/2,u=d.top+10,h=o.getPanels(),p=o.getEmptyColumns(),g=function(e,t,r,o){for(i=0,l=e.length;i<l;i++){var s=e[i];if(s.panel!=n){var d=a(s,null,r,o);if(d)return d}}for(i=0,l=t.length;i<l;i++){var c=t[i],d=a(null,c,r,o);if(d)return d}return null}(h,p,c,u);if(g){if(this.placeStatus){if(this.placeStatus.panel&&g.panel&&this.placeStatus.panel.rowIndex==g.panel.rowIndex&&this.placeStatus.panel.columnIndex==g.panel.columnIndex&&this.placeStatus.panel.index==g.panel.index&&this.placeStatus.position==g.position)return;if(this.placeStatus.column&&g.column&&this.placeStatus.column.rowIndex==g.column.rowIndex&&this.placeStatus.column.columnIndex==g.column.columnIndex&&this.placeStatus.position==g.position)return}"top"==g.position?(this.jplace.insertBefore(g.panel?g.panel.jpanel:g.column.jplace),this.savedPosition=g.panel?g.panel:g.column,this.savedPosition.inTop=!0):"bottom"==g.position&&(this.jplace.insertAfter(g.panel.jpanel),this.savedPosition=g.panel,this.savedPosition.inTop=!1),this.placeStatus=g}else this.placeStatus=null},onStopDrag:function(t,i){if(o.portal.find(">.l-row").removeClass("l-row-dragging"),n.set("width",n.get("width")),r.removeClass("l-panel-dragging"),this.jplace&&(r.css({position:"relative",left:null,top:null}),r.insertAfter(this.jplace),o.portal.find(">.l-row > .l-column >.l-panel-place").remove(),this.savedPosition)){var l,s,d,c=o.getPanels();e(c).each(function(){this.panel==n&&(l=this.rowIndex,s=this.columnIndex,d=this.index)});var u=a.rows[l].columns[s].panels[d],h=o.rows[l].columns[s].panels[d];a.rows[l].columns[s].panels.splice(d,1),o.rows[l].columns[s].panels.splice(d,1),this.savedPosition.panel?(a.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels.splice(this.savedPosition.index+this.savedPosition.inTop?-1:0,0,u),o.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels.splice(this.savedPosition.index+this.savedPosition.inTop?-1:0,0,h)):(a.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels=[u],o.rows[this.savedPosition.rowIndex].columns[this.savedPosition.columnIndex].panels=[h])}return o._updatePortal(),!1}})},_updatePortal:function(){var t=this;this.options;e(t.rows).each(function(t){e(this.columns).each(function(t){this.panels&&this.panels.length?e(this.element).removeClass("l-column-empty"):e(this.element).addClass("l-column-empty")})})},getPanels:function(){var t=this,i=(this.options,[]);return e(t.rows).each(function(t){e(this.columns).each(function(n){e(this.panels).each(function(e){i.push({rowIndex:t,columnIndex:n,index:e,panel:this,jpanel:this.panel})})})}),i},getPanel:function(t){var i=this;this.options;t=e.extend({rowIndex:0,columnIndex:0,index:0},t);var n=null;return e(i.rows).each(function(i){e(this.columns).each(function(r){e(this.panels).each(function(e){n||i==t.rowIndex&&r==t.columnIndex&&e==t.index&&(n=this)})})}),n},getEmptyColumns:function(){var t=this,i=(this.options,[]);return e(t.rows).each(function(t){e(this.columns).each(function(e){this.panels&&this.panels.length||i.push({rowIndex:t,columnIndex:e,jplace:this.jplace})})}),i},_setUrl:function(t){var i=this,n=this.options;t&&e.ajax({url:t,data:n.parms,type:n.method,dataType:"json",success:function(e){i.set("rows",e)}})},_setWidth:function(e){e&&this.portal.width(e)},collapseAll:function(){var t=this,i=(this.options,t.getPanels());e(i).each(function(e,t){t.panel.collapse()})},expandAll:function(){var t=this,i=(this.options,t.getPanels());e(i).each(function(e,t){t.panel.expand()})}})}(jQuery),function(e){e.fn.ligerRadio=function(){return e.ligerui.run.call(this,"ligerRadio",arguments)},e.fn.ligerGetRadioManager=function(){return e.ligerui.run.call(this,"ligerGetRadioManager",arguments)},e.ligerDefaults.Radio={disabled:!1},e.ligerMethos.Radio={},e.ligerui.controls.Radio=function(t,i){e.ligerui.controls.Radio.base.constructor.call(this,t,i)},e.ligerui.controls.Radio.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Radio"},__idPrev:function(){return"Radio"},_extendMethods:function(){return e.ligerMethos.Radio},_render:function(){var t=this,i=this.options;t.input=e(this.element),t.link=e('<a href="javascript:void(0)" class="l-radio"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-radio-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.input.change(function(){return this.checked?t.link.addClass("l-radio-checked"):t.link.removeClass("l-radio-checked"),!0}),t.link.click(function(){t._doclick()}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.element.checked&&t.link.addClass("l-radio-checked"),this.element.id&&e("label[for="+this.element.id+"]").click(function(){t._doclick()}),t.set(i)},setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-radio-checked")):(t.input[0].checked=!1,t.link.removeClass("l-radio-checked"))},getValue:function(){return this.input[0].checked},setEnabled:function(){this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"),this.options.disabled=!1},setDisabled:function(){this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled"),this.options.disabled=!0},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")},_doclick:function(){var t=this;this.options;if(t.input.attr("disabled"))return!1;t.input.trigger("click").trigger("change");var i;return i=t.input[0].form?t.input[0].form:document,e("input:radio[name="+t.input[0].name+"]",i).not(t.input).trigger("change"),!1}})}(jQuery),function(e){e.fn.ligerRadioList=function(t){return e.ligerui.run.call(this,"ligerRadioList",arguments)},e.ligerDefaults.RadioList={rowSize:3,valueField:"id",textField:"text",valueFieldID:null,name:null,data:null,parms:null,url:null,urlParms:null,ajaxContentType:null,ajaxType:"post",onSuccess:null,onError:null,onSelect:null,css:null,value:null,valueFieldCssClass:null},e.ligerMethos.RadioList=e.ligerMethos.RadioList||{},e.ligerui.controls.RadioList=function(t,i){e.ligerui.controls.RadioList.base.constructor.call(this,t,i)},e.ligerui.controls.RadioList.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"RadioList"},_extendMethods:function(){return e.ligerMethos.RadioList},_init:function(){e.ligerui.controls.RadioList.base._init.call(this)},_render:function(){var t=this,i=this.options;t.data=i.data,t.valueField=null,e(this.element).is(":hidden")||e(this.element).is(":text")?(t.valueField=e(this.element),e(this.element).is(":text")&&t.valueField.hide()):i.valueFieldID?(t.valueField=e("#"+i.valueFieldID+":input,[name="+i.valueFieldID+"]:input"),0==t.valueField.length&&(t.valueField=e('<input type="hidden"/>')),t.valueField[0].id=t.valueField[0].name=i.valueFieldID):(t.valueField=e('<input type="hidden"/>'),t.valueField[0].id=t.valueField[0].name=t.id+"_val"),null==t.valueField[0].name&&(t.valueField[0].name=t.valueField[0].id),i.valueFieldCssClass&&t.valueField.addClass(i.valueFieldCssClass),t.valueField.attr("data-ligerid",t.id),e(this.element).is(":hidden")||e(this.element).is(":text")?t.radioList=e("<div></div>").insertBefore(this.element):t.radioList=e(this.element),t.radioList.html('<div class="l-radiolist-inner"><table cellpadding="0" cellspacing="0" border="0" class="l-radiolist-table"></table></div>').addClass("l-radiolist").append(t.valueField),t.radioList.table=e("table:first",t.radioList),i.value=t.valueField.val()||i.value,t.set(i),t._addClickEven()},destroy:function(){this.radioList&&this.radioList.remove(),this.options=null,e.ligerui.remove(this)},clear:function(){this._changeValue(""),this.trigger("clear")},_setCss:function(e){e&&this.radioList.addClass(e)},_setDisabled:function(t){t?(this.radioList.addClass("l-radiolist-disabled"),e("input:radio",this.radioList).attr("disabled",!0)):(this.radioList.removeClass("l-radiolist-disabled"),e("input:radio",this.radioList).removeAttr("disabled"))},_setWidth:function(e){this.radioList.width(e)},_setHeight:function(e){this.radioList.height(e)},indexOf:function(e){var t=this,i=this.options;if(!t.data)return-1;for(var n=0,r=t.data.length;n<r;n++)if("object"==typeof e){if(t.data[n]==e)return n}else if(t.data[n][i.valueField].toString()==e.toString())return n;return-1},removeItems:function(t){var i=this;i.data&&(e(t).each(function(e,t){var n=i.indexOf(t);-1!=n&&i.data.splice(n,1)}),i.refresh())},removeItem:function(e){if(this.data){var t=this.indexOf(e);-1!=t&&(this.data.splice(t,1),this.refresh())}},insertItem:function(e,t){var i=this;i.data||(i.data=[]),i.data.splice(t,0,e),i.refresh()},addItems:function(t){var i=this;i.data||(i.data=[]),e(t).each(function(e,t){i.data.push(t)}),i.refresh()},addItem:function(e){var t=this;t.data||(t.data=[]),t.data.push(e),t.refresh()},_setValue:function(e){var t=this,i=this.options;t.valueField.val(e),i.value=e,this._dataInit()},setValue:function(e){this._setValue(e)},_setUrl:function(t){var i=this,n=this.options;if(t){var r=e.isFunction(n.urlParms)?n.urlParms.call(i):n.urlParms;if(r)for(name in r)t+=-1==t.indexOf("?")?"?":"&",
t+=name+"="+r[name];var o=e.isFunction(n.parms)?n.parms():n.parms;"application/json"==n.ajaxContentType&&"string"!=typeof o&&(o=liger.toJSON(o)),e.ajax({type:"post",url:t,data:o,cache:!1,dataType:"json",contentType:n.ajaxContentType,success:function(e){i.setData(e),i.trigger("success",[e])},error:function(e,t){i.trigger("error",[e,t])}})}},setUrl:function(e){return this._setUrl(e)},setParm:function(e,t){if(e){var i=this,n=i.get("parms");n||(n={}),n[e]=t,i.set("parms",n)}},clearContent:function(){var t=this;this.options;e("table",t.radioList).html("")},_setData:function(e){this.setData(e)},setData:function(e){var t=this;this.options;e&&e.length&&(t.data=e,t.refresh(),t.updateStyle())},refresh:function(){var e=this,t=this.options,i=this.data;if(this.clearContent(),i){for(var n=[],r=t.rowSize,o=!1,a=t.name||e.id,l=0;l<i.length;l++){var s=i[l][t.valueField],d=i[l][t.textField],c=e.id+"-"+l;l%r==0&&(o&&n.push("</tr>"),n.push("<tr>"),o=!0),n.push("<td><input type='radio' name='"+a+"' value='"+s+"' id='"+c+"'/><label for='"+c+"'>"+d+"</label></td>")}o&&n.push("</tr>"),e.radioList.table.append(n.join(""))}},_getValue:function(){var t=this,i=this.options,n=i.name||t.id;return e('input:radio[name="'+n+'"]:checked').val()},getValue:function(){return this._getValue()},updateStyle:function(){var t=this;this.options;t._dataInit(),e(":radio",t.element).change(function(){var e=t.getValue();t.trigger("select",[{value:e}])})},_dataInit:function(){var e=this,t=this.options,i=e.valueField.val()||e._getValue()||t.value;e._changeValue(i)},_changeValue:function(t){var i=this,n=this.options,r=n.name||i.id;e("input:radio[name='"+r+"']",i.radioList).each(function(){this.checked=this.value==t}),i.valueField.val(t),i.selectedValue=t},_addClickEven:function(){var e=this;this.options;e.radioList.click(function(t){var i=e.getValue();i&&e.valueField.val(i)})}})}(jQuery),function(e){e.fn.ligerResizable=function(t){return e.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetResizableManager=function(){return e.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.ligerui.controls.Resizable=function(t){e.ligerui.controls.Resizable.base.constructor.call(this,null,t)},e.ligerui.controls.Resizable.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=e(i.target),t.set(i),t.target.mousemove(function(n){if(!i.disabled&&(t.dir=t._getDir(n),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.ligeruidragid)){var r=e.ligerui.get(i.target.ligeruidragid);r&&t.dir?r.set("disabled",!0):r&&r.set("disabled",!1)}}).mousedown(function(e){i.disabled||t.dir&&t._start(e)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(t){var i=this,n=this.options,r="",o=i.target.offset(),a=i.target.width(),l=i.target.height(),s=n.scope,d=t.pageX||t.screenX,c=t.pageY||t.screenY;return c>=o.top&&c<o.top+s?r+="n":c<=o.top+l&&c>o.top+l-s&&(r+="s"),d>=o.left&&d<o.left+s?r+="w":d<=o.left+a&&d>o.left+a-s&&(r+="e"),"all"==n.handles||""==r?r:-1!=e.inArray(r,i.handles)?r:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=e('<div class="l-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),e(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,n=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=n-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(t){var i=this;this.options;i.hasBind("stopResize")?0!=i.trigger("stopResize",[i.current,t])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,n=this.options,r={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},o=!1;t||(t=i.target,o=!0,isNaN(parseInt(i.target.css("top")))?r.top=0:r.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?r.left=0:r.left=parseInt(i.target.css("left"))),e.inArray(i.current.dir,i.changeBy.l)>-1?(r.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):o&&delete r.left,e.inArray(i.current.dir,i.changeBy.t)>-1?(r.top+=i.current.diffY,i.current.diffTop=i.current.diffY):o&&delete r.top,e.inArray(i.current.dir,i.changeBy.w)>-1?(r.width+=(-1==i.current.dir.indexOf("w")?1:-1)*i.current.diffX,i.current.newWidth=r.width):o&&delete r.width,e.inArray(i.current.dir,i.changeBy.h)>-1?(r.height+=(-1==i.current.dir.indexOf("n")?1:-1)*i.current.diffY,i.current.newHeight=r.height):o&&delete r.height,o&&n.animate?t.animate(r):t.css(r)}})}(jQuery),function(e){e.fn.ligerSpinner=function(){return e.ligerui.run.call(this,"ligerSpinner",arguments)},e.fn.ligerGetSpinnerManager=function(){return e.ligerui.run.call(this,"ligerGetSpinnerManager",arguments)},e.ligerDefaults.Spinner={type:"float",isNegative:!0,decimalplace:2,step:.1,interval:50,value:null,onChangeValue:!1,minValue:null,maxValue:null,disabled:!1,readonly:!1},e.ligerMethos.Spinner={},e.ligerui.controls.Spinner=function(t,i){e.ligerui.controls.Spinner.base.constructor.call(this,t,i)},e.ligerui.controls.Spinner.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"Spinner"},__idPrev:function(){return"Spinner"},_extendMethods:function(){return e.ligerMethos.Spinner},_init:function(){e.ligerui.controls.Spinner.base._init.call(this);var t=this.options;"float"==t.type?(t.step=.1,t.interval=50):"int"==t.type?(t.step=1,t.interval=100):"time"==t.type?(t.step=1,t.interval=100):(t.type="int",t.step=1,t.interval=100)},_render:function(){var t=this,i=this.options;t.interval=null,t.inputText=null,t.value=null,t.textFieldID="","input"==this.element.tagName.toLowerCase()&&this.element.type&&"text"==this.element.type?(t.inputText=e(this.element),this.element.id&&(t.textFieldID=this.element.id)):(t.inputText=e('<input type="text"/>'),t.inputText.appendTo(e(this.element))),""==t.textFieldID&&i.textFieldID&&(t.textFieldID=i.textFieldID),t.link=e('<div class="l-trigger"><div class="l-spinner-up"><div class="l-spinner-icon"></div></div><div class="l-spinner-split"></div><div class="l-spinner-down"><div class="l-spinner-icon"></div></div></div>'),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.wrapper.append(t.link).after(t.selectBox).after(t.valueField),t.link.up=e(".l-spinner-up",t.link),t.link.down=e(".l-spinner-down",t.link),t.inputText.addClass("l-text-field"),i.disabled&&t.wrapper.addClass("l-text-disabled"),t._isVerify(t.inputText.val())||(t.value=t._getDefaultValue(),t._showValue(t.value)),t.link.up.hover(function(){i.disabled||e(this).addClass("l-spinner-up-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-up-over")}).mousedown(function(){i.disabled||(t._uping.call(t),t.interval=setInterval(function(){t._uping.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.link.down.hover(function(){i.disabled||e(this).addClass("l-spinner-down-over")},function(){clearInterval(t.interval),e(document).unbind("selectstart.spinner"),e(this).removeClass("l-spinner-down-over")}).mousedown(function(){i.disabled||(t.interval=setInterval(function(){t._downing.call(t)},i.interval),e(document).bind("selectstart.spinner",function(){return!1}))}).mouseup(function(){clearInterval(t.interval),t.inputText.trigger("change").focus(),e(document).unbind("selectstart.spinner")}),t.inputText.change(function(){var e=t.inputText.val();t.value=t._getVerifyValue(e),t.trigger("changeValue",[t.value]),t._showValue(t.value)}).blur(function(){t.wrapper.removeClass("l-text-focus")}).focus(function(){t.wrapper.addClass("l-text-focus")}),t.wrapper.hover(function(){i.disabled||t.wrapper.addClass("l-text-over")},function(){t.wrapper.removeClass("l-text-over")}),t.set(i)},_setValue:function(e){null!=e&&this.inputText.val(e)},_setWidth:function(e){var t=this;e>20&&(t.wrapper.css({width:e}),t.inputText.css({width:e-20}))},_setHeight:function(e){var t=this;e>10&&(t.wrapper.height(e),t.inputText.height(e-2),t.link.height(e-4))},_setDisabled:function(e){e?this.wrapper.addClass("l-text-disabled"):this.wrapper.removeClass("l-text-disabled")},_showValue:function(e){var t=this.options;e&&"NaN"!=e||(e=0),"float"==t.type&&(e=parseFloat(e).toFixed(t.decimalplace)),this.inputText.val(e)},_setValue:function(e){this._showValue(e)},setValue:function(e){this._showValue(e)},getValue:function(){return this.inputText.val()},_round:function(e,t){for(var i=(this.options,1);t>0;i*=10,t--);for(;t<0;i/=10,t++);return Math.round(e*i)/i},_isInt:function(e){return!!(this.options.isNegative?/^-?\d+$/:/^\d+$/).test(e)&&parseFloat(e)==e},_isFloat:function(e){return!!(this.options.isNegative?/^-?\d+(\.\d+)?$/:/^\d+(\.\d+)?$/).test(e)&&parseFloat(e)==e},_isTime:function(e){var t=(this.options,e.match(/^(\d{1,2}):(\d{1,2})$/));return null!=t&&!(t[1]>24||t[2]>60)},_isVerify:function(e){var t=this,i=this.options;if("float"==i.type){if(!t._isFloat(e))return!1;var n=parseFloat(e);return!(void 0!=i.minValue&&i.minValue>n)&&!(void 0!=i.maxValue&&i.maxValue<n)}if("int"==i.type){if(!t._isInt(e))return!1;var n=parseInt(e);return!(void 0!=i.minValue&&i.minValue>n)&&!(void 0!=i.maxValue&&i.maxValue<n)}return"time"==i.type&&t._isTime(e)},_getVerifyValue:function(e){var t=this,i=this.options,n=null;return"float"==i.type?n=t._round(e,i.decimalplace):"int"==i.type?n=parseInt(e):"time"==i.type&&(n=e),t._isVerify(n)?n:t.value},_isOverValue:function(e){var t=this.options;return null!=t.minValue&&t.minValue>e||null!=t.maxValue&&t.maxValue<e},_getDefaultValue:function(){var e=this.options;return"float"==e.type||"int"==e.type?0:"time"==e.type?"00:00":void 0},_addValue:function(e){var t=this,i=(this.options,t.inputText.val());i=parseFloat(i)+e,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_addTime:function(e){var t=this,i=(this.options,t.inputText.val()),n=i.match(/^(\d{1,2}):(\d{1,2})$/);newminute=parseInt(n[2])+e,newminute<10&&(newminute="0"+newminute),i=n[1]+":"+newminute,t._isOverValue(i)||(t._showValue(i),t.inputText.trigger("change"))},_uping:function(){var e=this,t=this.options;"float"==t.type||"int"==t.type?e._addValue(t.step):"time"==t.type&&e._addTime(t.step)},_downing:function(){var e=this,t=this.options;"float"==t.type||"int"==t.type?e._addValue(-1*t.step):"time"==t.type&&e._addTime(-1*t.step)},_isDateTime:function(e){var t=(this.options,e.match(/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/));if(null==t)return!1;var i=new Date(t[1],t[3]-1,t[4]);return"NaN"!=i&&(i.getFullYear()==t[1]&&i.getMonth()+1==t[3]&&i.getDate()==t[4])},_isLongDateTime:function(e){var t=(this.options,/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2})$/),i=e.match(t);if(null==i)return!1;var n=new Date(i[1],i[3]-1,i[4],i[5],i[6]);return"NaN"!=n&&(n.getFullYear()==i[1]&&n.getMonth()+1==i[3]&&n.getDate()==i[4]&&n.getHours()==i[5]&&n.getMinutes()==i[6])}})}(jQuery),function(e){e.fn.ligerTab=function(t){return e.ligerui.run.call(this,"ligerTab",arguments)},e.fn.ligerGetTabManager=function(){return e.ligerui.run.call(this,"ligerGetTabManager",arguments)},e.ligerDefaults.Tab={height:null,heightDiff:0,changeHeightOnResize:!1,contextmenu:!0,dblClickToClose:!1,dragToMove:!1,showSwitch:!1,showSwitchInTab:!1,data:null,onBeforeOverrideTabItem:null,onAfterOverrideTabItem:null,onBeforeRemoveTabItem:null,onAfterRemoveTabItem:null,onBeforeAddTabItem:null,onAfterAddTabItem:null,onBeforeSelectTabItem:null,onAfterSelectTabItem:null,onCloseOther:null,onCloseAll:null,onClose:null,onReload:null,onSwitchRender:null},e.ligerDefaults.TabString={closeMessage:"关闭当前页",closeOtherMessage:"关闭其他",closeAllMessage:"关闭所有",reloadMessage:"刷新"},e.ligerMethos.Tab={},e.ligerui.controls.Tab=function(t,i){e.ligerui.controls.Tab.base.constructor.call(this,t,i)},e.ligerui.controls.Tab.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Tab"},__idPrev:function(){return"Tab"},_extendMethods:function(){return e.ligerMethos.Tab},_render:function(){function t(){var e=i.tab.width()-parseInt(i.tab.links.css("marginLeft"),10)-parseInt(i.tab.links.css("marginRight"),10);i.tab.links.width(e)}var i=this,n=this.options;n.height&&(i.makeFullHeight=!0),i.tab=e(this.element),i.tab.addClass("l-tab"),n.contextmenu&&e.ligerMenu&&(i.tab.menu=e.ligerMenu({width:100,items:[{text:n.closeMessage,id:"close",click:function(){i._menuItemClick.apply(i,arguments)}},{text:n.closeOtherMessage,id:"closeother",click:function(){i._menuItemClick.apply(i,arguments)}},{text:n.closeAllMessage,id:"closeall",click:function(){i._menuItemClick.apply(i,arguments)}},{text:n.reloadMessage,id:"reload",click:function(){i._menuItemClick.apply(i,arguments)}}]})),i.tab.content=e('<div class="l-tab-content"></div>'),e("> div",i.tab).appendTo(i.tab.content),i.tab.content.appendTo(i.tab),i.tab.links=e('<div class="l-tab-links"><ul style="left: 0px; "></ul><div class="l-tab-switch"></div></div>'),i.tab.links.prependTo(i.tab),i.tab.links.ul=e("ul",i.tab.links);var r=e("> div[lselected=true]",i.tab.content),o=r.length>0;i.selectedTabId=r.attr("tabid"),e("> div",i.tab.content).each(function(t,n){var r=e('<li class=""><a></a><div class="l-tab-links-item-left"></div><div class="l-tab-links-item-right"></div></li>'),a=e(this);a.attr("title")&&(e("> a",r).html(a.attr("title")),a.attr("title",""));var l=a.attr("tabid");if(void 0==l&&(l=i.getNewTabid(),a.attr("tabid",l),a.attr("lselected")&&(i.selectedTabId=l)),r.attr("tabid",l),o||0!=t||(i.selectedTabId=l),a.attr("showClose")&&r.append("<div class='l-tab-links-item-close'></div>"),e("> ul",i.tab.links).append(r),a.hasClass("l-tab-content-item")||a.addClass("l-tab-content-item"),a.find("iframe").length>0){var s=e("iframe:first",a);if("complete"!=s[0].readyState){0==a.find(".l-tab-loading:first").length&&a.prepend("<div class='l-tab-loading' style='display:block;'></div>");var d=e(".l-tab-loading:first",a);s.bind("load.tab",function(){d.hide()})}}}),i.selectTabItem(i.selectedTabId),n.height&&("string"==typeof n.height&&n.height.indexOf("%")>0?(i.onResize(),n.changeHeightOnResize&&e(window).resize(function(){i.onResize.call(i)})):i.setHeight(n.height)),i.makeFullHeight&&i.setContentHeight(),e("li",i.tab.links).each(function(){i._addTabItemEvent(e(this))}),i.tab.bind("dblclick.tab",function(t){if(n.dblClickToClose){i.dblclicking=!0;var r=t.target||t.srcElement;if("a"==r.tagName.toLowerCase()){var o=e(r).parent().attr("tabid");!!e(r).parent().find("div.l-tab-links-item-close").length&&i.removeTabItem(o)}i.dblclicking=!1}}),i.set(n),setTimeout(t,100),e(window).resize(function(){t.call(i)}),i.bind("sysWidthChange",function(){t.call(i)})},_setShowSwitch:function(t){var i=this;this.options;t?(e(".l-tab-switch",i.tab.links).length||e("<div class='l-tab-switch'></div>").appendTo(i.tab.links),e(i.tab).addClass("l-tab-switchable"),e(".l-tab-switch",i.tab).click(function(){i.toggleSwitch(this)})):(e(i.tab).removeClass("l-tab-switchable"),e("body > .l-tab-windowsswitch").remove())},_setShowSwitchInTab:function(t){var i=this;if(this.options.showSwitch&&t){e(i.tab).removeClass("l-tab-switchable"),e(".l-tab-switch",i.tab).remove();var n=e("<li class='l-tab-itemswitch'><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div></li>");n.appendTo(i.tab.links.ul),n.click(function(){i.toggleSwitch(this)})}else e(".l-tab-itemswitch",i.tab.ul).remove()},toggleSwitch:function(t){var i=this;this.options;if(e("body > .l-tab-windowsswitch").length)return void e("body > .l-tab-windowsswitch").remove();if(null!=t){var n=e("<div class='l-tab-windowsswitch'></div>").appendTo("body"),r=i.tab.links.ul.find(">li"),o=i.getSelectedTabItemID();r.each(function(t,i){var r=e("<a href='javascript:void(0)'></a>");r.text(e(i).find("a").text());var a=e(i).attr("tabid");null!=a&&(a==o&&r.addClass("selected"),r.attr("tabid",a),n.append(r))}),n.css({top:e(t).offset().top+e(t).height(),left:e(t).offset().left-n.width()}),n.find("a").bind("click",function(t){var n=e(this).attr("tabid");void 0!=n&&(i.selectTabItem(n),i.moveToTabItem(n),e("body > .l-tab-windowsswitch").remove())}),i.trigger("switchRender",[n])}},_applyDrag:function(t){var i=this;this.options;return i.droptip=i.droptip||e("<div class='l-tab-drag-droptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e(t).ligerDrag({revert:!0,animate:!1,proxy:function(){var t=e(this).find("a").html();return i.dragproxy=e("<div class='l-tab-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body"),i.dragproxy.append(t),i.dragproxy},onRendered:function(){this.set("cursor","pointer")},onStartDrag:function(i,n){if(!e(t).hasClass("l-selected"))return!1;if(2==n.button)return!1;var r=n.srcElement||n.target;return!e(r).hasClass("l-tab-links-item-close")&&void 0},onDrag:function(t,n){null==i.dropIn&&(i.dropIn=-1);var r=i.tab.links.ul.find(">li"),o=r.index(t.target);r.each(function(t,r){if(o!=t){var a=t>o;if(-1==i.dropIn||i.dropIn==t){var l=e(this).offset(),s={top:l.top,bottom:l.top+e(this).height(),left:l.left-10,right:l.left+10};a&&(s.left+=e(this).width(),s.right+=e(this).width());var d=n.pageX||n.screenX,c=n.pageY||n.screenY;d>s.left&&d<s.right&&c>s.top&&c<s.bottom?(i.droptip.css({left:s.left+5,top:s.top-9}).show(),i.dropIn=t,i.dragproxy.find(".l-drop-icon").removeClass("l-drop-no").addClass("l-drop-yes")):(i.dropIn=-1,i.droptip.hide(),i.dragproxy.find(".l-drop-icon").removeClass("l-drop-yes").addClass("l-drop-no"))}}})},onStopDrag:function(t,n){if(i.dropIn>-1){var r=i.tab.links.ul.find(">li:eq("+i.dropIn+")").attr("tabid"),o=e(t.target).attr("tabid");setTimeout(function(){i.moveTabItem(o,r)},0),i.dropIn=-1,i.dragproxy.remove()}i.droptip.hide(),this.set("cursor","default")}})},_setDragToMove:function(t){if(e.fn.ligerDrag){var i=this;this.options;if(t){if(i.drags)return;i.drags=i.drags||[],i.tab.links.ul.find(">li").each(function(){i.drags.push(i._applyDrag(this))})}}},moveTabItem:function(e,t){var i=this,n=i.tab.links.ul.find(">li[tabid="+e+"]"),r=i.tab.links.ul.find(">li[tabid="+t+"]");i.tab.links.ul.find(">li").index(n)<i.tab.links.ul.find(">li").index(r)?r.after(n):r.before(n)},setTabButton:function(){var t=this,i=(this.options,0);e("li",t.tab.links.ul).each(function(){i+=e(this).width()+2});var n=t.tab.width();return i>n?(e(".l-tab-links-left",t.tab).length||(t.tab.links.append('<div class="l-tab-links-left"><span></span></div><div class="l-tab-links-right"><span></span></div>'),t.setTabButtonEven()),!0):(t.tab.links.ul.animate({left:0}),e(".l-tab-links-left,.l-tab-links-right",t.tab.links).remove(),!1)},setTabButtonEven:function(){var t=this;this.options;e(".l-tab-links-left",t.tab.links).hover(function(){e(this).addClass("l-tab-links-left-over")},function(){e(this).removeClass("l-tab-links-left-over")}).click(function(){t.moveToPrevTabItem()}),e(".l-tab-links-right",t.tab.links).hover(function(){e(this).addClass("l-tab-links-right-over")},function(){e(this).removeClass("l-tab-links-right-over")}).click(function(){t.moveToNextTabItem()})},moveToPrevTabItem:function(t){var i=this,n=(this.options,e("> li",i.tab.links.ul)),r=e(".l-tab-links-right",i.tab),o=e(".l-tab-links-left",i.tab);if(!r.length||!o.length)return!1;for(var a=(r.offset(),o.offset()),l=null,s=0,d=a.left+o.outerWidth(),c=0,u=n.length;c<u;c++){var h=e(n[c]),p=h.offset(),g=p.left,f=p.left+h.outerWidth();if(null!=t){if(g<d&&h.attr("tabid")==t){l=h;break}}else if(g<d&&f>=d){l=h;break}s+=h.outerWidth()+parseInt(h.css("marginLeft"))+parseInt(h.css("marginRight"))}if(null==l)return!1;var v=s-o.outerWidth();return i.tab.links.ul.animate({left:-1*v}),!0},moveToNextTabItem:function(t){var i=this,n=(this.options,e("> li",i.tab.links.ul)),r=e(".l-tab-links-right",i.tab),o=e(".l-tab-links-left",i.tab);if(!r.length||!o.length)return!1;for(var a=r.offset(),l=o.offset(),s=null,d=0,c=0,u=n.length;c<u;c++){var h=e(n[c]);d+=h.outerWidth()+parseInt(h.css("marginLeft"))+parseInt(h.css("marginRight"));var p=h.offset(),g=p.left,f=p.left+h.outerWidth();if(null!=t){if(f>a.left&&h.attr("tabid")==t){s=h;break}}else if(g<=a.left&&f>a.left){s=h;break}}if(null==s)return!1;var v=d-(a.left-l.left)+parseInt(s.css("marginLeft"))+parseInt(s.css("marginRight"));return i.tab.links.ul.animate({left:-1*v}),!0},moveToTabItem:function(e){var t=this;this.options;t.moveToPrevTabItem(e)||t.moveToNextTabItem(e)},getTabItemCount:function(){var t=this;this.options;return e("li",t.tab.links.ul).length},getSelectedTabItemID:function(){var t=this;this.options;return e("li.l-selected",t.tab.links.ul).attr("tabid")},removeSelectedTabItem:function(){var e=this;this.options;e.removeTabItem(e.getSelectedTabItemID())},overrideSelectedTabItem:function(e){var t=this;this.options;t.overrideTabItem(t.getSelectedTabItemID(),e)},overrideTabItem:function(t,i){var n=this;this.options;if(0==n.trigger("beforeOverrideTabItem",[t]))return!1;var r=i.tabid;void 0==r&&(r=n.getNewTabid());var o=i.url,a=i.content,l=(i.target,i.text),s=i.showClose,d=i.height;if(!n.isTabItemExist(r)){var c=e("li[tabid="+t+"]",n.tab.links.ul),u=e(".l-tab-content-item[tabid="+t+"]",n.tab.content);c&&u&&(c.attr("tabid",r),u.attr("tabid",r),0==e("iframe",u).length&&o?u.html("<iframe frameborder='0'></iframe>"):a&&u.html(a),e("iframe",u).attr("name",r),void 0==s&&(s=!0),0==s?e(".l-tab-links-item-close",c).remove():0==e(".l-tab-links-item-close",c).length&&c.append("<div class='l-tab-links-item-close'></div>"),void 0==l&&(l=r),d&&u.height(d),e("a",c).text(l),e("iframe",u).attr("src",o),n.trigger("afterOverrideTabItem",[t]))}},setHeader:function(t,i){e("li[tabid="+t+"] a",this.tab.links.ul).text(i)},selectTabItem:function(t){var i=this;this.options;if(0==i.trigger("beforeSelectTabItem",[t]))return!1;i.selectedTabId=t,e("> .l-tab-content-item[tabid="+t+"]",i.tab.content).show().siblings().hide(),e("li[tabid="+t+"]",i.tab.links.ul).addClass("l-selected").siblings().removeClass("l-selected"),i.trigger("afterSelectTabItem",[t])},moveToLastTabItem:function(){var t=this,i=(this.options,0);e("li",t.tab.links.ul).each(function(){i+=e(this).width()+2});var n=t.tab.width();if(i>n){var r=e(".l-tab-links-right",t.tab.links).width();t.tab.links.ul.animate({left:-1*(i-n+r+2)})}},getTabItemTitle:function(t){var i=this;this.options;return e("li[tabid="+t+"] a",i.tab.links.ul).text()},setTabItemTitle:function(t,i){var n=this;this.options;e("li[tabid="+t+"] a",n.tab.links.ul).text(i)},getTabItemSrc:function(t){var i=this;this.options;return e(".l-tab-content-item[tabid="+t+"] iframe",i.tab.content).attr("src")},setTabItemSrc:function(t,i){var n=this,r=(this.options,e(".l-tab-content-item[tabid="+t+"]",n.tab.content)),o=e(".l-tab-loading:first",r),a=e(".l-tab-content-item[tabid="+t+"] iframe",n.tab.content);o.show(),a.attr("src",i).unbind("load.tab").bind("load.tab",function(){o.hide()})},isTabItemExist:function(t){var i=this;this.options;return e("li[tabid="+t+"] a",i.tab.links.ul).length>0},addTabItem:function(t){var i=this,n=this.options;if(0==i.trigger("beforeAddTabItem",[t]))return!1;var r=t.tabid;void 0==r&&(r=i.getNewTabid());var o=t.url,a=t.content,l=t.text,s=t.showClose,d=t.height;if(i.isTabItemExist(r))return void i.selectTabItem(r);var c=e("<li><a></a><div class='l-tab-links-item-left'></div><div class='l-tab-links-item-right'></div><div class='l-tab-links-item-close'></div></li>"),u=e("<div class='l-tab-content-item'><div class='l-tab-loading' style='display:block;'></div><iframe frameborder='0'></iframe></div>"),h=e("div:first",u),p=e("iframe:first",u);if(i.makeFullHeight){var g=i.tab.height()-i.tab.links.height();u.height(g)}c.attr("tabid",r),u.attr("tabid",r),o?(p[0].tab=i,t.data&&(p[0].openerData=t.data),p.attr("name",r).attr("id",r).attr("src",o).bind("load.tab",function(){h.hide(),t.callback&&t.callback()})):(p.remove(),h.remove()),a?(u.html(a),t.callback&&t.callback()):t.target&&(u.append(t.target),t.callback&&t.callback()),void 0==s&&(s=!0),0==s&&e(".l-tab-links-item-close",c).remove(),void 0==l&&(l=r),d&&u.height(d),e("a",c).text(l),e(".l-tab-itemswitch",i.tab.links.ul).length?c.insertBefore(e(".l-tab-itemswitch",i.tab.links.ul)):i.tab.links.ul.append(c),i.tab.content.append(u),i.selectTabItem(r),i.setTabButton()&&i.moveToTabItem(r),i._addTabItemEvent(c),n.dragToMove&&e.fn.ligerDrag&&(i.drags=i.drags||[],c.each(function(){i.drags.push(i._applyDrag(this))})),i.toggleSwitch(),i.trigger("afterAddTabItem",[t])},_addTabItemEvent:function(t){var i=this;this.options;t.click(function(){var t=e(this).attr("tabid");i.selectTabItem(t)}),i.tab.menu&&i._addTabItemContextMenuEven(t),e(".l-tab-links-item-close",t).hover(function(){e(this).addClass("l-tab-links-item-close-over")},function(){e(this).removeClass("l-tab-links-item-close-over")}).click(function(){var t=e(this).parent().attr("tabid");i.removeTabItem(t)})},removeTabItem:function(t){var i=this;this.options;if(0==i.trigger("beforeRemoveTabItem",[t]))return!1;e("li[tabid="+t+"]",i.tab.links.ul).hasClass("l-selected")&&(e(".l-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),e("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected"));var n=e(".l-tab-content-item[tabid="+t+"]",i.tab.content),r=e("iframe",n);if(r.length){var o=r[0];o.src="about:blank";try{o.contentWindow.document.write("")}catch(e){}e.browser.msie&&CollectGarbage(),r.remove()}n.remove(),e("li[tabid="+t+"]",i.tab.links.ul).remove(),i.setTabButton(),i.trigger("afterRemoveTabItem",[t])},hideTabItem:function(t){var i=this;this.options;e("li[tabid="+t+"]",i.tab.links.ul).hasClass("l-selected")&&(e(".l-tab-content-item[tabid="+t+"]",i.tab.content).prev().show(),e("li[tabid="+t+"]",i.tab.links.ul).prev().addClass("l-selected").siblings().removeClass("l-selected")),e("li[tabid="+t+"]",i.tab.links.ul).hide(),e(".l-tab-content-item[tabid="+t+"]",i.tab.content).hide()},showTabItem:function(t){var i=this;this.options;e("li[tabid="+t+"]",i.tab.links.ul).show()},addHeight:function(e){var t=this,i=(this.options,t.tab.height()+e);t.setHeight(i)},setHeight:function(e){var t=this;this.options;t.tab.height(e),t.setContentHeight()},setContentHeight:function(){var t=this,i=(this.options,t.tab.height()-t.tab.links.height());t.tab.content.height(i),e("> .l-tab-content-item",t.tab.content).height(i)},getNewTabid:function(){var e=this;this.options;return e.getnewidcount=e.getnewidcount||0,"tabitem"+ ++e.getnewidcount},getTabidList:function(t,i){var n=this,r=(this.options,[]);return e("> li",n.tab.links.ul).each(function(){e(this).attr("tabid")&&e(this).attr("tabid")!=t&&(!i||e(".l-tab-links-item-close",this).length>0)&&r.push(e(this).attr("tabid"))}),r},removeOther:function(t,i){var n=this,r=(this.options,n.getTabidList(t,!0));e(r).each(function(){n.removeTabItem(this)})},reload:function(t){var i=(this.options,e(".l-tab-content-item[tabid="+t+"]")),n=e(".l-tab-loading:first",i),r=e("iframe:first",i),o=e(r).attr("src");n.show(),r.attr("src",o).unbind("load.tab").bind("load.tab",function(){n.hide()})},removeAll:function(t){var i=this,n=(this.options,i.getTabidList(null,!0));e(n).each(function(){i.removeTabItem(this)})},onResize:function(){var t=this,i=this.options;if(!i.height||"string"!=typeof i.height||-1==i.height.indexOf("%"))return!1;if("body"==t.tab.parent()[0].tagName.toLowerCase()){var n=e(window).height();n-=parseInt(t.tab.parent().css("paddingTop")),n-=parseInt(t.tab.parent().css("paddingBottom")),t.height=i.heightDiff+n*parseFloat(t.height)*.01}else t.height=i.heightDiff+t.tab.parent().height()*parseFloat(i.height)*.01;t.tab.height(t.height),t.setContentHeight()},_menuItemClick:function(e){var t=this;this.options;if(e.id&&t.actionTabid)switch(e.id){case"close":if(0==t.trigger("close"))return;t.removeTabItem(t.actionTabid),t.actionTabid=null;break;case"closeother":if(0==t.trigger("closeother"))return;t.removeOther(t.actionTabid);break;case"closeall":if(0==t.trigger("closeall"))return;t.removeAll(),t.actionTabid=null;break;case"reload":if(0==t.trigger("reload",[{tabid:t.actionTabid}]))return;t.selectTabItem(t.actionTabid),t.reload(t.actionTabid)}},_addTabItemContextMenuEven:function(t){var i=this;this.options;t.bind("contextmenu",function(n){if(i.tab.menu)return i.actionTabid=t.attr("tabid"),i.tab.menu.show({top:n.pageY,left:n.pageX}),0==e(".l-tab-links-item-close",this).length?i.tab.menu.setDisabled("close"):i.tab.menu.setEnabled("close"),!1})}})}(jQuery),function(e){function t(e,t){var i,n;if(e||(e=0),e=e.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,""),e.indexOf(".")>-1&&(e=e.replace(/[0]+$/g,"")),isNaN(e)&&(e=0),n=e==(e=Math.abs(e)),null==t)e=e.toString(),(i=-1!=e.indexOf(".")?e.substr(e.indexOf(".")+1):"")&&(e=Math.floor(1*e),e=e.toString());else{t=parseInt(t);var r=Math.pow(10,t);for(e=Math.floor(e*r+.50000000001),i=e%100,e=Math.floor(e/r).toString();i.toString().length<t;)i="0"+i}for(var o=0;o<Math.floor((e.length-(1+o))/3);o++)e=e.substring(0,e.length-(4*o+3))+","+e.substring(e.length-(4*o+3));var a=(n?"":"-")+e;return i&&(a+="."+i),a}e.fn.ligerTextBox=function(){return e.ligerui.run.call(this,"ligerTextBox",arguments)},e.fn.ligerGetTextBoxManager=function(){return e.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)},e.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1},e.ligerui.controls.TextBox=function(t,i){e.ligerui.controls.TextBox.base.constructor.call(this,t,i)},e.ligerui.controls.TextBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){e.ligerui.controls.TextBox.base._init.call(this);var t=this,i=this.options;i.width||(i.width=e(t.element).width()),e(this.element).attr("readonly")?i.readonly=!0:i.readonly&&e(this.element).attr("readonly",!0)},_render:function(){var t=this,i=this.options;t.inputText=e(this.element),t.wrapper=t.inputText.wrap('<div class="l-text"></div>').parent(),t.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),t.inputText.hasClass("l-text-field")||t.inputText.addClass("l-text-field"),this._setEvent(),
(i.digits||i.number||i.currency)&&t.inputText.addClass("l-text-field-number"),t.set(i),t.formatValue()},destroy:function(){var e=this;e.wrapper&&e.wrapper.remove(),e.options=null,liger.remove(this)},_getValue:function(){var e=this,t=this.options;return e.inputText.hasClass("l-text-field-null")?"":t.digits||t.number||t.currency?e.parseNumber():e.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var e=this,i=this.options,n=e.inputText.val()||"";if(""==n)return"";if(i.currency)e.inputText.val(t(n,i.precision));else if(i.number&&i.precision&&n){var r=parseFloat(e.inputText.val()).toFixed(i.precision);e.inputText.val(r)}},checkNotNull:function(){var e=this,t=this.options;if(!t.nullText||"null"==t.nullText||t.disabled||t.readonly)e.inputText.removeClass("l-text-field-null");else if(!e.inputText.val())return void e.inputText.addClass("l-text-field-null").val(t.nullText)},_setEvent:function(){function t(){var e=n.inputText.val();return!e||"-"==e||(r.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(e)}function i(){t()||n.inputText.val(n.parseNumber())}var n=this,r=this.options;(r.digits||r.number||r.currency)&&n.inputText.keyup(i).bind("paste",i),n.inputText.bind("blur.textBox",function(){n.trigger("blur"),n.checkNotNull(),n.formatValue(),n.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){r.readonly||(n.trigger("focus"),r.nullText&&e(this).hasClass("l-text-field-null")&&e(this).removeClass("l-text-field-null").val(""),n.wrapper.addClass("l-text-focus"),(r.digits||r.number||r.currency)&&(e(this).val(n.parseNumber()),r.initSelect&&setTimeout(function(){n.inputText.select()},150)))}).change(function(){n.trigger("changeValue",[this.value])}),n.wrapper.hover(function(){n.trigger("mouseOver"),n.wrapper.addClass("l-text-over")},function(){n.trigger("mouseOut"),n.wrapper.removeClass("l-text-over")})},parseNumber:function(e){var t=this,i=this.options,n=!!i.digits;if(null==(e=e||t.inputText.val())||""==e)return"";if(!(i.digits||i.number||i.currency))return e;"string"!=typeof e&&(e=(e||"").toString());var r=/^\-/.test(e);if(n){if("0"==e)return e;e=e.replace(/\D+|^[0]+/g,"")}else e=e.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(e)&&(e=e.replace(/^[0]+/,""));return!n&&i.precision&&"NaN"==(e=parseFloat(e).toFixed(i.precision))?"0":(r&&(e="-"+e),e)},_setDisabled:function(e){var t=this.options;e?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):t.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(e){e>20&&(this.wrapper.css({width:e}),this.inputText.css({width:e-4}))},_setHeight:function(e){e>10&&(this.wrapper.height(e),this.inputText.height(e-2))},_setValue:function(e){null!=e&&this.inputText.val(e),this.checkNotNull()},_setLabel:function(t){var i=this,n=this.options;if(i.labelwrapper)i.labelwrapper.find(".l-text-label").html(t+":&nbsp");else{i.labelwrapper=i.wrapper.wrap('<div class="l-labeltext"></div>').parent();var r=e('<div class="l-text-label" style="float:left;">'+t+":&nbsp</div>");i.labelwrapper.prepend(r),i.wrapper.css("float","left"),n.labelWidth?i._setLabelWidth(n.labelWidth):n.labelWidth=r.width(),r.height(i.wrapper.height()),n.labelAlign&&i._setLabelAlign(n.labelAlign),i.labelwrapper.append('<br style="clear:both;" />'),i.labelwrapper.width(n.labelWidth+n.width+2)}},_setLabelWidth:function(e){var t=this;this.options;t.labelwrapper&&t.labelwrapper.find(".l-text-label").width(e)},_setLabelAlign:function(e){var t=this;this.options;t.labelwrapper&&t.labelwrapper.find(".l-text-label").css("text-align",e)},updateStyle:function(){var e=this,t=this.options;e.inputText.attr("readonly")?(e.wrapper.addClass("l-text-readonly"),t.disabled=!0):(e.wrapper.removeClass("l-text-readonly"),t.disabled=!1),e.inputText.attr("disabled")?(e.wrapper.addClass("l-text-disabled"),t.disabled=!0):(e.wrapper.removeClass("l-text-disabled"),t.disabled=!1),e.inputText.hasClass("l-text-field-null")&&e.inputText.val()!=t.nullText&&e.inputText.removeClass("l-text-field-null"),e.formatValue()},setValue:function(e){this._setValue(e),this.trigger("changeValue",[e])}})}(jQuery),function(e){e.ligerTip=function(t){return e.ligerui.run.call(null,"ligerTip",arguments)},e.fn.ligerTip=function(t){return this.each(function(){var i=e.extend({},e.ligerDefaults.ElementTip,t||{});if(i.target=i.target||this,i.auto||void 0==t)i.content||(i.content=this.title,i.removeTitle&&e(this).removeAttr("title")),i.content=i.content||this.title,e(this).bind("mouseover.tip",function(){i.x=e(this).offset().left+e(this).width()+(i.distanceX||0),i.y=e(this).offset().top+(i.distanceY||0),e.ligerTip(i)}).bind("mouseout.tip",function(){var t=e.ligerui.managers[this.ligeruitipid];t&&t.remove()});else{if(i.target.ligeruitipid)return;i.x=e(this).offset().left+e(this).width()+(i.distanceX||0),i.y=e(this).offset().top+(i.distanceY||0),i.x=i.x||0,i.y=i.y||0,e.ligerTip(i)}}),e.ligerui.get(this,"ligeruitipid")},e.fn.ligerHideTip=function(t){return this.each(function(){var i=t||{};void 0==i.isLabel&&(i.isLabel="label"==this.tagName.toLowerCase()&&null!=e(this).attr("for"));var n=this;if(i.isLabel){var r=e("#"+e(this).attr("for"));if(0==r.length)return;n=r[0]}var o=e.ligerui.managers[n.ligeruitipid];o&&o.remove()}).unbind("mouseover.tip").unbind("mouseout.tip")},e.fn.ligerGetTipManager=function(){return e.ligerui.get(this)},e.ligerDefaults=e.ligerDefaults||{},e.ligerDefaults.HideTip={},e.ligerDefaults.Tip={content:null,callback:null,width:150,height:null,x:0,y:0,appendIdTo:null,target:null,auto:null,removeTitle:!0},e.ligerDefaults.ElementTip={distanceX:1,distanceY:-3,auto:null,removeTitle:!0},e.ligerMethos.Tip={},e.ligerui.controls.Tip=function(t){e.ligerui.controls.Tip.base.constructor.call(this,null,t)},e.ligerui.controls.Tip.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Tip"},__idPrev:function(){return"Tip"},_extendMethods:function(){return e.ligerMethos.Tip},_render:function(){var t=this,i=this.options,n=e('<div class="l-verify-tip"><div class="l-verify-tip-corner"></div><div class="l-verify-tip-content"></div></div>');t.tip=n,t.tip.attr("id",t.id),i.content&&(e("> .l-verify-tip-content:first",n).html(i.content),n.appendTo("body"),n.css({left:i.x,top:i.y}).show(),i.width&&e("> .l-verify-tip-content:first",n).width(i.width-8),i.height&&e("> .l-verify-tip-content:first",n).width(i.height),eee=i.appendIdTo,i.appendIdTo&&i.appendIdTo.attr("ligerTipId",t.id),i.target&&(e(i.target).attr("ligerTipId",t.id),i.target.ligeruitipid=t.id),i.callback&&i.callback(n),t.set(i))},_setContent:function(t){e("> .l-verify-tip-content:first",this.tip).html(t)},remove:function(){this.options.appendIdTo&&this.options.appendIdTo.removeAttr("ligerTipId"),this.options.target&&(e(this.options.target).removeAttr("ligerTipId"),this.options.target.ligeruitipid=null),this.tip.remove()}})}(jQuery),function(e){e.fn.ligerToolBar=function(t){return e.ligerui.run.call(this,"ligerToolBar",arguments)},e.fn.ligerGetToolBarManager=function(){return e.ligerui.run.call(this,"ligerGetToolBarManager",arguments)},e.ligerDefaults.ToolBar={},e.ligerMethos.ToolBar={},e.ligerui.controls.ToolBar=function(t,i){e.ligerui.controls.ToolBar.base.constructor.call(this,t,i)},e.ligerui.controls.ToolBar.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"ToolBar"},__idPrev:function(){return"ToolBar"},_extendMethods:function(){return e.ligerMethos.ToolBar},_render:function(){var t=this,i=this.options;t.toolbarItemCount=0,t.toolBar=e(this.element),t.toolBar.addClass("l-toolbar"),t.set(i)},_setItems:function(t){var i=this;i.toolBar.html(""),e(t).each(function(e,t){i.addItem(t)})},removeItem:function(t){var i=this;this.options;e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).remove()},setEnabled:function(t){var i=this;this.options;e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).removeClass("l-toolbar-item-disable")},setDisabled:function(t){var i=this;this.options;e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).addClass("l-toolbar-item-disable")},isEnable:function(t){var i=this;this.options;return!e("> .l-toolbar-item[toolbarid="+t+"]",i.toolBar).hasClass("l-toolbar-item-disable")},addItem:function(t){var i=this;this.options;if(t.line||"line"==t.type)return void i.toolBar.append('<div class="l-bar-separator"></div>');if("text"==t.type)return void i.toolBar.append('<div class="l-toolbar-item l-toolbar-text"><span>'+t.text||"</span></div>");var n=e('<div class="l-toolbar-item l-panel-btn"><span></span><div class="l-panel-btn-l"></div><div class="l-panel-btn-r"></div></div>');i.toolBar.append(n),t.id||(t.id="item-"+ ++i.toolbarItemCount),n.attr("toolbarid",t.id),t.img?(n.append("<img src='"+t.img+"' />"),n.addClass("l-toolbar-item-hasicon")):t.icon?(n.append("<div class='l-icon l-icon-"+t.icon+"'></div>"),n.addClass("l-toolbar-item-hasicon")):t.color&&(n.append("<div class='l-toolbar-item-color' style='background:"+t.color+"'></div>"),n.addClass("l-toolbar-item-hasicon")),t.text&&e("span:first",n).html(t.text),t.disable&&n.addClass("l-toolbar-item-disable"),t.click&&n.click(function(){e(this).hasClass("l-toolbar-item-disable")||t.click(t)}),t.menu?(t.menu=e.ligerMenu(t.menu),n.hover(function(){if(!e(this).hasClass("l-toolbar-item-disable")){i.actionMenu&&i.actionMenu.hide();var n=e(this).offset().left,r=e(this).offset().top+e(this).height();t.menu.show({top:r,left:n}),i.actionMenu=t.menu,e(this).addClass("l-panel-btn-over")}},function(){e(this).hasClass("l-toolbar-item-disable")||e(this).removeClass("l-panel-btn-over")})):n.hover(function(){e(this).hasClass("l-toolbar-item-disable")||e(this).addClass("l-panel-btn-over")},function(){e(this).hasClass("l-toolbar-item-disable")||e(this).removeClass("l-panel-btn-over")})}}),e.ligerui.controls.ToolBar.prototype.setEnable=e.ligerui.controls.ToolBar.prototype.setEnabled,e.ligerui.controls.ToolBar.prototype.setDisable=e.ligerui.controls.ToolBar.prototype.setDisabled}(jQuery),function(e){function t(e){return e?e.replace(/(^\s*)|(\s*$)/g,""):e}e.fn.ligerTree=function(t){return e.ligerui.run.call(this,"ligerTree",arguments)},e.fn.ligerGetTreeManager=function(){return e.ligerui.run.call(this,"ligerGetTreeManager",arguments)},e.ligerDefaults.Tree={url:null,urlParms:null,data:null,checkbox:!0,autoCheckboxEven:!0,enabledCompleteCheckbox:!0,parentIcon:"folder",childIcon:"leaf",textFieldName:"text",attribute:["id","url"],treeLine:!0,nodeWidth:90,statusName:"__status",isLeaf:null,single:!1,needCancel:!0,onBeforeExpand:function(){},onContextmenu:function(){},onExpand:function(){},onBeforeCollapse:function(){},onCollapse:function(){},onBeforeSelect:function(){},onSelect:function(){},onBeforeCancelSelect:function(){},onCancelselect:function(){},onCheck:function(){},onSuccess:function(){},onError:function(){},onClick:function(){},idFieldName:"id",parentIDFieldName:null,topParentIDValue:0,onBeforeAppend:function(){},onAppend:function(){},onAfterAppend:function(){},slide:!0,iconFieldName:"icon",nodeDraggable:!1,nodeDraggingRender:null,btnClickToToggleOnly:!0,ajaxType:"post",ajaxContentType:null,render:null,selectable:null,isExpand:null,delay:null,idField:null,parentIDField:null,iconClsFieldName:null},e.ligerui.controls.Tree=function(t,i){e.ligerui.controls.Tree.base.constructor.call(this,t,i)},e.ligerui.controls.Tree.ligerExtend(e.ligerui.core.UIComponent,{_init:function(){e.ligerui.controls.Tree.base._init.call(this);var t=this.options;t.single&&(t.autoCheckboxEven=!1)},_render:function(){var t=this,i=this.options;t.set(i,!0),t.tree=e(t.element),t.tree.addClass("l-tree"),t.toggleNodeCallbacks=[],t.sysAttribute=["isexpand","ischecked","href","style","delay"],t.loading=e("<div class='l-tree-loading'></div>"),t.tree.after(t.loading),t.data=[],t.maxOutlineLevel=1,t.treedataindex=0,t._applyTree(),t._setTreeEven(),t.set(i,!1)},_setTreeLine:function(e){e?this.tree.removeClass("l-tree-noline"):this.tree.addClass("l-tree-noline")},_setParms:function(){var t=this.options;e.isFunction(t.parms)&&(t.parms=t.parms())},reload:function(e){var t=this,i=this.options;t.clear(),t.loadData(null,i.url,null,{success:e})},reloadNode:function(e,t,i){var n=this,r=this.options;if(n.clear(e),"string"==typeof t)n.loadData(e,t,null,{success:i});else{if(!t)return;r.idField&&r.parentIDField&&(t=n.arrayToTree(t,r.idField,r.parentIDField)),n.append(e,t)}},_setUrl:function(e){var t=this;this.options;e&&(t.clear(),t.loadData(null,e))},_setData:function(e){e&&(this.clear(),this.append(null,e))},setData:function(e){this.set("data",e)},getData:function(){return this.data},hasChildren:function(e){return this.options.isLeaf?!this.options.isLeaf(e):!!e.children},getParent:function(t,i){var n=this;t=n.getNodeDom(t);var r=n.getParentTreeItem(t,i);if(!r)return null;var o=e(r).attr("treedataindex");return n._getDataNodeByTreeDataIndex(n.data,o)},getParentTreeItem:function(t,i){t=this.getNodeDom(t);var n=e(t);if(n.parent().hasClass("l-tree"))return null;if(void 0==i)return 0==n.parent().parent("li").length?null:n.parent().parent("li")[0];for(var r=parseInt(n.attr("outlinelevel")),o=n,a=r-1;a>=i;a--)o=o.parent().parent("li");return o[0]},getChecked:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".l-checkbox-checked",t.tree).parent().parent("li").each(function(){var n=parseInt(e(this).attr("treedataindex"));i.push({target:this,data:t._getDataNodeByTreeDataIndex(t.data,n)})}),i},getCheckedData:function(){var t=this;this.options;if(!this.options.checkbox)return null;var i=[];return e(".l-checkbox-checked",t.tree).parent().parent("li").each(function(){var n=parseInt(e(this).attr("treedataindex"));i.push(t._getDataNodeByTreeDataIndex(t.data,n))}),i},refreshTree:function(){var t=this;this.options;e.each(this.getChecked(),function(i,n){t._setParentCheckboxStatus(e(n.target))})},getSelected:function(){var t=this,i=(this.options,{});if(i.target=e(".l-selected",t.tree).parent("li")[0],i.target){var n=parseInt(e(i.target).attr("treedataindex"));return i.data=t._getDataNodeByTreeDataIndex(t.data,n),i}return null},upgrade:function(t){var i=this;this.options;e(".l-note",t).each(function(){e(this).removeClass("l-note").addClass("l-expandable-open")}),e(".l-note-last",t).each(function(){e(this).removeClass("l-note-last").addClass("l-expandable-open")}),e("."+i._getChildNodeClassName(),t).each(function(){e(this).removeClass(i._getChildNodeClassName()).addClass(i._getParentNodeClassName(!0))})},demotion:function(t){var i=this;this.options;if(t||"li"==t[0].tagName.toLowerCase()){var n=e(t).hasClass("l-last");e(".l-expandable-open",t).each(function(){e(this).removeClass("l-expandable-open").addClass(n?"l-note-last":"l-note")}),e(".l-expandable-close",t).each(function(){e(this).removeClass("l-expandable-close").addClass(n?"l-note-last":"l-note")}),e("."+i._getParentNodeClassName(!0),t).each(function(){e(this).removeClass(i._getParentNodeClassName(!0)).addClass(i._getChildNodeClassName())})}},collapseAll:function(){var t=this;this.options;e(".l-expandable-open",t.tree).click()},expandAll:function(){var t=this;this.options;e(".l-expandable-close",t.tree).click()},arrayToTree:function(e,t,i){function n(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}this.options;if(!e||!e.length)return[];for(var r=[],o={},a=e.length,l=0;l<a;l++){var s=e[l],d=n(s[t]);o[d]=s}for(var l=0;l<a;l++){var c=e[l],d=n(c[i]),u=o[d];u?(u.children=u.children||[],u.children.push(c)):r.push(c)}return r},loadData:function(t,i,n,r){var o=this,a=this.options;r=e.extend({showLoading:function(){o.loading.show()},success:function(){},error:function(){},hideLoading:function(){o.loading.hide()}},r||{});var l=a.ajaxType;n=e.extend(e.isFunction(a.parms)?a.parms():a.parms,n),"application/json"==a.ajaxContentType&&"string"!=typeof n&&(n=liger.toJSON(n));var s=e.isFunction(a.urlParms)?a.urlParms.call(o):a.urlParms;if(s)for(name in s)i+=-1==i.indexOf("?")?"?":"&",i+=name+"="+s[name];var d={type:l,url:i,data:n,dataType:"json",beforeSend:function(){r.showLoading()},success:function(e){e&&(a.idField&&a.parentIDField&&(e=o.arrayToTree(e,a.idField,a.parentIDField)),r.hideLoading(),o.append(t,e),o.trigger("success",[e]),r.success(e))},error:function(e,t,i){try{r.hideLoading(),o.trigger("error",[e,t,i]),r.error(e,t,i)}catch(e){}}};a.ajaxContentType&&(d.contentType=a.ajaxContentType),e.ajax(d)},clear:function(t){var i=this;this.options;if(t){var n=i.getNodeDom(t),r=i._getDataNodeByTreeDataIndex(i.data,e(n).attr("treedataindex"));e(n).find("ul.l-children").remove(),r&&(r.children=[])}else i.toggleNodeCallbacks=[],i.data=null,i.data=[],i.nodes=null,i.tree.html("")},getNodeDom:function(t){var i=this;this.options;return null==t?t:"string"==typeof t||"number"==typeof t?e("li[treedataindex="+t+"]",i.tree).get(0):"object"==typeof t&&"treedataindex"in t?i.getNodeDom(t.treedataindex):t.target&&t.data?t.target:t},hide:function(t){var i=this;this.options;(t=i.getNodeDom(t))&&e(t).hide()},show:function(t){var i=this;this.options;(t=i.getNodeDom(t))&&e(t).show()},remove:function(t){var i=this,n=this.options;t=i.getNodeDom(t);var r=parseInt(e(t).attr("treedataindex")),o=i._getDataNodeByTreeDataIndex(i.data,r);o&&i._setTreeDataStatus([o],"delete");var a=i.getParentTreeItem(t);n.checkbox&&i._setParentCheckboxStatus(e(t)),e(t).remove(),i._updateStyle(a?e("ul:first",a):i.tree)},_updateStyle:function(t){var i=this,n=(this.options,e(" > li",t)),r=n.length;r&&n.each(function(t,n){0!=t||e(this).hasClass("l-first")||e(this).addClass("l-first"),t!=r-1||e(this).hasClass("l-last")||e(this).addClass("l-last"),0==t&&t==r-1&&e(this).addClass("l-onlychild"),e("> div .l-note,> div .l-note-last",this).removeClass("l-note l-note-last").addClass(t==r-1?"l-note-last":"l-note"),i._setTreeItem(this,{isLast:t==r-1})})},update:function(t,i){var n=this,r=this.options;t=n.getNodeDom(t);var o=parseInt(e(t).attr("treedataindex"));nodedata=n._getDataNodeByTreeDataIndex(n.data,o);for(var a in i)nodedata[a]=i[a],a==r.textFieldName&&e("> .l-body > span",t).text(i[a])},append:function(t,i,n,r){var o=this,a=this.options;if(t=o.getNodeDom(t),0==o.trigger("beforeAppend",[t,i]))return!1;if(!i||!i.length)return!1;if(a.idFieldName&&a.parentIDFieldName&&(i=o.arrayToTree(i,a.idFieldName,a.parentIDFieldName)),o._addTreeDataIndexToData(i),o._setTreeDataStatus(i,"add"),null!=n&&(n=o.getNodeDom(n)),o.trigger("append",[t,i]),o._appendData(t,i),null==t){var l=o._getTreeHTMLByData(i,1,[],!0);return l[l.length-1]=l[0]="",null!=n?(e(n)[r?"after":"before"](l.join("")),o._updateStyle(t?e("ul:first",t):o.tree)):(e("> li:last",o.tree).length>0&&o._setTreeItem(e("> li:last",o.tree)[0],{isLast:!1}),o.tree.append(l.join(""))),e(".l-body",o.tree).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),o._upadteTreeWidth(),void o.trigger("afterAppend",[t,i])}var s=e(t),d=parseInt(s.attr("outlinelevel"));e("> ul",s).length>0||(s.append("<ul class='l-children'></ul>"),o.upgrade(t));for(var c=[],u=1;u<=d-1;u++){var h=e(o.getParentTreeItem(t,u));c.push(h.hasClass("l-last"))}c.push(s.hasClass("l-last"));var l=o._getTreeHTMLByData(i,d+1,c,!0);l[l.length-1]=l[0]="",null!=n?(e(n)[r?"after":"before"](l.join("")),o._updateStyle(t?e("ul:first",t):o.tree)):(e("> .l-children > li:last",s).length>0&&o._setTreeItem(e("> .l-children > li:last",s)[0],{isLast:!1}),e(">.l-children",t).append(l.join(""))),o._upadteTreeWidth(),e(">.l-children .l-body",t).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),o.trigger("afterAppend",[t,i])},cancelSelect:function(t,i){var n=this,r=this.options,o=n.getNodeDom(t),a=e(o),l=parseInt(a.attr("treedataindex")),s=n._getDataNodeByTreeDataIndex(n.data,l),d=e(">div:first",a);r.checkbox?e(".l-checkbox",d).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"):d.removeClass("l-selected"),0!=i&&n.trigger("cancelSelect",[{data:s,target:a[0]}])},selectNode:function(i,n){var r=this,o=this.options,a=null;if("function"==typeof i)a=i;else{if("object"==typeof i){var l=e(i),s=parseInt(l.attr("treedataindex")),d=r._getDataNodeByTreeDataIndex(r.data,s),c=e(">div:first",l);return c.length||(c=e("li[treedataindex="+s+"] >div:first",r.tree)),o.checkbox?e(".l-checkbox",c).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"):(e("div.l-selected",r.tree).removeClass("l-selected"),c.addClass("l-selected")),void(0!=n&&r.trigger("select",[{data:d,target:c.parent().get(0)}]))}a=function(e){return!(!e[o.idFieldName]&&0!=e[o.idFieldName])&&t(e[o.idFieldName].toString())==t(i.toString())}}e("li",r.tree).each(function(){var t=e(this),i=parseInt(t.attr("treedataindex")),o=r._getDataNodeByTreeDataIndex(r.data,i);a(o,i)?r.selectNode(this,n):r.options.checkbox||r.cancelSelect(this,n)})},getTextByID:function(e){var t=this,i=this.options,n=t.getDataByID(e);return n?n[i.textFieldName]:null},getDataByID:function(t){function i(e){for(var n=0;n<e.length;n++){var o=e[n];if(o[r.idFieldName]==t)return o;if(o.children&&o.children.length){var a=i(o.children);if(a)return a}}return null}var n=this,r=this.options,o=null;return n.data&&n.data.length?i(n.data):(e("li",n.tree).each(function(){if(!o){var i=e(this),a=parseInt(i.attr("treedataindex")),l=n._getDataNodeByTreeDataIndex(n.data,a);l[r.idFieldName].toString()==t.toString()&&(o=l)}}),o)},arrayToTree:function(e,t,i){if(!e||!e.length)return[];for(var n=[],r={},o=e.length,a=0;a<o;a++){var l=e[a];r[l[t]]=l}for(var a=0;a<o;a++){var s=e[a],d=r[s[i]];d?(d.children=d.children||[],d.children.push(s)):n.push(s)}return n},_getDataNodeByTreeDataIndex:function(e,t){for(var i=this,n=(this.options,0);n<e.length;n++){if(e[n].treedataindex==t)return e[n];if(e[n].children){var r=i._getDataNodeByTreeDataIndex(e[n].children,t);if(r)return r}}return null},_setTreeDataStatus:function(t,i){var n=this,r=this.options;e(t).each(function(){this[r.statusName]=i,this.children&&n._setTreeDataStatus(this.children,i)})},_addTreeDataIndexToData:function(t){var i=this;this.options;e(t).each(function(){void 0==this.treedataindex&&(this.treedataindex=i.treedataindex++,this.children&&i._addTreeDataIndexToData(this.children))})},_addToNodes:function(t){var i=this;this.options;i.nodes=i.nodes||[],i.nodes.push(t),t.children&&e(t.children).each(function(e,t){i._addToNodes(t)})},_appendData:function(t,i){var n=this,r=(this.options,parseInt(e(t).attr("treedataindex"))),o=n._getDataNodeByTreeDataIndex(n.data,r);void 0==n.treedataindex&&(n.treedataindex=0),o&&void 0==o.children&&(o.children=[]),e(i).each(function(e,t){o?o.children[o.children.length]=t:n.data[n.data.length]=t,n._addToNodes(t)})},_setTreeItem:function(t,i){var n=this;this.options;if(i){t=n.getNodeDom(t);var r=e(t),o=parseInt(r.attr("outlinelevel"));void 0!=i.isLast&&(1==i.isLast?(r.removeClass("l-last").addClass("l-last"),e("> div .l-note",r).removeClass("l-note").addClass("l-note-last"),e(".l-children li",r).find(".l-box:eq("+(o-1)+")").removeClass("l-line")):0==i.isLast&&(r.removeClass("l-last"),e("> div .l-note-last",r).removeClass("l-note-last").addClass("l-note"),e(".l-children li",r).find(".l-box:eq("+(o-1)+")").removeClass("l-line").addClass("l-line")))}},_upadteTreeWidth:function(){var e=this,t=this.options,i=22*e.maxOutlineLevel;t.checkbox&&(i+=22),(t.parentIcon||t.childIcon)&&(i+=22),i+=t.nodeWidth,e.tree.width(i)},_getChildNodeClassName:function(){return"l-tree-icon-"+this.options.childIcon},_getParentNodeClassName:function(e){var t=this.options,i="l-tree-icon-"+t.parentIcon;return e&&(i+="-open"),i},_isExpand:function(e,t){var i=this.options,n=null!=e.isExpand?e.isExpand:null!=e.isexpand?e.isexpand:i.isExpand;return null==n||("function"==typeof n&&(n=i.isExpand({data:e,level:t})),"boolean"==typeof n?n:"string"==typeof n?"true"==n:"number"!=typeof n||n>t)},_getDelay:function(t,i){var n=this.options,r=null!=t.delay?t.delay:n.delay;return null!=r&&("function"==typeof r&&(r=r({data:t,level:i})),"boolean"==typeof r?r:"string"==typeof r?{url:r}:("number"==typeof r&&(r=[r]),e.isArray(r)?-1!=e.inArray(i,r):!("object"!=typeof r||!r.url)&&r))},_getTreeHTMLByData:function(t,i,n,r){var o=this,a=this.options;o.maxOutlineLevel<i&&(o.maxOutlineLevel=i),n=n||[],i=i||1;var l=[];r?l.push("<ul class='l-children'>"):l.push('<ul class="l-children" style="display:none">');for(var s=0;s<t.length;s++){var d=t[s],c=0==s,u=s==t.length-1,h=o._getDelay(d,i),p=!h&&o._isExpand(d,i);l.push("<li "),void 0!=d.treedataindex&&l.push('treedataindex="'+d.treedataindex+'" '),p&&l.push("isexpand="+d.isexpand+" "),l.push("outlinelevel="+i+" ");for(var g=0;g<o.sysAttribute.length;g++)e(this).attr(o.sysAttribute[g])&&(t[dataindex][o.sysAttribute[g]]=e(this).attr(o.sysAttribute[g]));for(var g=0;g<a.attribute.length;g++)d[a.attribute[g]]&&l.push(a.attribute[g]+'="'+d[a.attribute[g]]+'" ');l.push('class="'),c&&l.push("l-first "),u&&l.push("l-last "),c&&u&&l.push("l-onlychild "),l.push('"'),l.push(">"),l.push('<div class="l-body'),a.selectable&&0==a.selectable(d)&&l.push(" l-unselectable"),l.push('">');for(var f=0;f<=i-2;f++)n[f]?l.push('<div class="l-box"></div>'):l.push('<div class="l-box l-line"></div>');if(o.hasChildren(d)?(p?l.push('<div class="l-box l-expandable-open"></div>'):l.push('<div class="l-box l-expandable-close"></div>'),a.checkbox&&(d.ischecked?l.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):l.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),a.parentIcon&&(l.push('<div class="l-box l-tree-icon '),l.push(o._getParentNodeClassName(!!p)+" "),a.iconFieldName&&d[a.iconFieldName]?l.push("l-tree-icon-none"):a.iconClsFieldName&&d[a.iconClsFieldName]&&l.push("l-tree-icon-"+d[a.iconClsFieldName]+" "),l.push('">'),a.iconFieldName&&d[a.iconFieldName]&&l.push('<img src="'+d[a.iconFieldName]+'" />'),l.push("</div>"))):(u?l.push('<div class="l-box l-note-last"></div>'):l.push('<div class="l-box l-note"></div>'),a.checkbox&&(d.ischecked?l.push('<div class="l-box l-checkbox l-checkbox-checked"></div>'):l.push('<div class="l-box l-checkbox l-checkbox-unchecked"></div>')),a.childIcon&&(l.push('<div class="l-box l-tree-icon '),l.push(o._getChildNodeClassName()+" "),a.iconFieldName&&d[a.iconFieldName]?l.push("l-tree-icon-none"):a.iconClsFieldName&&d[a.iconClsFieldName]&&l.push("l-tree-icon-"+d[a.iconClsFieldName]+" "),l.push('">'),a.iconFieldName&&d[a.iconFieldName]&&l.push('<img src="'+d[a.iconFieldName]+'" />'),l.push("</div>"))),a.render?l.push("<span>"+a.render(d,d[a.textFieldName])+"</span>"):l.push("<span>"+d[a.textFieldName]+"</span>"),l.push("</div>"),o.hasChildren(d)){for(var v=[],f=0;f<n.length;f++)v.push(n[f]);v.push(u),h?1==h?o.toggleNodeCallbacks.push({data:d,callback:function(t,n){var r=o._getTreeHTMLByData(n.children,i+1,v,p).join("");e(t).append(r),e(">.l-children .l-body",t).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),o._removeToggleNodeCallback(n)}}):h.url&&function(t,i,n){o.toggleNodeCallbacks.push({data:t,callback:function(t,r){o.loadData(t,i,n,{showLoading:function(){e("div.l-expandable-close:first",t).addClass("l-box-loading")},hideLoading:function(){e("div.l-box-loading:first",t).removeClass("l-box-loading")}}),o._removeToggleNodeCallback(r)}})}(d,h.url,h.parms):l.push(o._getTreeHTMLByData(d.children,i+1,v,p).join(""))}l.push("</li>")}return l.push("</ul>"),l},_removeToggleNodeCallback:function(e){for(var t=this,i=(this.options,0);i<=t.toggleNodeCallbacks.length;i++)if(t.toggleNodeCallbacks[i]&&t.toggleNodeCallbacks[i].data==e){t.toggleNodeCallbacks.splice(i,1);break}},_getDataByTreeHTML:function(t){var i=this,n=this.options,r=[];return e("> li",t).each(function(t,o){var a=r.length;r[a]={treedataindex:i.treedataindex++},r[a][n.textFieldName]=e("> span,> a",this).html();for(var l=0;l<i.sysAttribute.length;l++)e(this).attr(i.sysAttribute[l])&&(r[a][i.sysAttribute[l]]=e(this).attr(i.sysAttribute[l]));for(var l=0;l<n.attribute.length;l++)e(this).attr(n.attribute[l])&&(r[a][n.attribute[l]]=e(this).attr(n.attribute[l]));e("> ul",this).length>0&&(r[a].children=i._getDataByTreeHTML(e("> ul",this)))}),r},_applyTree:function(){var t=this;this.options;t.data=t._getDataByTreeHTML(t.tree);var i=t._getTreeHTMLByData(t.data,1,[],!0);i[i.length-1]=i[0]="",t.tree.html(i.join("")),t._upadteTreeWidth(),e(".l-body",t.tree).hover(function(){e(this).addClass("l-over")},function(){e(this).removeClass("l-over")})},_getSrcElementByEvent:function(t){var i=this,n=t.target||t.srcElement,r=n.tagName.toLowerCase(),o=e(n).parents().add(n),a=function(t){for(var i=o.length-1;i>=0;i--)if(e(o[i]).hasClass(t))return o[i];return null};if(-1==o.index(this.element))return{out:!0};var l={tree:a("l-tree"),node:a("l-body"),checkbox:a("l-checkbox"),icon:a("l-tree-icon"),text:"span"==r};if(l.node){var s=parseInt(e(l.node).parent().attr("treedataindex"));l.data=i._getDataNodeByTreeDataIndex(i.data,s)}return l},_setTreeEven:function(){var t=this,i=this.options;t.hasBind("contextmenu")&&t.tree.bind("contextmenu",function(i){var n=i.target||i.srcElement,r=null;if("a"==n.tagName.toLowerCase()||"span"==n.tagName.toLowerCase()||e(n).hasClass("l-box")?r=e(n).parent().parent():e(n).hasClass("l-body")?r=e(n).parent():"li"==n.tagName.toLowerCase()&&(r=e(n)),r){var o=parseInt(r.attr("treedataindex")),a=t._getDataNodeByTreeDataIndex(t.data,o);return t.trigger("contextmenu",[{data:a,target:r[0]},i])}}),t.tree.click(function(n){var r=n.target||n.srcElement,o=null;if(o="a"==r.tagName.toLowerCase()||"span"==r.tagName.toLowerCase()||e(r).hasClass("l-box")?e(r).parent().parent():e(r).hasClass("l-body")?e(r).parent():e(r)){var a=parseInt(o.attr("treedataindex")),l=t._getDataNodeByTreeDataIndex(t.data,a),s=e("div.l-body:first",o).find("div.l-expandable-open:first,div.l-expandable-close:first"),d=e(r).hasClass("l-expandable-open")||e(r).hasClass("l-expandable-close");if(!e(r).hasClass("l-checkbox")&&!d&&!o.hasClass("l-unselectable"))if(e(">div:first",o).hasClass("l-selected")&&i.needCancel){if(0==t.trigger("beforeCancelSelect",[{data:l,target:o[0]}]))return!1;e(">div:first",o).removeClass("l-selected"),t.trigger("cancelSelect",[{data:l,target:o[0]}])}else{if(0==t.trigger("beforeSelect",[{data:l,target:o[0]}]))return!1;e(".l-body",t.tree).removeClass("l-selected"),e(">div:first",o).addClass("l-selected"),t.trigger("select",[{data:l,target:o[0]}])}if(e(r).hasClass("l-checkbox"))i.autoCheckboxEven?(e(r).hasClass("l-checkbox-unchecked")?(e(r).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),e(".l-children .l-checkbox",o).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),t.trigger("check",[{data:l,target:o[0]},!0])):e(r).hasClass("l-checkbox-checked")?(e(r).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),e(".l-children .l-checkbox",o).removeClass("l-checkbox-incomplete l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:o[0]},!1])):e(r).hasClass("l-checkbox-incomplete")&&(e(r).removeClass("l-checkbox-incomplete").addClass("l-checkbox-checked"),e(".l-children .l-checkbox",o).removeClass("l-checkbox-incomplete l-checkbox-unchecked").addClass("l-checkbox-checked"),t.trigger("check",[{data:l,target:o[0]},!0])),t._setParentCheckboxStatus(o)):e(r).hasClass("l-checkbox-unchecked")?(e(r).removeClass("l-checkbox-unchecked").addClass("l-checkbox-checked"),i.single&&e(".l-checkbox",t.tree).not(r).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:o[0]},!0])):e(r).hasClass("l-checkbox-checked")&&(e(r).removeClass("l-checkbox-checked").addClass("l-checkbox-unchecked"),t.trigger("check",[{data:l,target:o[0]},!1]));else if(!s.hasClass("l-expandable-open")||i.btnClickToToggleOnly&&!d){if(s.hasClass("l-expandable-close")&&(!i.btnClickToToggleOnly||d)){if(0==t.trigger("beforeExpand",[{data:l,target:o[0]}]))return!1;e(t.toggleNodeCallbacks).each(function(){this.data==l&&this.callback(o[0],l)}),s.removeClass("l-expandable-close").addClass("l-expandable-open");var c=function(){t.trigger("expand",[{data:l,target:o[0]}])}
;i.slide?e("> .l-children",o).slideToggle("fast",c):(e("> .l-children",o).show(),c()),e("> div ."+t._getParentNodeClassName(),o).removeClass(t._getParentNodeClassName()).addClass(t._getParentNodeClassName(!0))}}else{if(0==t.trigger("beforeCollapse",[{data:l,target:o[0]}]))return!1;s.removeClass("l-expandable-open").addClass("l-expandable-close"),i.slide?e("> .l-children",o).slideToggle("fast"):e("> .l-children",o).hide(),e("> div ."+t._getParentNodeClassName(!0),o).removeClass(t._getParentNodeClassName(!0)).addClass(t._getParentNodeClassName()),t.trigger("collapse",[{data:l,target:o[0]}])}t.trigger("click",[{data:l,target:o[0]}])}}),e.fn.ligerDrag&&i.nodeDraggable&&(t.nodeDroptip=e("<div class='l-drag-nodedroptip' style='display:none'></div>").appendTo("body"),t.tree.ligerDrag({revert:!0,animate:!1,proxyX:20,proxyY:20,proxy:function(n,r){if(t._getSrcElementByEvent(r).node){var o="dragging";if(i.nodeDraggingRender)o=i.nodeDraggingRender(n.draggingNodes,n,t);else{o="";var a=!1;for(var l in n.draggingNodes){var s=n.draggingNodes[l];a&&(o+=","),o+=s.text,a=!0}}return e("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+o+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),t.children[this.id]=this},onStartDrag:function(e,n){if(2==n.button)return!1;this.set("cursor","default");var r=t._getSrcElementByEvent(n);if(r.checkbox)return!1;if(i.checkbox){var o=t.getChecked();this.draggingNodes=[];for(var a in o)this.draggingNodes.push(o[a].data);if(!this.draggingNodes||!this.draggingNodes.length)return!1}else this.draggingNodes=[r.data];this.draggingNode=r.data,this.set("cursor","move"),t.nodedragging=!0,this.validRange={top:t.tree.offset().top,bottom:t.tree.offset().top+t.tree.height(),left:t.tree.offset().left,right:t.tree.offset().left+t.tree.width()}},onDrag:function(i,n){var r=this.draggingNode;if(!r)return!1;var o=this.draggingNodes?this.draggingNodes:[r];null==t.nodeDropIn&&(t.nodeDropIn=-1);var a=n.pageX,l=n.pageY,s=!1,d=this.validRange;if(a<d.left||a>d.right||l>d.bottom||l<d.top)return t.nodeDropIn=-1,t.nodeDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c=0,u=t.nodes.length;c<u;c++){var h=t.nodes[c],p=h.treedataindex;if(r.treedataindex==p&&(s=!0),-1==e.inArray(h,o)){var g=!!s;if(-1==t.nodeDropIn||t.nodeDropIn==p){var f=e("li[treedataindex="+p+"] div:first",t.tree),v=f.offset(),m={top:v.top,bottom:v.top+f.height(),left:t.tree.offset().left,right:t.tree.offset().left+t.tree.width()};if(a>m.left&&a<m.right&&l>m.top&&l<m.bottom){var b=v.top;g&&(b+=f.height()),t.nodeDroptip.css({left:m.left,top:b,width:m.right-m.left}).show(),t.nodeDropIn=p,t.nodeDropDir=g?"bottom":"top",l>m.top+7&&l<m.bottom-7?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),t.nodeDroptip.hide(),t.nodeDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),t.nodeDroptip.show(),t.nodeDropInParent=!1);break}-1!=t.nodeDropIn&&(t.nodeDropIn=-1,t.nodeDropInParent=!1,t.nodeDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,n){var r=this.draggingNodes;if(t.nodedragging=!1,-1!=t.nodeDropIn){for(var o=0;o<r.length;o++){var a=r[o].children;a&&(r=e.grep(r,function(t,i){return-1==e.inArray(t,a)}))}for(var o in r){var l=r[o];t.nodeDropInParent?(t.remove(l),t.append(t.nodeDropIn,[l])):(t.remove(l),t.append(t.getParent(t.nodeDropIn),[l],t.nodeDropIn,"bottom"==t.nodeDropDir))}t.nodeDropIn=-1}t.nodeDroptip.hide(),this.set("cursor","default")}}))},_setParentCheckboxStatus:function(t){var i=this,n=this.options,r=0==e(".l-checkbox-unchecked",t.parent()).length;0==e(".l-checkbox-checked",t.parent()).length?t.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-checked l-checkbox-incomplete").addClass("l-checkbox-unchecked"):r||!n.enabledCompleteCheckbox?t.parent().prev().find(".l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-incomplete").addClass("l-checkbox-checked"):t.parent().prev().find("> .l-checkbox").removeClass("l-checkbox-unchecked l-checkbox-checked").addClass("l-checkbox-incomplete"),t.parent().parent("li").length>0&&i._setParentCheckboxStatus(t.parent().parent("li"))}})}(jQuery),function(e){var t=e.ligerui;t.windowCount=0,e.ligerWindow=function(e){return t.run.call(null,"ligerWindow",arguments,{isStatic:!0})},e.ligerWindow.show=function(t){return e.ligerWindow(t)},e.ligerDefaults.Window={showClose:!0,showMax:!0,showToggle:!0,showMin:!0,title:"window",load:!1,onLoaded:null,onClose:null,onRegain:null,onMax:null,modal:!1},e.ligerMethos.Window={},t.controls.Window=function(e){t.controls.Window.base.constructor.call(this,null,e)},t.controls.Window.ligerExtend(t.core.Win,{__getType:function(){return"Window"},__idPrev:function(){return"Window"},_extendMethods:function(){return e.ligerMethos.Window},_render:function(){var i=this,n=this.options;if(i.window=e('<div class="l-window"><div class="l-window-header"><div class="l-window-header-buttons"><div class="l-window-toggle"></div><div class="l-window-max"></div><div class="l-window-close"></div><div class="l-clear"></div></div><div class="l-window-header-inner"></div></div><div class="l-window-content"></div></div>'),i.element=i.window[0],i.window.content=e(".l-window-content",i.window),i.window.header=e(".l-window-header",i.window),i.window.buttons=e(".l-window-header-buttons:first",i.window),n.url)if(n.load)i.window.content.load(n.url,function(){i.trigger("loaded")}),i.window.content.addClass("l-window-content-scroll");else{var r=e("<iframe frameborder='0' src='"+n.url+"'></iframe>"),o="ligeruiwindow"+t.windowCount++;n.name&&(o=n.name),r.attr("name",o).attr("id",o),n.framename=o,r.appendTo(i.window.content),i.iframe=r}else if(n.content){var a=e("<div>"+n.content+"</div>");a.appendTo(i.window.content)}else n.target&&(i.window.content.append(n.target),n.target.show());this.mask(),i.active(),e("body").append(i.window),i.set({width:n.width,height:n.height});var l=0,s=0;null!=n.left?l=n.left:n.left=l=.5*(e(window).width()-i.window.width()),null!=n.top?s=n.top:n.top=s=.5*(e(window).height()-i.window.height())+e(window).scrollTop()-10,l<0&&(n.left=l=0),s<0&&(n.top=s=0),i.set(n),n.framename&&e(">iframe",i.window.content).attr("name",n.framename),n.showToggle||e(".l-window-toggle",i.window).remove(),n.showMax||e(".l-window-max",i.window).remove(),n.showClose||e(".l-window-close",i.window).remove(),i._saveStatus(),e.fn.ligerDrag&&(i.draggable=i.window.drag=i.window.ligerDrag({handler:".l-window-header-inner",onStartDrag:function(){i.active()},onStopDrag:function(){i._saveStatus()},animate:!1})),e.fn.ligerResizable&&(i.resizeable=i.window.resizable=i.window.ligerResizable({onStartResize:function(){i.active(),e(".l-window-max",i.window).removeClass("l-window-regain")},onStopResize:function(e,t){var n=0,r=0;return isNaN(parseInt(i.window.css("top")))||(n=parseInt(i.window.css("top"))),isNaN(parseInt(i.window.css("left")))||(r=parseInt(i.window.css("left"))),e.diffTop&&i.window.css({top:n+e.diffTop}),e.diffLeft&&i.window.css({left:r+e.diffLeft}),e.newWidth&&i.window.width(e.newWidth),e.newHeight&&i.window.content.height(e.newHeight-28),i._saveStatus(),!1}}),i.window.append("<div class='l-btn-nw-drop'></div>")),e(".l-window-toggle",i.window).click(function(){e(this).hasClass("l-window-toggle-close")?(i.collapsed=!1,e(this).removeClass("l-window-toggle-close")):(i.collapsed=!0,e(this).addClass("l-window-toggle-close")),i.window.content.slideToggle()}).hover(function(){i.window.drag&&i.window.drag.set("disabled",!0)},function(){i.window.drag&&i.window.drag.set("disabled",!1)}),e(".l-window-close",i.window).click(function(){if(0==i.trigger("close"))return!1;i.window.hide(),t.win.removeTask(i)}).hover(function(){i.window.drag&&i.window.drag.set("disabled",!0)},function(){i.window.drag&&i.window.drag.set("disabled",!1)}),e(".l-window-max",i.window).click(function(){if(e(this).hasClass("l-window-regain")){if(0==i.trigger("regain"))return!1;i.window.width(i._width).css({left:i._left,top:i._top}),i.window.content.height(i._height-28),e(this).removeClass("l-window-regain")}else{if(0==i.trigger("max"))return!1;i.window.width(e(window).width()-2).css({left:0,top:0}),i.window.content.height(e(window).height()-28).show(),e(this).addClass("l-window-regain")}})},_saveStatus:function(){var e=this;e._width=e.window.width(),e._height=e.window.height();var t=0,i=0;isNaN(parseInt(e.window.css("top")))||(t=parseInt(e.window.css("top"))),isNaN(parseInt(e.window.css("left")))||(i=parseInt(e.window.css("left"))),e._top=t,e._left=i},min:function(){this.window.hide(),this.minimize=!0,this.actived=!1},_setShowMin:function(i){var n=this;this.options;i?n.winmin||(n.winmin=e('<div class="l-window-min"></div>').prependTo(n.window.buttons).click(function(){n.min()}),t.win.addTask(n)):n.winmin&&(n.winmin.remove(),n.winmin=null)},_setLeft:function(e){null!=e&&this.window.css({left:e})},_setTop:function(e){null!=e&&this.window.css({top:e})},_setWidth:function(e){e>0&&this.window.width(e)},_setHeight:function(e){e>28&&this.window.content.height(e-28)},_setTitle:function(t){t&&e(".l-window-header-inner",this.window.header).html(t)},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.window.content.html("").load(i.url,function(){if(0==t.trigger("loaded"))return!1}):t.jiframe&&t.jiframe.attr("src",i.url)},hide:function(){this.options;this.unmask(),this.window.hide()},show:function(){this.options;this.mask(),this.window.show()},remove:function(){this.options;this.unmask(),this.window.remove()},active:function(){var i=this;this.options;if(i.minimize){var n=i._width,r=i._height,o=i._left,a=i._top;i.maximum&&(n=e(window).width(),r=e(window).height(),o=a=0,t.win.taskbar&&(r-=t.win.taskbar.outerHeight(),t.win.top&&(a+=t.win.taskbar.outerHeight()))),i.set({width:n,height:r,left:o,top:a})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show(),t.win.setFront(this)},setUrl:function(e){return _setUrl(e)}})}(jQuery),define("ligerui.all",function(){}),function($){if(Function.prototype.ligerExtend=function(e,t){if("function"!=typeof e)return this;this.base=e.prototype,this.base.constructor=e;var i=function(){};i.prototype=e.prototype,this.prototype=new i,this.prototype.constructor=this,t&&$.extend(this.prototype,t)},Function.prototype.ligerDefer=function(e,t,i){var n=this;return setTimeout(function(){n.apply(e,i||[])},t)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"liger",attrPrev:"data",getId:function(e){e=e||this.managerIdPrev;var t=e+(1e3+this.managerCount);return this.managerCount++,t},add:function(e){if(2==arguments.length){var t=arguments[1];return t.id=t.id||t.options.id||arguments[0].id,void this.addManager(t)}e.id||(e.id=this.getId(e.__idPrev())),this.managers[e.id]=e},remove:function(e){if("string"==typeof e||"number"==typeof e)delete liger.managers[e];else if("object"==typeof e)if(e instanceof liger.core.Component)delete liger.managers[e.id];else{if(!$(e).attr(this.idAttrName))return!1;delete liger.managers[$(e).attr(this.idAttrName)]}},get:function(e,t){if(t=t||"ligeruiid","string"==typeof e||"number"==typeof e)return liger.managers[e];if("object"==typeof e){var i=e.length?e[0]:e,n=i[t]||$(i).attr(t);return n?liger.managers[n]:null}return null},find:function(e){var t=[];for(var i in this.managers){var n=this.managers[i];e instanceof Function?n instanceof e&&t.push(n):e instanceof Array?-1!=$.inArray(n.__getType(),e)&&t.push(n):n.__getType()==e&&t.push(n)}return t},run:function(e,t,i){if(e){if(i=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),e=e.replace(/^ligerGet/,""),e=e.replace(/^liger/,""),null==this||this==window||i.isStatic)return liger.plugins[e]||(liger.plugins[e]={fn:$[liger.pluginPrev+e],isStatic:!0}),new $.ligerui[i.controlNamespace][e]($.extend({},$[i.defaultsNamespace][e]||{},$[i.defaultsNamespace][e+"String"]||{},t.length>0?t[0]:{}));if(liger.plugins[e]||(liger.plugins[e]={fn:$.fn[liger.pluginPrev+e],isStatic:!1}),/Manager$/.test(e))return liger.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var n=liger.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(n&&t.length>0&&n.set(t[0]))}if(!(t.length>=1&&"string"==typeof t[0])){var r=t.length>0?t[0]:null,o=$.extend({},$[i.defaultsNamespace][e],$[i.defaultsNamespace][e+"String"],r);i.propertyToElemnt&&(o[i.propertyToElemnt]=this),i.hasElement?new $.ligerui[i.controlNamespace][e](this,o):new $.ligerui[i.controlNamespace][e](o)}}),0==this.length)return null;if(0==t.length)return liger.get(this,i.idAttrName);if("object"==typeof t[0])return liger.get(this,i.idAttrName);if("string"==typeof t[0]){var n=liger.get(this,i.idAttrName);if(null==n)return;if("option"!=t[0]){var r=t[0];if(!n[r])return;var o=Array.apply(null,t);return o.shift(),n[r].apply(n,o)}if(2==t.length)return n.get(t[1]);if(t.length>=3)return n.set(t[1],t[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(e){return e?liger.run.call(this,e,arguments):liger.get(this)},liger.core.Component=function(e){this.events=this.events||{},this.options=e||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(e,t,i){if(e)if("object"!=typeof e){var n=e;if(0==n.indexOf("on"))return void("function"==typeof t&&this.bind(n.substr(2),t));if(this.options||(this.options={}),0!=this.trigger("propertychange",[e,t])){this.options[n]=t;var r="_set"+n.substr(0,1).toUpperCase()+n.substr(1);this[r]&&this[r].call(this,t,i),this.trigger("propertychanged",[e,t])}}else{var o;if(this.options!=e?($.extend(this.options,e),o=e):o=$.extend({},e),void 0==t||1==t)for(var a in o)0==a.indexOf("on")&&this.set(a,o[a]);if(void 0==t||0==t)for(var a in o)0!=a.indexOf("on")&&this.set(a,o[a],i)}},get:function(e){var t="_get"+e.substr(0,1).toUpperCase()+e.substr(1);return this[t]?this[t].call(this,e):this.options[e]},hasBind:function(e){var t=e.toLowerCase(),i=this.events[t];return!(!i||!i.length)},trigger:function(e,t){if(e){var i=e.toLowerCase(),n=this.events[i];if(n){t=t||[],t instanceof Array==0&&(t=[t]);for(var r=0;r<n.length;r++){var o=n[r];if(0==o.handler.apply(o.context,t))return!1}}}},bind:function(e,t,i){if("object"!=typeof e){if("function"!=typeof t)return!1;var n=e.toLowerCase(),r=this.events[n]||[];i=i||this,r.push({handler:t,context:i}),this.events[n]=r}else for(var o in e)this.bind(o,e[o])},unbind:function(e,t){if(!e)return void(this.events={});var i=e.toLowerCase(),n=this.events[i];if(n&&n.length)if(t){for(var r=0,o=n.length;r<o;r++)if(n[r].handler==t){n.splice(r,1);break}}else delete this.events[i]},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(e,t){liger.core.UIComponent.base.constructor.call(this,t);var i=this._extendMethods();i&&$.extend(this,i),this.element=e,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(e,t){var i={};if(!e||-1!=e.indexOf("."))return i;var n=liger.defaults[e];if(!n)return i;for(var r in n)if(t.attr(liger.attrPrev+"-"+r)){var o=t.attr(liger.attrPrev+"-"+r);"boolean"==typeof n[r]?i[r]="true"==o||"1"==o:i[r]=o}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||liger.getId(this.__idPrev()):this.id=this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(e){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(e){this.element&&e&&$(this.element).addClass(e)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(e,t){liger.controls.Input.base.constructor.call(this,e,t)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(e){return this.set("value",e)},getValue:function(){return this.get("value")},_setReadonly:function(e){var t=this.wrapper||this.text;if(t&&t.hasClass("l-text")){var i=this.inputText;e?(i&&i.attr("readonly","readonly"),t.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),t.removeClass("l-text-readonly"))}},setReadonly:function(e){return this.set("readonly",e)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(e,t){this.set({width:e,height:t+2})}}),liger.win={top:!1,mask:function(e){function t(){if(liger.win.windowMask){var e=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(e)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",t),$(window).bind("scroll",t)),this.windowMask.show(),t(),this.masking=!0},unmask:function(e){for(var t=$("body > .l-dialog:visible,body > .l-window:visible"),i=0,n=t.length;i<n;i++){var r=t.eq(i).attr("ligeruiid");if(!e||e.id!=r){var o=liger.get(r);if(o){if(o.get("modal"))return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var e=this;e.taskbar.animate({bottom:-32},function(){e.taskbar.remove(),e.taskbar=null})},activeTask:function(e){for(var t in this.tasks){var i=this.tasks[t];t==e.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(e){var t=this;if(t.taskbar)return t.tasks[e.id]?t.tasks[e.id]:null},addTask:function(e){var t=this;if(t.taskbar||t.createTaskbar(),t.tasks[e.id])return t.tasks[e.id];var i=e.get("title"),n=t.tasks[e.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return t.taskbar.tasks.append(n),t.activeTask(e),n.bind("click",function(){t.activeTask(e),e.actived?e.min():e.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),n},hasTask:function(){for(var e in this.tasks)if(this.tasks[e])return!0;return!1},removeTask:function(e){var t=this;t.taskbar&&(t.tasks[e.id]&&(t.tasks[e.id].unbind(),t.tasks[e.id].remove(),delete t.tasks[e.id]),t.hasTask()||t.removeTaskbar())},setFront:function(e){var t=liger.find(liger.core.Win);for(var i in t){var n=t[i];n==e?($(n.element).css("z-index","9200"),this.activeTask(n)):$(n.element).css("z-index","9100")}}},liger.core.Win=function(e,t){liger.core.Win.base.constructor.call(this,e,t)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){var t=function(e){return e<10?"0"+e:e},i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n=function(e){return i.lastIndex=0,i.test(e)?'"'+e.replace(i,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'};if(null===e)return"null";var r=typeof e;if("undefined"!==r){if("string"===r)return n(e);if("number"===r||"boolean"===r)return""+e;if("object"===r){if("function"==typeof e.toJSON)return liger.toJSON(e.toJSON());if(e.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"Z":null;var o=[];if(e.constructor===Array){for(var a=0,l=e.length;a<l;a++)o.push(liger.toJSON(e[a])||"null");return"["+o.join(",")+"]"}var s,d;for(var c in e){if("number"===(r=typeof c))s='"'+c+'"';else{if("string"!==r)continue;s=n(c)}r=typeof e[c],"function"!==r&&"undefined"!==r&&(d=liger.toJSON(e[c]),o.push(s+":"+d))}return"{"+o.join(",")+"}"}}},liger.getEditor=function(e){var t=e.type,i=e.control,n=e.master;if(!t)return null;var r=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var o={create:function(o,a,l){var s=a.field||a.column,d=l||{},c=!!a.column,u=$.extend({},e.options),h="text";-1!=$.inArray(t,["password","file","checkbox","radio"])&&(h=t),e.password&&(h="password");var p=$("<input type='"+h+"'/>");if(e.body&&(p=e.body.clone()),p.appendTo(o),a.field){var g=s.name,f=$.isFunction(d.prefixID)?d.prefixID(n):d.prefixID||"";if(u.id=s.id||f+s.name,-1!=$.inArray(t,["select","combobox","autocomplete","popup"])&&(g=s.textField||s.comboboxName,s.comboboxName&&!s.id&&(u.id=(d.prefixID||"")+s.comboboxName)),-1!=$.inArray(t,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(u.valueFieldID=f+s.name),!e.body){var v=f+g,m=(new Date).getTime()+"_"+ ++r+"_"+s.name;p.attr($.extend({id:m,name:v},s.attr)),s.cssClass&&p.addClass(s.cssClass),s.validate&&!n.options.unSetValidateAttr&&p.attr("validate",liger.toJSON(s.validate))}$.extend(u,s.options)}if(s.dictionary&&(s.editor=s.editor||{},!s.editor.data)){var b=[],y=s.dictionary.split("|");$(y).each(function(e,t){var i=t.split(","),n=i[0],r=i.length>=2?i[1]:i[0];b.push({id:n,value:n,text:r})}),s.editor.data=b}if(s.editor){s.editor.options&&($.extend(u,s.editor.options),delete s.editor.options),s.editor.valueColumnName&&(u.valueField=s.editor.valueColumnName,delete s.editor.valueColumnName),s.editor.displayColumnName&&(u.textField=s.editor.displayColumnName,delete s.editor.displayColumnName);var w=s.editor.p||s.editor.ext;w&&(w="function"==typeof w?w(a):w,$.extend(u,w),delete s.editor.p,delete s.editor.ext),$.extend(u,s.editor)}c?(u.host_grid=this,u.host_grid_row=a.record,u.host_grid_column=a.column):(u.host_form=this,(s.readonly||u.host_form.get("readonly"))&&(u.readonly=!0));var x=p["liger"+i](u);return c&&setTimeout(function(){p.focus()},100),x},getValue:function(e,t){var i=t.field||t.column;if(e.getValue){var n=e.getValue(),r=t.column?t.column.editor.type:t.field.type;if(i&&i.editor&&i.editor.isArrayValue&&n&&(n=n.split(";")),i&&i.editor&&i.editor.isRef&&e.getText&&(n=[n,e.getText()]),i&&i.editor&&i.editor.isRefMul&&e.getText){var o=n.split(";"),a=e.getText().split(";");n=[];for(var l=0;l<o.length;l++)n.push([o[l],a[l]])}return"int"==r||"digits"==r?n=n?parseInt(n,10):0:"float"!=r&&"number"!=r||(n=n?parseFloat(n):0),n}},setValue:function(e,t,i){var n=i.field||i.column;if(e.setValue){if(n&&n.editor&&n.editor.isArrayValue&&t&&(t=t.join(";")),n&&n.editor&&n.editor.isRef&&$.isArray(t)&&(t=t[0]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)){for(var r=[],o=0;o<t.length;o++)r.push(t[o].length>1?t[o][1]:t[o][0]);t=r.join(";")}e.setValue(t)}},getText:function(e,t){t.field||t.column;if(e.getText){var i=e.getText();if(i)return i}},setText:function(e,t,i){if(t&&e.setText)e.setText(t);else{var n=i.field||i.column;if(t=e.setValue()||i.value||"",n&&n.editor&&n.editor.isRef&&$.isArray(t)&&t.length>1&&(t=t[1]),n&&n.editor&&n.editor.isRefMul&&$.isArray(t)&&t.length>1){for(var r=[],o=0;o<t.length;o++)r.push(t[1]);t=r.join(";")}e.setText&&e.setText(t)}},getSelected:function(e,t){if(e.getSelected)return e.getSelected()},resize:function(e,t,i,n){n.field&&(t-=2),e.resize&&e.resize(t,i)},setEnabled:function(e,t){t?e.setEnabled&&e.setEnabled():e.setDisabled&&e.setDisabled()},destroy:function(e,t){e.destroy&&e.destroy()}};return $.extend({},o,liger.editorCreatorDefaults||{},e)},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(e,t,i,n){e.set("width",t-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(e,t,i,n){e.set("width",t-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(e,t,i,n){e.set("width",t-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors.string=liger.editors.text,liger.editors.select=liger.editors.combobox,liger.editors.int=liger.editors.digits,liger.editors.float=liger.editors.number,liger.editors.chk=liger.editors.checkbox,liger.editors.popupedit=liger.editors.popup,$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery),define("ligerui.base",["jquery","ligerui.all"],function(){}),function(e){liger.inject={prev:"liger-",defaults:{Grid_detail:{height:null,onShowDetail:null},Grid_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Grid_editor",Grid_popup:"PopupEdit",Grid_grid:"Grid",Grid_condition:"Form",Grid_toolbar:"Toolbar",Grid_fields:"Form_fields",Form_editor:"ComboBox,DateEditor,Spinner,TextBox,PopupEdit,CheckBoxList,RadioList,Form_editor",Form_grid:"Grid",Form_columns:"Grid_columns",Form_condition:"Form",Form_popup:"PopupEdit",Form_buttons:"Button",Portal_panel:"Panel"},config:{Grid:{dynamics:"data,isChecked,detail,rowDraggingRender,toolbar,columns",arrays:"columns",columns:{dynamics:"render,totalSummary,headerRender,columns,editor,columns",arrays:"columns",textProperty:"display",columns:"liger.inject.config.Grid.columns",editor:{dynamics:"data,columns,render,renderItem,grid,condition,ext",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},toolbar:{arrays:"items"}},Form:{dynamics:"validate,fields,buttons",arrays:"fields,buttons",fields:{textProperty:"label",dynamics:"validate,editor",editor:{dynamics:"data,columns,render,renderItem,grid,condition,attr",grid:"liger.inject.config.Grid",condition:"liger.inject.config.Form"}},buttons:"liger.inject.config.Button"},PopupEdit:{dynamics:"grid,condition"},Button:{textProperty:"text",dynamics:"click"},ComboBox:{dynamics:"columns,data,tree,grid,condition,render,parms,renderItem"},ListBox:{dynamics:"columns,data,render,parms"},RadioList:{dynamics:"data,parms"},CheckBoxList:{dynamics:"data,parms"},Panel:{},Portal:{dynamics:"rows,columns",arrays:"rows,columns",columns:{dynamics:"panels",arrays:"panels"},rows:{dynamics:"panels",arrays:"panels"},toolbar:{arrays:"items"}}},parse:function(e){try{return null==e?null:new Function("return "+e+";")()}catch(e){return null}},parseDefault:function(t){var i=this;if(!t)return t;var n={};return e(t.split(",")).each(function(t,r){r&&(r=r.substr(0,1).toUpperCase()+r.substr(1),e.extend(n,i.parse("liger.defaults."+r)))}),n},fotmatValue:function(e,t){return"boolean"==t?"true"==e||"1"==e:"number"==t&&e?parseFloat(e.toString()):e},getOptions:function(t){var i=t.jelement,n=t.defaults,r=t.config;r=e.extend({ignores:"",dynamics:"",arrays:""},r);var o,a=this,l={};r.textProperty&&(l[r.textProperty]=i.text());for(var s in n){var d=s.toLowerCase(),c=e("> ."+d,i);if(-1==e.inArray(s,r.ignores.split(",")))if(c.length){var u=t.controlName+"_"+s,h=a.defaults[u]||liger.defaults[u],p=r[s];"string"==typeof h?h=a.parseDefault(h):"funcion"==typeof h&&(h=h()),"string"==typeof p?p=a.parse(p):"funcion"==typeof p&&(p=p()),h&&(-1!=e.inArray(s,r.arrays.split(","))?(o=[],e(">div,>li,>input",c).each(function(){o.push(a.getOptions({defaults:h,controlName:t.controlName,config:p,jelement:e(this)}))}),l[s]=o):l[s]=a.getOptions({defaults:h,controlName:t.controlName,config:p,jelement:c})),c.remove()}else-1!=e.inArray(s,r.dynamics.split(","))||0==s.indexOf("on")?(o=a.parse(i.attr("data-"+s)||i.attr(s)))&&(l[s]=a.fotmatValue(o,typeof n[s])):(o=i.attr("data-"+s)||i.attr(s))&&(l[s]=a.fotmatValue(o,typeof n[s]))}var g=i.attr("data-options")||i.attr("data-property");return g&&(g=a.parse("{"+g+"}")),g&&e.extend(l,g),l},init:function(){var t=this,i=this.config;for(var n in t.defaults)"string"==typeof t.defaults[n]&&(t.defaults[n]=t.parseDefault(t.defaults[n]));for(var r in liger.controls){var o=i[r]||{},a=t.prev+r.toLowerCase();e("."+a).each(function(){var i=e(this),n=e.extend({onrender:null,onrendered:null},liger.defaults[r]),a=t.getOptions({defaults:n,controlName:r,config:o,jelement:i});i[liger.pluginPrev+r](a)})}}},e(function(){liger.inject.init()})}(jQuery),define("ligerui.inject",["jquery","ligerui.all","ligerui.base"],function(){}),function(e){e.fn.ligerResizable=function(t){return e.ligerui.run.call(this,"ligerResizable",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetResizableManager=function(){return e.ligerui.run.call(this,"ligerGetResizableManager",arguments,{idAttrName:"ligeruiresizableid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Resizable={handles:"n, e, s, w, ne, se, sw, nw",maxWidth:2e3,maxHeight:2e3,minWidth:20,minHeight:20,scope:3,animate:!1,onStartResize:function(e){},onResize:function(e){},onStopResize:function(e){},onEndResize:null},e.ligerui.controls.Resizable=function(t){e.ligerui.controls.Resizable.base.constructor.call(this,null,t)},e.ligerui.controls.Resizable.ligerExtend(e.ligerui.core.UIComponent,{__getType:function(){return"Resizable"},__idPrev:function(){return"Resizable"},_render:function(){var t=this,i=this.options;t.target=e(i.target),t.set(i),t.target.mousemove(function(n){if(!i.disabled&&(t.dir=t._getDir(n),t.dir?t.target.css("cursor",t.dir+"-resize"):t.target.css("cursor").indexOf("-resize")>0&&t.target.css("cursor","default"),i.target.ligeruidragid)){var r=e.ligerui.get(i.target.ligeruidragid);r&&t.dir?r.set("disabled",!0):r&&r.set("disabled",!1)}}).mousedown(function(e){i.disabled||t.dir&&t._start(e)})},_rendered:function(){this.options.target.ligeruiresizableid=this.id},_getDir:function(t){var i=this,n=this.options,r="",o=i.target.offset(),a=i.target.width(),l=i.target.height(),s=n.scope,d=t.pageX||t.screenX,c=t.pageY||t.screenY;return c>=o.top&&c<o.top+s?r+="n":c<=o.top+l&&c>o.top+l-s&&(r+="s"),d>=o.left&&d<o.left+s?r+="w":d<=o.left+a&&d>o.left+a-s&&(r+="e"),
"all"==n.handles||""==r?r:-1!=e.inArray(r,i.handles)?r:""},_setHandles:function(e){e&&(this.handles=e.replace(/(\s*)/g,"").split(","))},_createProxy:function(){var t=this;t.proxy=e('<div class="l-resizable"></div>'),t.proxy.width(t.target.width()).height(t.target.height()),t.proxy.attr("resizableid",t.id).appendTo("body")},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)},_start:function(t){var i=this;this.options;i._createProxy(),i.proxy.css({left:i.target.offset().left,top:i.target.offset().top,position:"absolute"}),i.current={dir:i.dir,left:i.target.offset().left,top:i.target.offset().top,startX:t.pageX||t.screenX,startY:t.pageY||t.clientY,width:i.target.width(),height:i.target.height()},e(document).bind("selectstart.resizable",function(){return!1}),e(document).bind("mouseup.resizable",function(){i._stop.apply(i,arguments)}),e(document).bind("mousemove.resizable",function(){i._drag.apply(i,arguments)}),i.proxy.show(),i.trigger("startResize",[i.current,t])},changeBy:{t:["n","ne","nw"],l:["w","sw","nw"],w:["w","sw","nw","e","ne","se"],h:["n","ne","nw","s","se","sw"]},_drag:function(e){var t=this;this.options;if(t.current&&t.proxy){t.proxy.css("cursor",""==t.current.dir?"default":t.current.dir+"-resize");var i=e.pageX||e.screenX,n=e.pageY||e.screenY;t.current.diffX=i-t.current.startX,t.current.diffY=n-t.current.startY,t._applyResize(t.proxy),t.trigger("resize",[t.current,e])}},_stop:function(t){var i=this;this.options;i.hasBind("stopResize")?0!=i.trigger("stopResize",[i.current,t])&&i._applyResize():i._applyResize(),i._removeProxy(),i.trigger("endResize",[i.current,t]),e(document).unbind("selectstart.resizable"),e(document).unbind("mousemove.resizable"),e(document).unbind("mouseup.resizable")},_applyResize:function(t){var i=this,n=this.options,r={left:i.current.left,top:i.current.top,width:i.current.width,height:i.current.height},o=!1;t||(t=i.target,o=!0,isNaN(parseInt(i.target.css("top")))?r.top=0:r.top=parseInt(i.target.css("top")),isNaN(parseInt(i.target.css("left")))?r.left=0:r.left=parseInt(i.target.css("left"))),e.inArray(i.current.dir,i.changeBy.l)>-1?(r.left+=i.current.diffX,i.current.diffLeft=i.current.diffX):o&&delete r.left,e.inArray(i.current.dir,i.changeBy.t)>-1?(r.top+=i.current.diffY,i.current.diffTop=i.current.diffY):o&&delete r.top,e.inArray(i.current.dir,i.changeBy.w)>-1?(r.width+=(-1==i.current.dir.indexOf("w")?1:-1)*i.current.diffX,i.current.newWidth=r.width):o&&delete r.width,e.inArray(i.current.dir,i.changeBy.h)>-1?(r.height+=(-1==i.current.dir.indexOf("n")?1:-1)*i.current.diffY,i.current.newHeight=r.height):o&&delete r.height,o&&n.animate?t.animate(r):t.css(r)}})}(jQuery),define("ligerui.ligerResizable",["jquery","ligerui.all","ligerui.base","ligerui.inject"],function(){}),function(e){var t=e.ligerui;e.fn.ligerDrag=function(e){return t.run.call(this,"ligerDrag",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.fn.ligerGetDragManager=function(){return t.run.call(this,"ligerGetDragManager",arguments,{idAttrName:"ligeruidragid",hasElement:!1,propertyToElemnt:"target"})},e.ligerDefaults.Drag={onStartDrag:!1,onDrag:!1,onStopDrag:!1,handler:null,clickDelay:100,proxy:!0,revert:!1,animate:!0,onRevert:null,onEndRevert:null,receive:null,onDragEnter:null,onDragOver:null,onDragLeave:null,onDrop:null,disabled:!1,proxyX:null,proxyY:null},t.controls.Drag=function(e){t.controls.Drag.base.constructor.call(this,null,e)},t.controls.Drag.ligerExtend(t.core.UIComponent,{__getType:function(){return"Drag"},__idPrev:function(){return"Drag"},_render:function(){var t=this,i=this.options;this.set(i),t.cursor="move",t.handler.css("cursor",t.cursor),t.mouseDowned=!1,t.handler.bind("mousedown.drag",function(n){i.disabled||2!=n.button&&(t.mouseDowned=!0,e(document).bind("selectstart.drag",function(){return!1}),setTimeout(function(){t.mouseDowned&&t._start.call(t,n)},i.clickDelay||100))}).bind("mousemove.drag",function(){i.disabled||t.handler.css("cursor",t.cursor)}).bind("mouseup.drag",function(){e(document).unbind("selectstart.drag")}),e(document).bind("mouseup",function(){t.mouseDowned=!1})},_rendered:function(){this.options.target.ligeruidragid=this.id},_start:function(i){var n=this,r=this.options;if(!n.reverting&&!r.disabled){if(n.current={target:n.target,left:n.target.offset().left,top:n.target.offset().top,startX:i.pageX||i.screenX,startY:i.pageY||i.clientY},0==n.trigger("startDrag",[n.current,i]))return!1;if(n.cursor="move",n._createProxy(r.proxy,i),r.proxy&&!n.proxy)return!1;(n.proxy||n.handler).css("cursor",n.cursor),e(document).bind("mousemove.drag",function(){n._drag.apply(n,arguments)}),t.draggable.dragging=!0,e(document).bind("mouseup.drag",function(){t.draggable.dragging=!1,n._stop.apply(n,arguments)})}},_drag:function(t){var i=this;this.options;if(i.current){var n=t.pageX||t.screenX,r=t.pageY||t.screenY;i.current.diffX=n-i.current.startX,i.current.diffY=r-i.current.startY,(i.proxy||i.handler).css("cursor",i.cursor),i.receive&&i.receive.each(function(o,a){var l=e(a),s=l.offset();n>s.left&&n<s.left+l.width()&&r>s.top&&r<s.top+l.height()?i.receiveEntered[o]?i.trigger("dragOver",[a,i.proxy||i.target,t]):(i.receiveEntered[o]=!0,i.trigger("dragEnter",[a,i.proxy||i.target,t])):i.receiveEntered[o]&&(i.receiveEntered[o]=!1,i.trigger("dragLeave",[a,i.proxy||i.target,t]))}),i.hasBind("drag")?0!=i.trigger("drag",[i.current,t])?i._applyDrag():i.proxy?i._removeProxy():i._stop():i._applyDrag()}},_stop:function(t){var i=this,n=this.options;e(document).unbind("mousemove.drag"),e(document).unbind("mouseup.drag"),e(document).unbind("selectstart.drag"),i.receive&&i.receive.each(function(e,n){i.receiveEntered[e]&&i.trigger("drop",[n,i.proxy||i.target,t])}),i.proxy&&(n.revert?i.hasBind("revert")?0!=i.trigger("revert",[i.current,t])?i._revert(t):i._removeProxy():i._revert(t):(i._applyDrag(i.target),i._removeProxy())),i.cursor="move",i.trigger("stopDrag",[i.current,t]),i.current=null,i.handler.css("cursor",i.cursor)},_revert:function(e){var t=this;t.reverting=!0,t.proxy.animate({left:t.current.left,top:t.current.top},function(){t.reverting=!1,t._removeProxy(),t.trigger("endRevert",[t.current,e]),t.current=null})},_applyDrag:function(e){var t=this,i=this.options;e=e||t.proxy||t.target;var n={},r=e==t.target;t.current.diffX&&(r||null==i.proxyX?n.left=t.current.left+t.current.diffX:n.left=t.current.startX+i.proxyX+t.current.diffX),t.current.diffY&&(r||null==i.proxyY?n.top=t.current.top+t.current.diffY:n.top=t.current.startY+i.proxyY+t.current.diffY),e==t.target&&t.proxy&&i.animate?(t.reverting=!0,e.animate(n,function(){t.reverting=!1})):e.css(n)},_setReceive:function(t){this.receiveEntered={},t&&(this.receive="string"==typeof t?e(t):t)},_setHandler:function(t){var i=this,n=this.options;i.handler=t?"string"==typeof t?e(t,n.target):t:e(n.target)},_setTarget:function(t){this.target=e(t)},_setCursor:function(e){this.cursor=e,(this.proxy||this.handler).css("cursor",e)},_createProxy:function(t,i){if(t){var n=this,r=this.options;"function"==typeof t?n.proxy=t.call(this.options.target,n,i):"clone"==t?(n.proxy=n.target.clone().css("position","absolute"),n.proxy.appendTo("body")):(n.proxy=e("<div class='l-draggable'></div>"),n.proxy.width(n.target.width()).height(n.target.height()),n.proxy.attr("dragid",n.id).appendTo("body")),n.proxy.css({left:null==r.proxyX?n.current.left:n.current.startX+r.proxyX,top:null==r.proxyY?n.current.top:n.current.startY+r.proxyY}).show()}},_removeProxy:function(){var e=this;e.proxy&&(e.proxy.remove(),e.proxy=null)}})}(jQuery),define("ligerui.ligerDrag",["jquery","ligerui.all","ligerui.base","ligerui.inject"],function(){}),function(e){var t=e.ligerui;e(".l-dialog-btn").live("mouseover",function(){e(this).addClass("l-dialog-btn-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-btn-over")}),e(".l-dialog-tc .l-dialog-close").live("mouseover",function(){e(this).addClass("l-dialog-close-over")}).live("mouseout",function(){e(this).removeClass("l-dialog-close-over")}),e.ligerDialog=function(){return t.run.call(null,"ligerDialog",arguments,{isStatic:!0})},e.ligerui.DialogImagePath="../../lib/ligerUI/skins/Aqua/images/win/",e.ligerDefaults.Dialog={cls:null,contentCls:null,id:null,buttons:null,isDrag:!0,width:280,height:null,content:"",target:null,url:null,urlParms:null,load:!1,type:"none",left:null,top:null,modal:!0,data:null,name:null,isResize:!1,allowClose:!0,opener:null,timeParmName:null,closeWhenEnter:null,isHidden:!0,show:!0,title:"提示",showMax:!1,showToggle:!1,showMin:!1,slide:!e.browser.msie,fixedType:null,showType:null,layoutMode:1,onLoaded:null,onExtend:null,onExtended:null,onCollapse:null,onCollapseed:null,onContentHeightChange:null,onClose:null,onClosed:null,onStopResize:null,minIsHide:!1},e.ligerDefaults.DialogString={titleMessage:"提示",ok:"确定",yes:"是",no:"否",cancel:"取消",waittingMessage:"正在等待中,请稍候..."},e.ligerMethos.Dialog=e.ligerMethos.Dialog||{},t.controls.Dialog=function(e){t.controls.Dialog.base.constructor.call(this,null,e)},t.controls.Dialog.ligerExtend(t.core.Win,{__getType:function(){return"Dialog"},__idPrev:function(){return"Dialog"},_extendMethods:function(){return e.ligerMethos.Dialog},_render:function(){function i(){var t=0,i=0,o=r.width||n.dialog.width();1==r.slide&&(r.slide="fast"),null!=r.left?t=r.left:r.left=t=.5*(e(window).width()-o),null!=r.top?i=r.top:r.top=i=.5*(e(window).height()-n.dialog.height())+e(window).scrollTop()-10,t<0&&(r.left=t=0),i<0&&(r.top=i=0),n.dialog.css({left:t,top:i})}var n=this,r=this.options,o="";n.set(r,!0);var a=e('<div class="l-dialog"><table class="l-dialog-table" cellpadding="0" cellspacing="0" border="0"><tbody><tr><td class="l-dialog-tl"></td><td class="l-dialog-tc"><div class="l-dialog-tc-inner"><div class="l-dialog-icon"></div><div class="l-dialog-title"></div><div class="l-dialog-winbtns"><div class="l-dialog-winbtn l-dialog-close"></div></div></div></td><td class="l-dialog-tr"></td></tr><tr><td class="l-dialog-cl"></td><td class="l-dialog-cc"><div class="l-dialog-body"><div class="l-dialog-image"></div> <div class="l-dialog-content"></div><div class="l-dialog-buttons"><div class="l-dialog-buttons-inner"></div></td><td class="l-dialog-cr"></td></tr><tr><td class="l-dialog-bl"></td><td class="l-dialog-bc"></td><td class="l-dialog-br"></td></tr></tbody></table></div>');if(e("body").append(a),n.dialog=a,2==r.layoutMode&&a.find("td.l-dialog-tl,td.l-dialog-cl,td.l-dialog-bl,td.l-dialog-tr,td.l-dialog-cr,td.l-dialog-br").remove(),n.element=a[0],n.dialog.body=e(".l-dialog-body:first",n.dialog),n.dialog.header=e(".l-dialog-tc-inner:first",n.dialog),n.dialog.winbtns=e(".l-dialog-winbtns:first",n.dialog.header),n.dialog.buttons=e(".l-dialog-buttons:first",n.dialog),n.dialog.content=e(".l-dialog-content:first",n.dialog),n.set(r,!1),0==r.allowClose&&e(".l-dialog-close",n.dialog).remove(),(r.target||r.url||"none"==r.type)&&(r.type=null,n.dialog.addClass("l-dialog-win")),r.cls&&n.dialog.addClass(r.cls),r.id&&n.dialog.attr("id",r.id),n.mask(),r.isDrag&&n._applyDrag(),r.isResize&&n._applyResize(),r.type?n._setImage():(e(".l-dialog-image",n.dialog).remove(),n.dialog.content.addClass("l-dialog-content-noimage")),r.contentCls&&n.dialog.content.addClass(r.contentCls),r.show||(n.unmask(),n.dialog.hide()),r.target)n.dialog.content.prepend(r.target),e(r.target).show();else if(r.url){var l=e.isFunction(r.url)?r.url.call(n):r.url,s=e.isFunction(r.urlParms)?r.urlParms.call(n):r.urlParms;if(r.timeParmName&&(s=s||{},s[r.timeParmName]=(new Date).getTime()),s)for(var d in s)l+=-1==l.indexOf("?")?"?":"&",l+=d+"="+s[d];if(r.load)n.dialog.body.load(l,function(){n._saveStatus(),n.trigger("loaded")});else{n.jiframe=e("<iframe frameborder='0'></iframe>");var c=r.name?r.name:"ligerwindow"+(new Date).getTime();n.jiframe.attr("name",c),n.jiframe.attr("id",c),n.dialog.content.prepend(n.jiframe),n.dialog.content.addClass("l-dialog-content-nopadding l-dialog-content-frame"),setTimeout(function(){0==n.dialog.body.find(".l-dialog-loading:first").length&&n.dialog.body.append("<div class='l-dialog-loading' style='display:block;'></div>");var t=e(".l-dialog-loading:first",n.dialog.body);n.jiframe[0].dialog=n,n.jiframe.attr("src",l).bind("load.dialog",function(){t.hide(),n.trigger("loaded")}),n.frame=window.frames[n.jiframe.attr("name")]},0),o="jquery_ligerui_"+(new Date).getTime(),n.tmpInput=e("<input></input>"),n.tmpInput.attr("id",o),n.dialog.content.prepend(n.tmpInput)}}r.opener&&(n.dialog.opener=r.opener),r.buttons?e(r.buttons).each(function(t,i){var r=e('<div class="l-dialog-btn"><div class="l-dialog-btn-l"></div><div class="l-dialog-btn-r"></div><div class="l-dialog-btn-inner"></div></div>');e(".l-dialog-btn-inner",r).html(i.text),e(".l-dialog-buttons-inner",n.dialog.buttons).prepend(r),i.width&&r.width(i.width),i.onclick&&r.click(function(){i.onclick(i,n,t)}),i.cls&&r.addClass(i.cls)}):n.dialog.buttons.remove(),e(".l-dialog-buttons-inner",n.dialog.buttons).append("<div class='l-clear'></div>"),e(".l-dialog-title",n.dialog).bind("selectstart",function(){return!1}),n.dialog.click(function(){t.win.setFront(n)}),e(".l-dialog-tc .l-dialog-close",n.dialog).click(function(){r.isHidden?n.hide():n.close()}),r.fixedType||("auto"==r.width?setTimeout(function(){i()},100):i()),n.show(),e("body").bind("keydown.dialog",function(e){var t=e.which;13==t?n.enter():27==t&&n.esc()}),n._updateBtnsWidth(),n._saveStatus(),n._onReisze(),""!=o&&(e("#"+o).focus(),e("#"+o).remove())},_borderX:12,_borderY:32,doMax:function(i){var n=this,r=this.options,o=e(window).width(),a=e(window).height(),l=0;t.win.taskbar&&(a-=t.win.taskbar.outerHeight(),t.win.top&&(l+=t.win.taskbar.outerHeight())),i?(n.dialog.body.animate({width:o-n._borderX},r.slide),n.dialog.animate({left:0,top:l},r.slide),n.dialog.content.animate({height:a-n._borderY-n.dialog.buttons.outerHeight()},r.slide,function(){n._onReisze()})):(n.set({width:o,height:a,left:0,top:l}),n._onReisze())},max:function(){var t=this,i=this.options;t.winmax&&(t.winmax.addClass("l-dialog-recover"),t.doMax(i.slide),t.wintoggle&&(t.wintoggle.hasClass("l-dialog-extend")?t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-extend-disabled"):t.wintoggle.addClass("l-dialog-toggle-disabled l-dialog-collapse-disabled")),t.resizable&&t.resizable.set({disabled:!0}),t.draggable&&t.draggable.set({disabled:!0}),t.maximum=!0,e(window).bind("resize.dialogmax",function(){t.doMax(!1)}))},recover:function(){var t=this,i=this.options;t.winmax&&(t.winmax.removeClass("l-dialog-recover"),i.slide?(t.dialog.body.animate({width:t._width-t._borderX},i.slide),t.dialog.animate({left:t._left,top:t._top},i.slide),t.dialog.content.animate({height:t._height-t._borderY-t.dialog.buttons.outerHeight()},i.slide,function(){t._onReisze()})):(t.set({width:t._width,height:t._height,left:t._left,top:t._top}),t._onReisze()),t.wintoggle&&t.wintoggle.removeClass("l-dialog-toggle-disabled l-dialog-extend-disabled l-dialog-collapse-disabled"),e(window).unbind("resize.dialogmax")),this.resizable&&this.resizable.set({disabled:!1}),t.draggable&&t.draggable.set({disabled:!1}),t.maximum=!1},min:function(){var e=this,i=this.options;if(i.minIsHide)e.dialog.hide();else{var n=t.win.getTask(this);i.slide?(e.dialog.body.animate({width:1},i.slide),n.y=n.offset().top+n.height(),n.x=n.offset().left+n.width()/2,e.dialog.animate({left:n.x,top:n.y},i.slide,function(){e.dialog.hide()})):e.dialog.hide()}e.unmask(),e.minimize=!0,e.actived=!1},active:function(){var i=this,n=this.options;if(i.minimize){var r=i._width,o=i._height,a=i._left,l=i._top;i.maximum&&(r=e(window).width(),o=e(window).height(),a=l=0,t.win.taskbar&&(o-=t.win.taskbar.outerHeight(),t.win.top&&(l+=t.win.taskbar.outerHeight()))),n.slide?(i.dialog.body.animate({width:r-i._borderX},n.slide),i.dialog.animate({left:a,top:l},n.slide)):i.set({width:r,height:o,left:a,top:l})}i.actived=!0,i.minimize=!1,t.win.setFront(i),i.show()},toggle:function(){var e=this;this.options;e.wintoggle&&(e.wintoggle.hasClass("l-dialog-extend")?e.extend():e.collapse())},collapse:function(e){var t=this,i=this.options;t.wintoggle&&(i.slide&&0!=e?t.dialog.content.animate({height:1},i.slide):t.dialog.content.height(1),this.resizable&&this.resizable.set({disabled:!0}),t.wintoggle.addClass("l-dialog-extend"))},extend:function(){var e=this,t=this.options;if(e.wintoggle){var i=e._height-e._borderY-e.dialog.buttons.outerHeight();t.slide?e.dialog.content.animate({height:i},t.slide):e.dialog.content.height(i),this.resizable&&this.resizable.set({disabled:!1}),e.wintoggle.removeClass("l-dialog-extend")}},_updateBtnsWidth:function(){var t=this,i=e(">div",t.dialog.winbtns).length;t.dialog.winbtns.width(22*i)},_setLeft:function(e){this.dialog&&null!=e&&this.dialog.css({left:e})},_setTop:function(e){this.dialog&&null!=e&&this.dialog.css({top:e})},_setWidth:function(e){this.dialog&&e>=this._borderX&&this.dialog.body.width(e-this._borderX)},_setHeight:function(e){var t=this,i=this.options;if(this.dialog)if("auto"==e)t.dialog.content.height("auto");else if(e>=this._borderY){var n=e-this._borderY-t.dialog.buttons.outerHeight();if(0==t.trigger("ContentHeightChange",[n]))return;i.load?t.dialog.body.height(n):t.dialog.content.height(n),t.trigger("ContentHeightChanged",[n])}},_setShowMax:function(t){var i=this;this.options;t?i.winmax||(i.winmax=e('<div class="l-dialog-winbtn l-dialog-max"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-recover")?e(this).addClass("l-dialog-recover-over"):e(this).addClass("l-dialog-max-over")},function(){e(this).removeClass("l-dialog-max-over l-dialog-recover-over")}).click(function(){e(this).hasClass("l-dialog-recover")?i.recover():i.max()})):i.winmax&&(i.winmax.remove(),i.winmax=null),i._updateBtnsWidth()},_setShowMin:function(i){var n=this,r=this.options;i?n.winmin||(n.winmin=e('<div class="l-dialog-winbtn l-dialog-min"></div>').appendTo(n.dialog.winbtns).hover(function(){e(this).addClass("l-dialog-min-over")},function(){e(this).removeClass("l-dialog-min-over")}).click(function(){n.min()}),r.minIsHide||t.win.addTask(n)):n.winmin&&(n.winmin.remove(),n.winmin=null),n._updateBtnsWidth()},_setShowToggle:function(t){var i=this;this.options;t?i.wintoggle||(i.wintoggle=e('<div class="l-dialog-winbtn l-dialog-collapse"></div>').appendTo(i.dialog.winbtns).hover(function(){e(this).hasClass("l-dialog-toggle-disabled")||(e(this).hasClass("l-dialog-extend")?e(this).addClass("l-dialog-extend-over"):e(this).addClass("l-dialog-collapse-over"))},function(){e(this).removeClass("l-dialog-extend-over l-dialog-collapse-over")}).click(function(){if(!e(this).hasClass("l-dialog-toggle-disabled"))if(i.wintoggle.hasClass("l-dialog-extend")){if(0==i.trigger("extend"))return;i.wintoggle.removeClass("l-dialog-extend"),i.extend(),i.trigger("extended")}else{if(0==i.trigger("collapse"))return;i.wintoggle.addClass("l-dialog-extend"),i.collapse(),i.trigger("collapseed")}})):i.wintoggle&&(i.wintoggle.remove(),i.wintoggle=null)},enter:function(){var e,t=this,i=this.options;void 0!=i.closeWhenEnter?e=i.closeWhenEnter:"warn"!=i.type&&"error"!=i.type&&"success"!=i.type&&"question"!=i.type||(e=!0),e&&t.close()},esc:function(){},_removeDialog:function(){function t(){var t=e("iframe",i.dialog);if(t.length){var n=t[0];if(n.src="about:blank",n.contentWindow&&n.contentWindow.document)try{n.contentWindow.document.write("")}catch(e){}e.browser.msie&&CollectGarbage(),t.remove()}i.dialog.remove()}var i=this,n=this.options;n.showType&&n.fixedType?i.dialog.animate({bottom:-1*n.height},function(){t()}):t()},close:function(){var e=this;this.options;0!=e.trigger("Close")&&(e.doClose(),e.trigger("Closed"))},doClose:function(){var i=this;t.win.removeTask(this),e.ligerui.remove(this),i.unmask(),i._removeDialog(),e("body").unbind("keydown.dialog")},_getVisible:function(){return this.dialog.is(":visible")},_setUrl:function(e){var t=this,i=this.options;i.url=e,i.load?t.dialog.body.html("").load(i.url,function(){t.trigger("loaded")}):t.jiframe&&t.jiframe.attr("src",i.url)},_setContent:function(e){this.dialog.content.html(e)},_setTitle:function(t){var i=this;this.options;t&&e(".l-dialog-title",i.dialog).html(t)},_hideDialog:function(){var e=this,t=this.options;t.showType&&t.fixedType?e.dialog.animate({bottom:-1*t.height},function(){e.dialog.hide()}):e.dialog.hide()},hidden:function(){var e=this;t.win.removeTask(e),e.dialog.hide(),e.unmask()},show:function(){var t=this,i=this.options;t.mask(),i.fixedType?i.showType?(t.dialog.css({bottom:-1*i.height}).addClass("l-dialog-fixed"),t.dialog.show().animate({bottom:0})):t.dialog.show().css({bottom:0}).addClass("l-dialog-fixed"):t.dialog.show(),e.ligerui.win.setFront.ligerDefer(e.ligerui.win,100,[t])},setUrl:function(e){this._setUrl(e)},_saveStatus:function(){var e=this;e._width=e.dialog.body.width(),e._height=e.dialog.body.height();var t=0,i=0;isNaN(parseInt(e.dialog.css("top")))||(t=parseInt(e.dialog.css("top"))),isNaN(parseInt(e.dialog.css("left")))||(i=parseInt(e.dialog.css("left"))),e._top=t,e._left=i},_applyDrag:function(){var i=this,n=this.options;e.fn.ligerDrag&&(i.draggable=i.dialog.ligerDrag({handler:".l-dialog-title",animate:!1,onStartDrag:function(){t.win.setFront(i);var n=e("<div class='l-dragging-mask' style='display:block'></div>").height(i.dialog.height());i.dialog.append(n),i.dialog.content.addClass("l-dialog-content-dragging")},onDrag:function(e,t){if((t.pageY||t.screenY)<0)return!1},onStopDrag:function(){if(i.dialog.find("div.l-dragging-mask:first").remove(),i.dialog.content.removeClass("l-dialog-content-dragging"),n.target){var r=t.find(e.ligerui.controls.DateEditor),o=t.find(e.ligerui.controls.ComboBox);e(e.merge(r,o)).each(function(){this.updateSelectBoxPosition&&this.updateSelectBoxPosition()})}i._saveStatus()}}))},_onReisze:function(){var t=this,i=this.options;if(i.target||i.url){var n=e(i.target).liger();if(n||(n=e(i.target).find(":first").liger()),!n)return;var r=t.dialog.content.height(),o=t.dialog.content.width();n.trigger("resize",[{width:o,height:r}])}},_applyResize:function(){var t=this;this.options;e.fn.ligerResizable&&(t.resizable=t.dialog.ligerResizable({onStopResize:function(e,i){var n=0,r=0;return isNaN(parseInt(t.dialog.css("top")))||(n=parseInt(t.dialog.css("top"))),isNaN(parseInt(t.dialog.css("left")))||(r=parseInt(t.dialog.css("left"))),e.diffLeft&&t.set({left:r+e.diffLeft}),e.diffTop&&t.set({top:n+e.diffTop}),e.newWidth&&(t.set({width:e.newWidth}),t.dialog.body.css({width:e.newWidth-t._borderX})),e.newHeight&&t.set({height:e.newHeight}),t._onReisze(),t._saveStatus(),t.trigger("stopResize"),!1},animate:!1}))},_setImage:function(){var t=this,i=this.options;if(i.type){var n={paddingLeft:74,paddingRight:15,paddingBottom:30};"success"==i.type||"donne"==i.type||"ok"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-donne").show(),t.dialog.content.css(n)):"error"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-error").show(),t.dialog.content.css(n)):"warn"==i.type?(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-warn").show(),t.dialog.content.css(n)):"question"==i.type&&(e(".l-dialog-image",t.dialog).addClass("l-dialog-image-question").show(),t.dialog.content.css(n))}}}),t.controls.Dialog.prototype.hide=t.controls.Dialog.prototype.hidden,e.ligerDialog.open=function(t){return e.ligerDialog(t)},e.ligerDialog.close=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){var n=e[i];n.destroy.ligerDefer(n,5)}t.win.unmask()},e.ligerDialog.show=function(i){var n=t.find(t.controls.Dialog.prototype.__getType());if(n.length)for(var r in n)return void n[r].show();return e.ligerDialog(i)},e.ligerDialog.hide=function(){var e=t.find(t.controls.Dialog.prototype.__getType());for(var i in e){e[i].hide()}},e.ligerDialog.tip=function(t){return t=e.extend({showType:"slide",width:240,modal:!1,height:100},t||{}),e.extend(t,{fixedType:"se",type:"none",isDrag:!1,isResize:!1,showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog.open(t)},e.ligerDialog.alert=function(t,i,n,r,o){t=t||"","function"==typeof i?(r=i,n=null):"function"==typeof n&&(r=n);var a=function(e,t,i){t.close(),r&&r(e,t,i)};return p={content:t,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:a}]},"string"==typeof i&&""!=i&&(p.title=i),"string"==typeof n&&""!=n&&(p.type=n),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},o||{}),e.ligerDialog(p)},e.ligerDialog.confirm=function(t,i,n){"function"==typeof i&&(n=i,type=null);var r=function(e,t){t.close(),n&&n("ok"==e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:r,type:"ok",cls:"l-dialog-btn-ok"},{text:e.ligerDefaults.DialogString.no,onclick:r,type:"no",cls:"l-dialog-btn-no"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1}),e.ligerDialog(p)},e.ligerDialog.warning=function(t,i,n,r){"function"==typeof i&&(n=i,type=null);var o=function(e,t){t.close(),n&&n(e.type)};return p={type:"question",content:t,buttons:[{text:e.ligerDefaults.DialogString.yes,onclick:o,type:"yes"},{text:e.ligerDefaults.DialogString.no,onclick:o,type:"no"},{text:e.ligerDefaults.DialogString.cancel,onclick:o,type:"cancel"}]},"string"==typeof i&&""!=i&&(p.title=i),e.extend(p,{showMax:!1,showToggle:!1,showMin:!1},r||{}),e.ligerDialog(p)},e.ligerDialog.waitting=function(t){return t=t||e.ligerDefaults.Dialog.waittingMessage,e.ligerDialog.open({cls:"l-dialog-waittingdialog",type:"none",content:'<div style="padding:4px">'+t+"</div>",allowClose:!1})},e.ligerDialog.closeWaitting=function(){var e=t.find(t.controls.Dialog);for(var i in e){var n=e[i];n.dialog.hasClass("l-dialog-waittingdialog")&&n.close()}},e.ligerDialog.success=function(t,i,n,r){return e.ligerDialog.alert(t,i,"success",n,r)},e.ligerDialog.error=function(t,i,n,r){return e.ligerDialog.alert(t,i,"error",n,r)},e.ligerDialog.warn=function(t,i,n,r){return e.ligerDialog.alert(t,i,"warn",n,r)},e.ligerDialog.question=function(t,i,n){return e.ligerDialog.alert(t,i,"question",null,n)},e.ligerDialog.prompt=function(t,i,n,r){var o=e('<input type="text" class="l-dialog-inputtext"/>');"function"==typeof n&&(r=n),"function"==typeof i?r=i:"boolean"==typeof i&&(n=i),"boolean"==typeof n&&n&&(o=e('<textarea class="l-dialog-textarea"></textarea>')),"string"!=typeof i&&"int"!=typeof i||o.val(i);var a=function(e,t,i){t.close(),r&&r("yes"==e.type,o.val())};return p={title:t,target:o,width:320,buttons:[{text:e.ligerDefaults.DialogString.ok,onclick:a,type:"yes"},{text:e.ligerDefaults.DialogString.cancel,onclick:a,type:"cancel"}]},e.ligerDialog(p)}}(jQuery),define("ligerui.ligerDialog",["jquery","ligerui.all","ligerui.base","ligerui.inject","ligerui.ligerResizable","ligerui.ligerDrag"],function(){}),define("Common",["jquery","ligerui.ligerDialog"],function(e){var t=function(t,i,n){switch(t){case"success":e.ligerDialog.success(i);break;case"warn":e.ligerDialog.warn(i);break;case"question":e.ligerDialog.question(i);break;case"error":e.ligerDialog.error(i);break;case"confirm":e.ligerDialog.confirm(i,n);break;case"warning":e.ligerDialog.warning(i,n);break;case"prompt":e.ligerDialog.prompt(i,n);break;case"waitting":e.ligerDialog.waitting(i),setTimeout(function(){e.ligerDialog.closeWaitting()},2e3)}},i=function(e){t("error",e)},n=function(e){t("warn",e)},r=function(i){t("waitting",i),setTimeout(function(){e.ligerDialog.closeWaitting()},2e3)},o=function(t,n,r){e.ajax({type:"post",url:t,contentType:"application/json",dataType:"json",data:JSON.stringify(n),cache:!1,success:function(e){e.result.hasOwnProperty("error")?i(e.result.message):r&&r(e)},error:function(e){i("获取服务器数据异常!"+e)}}),e("#pageloading").hide()},a=function(t,n,r){e.ajax({type:"post",url:t,contentType:"application/json",dataType:"json",data:JSON.stringify(n),cache:!1,success:function(e){e.result.hasOwnProperty("error")?i(e.result.message):r&&r(e)},error:function(e){i("获取服务器数据异常!"+e)}})},l=function(t,n,r){e.ajax({type:"post",url:t,contentType:"application/json",dataType:"json",data:JSON.stringify(n),cache:!1,success:function(e){e.result.hasOwnProperty("error")?i(e.result.message):r&&r(e)},error:function(e){i("获取服务器数据异常!"+e)}})},s={checkedCustomer:[],f_onCheckAllRow:function(e){for(var t in this.records)e?s.addCheckedCustomer(this.records[t].id):s.removeCheckedCustomer(this.records[t].id)},f_onCheckRow:function(e,t){e?s.addCheckedCustomer(t.id):s.removeCheckedCustomer(t.id)},findCheckedCustomer:function(e){for(var t=0;t<s.checkedCustomer.length;t++)if(s.checkedCustomer[t]==e)return t;return-1},addCheckedCustomer:function(e){-1==s.findCheckedCustomer(e)&&s.checkedCustomer.push(e)},removeCheckedCustomer:function(e){var t=s.findCheckedCustomer(e);-1!=t&&s.checkedCustomer.splice(t,1)}};return{showMsg:t,errorMsg:i,warnMsg:n,successMsg:r,queryList:o,saveData:a,queryById:l,gridCheck:s}}),define("Constant",[],function(){return{constants:{},user:{list:"list.html",queryAll:"/university/user/queryAll",uploadExcel:"/university/user/import",queryTeam:"/university/user/queryTeam",queryClass:"/university/user/queryClass"},question:{list:"/html/role/list.html",queryAll:"/university/question/queryAll",uploadExcel:"/university/question/import"},score:{list:"/html/menu/list.html",queryAllStudent:"/university/answer/queryAllStudent",queryAllLeader:"/university/answer/queryAllLeader",queryAllTeacher:"/university/answer/queryAllTeacher",exportAllStudent:"/university/answer/exportAllStudent",exportAllLeader:"/university/answer/exportAllLeader",exportAllTeacher:"/university/answer/exportAllTeacher"},attachement:{list:"/html/files/list.html",query:"/university/attachement/query"},waitScore:{list:"/html/score/wait.html",queryWaitStudent:"/university/answer/queryNotScoreStudent",queryWaitLeader:"/university/answer/queryNotScoreLeader",queryWaitTeacher:"/university/answer/queryNotScoreTeacher"}}}),function(e){e.fn.ligerCheckBox=function(t){return e.ligerui.run.call(this,"ligerCheckBox",arguments)},e.fn.ligerGetCheckBoxManager=function(){return e.ligerui.run.call(this,"ligerGetCheckBoxManager",arguments)},e.ligerDefaults.CheckBox={disabled:!1,readonly:!1},e.ligerMethos.CheckBox={},e.ligerui.controls.CheckBox=function(t,i){e.ligerui.controls.CheckBox.base.constructor.call(this,t,i)},e.ligerui.controls.CheckBox.ligerExtend(e.ligerui.controls.Input,{__getType:function(){return"CheckBox"},__idPrev:function(){return"CheckBox"},_extendMethods:function(){return e.ligerMethos.CheckBox},_render:function(){var t=this,i=this.options;t.input=e(t.element),t.link=e('<a class="l-checkbox"></a>'),t.wrapper=t.input.addClass("l-hidden").wrap('<div class="l-checkbox-wrapper"></div>').parent(),t.wrapper.prepend(t.link),t.link.click(function(){return!t.input.attr("disabled")&&!t.input.attr("readonly")&&(!i.disabled&&!i.readonly&&(0!=t.trigger("beforeClick",[t.element])&&(e(this).hasClass("l-checkbox-checked")?t._setValue(!1):t._setValue(!0),void t.input.trigger("change"))))}),t.wrapper.hover(function(){i.disabled||e(this).addClass("l-over")},function(){e(this).removeClass("l-over")}),this.set(i),this.updateStyle()},_setCss:function(e){this.wrapper.css(e)},_setValue:function(e){var t=this;this.options;e?(t.input[0].checked=!0,t.link.addClass("l-checkbox-checked")):(t.input[0].checked=!1,t.link.removeClass("l-checkbox-checked"))},_setDisabled:function(e){e?(this.input.attr("disabled",!0),this.wrapper.addClass("l-disabled")):(this.input.attr("disabled",!1),this.wrapper.removeClass("l-disabled"))},_getValue:function(){return this.element.checked},updateStyle:function(){this.input.attr("disabled")&&(this.wrapper.addClass("l-disabled"),this.options.disabled=!0),this.input[0].checked?this.link.addClass("l-checkbox-checked"):this.link.removeClass("l-checkbox-checked")}})}(jQuery),define("ligerui.ligerCheckBox",["jquery","ligerui.all","ligerui.base","ligerui.inject"],function(){}),function($){function removeArrItem(e,t){for(var i=e.length-1;i>=0;i--)t(e[i])&&e.splice(i,1)}var l=$.ligerui;$.fn.ligerGrid=function(e){return $.ligerui.run.call(this,"ligerGrid",arguments)},$.fn.ligerGetGridManager=function(){return $.ligerui.run.call(this,"ligerGetGridManager",arguments)},$.ligerDefaults.Grid={title:null,width:"auto",
height:"auto",columnWidth:null,resizable:!0,url:!1,urlParms:null,data:null,usePager:!0,hideLoadButton:!1,pagerRender:null,page:1,pageSize:10,pageSizeOptions:[10,20,30,40,50],parms:[],columns:[],minColToggle:1,dataType:"server",dataAction:"server",showTableToggleBtn:!1,switchPageSizeApplyComboBox:!1,allowAdjustColWidth:!0,checkbox:!1,isSingleCheck:!1,allowHideColumn:!0,enabledEdit:!1,isScroll:!0,dateFormat:"yyyy-MM-dd",inWindow:!0,statusName:"__status",method:"post",async:!0,fixedCellHeight:!0,heightDiff:0,cssClass:null,root:"Rows",record:"Total",pageParmName:"page",pagesizeParmName:"pagesize",sortnameParmName:"sortname",sortorderParmName:"sortorder",allowUnSelectRow:!1,alternatingRow:!0,mouseoverRowCssClass:"l-grid-row-over",enabledSort:!0,rowClsRender:null,rowAttrRender:null,groupColumnName:null,groupColumnDisplay:"分组",groupRender:null,totalRender:null,delayLoad:!1,where:null,selectRowButtonOnly:!1,selectable:!0,whenRClickToSelect:!1,contentType:null,checkboxColWidth:27,detailColWidth:29,clickToEdit:!0,detailToEdit:!1,onEndEdit:null,minColumnWidth:80,tree:null,isChecked:null,isSelected:null,frozen:!0,frozenDetail:!1,frozenCheckbox:!0,detail:null,detailHeight:260,isShowDetailToggle:null,rownumbers:!1,frozenRownumbers:!0,rownumbersColWidth:26,colDraggable:!1,rowDraggable:!1,rowDraggingRender:null,autoCheckChildren:!0,onRowDragDrop:null,rowHeight:28,headerRowHeight:28,toolbar:null,toolbarShowInLeft:!0,headerImg:null,editorTopDiff:3,editorLeftDiff:1,editorHeightDiff:-1,unSetValidateAttr:!0,autoFilter:!1,rowSelectable:!0,scrollToPage:!1,scrollToAppend:!0,onDragCol:null,onToggleCol:null,onChangeSort:null,onSuccess:null,onDblClickRow:null,onSelectRow:null,onBeforeSelectRow:null,onUnSelectRow:null,onBeforeCheckRow:null,onCheckRow:null,onBeforeCheckAllRow:null,onCheckAllRow:null,onBeforeShowData:null,onAfterShowData:null,onError:null,onSubmit:null,onReload:null,onToFirst:null,onToPrev:null,onToNext:null,onToLast:null,onAfterAddRow:null,onBeforeEdit:null,onBeforeSubmitEdit:null,onAfterEdit:null,onLoading:null,onLoaded:null,onContextmenu:null,onBeforeCancelEdit:null,onAfterSubmitEdit:null,onRowDragDrop:null,onGroupExtend:null,onGroupCollapse:null,onTreeExpand:null,onTreeCollapse:null,onTreeExpanded:null,onTreeCollapsed:null,onLoadData:null,onHeaderCellBulid:null},$.ligerDefaults.GridString={errorMessage:"发生错误",pageStatMessage:"显示从{from}到{to}，总 {total} 条 。每页显示：{pagesize}",pageTextMessage:"Page",loadingMessage:"加载中...",findTextMessage:"查找",noRecordMessage:"没有符合条件的记录存在",isContinueByDataChanged:"数据已经改变,如果继续将丢失数据,是否继续?",cancelMessage:"取消",saveMessage:"保存",applyMessage:"应用",draggingMessage:"{count}行"},$.ligerDefaults.Grid_columns={id:null,name:null,totalSummary:null,display:null,headerRender:null,isAllowHide:!0,isSort:!1,type:null,columns:null,width:120,minWidth:80,format:null,align:"left",hide:!1,editor:null,render:null,textField:null},$.ligerDefaults.Grid_editor={type:null,ext:null,onChange:null,onChanged:null},$.ligerMethos.Grid=$.ligerMethos.Grid||{},$.ligerDefaults.Grid.sorters=$.ligerDefaults.Grid.sorters||{},$.ligerDefaults.Grid.formatters=$.ligerDefaults.Grid.formatters||{},$.ligerDefaults.Grid.editors=$.ligerDefaults.Grid.editors||{},$.ligerDefaults.Grid.sorters.date=function(e,t){return e<t?-1:e>t?1:0},$.ligerDefaults.Grid.sorters.int=function(e,t){return parseInt(e)<parseInt(t)?-1:parseInt(e)>parseInt(t)?1:0},$.ligerDefaults.Grid.sorters.float=function(e,t){return parseFloat(e)<parseFloat(t)?-1:parseFloat(e)>parseFloat(t)?1:0},$.ligerDefaults.Grid.sorters.string=function(e,t){return!!e&&e.localeCompare(t)},$.ligerDefaults.Grid.formatters.date=function(value,column){function getFormatDate(e,t){this.options;if(isNaN(e))return null;var i=t,n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(i)&&(i=i.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in n)new RegExp("("+r+")").test(i)&&(i=i.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return i}if(!value)return"";if("string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),value instanceof Date){var format=column.format||this.options.dateFormat||"yyyy-MM-dd";return getFormatDate(value,format)}return value.toString()},$.ligerDefaults.Grid.formatters.ref=function(e){return $.isArray(e)?e.length>1?e[1]:e[0]:e},$.ligerui.controls.Grid=function(e,t){$.ligerui.controls.Grid.base.constructor.call(this,e,t)},$.ligerui.controls.Grid.ligerExtend($.ligerui.core.UIComponent,{__getType:function(){return"$.ligerui.controls.Grid"},__idPrev:function(){return"grid"},_extendMethods:function(){return $.ligerMethos.Grid},_init:function(){$.ligerui.controls.Grid.base._init.call(this);var e=this,t=this.options;t.dataType=t.url?"server":"local","local"==t.dataType&&(t.data=t.data||[],t.dataAction="local"),0==t.isScroll&&(t.height="auto"),t.frozen||(t.frozenCheckbox=!1,t.frozenDetail=!1,t.frozenRownumbers=!1),t.detailToEdit&&(t.enabledEdit=!0,t.clickToEdit=!1,t.detail={height:"auto",onShowDetail:function(i,n,r){function o(){$(n).parent().parent().remove(),e.collapseDetail(i)}$(n).addClass("l-grid-detailpanel-edit"),e.beginEdit(i,function(e,i){var r=$("<div class='l-editbox'></div>");return r.width(120).height(t.rowHeight+1),r.appendTo(n),r}),$("<div class='l-clear'></div>").appendTo(n),$("<div class='l-button'>"+t.saveMessage+"</div>").appendTo(n).click(function(){e.endEdit(i),o()}),$("<div class='l-button'>"+t.applyMessage+"</div>").appendTo(n).click(function(){e.submitEdit(i)}),$("<div class='l-button'>"+t.cancelMessage+"</div>").appendTo(n).click(function(){e.cancelEdit(i),o()})}}),t.tree&&(t.tree.childrenName=t.tree.childrenName||"children",t.tree.isParent=t.tree.isParent||function(e){return t.tree.childrenName in e},t.tree.isExtend=t.tree.isExtend||function(e){return!("isextend"in e&&0==e.isextend)});for(var i in liger.editors){var n=liger.editors[i];!n||i in t.editors||(t.editors[i]=liger.getEditor($.extend({type:i,master:e},n)))}},_render:function(){var e=this,t=this.options;e.grid=$(e.element),e.grid.addClass("l-panel");var i=[];if(i.push("        <div class='l-panel-header'><span class='l-panel-header-text'></span></div>"),i.push("                    <div class='l-grid-loading'></div>"),i.push("        <div class='l-panel-topbar' style='display:none'><div class='l-panel-topbarinner'></div></div><div class='l-clear'></div>"),i.push("        <div class='l-panel-bwarp'>"),i.push("            <div class='l-panel-body'>"),i.push("                <div class='l-grid'>"),i.push("                    <div class='l-grid-dragging-line'></div>"),i.push("                    <div class='l-grid-popup'><table cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                  <div class='l-grid1'>"),i.push("                      <div class='l-grid-header l-grid-header1'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body1'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                  <div class='l-grid2'>"),i.push("                      <div class='l-grid-header l-grid-header2'>"),i.push("                          <div class='l-grid-header-inner'><table class='l-grid-header-table' cellpadding='0' cellspacing='0'><tbody></tbody></table></div>"),i.push("                      </div>"),i.push("                      <div class='l-grid-body l-grid-body2 l-scroll'>"),i.push("                      </div>"),i.push("                  </div>"),i.push("                 </div>"),i.push("              </div>"),i.push("         </div>"),i.push("         <div class='l-panel-bar'>"),i.push("            <div class='l-panel-bbar-inner'>"),i.push("                <div class='l-bar-group  l-bar-message'><span class='l-bar-text'></span></div>"),i.push("            <div class='l-bar-group l-bar-selectpagesize'></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                    <div class='l-bar-button l-bar-btnfirst'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnprev'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'><span class='pcontrol'> <input type='text' size='4' value='1' style='width:20px' maxlength='3' /> / <span></span></span></div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnnext'><span></span></div>"),i.push("                    <div class='l-bar-button l-bar-btnlast'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-bar-group'>"),i.push("                     <div class='l-bar-button l-bar-btnload'><span></span></div>"),i.push("                </div>"),i.push("                <div class='l-bar-separator'></div>"),i.push("                <div class='l-clear'></div>"),i.push("            </div>"),i.push("         </div>"),e.grid.html(i.join("")),e.header=$(".l-panel-header:first",e.grid),e.body=$(".l-panel-body:first",e.grid),e.toolbar=$(".l-panel-bar:first",e.grid),e.popup=$(".l-grid-popup:first",e.grid),e.gridloading=$(".l-grid-loading:first",e.grid),e.draggingline=$(".l-grid-dragging-line",e.grid),e.topbar=$(".l-panel-topbarinner:first",e.grid),e.gridview=$(".l-grid:first",e.grid),e.gridview.attr("id",e.id+"grid"),e.gridview1=$(".l-grid1:first",e.gridview),e.gridview2=$(".l-grid2:first",e.gridview),e.gridheader=$(".l-grid-header:first",e.gridview2),e.gridbody=$(".l-grid-body:first",e.gridview2),t.autoFilter){var n={text:"高级查询",gridid:e.id,click:function(){e.showFilter()},icon:"search2"};t.toolbar&&t.toolbar.items?t.toolbar.items.push(n):t.toolbar={items:[n]}}e.f={},e.f.gridheader=$(".l-grid-header:first",e.gridview1),e.f.gridbody=$(".l-grid-body:first",e.gridview1),e.currentData=null,e.changedCells={},e.editors={},e.editor={editing:!1},e.cacheData={},"auto"==t.height&&e.bind("SysGridHeightChanged",function(){e.enabledFrozen()&&e.gridview.height(Math.max(e.gridview1.height(),e.gridview2.height()))});var r=$.extend({},t);this._bulid(),this._setColumns(t.columns),delete r.columns,delete r.data,delete r.url,e.set(r),t.delayLoad||(t.url?e.set({url:t.url}):t.data&&e.set({data:t.data}))},_setFrozen:function(e){e?this.grid.addClass("l-frozen"):this.grid.removeClass("l-frozen")},_setCssClass:function(e){this.grid.addClass(e)},_setLoadingMessage:function(e){this.gridloading.html(e)},_setToolbar:function(e){var t=this,i=this.options;if(e&&$.fn.ligerToolBar){if(t.topbar.parent().show(),t.toolbarManager=t.topbar.ligerToolBar(e),e.title){var n=$("<div class='l-panel-topbartitle'><span>"+e.title+"</span></div>");e.icon&&(n.append("<img class='l-panel-topbaricon' src='"+e.icon+"'></img>"),n.addClass("l-panel-topbartitle-hasicon")),t.topbar.parent().append(n)}i.toolbarShowInLeft&&t.topbar.addClass("l-panel-topbarinner-left")}else t.topbar.parent().remove()},isHorizontalScrollShowed:function(){var e=this,t=e.gridbody.find(".l-grid-body-inner:first");return!!t.length&&e.gridbody.width()-20<t.width()},_setHeight:function(e){var t=this,i=this.options;if(t.unbind("SysGridHeightChanged"),"auto"==e)return void t.bind("SysGridHeightChanged",function(){t.enabledFrozen()&&t.gridview.height(Math.max(t.gridview1.height(),t.gridview2.height()))});if((e=t._calculateGridBodyHeight(e))>0){if(t.gridbody.height(e),i.frozen){var n=t.gridbody.width(),r=$(":first-child",t.gridbody).width();r&&r+18>n?e>18&&t.f.gridbody.height(e-18):t.f.gridbody.height(e)}var o=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1;t.gridview.height(e+o)}t._updateHorizontalScrollStatus.ligerDefer(t,10)},_calculateGridBodyHeight:function(e){var t=this,i=this.options;return"string"==typeof e&&e.indexOf("%")>0&&(e=i.inWindow?$(window).height()*parseInt(e)*.01:t.grid.parent().height()*parseInt(e)*.01),i.title&&(e-=24),(i.usePager&&i.pagerRender||!i.scrollToPage)&&(e-=t.toolbar.outerHeight()),i.totalRender&&(e-=25),i.toolbar&&(e-=t.topbar.outerHeight()),e-=i.headerRowHeight*(t._columnMaxLevel-1)+i.headerRowHeight-1||0},_updateHorizontalScrollStatus:function(){var e=this;this.options;e.isHorizontalScrollShowed()?e.gridview.addClass("l-grid-hashorizontal"):e.gridview.removeClass("l-grid-hashorizontal")},_updateFrozenWidth:function(){var e=this;this.options;if(e.enabledFrozen()){e.gridview1.width(e.f.gridtablewidth);var t=e.gridview.width()-e.f.gridtablewidth;e.gridview2.css({left:e.f.gridtablewidth}),t>0&&e.gridview2.css({width:t})}},_setWidth:function(e){var t=this;this.options;t.enabledFrozen()&&t._onResize()},_setUrl:function(e){this.options.url=e,e?(this.options.dataType="server",this.loadData(!0)):this.options.dataType="local"},removeParm:function(e){var t=this,i=t.get("parms");i||(i={}),i instanceof Array?removeArrItem(i,function(t){return t.name==e}):delete i[e],t.set("parms",i)},setParm:function(e,t){var i=this,n=i.get("parms");n||(n={}),n instanceof Array?(removeArrItem(n,function(t){return t.name==e}),n.push({name:e,value:t})):n[e]=t,i.set("parms",n)},_setData:function(e){this.loadData(this.options.data),this.trigger("afterSetData")},loadData:function(e,t){var i=this,n=this.options;i.loading=!0,i.trigger("loadData");var r=null,o=!0;"function"==typeof e?(r=e,i.lastData?i.data=i.lastData:(i.data=i.currentData,i.data||(i.data={}),i.data[n.root]||(i.data[n.root]=[]),i.lastData=i.data),o=!1):"boolean"==typeof e?o=e:"object"==typeof e&&e?(o=!1,n.dataType="local",n.data=e):"number"==typeof e&&(n.newPage=e),n.newPage||(n.newPage=1),"server"==n.dataAction&&(n.sortOrder||(n.sortOrder="asc"));var a=[];if(n.parms){var l=$.isFunction(n.parms)?n.parms():n.parms;if(l.length){$(l).each(function(){a.push({name:this.name,value:this.value})});for(var s=l.length-1;s>=0;s--)l[s].temp&&l.splice(s,1)}else if("object"==typeof l)for(var d in l)a.push({name:d,value:l[d]})}"server"==n.dataAction&&(n.usePager&&(a.push({name:n.pageParmName,value:n.newPage}),a.push({name:n.pagesizeParmName,value:n.pageSize})),n.sortName&&(a.push({name:n.sortnameParmName,value:n.sortName}),a.push({name:n.sortorderParmName,value:n.sortOrder}))),$(".l-bar-btnload span",i.toolbar).addClass("l-disabled"),"local"==n.dataType?(i.filteredData=$.extend(!0,{},n.data||i.currentData),r&&(i.filteredData[n.root]=i._searchData(i.filteredData[n.root],r)),n.usePager?i.currentData=i._getCurrentPageData(i.filteredData):i.currentData=i.filteredData,i._convertTreeData(),i._showData()):"local"!=n.dataAction||o?i.loadServerData(a,r,t):i.data&&i.data[n.root]&&(i.filteredData=i.data,r&&(i.filteredData[n.root]=i._searchData(i.filteredData[n.root],r)),i.currentData=i._getCurrentPageData(i.filteredData),i._convertTreeData(),i._showData()),i.loading=!1},_convertTreeData:function(){var e=this,t=this.options;t.tree&&t.tree.idField&&t.tree.parentIDField&&(e.currentData[t.root]=e.arrayToTree(e.currentData[t.root],t.tree.idField,t.tree.parentIDField),e.currentData[t.record]=e.currentData[t.root].length)},loadServerData:function(e,t,i){var n=this,r=this.options,o=r.url;$.isFunction(o)&&(o=o.call(n));var a=$.isFunction(r.urlParms)?r.urlParms.call(n):r.urlParms;if(a)for(name in a)o+=-1==o.indexOf("?")?"?":"&",o+=name+"="+a[name];var l={type:r.method,url:o,data:e,async:r.async,dataType:"json",beforeSend:function(){n.hasBind("loading")?n.trigger("loading"):n.toggleLoading(!0)},success:function(e){if(n.trigger("success",[e,n]),!e||!e[r.root]||!e[r.root].length)return n.currentData=n.data={},n.currentData[r.root]=n.data[r.root]=[],e&&e[r.record]?n.currentData[r.record]=n.data[r.record]=e[r.record]:n.currentData[r.record]=n.data[r.record]=0,n._convertTreeData(),void n._showData(i);n.data=e,null!=n.data[r.record]&&(n.cacheData.records=n.data[r.record]),"server"==r.dataAction?(n.currentData=n.data,null==n.currentData[r.record]&&n.cacheData.records&&(n.currentData[r.record]=n.cacheData.records)):(n.filteredData=n.data,t&&(n.filteredData[r.root]=n._searchData(n.filteredData[r.root],t)),r.usePager?n.currentData=n._getCurrentPageData(n.filteredData):n.currentData=n.filteredData),n._convertTreeData(),n._showData.ligerDefer(n,10,[i])},complete:function(){n.trigger("complete",[n]),n.hasBind("loaded")?n.trigger("loaded",[n]):n.toggleLoading.ligerDefer(n,10,[!1])},error:function(e,t,i){n.currentData=n.data={},n.currentData[r.root]=n.data[r.root]=[],n.currentData[r.record]=n.data[r.record]=0,n.toggleLoading.ligerDefer(n,10,[!1]),$(".l-bar-btnload span",n.toolbar).removeClass("l-disabled"),n.trigger("error",[e,t,i])}};r.contentType&&(l.contentType=r.contentType),"application/json"==r.contentType&&"string"!=typeof parms&&(l.data=function(e){if(!e)return"null";var t=e,i={};if($.isArray(t))for(var n=0;n<t.length;n++)i[t[n].name]=t[n].value;else i=t;return liger.toJSON(i)}(e)),$.ajax(l)},toggleLoading:function(e){this.gridloading[e?"show":"hide"]()},_createEditor:function(e,t,i,n,r){var o=e.create.call(this,t,i);return e.setValue&&e.setValue.call(this,o,i.value,i),i.column.editor&&i.column.editor.initSelect&&(o.element&&$(o.element).is(":text")&&$(o.element).select(),o instanceof jQuery&&(o.is(":text")?o.select():o.find(":text").select())),e.setText&&i.column.textField&&e.setText.call(this,o,i.text,i),e.resize&&e.resize.call(this,o,n,r,i),o},beginEdit:function(e,t){var i=this,n=this.options;if(n.enabledEdit){var r=i.getRow(e);if(!r._editing&&0!=i.trigger("beginEdit",{record:r,rowindex:r.__index})){i.editors[r.__id]={},r._editing=!0,i.reRender({rowdata:r}),t=t||function(e,t){var n=i.getCellObj(e,t),r=$(n).html("");return i.setCellEditing(e,t,!0),r};for(var o=0,a=i.columns.length;o<a;o++){var l=i.columns[o];if(l.name&&l.editor&&l.editor.type&&n.editors[l.editor.type]){var s=n.editors[l.editor.type],d={record:r,value:i._getValueByName(r,l.name),column:l,rowindex:r.__index,grid:i},c=t(r,l),u=c.width(),h=c.height(),p=i._createEditor(s,c,d,u,h);i.editors[r.__id][l.__id]={editor:s,input:p,editParm:d,container:c}}}i.trigger("afterBeginEdit",{record:r,rowindex:r.__index})}}},cancelEdit:function(e){var t=this;if(void 0==e)for(var i in t.editors)t.cancelEdit(i);else{var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.trigger("beforeCancelEdit",{record:n,rowindex:n.__index}))return;for(var r in t.editors[n.__id]){var o=t.editors[n.__id][r];o.editor.destroy&&o.editor.destroy(o.input,o.editParm)}delete t.editors[n.__id],delete n._editing,t.reRender({rowdata:n})}},addEditRow:function(e,t){this.submitEdit(),e=this.add(e),this.beginEdit(e,t)},submitEdit:function(e){var t=this;this.options;if(void 0==e)for(var i in t.editors)t.submitEdit(i);else{var n=t.getRow(e),r={};if(!n||!t.editors[n.__id])return;for(var o in t.editors[n.__id]){var a=t.editors[n.__id][o],l=a.editParm.column;l.name&&(r[l.name]=a.editor.getValue(a.input,a.editParm)),l.textField&&a.editor.getText&&(r[l.textField]=a.editor.getText(a.input,a.editParm))}if(0==t.trigger("beforeSubmitEdit",{record:n,rowindex:n.__index,newdata:r}))return!1;t.updateRow(n,r),t.trigger("afterSubmitEdit",{record:n,rowindex:n.__index,newdata:r})}},_enabledEditByCell:function(e){var t=this,i=(this.options,t.getColumn(e));return!!i&&(i.editor&&i.editor.type)},endEditToNext:function(){function e(){return r.parent("tr").next(".l-grid-row").find("td:first")}var t=this,i=(this.options,t.editor),n=null,r=null;if(i){var o=i.editParm,a=o.column,l=($.inArray(a,t.columns),t.getCellObj(o.record,o.column));if(r=$(l),n=r.next(),n.length||(n=e()),n.length)for(;!t._enabledEditByCell(n.get(0));)r=n,n=n.next(),n.length||(n=e())}t.endEdit(),n&&n.length&&t._applyEditor(n.get(0))},endEdit:function(e){var t=this;this.options;if(t.editor.editing){var i=t.editor;t.trigger("sysEndEdit",[t.editor.editParm]),t.trigger("endEdit",[t.editor.editParm]),i.editor.destroy&&i.editor.destroy(i.input,i.editParm),t.editor.container.remove(),t.reRender({rowdata:t.editor.editParm.record,column:t.editor.editParm.column}),t.trigger("afterEdit",[t.editor.editParm]),t.editor={editing:!1}}else if(void 0!=e){var n=t.getRow(e);if(!t.editors[n.__id])return;if(0==t.submitEdit(e))return!1;for(var r in t.editors[n.__id]){var i=t.editors[n.__id][r];i.editor.destroy&&i.editor.destroy(i.input,i.editParm)}delete t.editors[n.__id],delete n._editing,t.trigger("afterEdit",{record:n,rowindex:n.__index})}else for(var o in t.editors)t.endEdit(o);t._fixHeight.ligerDefer(t,10)},setWidth:function(e){return this._setWidth(e)},setHeight:function(e){return this._setHeight(e)},enabledCheckbox:function(){return!!this.options.checkbox},enabledFrozen:function(){var e=this,t=this.options;if(!t.frozen)return!1;var i=e.columns||[];if(e.enabledDetail()&&t.frozenDetail||e.enabledCheckbox()&&t.frozenCheckbox||t.frozenRownumbers&&t.rownumbers)return!0;for(var n=0,r=i.length;n<r;n++)if(i[n].frozen)return!0;return this._setFrozen(!1),!1},enabledDetailEdit:function(){return!!this.enabledDetail()&&!!this.options.detailToEdit},enabledDetail:function(){return!(!this.options.detail||!this.options.detail.onShowDetail)},enabledGroup:function(){return!!this.options.groupColumnName},deleteSelectedRow:function(){if(this.selected){for(var e in this.selected){var t=this.selected[e];t.__id in this.records&&this._deleteData.ligerDefer(this,10,[t])}this.reRender.ligerDefer(this,20)}},removeRange:function(e){var t=this;this.options;$.each(e,function(){t._removeData(this)}),t.reRender()},remove:function(e){var t=this;this.options,t.getRow(e);t._removeData(e),t.reRender()},deleteRange:function(e){var t=this;this.options;$.each(e,function(){t._deleteData(this)}),t.reRender()},deleteRow:function(e){var t=this,i=(this.options,t.getRow(e));i&&(t._deleteData(i),t.reRender(),t.isDataChanged=!0)},_deleteData:function(e){var t=this,i=this.options,n=t.getRow(e);if(n[i.statusName]="delete",i.tree){var r=t.getChildren(n,!0);if(r)for(var o=0,a=r.length;o<a;o++)r[o][i.statusName]="delete"}t.deletedRows=t.deletedRows||[],t.deletedRows.push(n),t._removeSelected(n)},updateCell:function(e,t,i){var n,r,o,a=this,l=this.options;if("string"!=typeof e){if("number"==typeof e)n=a.columns[e],o=a.getRow(i),r=a.getCellObj(o,n);else if("object"==typeof e&&e.__id)n=e,o=a.getRow(i),r=a.getCellObj(o,n);else{r=e;var s=r.id.split("|"),d=s[s.length-1];n=a._columns[d];var c=$(r).parent();o=o||a.getRow(c[0])}null!=t&&n.name&&(a._setValueByName(o,n.name,t),"add"!=o[l.statusName]&&(o[l.statusName]="update"),a.isDataChanged=!0),a.reRender({rowdata:o,column:n})}else for(var u=0,h=a.columns.length;u<h;u++)a.columns[u].name==e&&a.updateCell(u,t,i)},addRows:function(e,t,i,n){var r=this;this.options;$(e).each(function(){r.addRow(this,t,i,n)})},_createRowid:function(){return"r"+(1e3+this.recordNumber)},_isRowId:function(e){return e in this.records},_addNewRecord:function(e,t,i){var n=this,r=this.options;if(n.recordNumber++,e.__id=n._createRowid(),e.__previd=t,t&&-1!=t){var o=n.records[t];if(o.__nextid&&-1!=o.__nextid){var a=n.records[o.__nextid];a&&(a.__previd=e.__id)}o.__nextid=e.__id,e.__index=o.__index+1}else e.__index=0;if(r.tree){if(i&&-1!=i){var l=n.records[i];e.__pid=i,e.__level=l.__level+1}else e.__pid=-1,e.__level=1;e.__hasChildren=!!e[r.tree.childrenName]}return e[r.statusName]=e[r.statusName]||"nochanged",n.rows[e.__index]=e,n.records[e.__id]=e,e},_getRows:function(e){function t(e){if(e&&e.length)for(var r=0,o=e.length;r<o;r++){var a=e[r];n.push(a),a[i.tree.childrenName]&&t(a[i.tree.childrenName])}}var i=this.options,n=[];return t(e),n},_updateGridData:function(){function e(r,o){if(r&&r.length)for(var a=0,l=r.length;a<l;a++){var s=r[a];t.formatRecord(s),"delete"!=s[i.statusName]&&(t._addNewRecord(s,n,o),n=s.__id,s.__hasChildren&&e(s[i.tree.childrenName],s.__id))}}var t=this,i=this.options;t.recordNumber=0,t.rows=[],t.records={};var n=-1;return e(t.currentData[i.root],-1),t.rows},_moveData:function(e,t,i){var n,r,o=this,a=(this.options,o.getRow(e)),l=o.getRow(t),s=o._getParentChildren(a);n=$.inArray(a,s),s.splice(n,1),s=o._getParentChildren(l),r=$.inArray(l,s),s.splice(r+(i?1:0),0,a)},move:function(e,t,i){this._moveData(e,t,i),this.reRender()},moveRange:function(e,t,i){for(var n in e)this._moveData(e[n],t,i);this.reRender()},up:function(e){var t=this,i=(this.options,t.getRow(e)),n=t._getParentChildren(i),r=$.inArray(i,n);if(-1!=r&&0!=r){var o=t.getSelected();t.move(i,n[r-1],!1),t.select(o)}},down:function(e){var t=this,i=(this.options,t.getRow(e)),n=t._getParentChildren(i),r=$.inArray(i,n);if(-1!=r&&r!=n.length-1){var o=t.getSelected();t.move(i,n[r+1],!0),t.select(o)}},addRow:function(e,t,i,n){var r=this,o=this.options;if(e=e||{},r._addData(e,n,t,i),r.reRender(),e[o.statusName]="add",o.tree){var a=r.getChildren(e,!0);if(a)for(var l=0,s=a.length;l<s;l++)a[l][o.statusName]="add"}return r.isDataChanged=!0,o.total=o.total?o.total+1:1,o.pageCount=Math.ceil(o.total/o.pageSize),r._buildPager(),r.trigger("SysGridHeightChanged"),r.trigger("afterAddRow",[e]),e},updateRow:function(e,t){var i=this,n=this.options,r=i.getRow(e);return i.isDataChanged=!0,$.extend(r,t||{}),"add"!=r[n.statusName]&&(r[n.statusName]="update"),i.reRender.ligerDefer(i,10,[{rowdata:r}]),r},setCellEditing:function(e,t,i){var n=this,r=(this.options,n.getCellObj(e,t)),o=i?"addClass":"removeClass";if($(r)[o]("l-grid-row-cell-editing"),0!=e.__id){var a=$(n.getRowObj(e.__id)).prev();if(!a.length||a.length<=0||null==a[0].id||""==a[0].id)return;var l=n.getRow(a[0]),s=n.getCellObj(l,t);if(!s)return;$(s)[o]("l-grid-row-cell-editing-topcell")}if(-1!=t.__previd&&null!=t.__previd){var s=$(n.getCellObj(e,t)).prev();$(s)[o]("l-grid-row-cell-editing-leftcell")}},reRender:function(e){function t(e){if(e.totalSummary)for(var t=0;t<i.totalNumber;t++){var r=document.getElementById(i.id+"|total"+t+"|"+e.__id);$("div:first",r).html(i._getTotalCellContent(e,i.groups&&i.groups[t]?i.groups[t]:i.currentData[n.root]))}}var i=this,n=this.options;e=e||{};var r=e.rowdata,o=e.column,a=e.totalOnly;if(!(o&&(o.isdetail||o.ischeckbox)||r&&"delete"==r[n.statusName]))if(a)$(i.columns).each(function(){t(this)});else if(r&&o){var l=i.getCellObj(r,o);$(l).html(i._getCellHtml(r,o)),o.issystem||i.setCellEditing(r,o,!1)}else if(r)$(i.columns).each(function(){i.reRender({rowdata:r,column:this})});else if(o){for(var s in i.records)i.reRender({rowdata:i.records[s],column:o});t(o)}else i._showData()},getData:function(e,t){var i=this,n=this.options,r=[];void 0==t&&(t=!0);for(var o in i.records){var a=$.extend(!0,{},i.records[o]);a[n.statusName]!=e&&void 0!=e||r.push(i.formatRecord(a,t))}return r},formatRecord:function(e,t){return delete e.__id,delete e.__previd,delete e.__nextid,delete e.__index,this.options.tree&&(delete e.__pid,delete e.__level,delete e.__hasChildren),t&&delete e[this.options.statusName],e},getUpdated:function(){return this.getData("update",!0)},getDeleted:function(){return this.deletedRows},getAdded:function(){return this.getData("add",!0)},getChanges:function(){var e=this,t=(this.options,[]);return this.deletedRows&&$(this.deletedRows).each(function(){var i=$.extend(!0,{},this);t.push(e.formatRecord(i,!1))}),$.merge(t,e.getData("update",!1)),$.merge(t,e.getData("add",!1)),t},getColumn:function(e){var t=this;this.options;if("string"==typeof e)return t._isColumnId(e)?t._columns[e]:t.columns[parseInt(e)];if("number"==typeof e)return t.columns[e];if("object"==typeof e&&1==e.nodeType){var i=e.id.split("|"),n=i[i.length-1];return t._columns[n]}return e},getColumnByName:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i];return null},getColumnType:function(e){var t=this;this.options;for(i=0;i<t.columns.length;i++)if(t.columns[i].name==e)return t.columns[i].type?t.columns[i].type:"string";return null},isTotalSummary:function(){for(var e=this,t=(this.options,0);t<e.columns.length;t++)if(e.columns[t].totalSummary)return!0;return!1},getColumns:function(e){var t=this,i=(this.options,[]);for(var n in t._columns){var r=t._columns[n];void 0!=e?r.__level==e&&i.push(r):r.__leaf&&i.push(r)}return i},changeSort:function(e,t){var i=this,n=this.options;if(i.loading)return!0;if("local"==n.dataAction){var r=i.getColumnType(e);if(i.sortedData||(i.sortedData=i.filteredData),!i.sortedData||!i.sortedData[n.root])return;n.sortName==e?i.sortedData[n.root].reverse():i.sortedData[n.root].sort(function(t,n){return i._compareData(t,n,e,r)}),n.usePager?i.currentData=i._getCurrentPageData(i.sortedData):i.currentData=i.sortedData,i._showData()}n.sortName=e,n.sortOrder=t,"server"==n.dataAction&&i.loadData(n.where)},changePage:function(e){var t=this,i=this.options;if(t.loading)return!0;if("local"!=i.dataAction&&t.isDataChanged&&!confirm(i.isContinueByDataChanged))return!1;switch(i.pageCount=parseInt($(".pcontrol span",t.toolbar).html()),e){case"first":if(1==i.page)return;i.newPage=1;break;case"prev":if(1==i.page)return;i.page>1&&(i.newPage=parseInt(i.page)-1);break;case"next":if(i.page>=i.pageCount)return;i.newPage=parseInt(i.page)+1;break;case"last":if(i.page>=i.pageCount)return;i.newPage=i.pageCount;break;case"input":var n=parseInt($(".pcontrol input",t.toolbar).val());isNaN(n)&&(n=1),n<1?n=1:n>i.pageCount&&(n=i.pageCount),$(".pcontrol input",t.toolbar).val(n),i.newPage=n}if(i.newPage==i.page)return!1;if(1==i.newPage?($(".l-bar-btnfirst span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnfirst span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",t.toolbar).removeClass("l-disabled")),i.newPage==i.pageCount?($(".l-bar-btnlast span",t.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).addClass("l-disabled")):($(".l-bar-btnlast span",t.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",t.toolbar).removeClass("l-disabled")),t.trigger("changePage",[i.newPage]),"server"==i.dataAction)i.parms||(i.parms=[]),$.isArray(i.parms)?i.parms.push({name:"changepage",value:"1",temp:!0}):i.parms.changepage="1",t.loadData(i.where);else{if(t.currentData=t._getCurrentPageData(t.filteredData),i.tree){var r=i.tree.childrenName;$(t.filteredData[i.root]).each(function(e,t){t[r]&&(t[r]=[])}),t._convertTreeData()}t._showData()}},getSelectedRow:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return t}return null},getSelectedRows:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(i)}return e},getSelectedRowObj:function(){for(var e in this.selected){var t=this.selected[e];if(t.__id in this.records)return this.getRowObj(t)}return null},getSelectedRowObjs:function(){var e=[];for(var t in this.selected){var i=this.selected[t];i.__id in this.records&&e.push(this.getRowObj(i))}return e},getCellObj:function(e,t){var i=this.getRow(e);return t=this.getColumn(t),document.getElementById(this._getCellDomId(i,t))},getRowObj:function(e,t){var i=this;this.options;return null==e?null:"string"==typeof e?i._isRowId(e)?document.getElementById(i.id+(t?"|1|":"|2|")+e):document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[parseInt(e)].__id):"number"==typeof e?document.getElementById(i.id+(t?"|1|":"|2|")+i.rows[e].__id):"object"==typeof e&&e.__id?i.getRowObj(e.__id,t):e},getRow:function(e){var t=this;this.options;return null==e?null:"string"==typeof e?t._isRowId(e)?t.records[e]:t.rows[parseInt(e)]:"number"==typeof e?t.rows[parseInt(e)]:"object"!=typeof e||1!=e.nodeType||e.__id?e:t._getRowByDomId(e.id)},_setColumnVisible:function(e,t){var i=this;this.options;if(t){if(e._hide=!0,document.getElementById(e.__domid).style.display="none",-1!=e.__pid){for(var n=!0,r=this._columns[e.__pid],o=0;r&&o<r.columns.length;o++)if(!r.columns[o]._hide){n=!1;break}
n&&(r._hide=!0,document.getElementById(r.__domid).style.display="none",this._setColumnVisible(r,t))}}else if(e._hide=!1,document.getElementById(e.__domid).style.display="",-1!=e.__pid){var r=i._columns[e.__pid];r._hide&&(document.getElementById(r.__domid).style.display="",this._setColumnVisible(r,t))}},toggleCol:function(e,t,i){var n,r=this;this.options;if("number"==typeof e)n=r.columns[e];else if("object"==typeof e&&e.__id)n=e;else if("string"==typeof e){if(!r._isColumnId(e))return void $(r.columns).each(function(){this.name==e&&r.toggleCol(this,t,i)});n=r._columns[e]}if(n){var o=n.__leafindex,a=document.getElementById(n.__domid);if(a){a=$(a);var l=[];for(var s in r.rows){var d=r.getCellObj(r.rows[s],n);d&&l.push(d)}for(var s=0;s<r.totalNumber;s++){var c=document.getElementById(r.id+"|total"+s+"|"+n.__id);c&&l.push(c)}var u=n._width;t&&n._hide?(n.frozen?r.f.gridtablewidth+=parseInt(u)+1:r.gridtablewidth+=parseInt(u)+1,r._setColumnVisible(n,!1),$(l).show()):t||n._hide||(n.frozen?r.f.gridtablewidth-=parseInt(u)+1:r.gridtablewidth-=parseInt(u)+1,r._setColumnVisible(n,!0),$(l).hide()),n.frozen?($("div:first",r.f.gridheader).width(r.f.gridtablewidth),$("div:first",r.f.gridbody).width(r.f.gridtablewidth)):($("div:first",r.gridheader).width(r.gridtablewidth+40),r.gridtablewidth?$("div:first",r.gridbody).width(r.gridtablewidth):$("div:first",r.gridbody).css("width","auto")),r._updateFrozenWidth(),i||$(":checkbox[columnindex="+o+"]",r.popup).each(function(){if(this.checked=t,$.fn.ligerCheckBox){var e=$(this).ligerGetCheckBoxManager();e&&e.updateStyle()}})}}},setColumnWidth:function(e,t){var i=this,n=this.options;if(t){t=parseInt(t,10);var r;if("number"==typeof e)r=i.columns[e];else if("object"==typeof e&&e.__id)r=e;else if("string"==typeof e){if(!i._isColumnId(e))return void $(i.columns).each(function(){this.name==e&&i.setColumnWidth(this,t)});r=i._columns[e]}if(r){var o=n.minColumnWidth;r.minWidth&&(o=r.minWidth),t=t<o?o:t;var a=t-r._width;if(0!=i.trigger("beforeChangeColumnWidth",[r,t])){r._width=t,r.frozen?(i.f.gridtablewidth+=a,$("div:first",i.f.gridheader).width(i.f.gridtablewidth),$("div:first",i.f.gridbody).width(i.f.gridtablewidth)):(i.gridtablewidth+=a,$("div:first",i.gridheader).width(i.gridtablewidth+40),$("div:first",i.gridbody).width(i.gridtablewidth)),$(document.getElementById(r.__domid)).css("width",t);var l=[];for(var s in i.records){var d=i.getCellObj(i.records[s],r);if(d&&l.push(d),!i.enabledDetailEdit()&&i.editors[s]&&i.editors[s][r.__id]){var c=i.editors[s][r.__id];c.editor.resize&&c.editor.resize(c.input,t,c.container.height(),c.editParm)}}for(var u=0;u<i.totalNumber;u++){var h=document.getElementById(i.id+"|total"+u+"|"+r.__id);h&&l.push(h)}$(l).css("width",t).find("> div.l-grid-row-cell-inner:first").css("width",t-8),i._updateFrozenWidth(),i._updateHorizontalScrollStatus.ligerDefer(i,10),i.trigger("afterChangeColumnWidth",[r,t])}}}},changeHeaderText:function(e,t){var i,n=this,r=this.options;if("number"==typeof e)i=n.columns[e];else if("object"==typeof e&&e.__id)i=e;else if("string"==typeof e){if(!n._isColumnId(e))return void $(n.columns).each(function(){this.name==e&&n.changeHeaderText(this,t)});i=n._columns[e]}if(i){var o=i.__leafindex,a=document.getElementById(i.__domid);$(".l-grid-hd-cell-text",a).html(t),r.allowHideColumn&&$(":checkbox[columnindex="+o+"]",n.popup).parent().next().html(t)}},changeCol:function(e,t,i){var n=this,r=this.options;if(e&&t){var o=n.getColumn(e),a=n.getColumn(t);o.frozen=a.frozen;var l,s,d=-1==o.__pid?r.columns:n._columns[o.__pid].columns,c=-1==a.__pid?r.columns:n._columns[a.__pid].columns;l=$.inArray(o,d),s=$.inArray(a,c);var u=d==c;o.__level,a.__level;c.splice(s+(i?1:0),0,o),u?i?d.splice(l,1):d.splice(l+1,1):d.splice(l,1),n._setColumns(r.columns),n.reRender()}},collapseDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var n=0,r=t.columns.length;n<r;n++)if(t.columns[n].isdetail){var o=t.getRowObj(i),a=t.getCellObj(i,t.columns[n]);return $(o).next("tr.l-grid-detailpanel").hide(),$(".l-grid-row-cell-detailbtn:first",a).removeClass("l-open"),void t.trigger("SysGridHeightChanged")}},extendDetail:function(e){var t=this,i=(this.options,t.getRow(e));if(i)for(var n=0,r=t.columns.length;n<r;n++)if(t.columns[n].isdetail){var o=t.getRowObj(i),a=t.getCellObj(i,t.columns[n]);return $(o).next("tr.l-grid-detailpanel").show(),$(".l-grid-row-cell-detailbtn:first",a).addClass("l-open"),void t.trigger("SysGridHeightChanged")}},getParent:function(e){var t=this;if(!this.options.tree)return null;var i=t.getRow(e);return i&&i.__pid in t.records?t.records[i.__pid]:null},getChildren:function(e,t){function i(e){if(e[r.tree.childrenName])for(var n=0,o=e[r.tree.childrenName].length;n<o;n++){var l=e[r.tree.childrenName][n];"delete"!=l[r.statusName]&&(a.push(l),t&&i(l))}}var n=this,r=this.options;if(!r.tree)return null;var o=n.getRow(e);if(!o)return null;var a=[];return i(o),a},isLeaf:function(e){var t=this,i=(this.options,t.getRow(e));if(i)return!i.__hasChildren},hasChildren:function(e){var t=this.options,i=this.getRow(e);if(i)return!(!i[t.tree.childrenName]||!i[t.tree.childrenName].length)},existRecord:function(e){for(var t in this.records)if(this.records[t]==e)return!0;return!1},_removeSelected:function(e){var t=this;if(this.options.tree){var i=t.getChildren(e,!0);if(i)for(var n=0,r=i.length;n<r;n++){var o=$.inArray(i[n],t.selected);-1!=o&&t.selected.splice(o,1)}}var a=$.inArray(e,t.selected);-1!=a&&t.selected.splice(a,1)},_getParentChildren:function(e){var t=this,i=this.options,n=t.getRow(e);return i.tree&&t.existRecord(n)&&n.__pid in t.records?t.records[n.__pid][i.tree.childrenName]:t.currentData[i.root]},_removeData:function(e){var t=this,i=(this.options,t._getParentChildren(e)),n=$.inArray(e,i);-1!=n&&i.splice(n,1),t._removeSelected(e)},_addData:function(e,t,i,n){var r=this,o=this.options;r.currentData||(r.currentData={}),r.currentData[o.root]||(r.currentData[o.root]=[]);var a=r.currentData[o.root];if(i){o.tree&&(t?a=t[o.tree.childrenName]:i.__pid in r.records&&(a=r.records[i.__pid][o.tree.childrenName]));var l=$.inArray(i,a);a.splice(-1==l?-1:l+(n?0:1),0,e)}else o.tree&&t&&(a=t[o.tree.childrenName]),a.push(e)},_appendData:function(e,t,i,n){var r=this;e[this.options.statusName]="update",r._removeData(e),r._addData(e,t,i,n)},appendRange:function(e,t,i,n){var r=this,o=(this.options,!1);$.each(e,function(e,a){a.__id&&r.existRecord(a)?(r.isLeaf(t)&&r.upgrade(t),r._appendData(a,t,i,n),o=!0):r.appendRow(a,t,i,n)}),o&&r.reRender()},appendRow:function(e,t,i,n){var r=this;this.options;return $.isArray(e)?void r.appendRange(e,t,i,n):e.__id&&r.existRecord(e)?(r._appendData(e,t,i,n),void r.reRender()):(t&&r.isLeaf(t)&&r.upgrade(t),void r.addRow(e,i,!!n,t))},upgrade:function(e){var t=this,i=this.options,n=t.getRow(e);if(n&&i.tree){n[i.tree.childrenName]=n[i.tree.childrenName]||[],n.__hasChildren=!0;var r=[t.getRowObj(n)];t.enabledFrozen()&&r.push(t.getRowObj(n,!0)),$("> td > div > .l-grid-tree-space:last",r).addClass("l-grid-tree-link l-grid-tree-link-open")}},demotion:function(e){var t=this,i=this.options,n=t.getRow(e);if(n&&i.tree){var r=[t.getRowObj(n)];if(t.enabledFrozen()&&r.push(t.getRowObj(n,!0)),$("> td > div > .l-grid-tree-space:last",r).removeClass("l-grid-tree-link l-grid-tree-link-open l-grid-tree-link-close"),t.hasChildren(n))for(var o=t.getChildren(n),a=0,l=o.length;a<l;a++)t.deleteRow(o[a]);n.__hasChildren=!1}},collapseAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var n=e.getRowObj(i);$(".l-grid-tree-link",n).hasClass("l-grid-tree-link-close")||e.toggle(i)})},expandAll:function(){var e=this;this.options;$(e.rows).each(function(t,i){var n=e.getRowObj(i);$(".l-grid-tree-link",n).hasClass("l-grid-tree-link-open")||e.toggle(i)})},collapse:function(e){var t=this,i=(this.options,t.getRowObj(e));$(".l-grid-tree-link",i).hasClass("l-grid-tree-link-close")||t.toggle(e)},expand:function(e){var t=this,i=(this.options,t.getRowObj(e));$(".l-grid-tree-link",i).hasClass("l-grid-tree-link-open")||t.toggle(e)},toggle:function(e){function t(e){for(var i=0,n=e.length;i<n;i++){var r=e[i],a=o.getChildren(r,!1),l=!(!a||!a.length),s=$([o.getRowObj(r.__id)]);o.enabledFrozen()&&(s=s.add(o.getRowObj(r.__id,!0))),l?$(".l-grid-tree-link",s).hasClass("l-grid-tree-link-close")?s.show():(s.show(),t(a)):($(".l-grid-tree-link",s).removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),s.show())}}function i(){var e=[];if(!c)return e=o.getChildren(a,!0),$(e).each(function(){$(o.getRowObj(this)).hide(),o.enabledFrozen()&&$(o.getRowObj(this,!0)).hide()}),void o.trigger("treeCollapsed",[a]);e=o.getChildren(a,!1),t(e),o.trigger("treeExpanded",[a])}function n(){d.removeClass("l-grid-tree-link-close").addClass("l-grid-tree-link-open"),-1!=(s=$.inArray(a,o.collapsedRows))&&o.collapsedRows.splice(s,1)}function r(){d.addClass("l-grid-tree-link-close").removeClass("l-grid-tree-link-open"),-1==(s=$.inArray(a,o.collapsedRows))&&o.collapsedRows.push(a)}if(e){var o=this,a=(this.options,o.getRow(e)),l=[o.getRowObj(a)];o.enabledFrozen()&&l.push(o.getRowObj(a,!0));var s,d=(a.__level,$(".l-grid-tree-link:first",l)),c=!0;o.collapsedRows=o.collapsedRows||[];if(d.hasClass("l-grid-tree-link-close")){var u={update:function(){n(),i()}};if(o.hasBind("treeExpand")&&0==o.trigger("treeExpand",[a,u]))return!1;n()}else{var u={update:function(){r(),i()}};if(o.hasBind("treeCollapse")&&0==o.trigger("treeCollapse",[a,u]))return!1;c=!1,r()}i()}},_bulid:function(){var e=this;e._clearGrid(),e._initBuildHeader(),e._initHeight(),e._initFootbar(),e._buildPager(),e._setEvent()},_setColumns:function(e){var t=this;t._initColumns(),t._initBuildGridHeader(),t._initBuildPopup()},_initBuildHeader:function(){var e=this,t=this.options;t.title?($(".l-panel-header-text",e.header).html(t.title),t.headerImg&&e.header.append("<img src='"+t.headerImg+"' />").addClass("l-panel-header-hasicon")):e.header.hide(),t.toolbar?$.fn.ligerToolBar&&(e.toolbarManager=e.topbar.ligerToolBar(t.toolbar),0==e.topbar.height()?e.topbar.parent().height(25):e.topbar.parent().height(e.topbar.height())):e.topbar.parent().remove()},_createColumnId:function(e){return null!=e.id&&""!=e.id?e.id.toString():"c"+(100+this._columnCount)},_isColumnId:function(e){return e in this._columns},_initColumns:function(){function e(e,t){for(var i in t)t[i]in e&&delete e[t[i]]}function t(n,r,o,a){if(n.editorType&&(n.editor=n.editor||{},n.editor.type=n.editorType),e(n,["__id","__pid","__previd","__nextid","__domid","__leaf","__leafindex","__level","__colSpan","__rowSpan"]),r>i._columnMaxLevel&&(i._columnMaxLevel=r),i._columnCount++,n.__id=i._createColumnId(n),n.__domid=i.id+"|hcell|"+n.__id,i._columns[n.__id]=n,n.columns&&n.columns.length||(n.__leafindex=i._columnLeafCount++),n.__level=r,n.__pid=o,n.__previd=a,!n.columns||!n.columns.length)return n.__leaf=!0,1;for(var l=0,s=-1,d=0,c=n.columns.length;d<c;d++){var u=n.columns[d];l+=t(u,r+1,n.__id,s),s=u.__id}return n.__leafcount=l,l}var i=this,n=this.options;if(i._columns={},i._columnCount=0,i._columnLeafCount=0,i._columnMaxLevel=1,n.columns){var r=-1;if(n.rownumbers){var o=!i.enabledGroup()&&(n.frozen&&n.frozenRownumbers),a={isrownumber:!0,issystem:!0,width:n.rownumbersColWidth,frozen:o};t(a,1,-1,r),r=a.__id}if(i.enabledDetail()){var l=!i.enabledGroup()&&(n.frozen&&n.frozenDetail),a={isdetail:!0,issystem:!0,width:n.detailColWidth,frozen:l};t(a,1,-1,r),r=a.__id}if(i.enabledCheckbox()){var s=!i.enabledGroup()&&(n.frozen&&n.frozenCheckbox),a={ischeckbox:!0,issystem:!0,width:n.detailColWidth,frozen:s};t(a,1,-1,r),r=a.__id}for(var d=0,c=n.columns.length;d<c;d++){var a=n.columns[d];a&&(t(a,1,-1,r),r=a.__id)}for(var u in i._columns){var a=i._columns[u];a.__leafcount>1&&(a.__colSpan=a.__leafcount),a.__leaf&&a.__level!=i._columnMaxLevel&&(a.__rowSpan=i._columnMaxLevel-a.__level+1)}i.columns=i.getColumns(),$(i.columns).each(function(e,t){t.columnname=t.name,t.columnindex=e,t.type=t.type||"string",t.islast=e==i.columns.length-1,t.isSort=0!=t.isSort,t.frozen=!!t.frozen,t._width=i._getColumnWidth(t),t._hide=!!t.hide})}},_getColumnWidth:function(e){var t=this,i=this.options;if(e._width)return e._width;var n=e.width||i.columnWidth;if(!n||"auto"==n){var r=0,o=0;$(t.columns).each(function(e,n){var a=n.width||i.columnWidth;a&&"auto"!=a?o+=parseInt(t._getColumnWidth(n))+1:r++}),n=parseInt((t.grid.width()-o)/r)-1}if("string"==typeof n&&n.indexOf("%")>0){var a=0;t.enabledDetail()&&(a+=i.detailColWidth),t.enabledCheckbox()&&(a+=i.checkboxColWidth),t.options.rownumbers&&(a+=t.options.rownumbersColWidth),e._width=n=parseInt(.01*parseInt(n)*(t.grid.width()-a-t.columns.length/2-1))}return e.minWidth&&n<e.minWidth&&(n=e.minWidth),e.maxWidth&&n>e.maxWidth&&(n=e.maxWidth),n},_createHeaderCell:function(e){var t=this,i=this.options,n=$("<td class='l-grid-hd-cell'><div class='l-grid-hd-cell-inner'><span class='l-grid-hd-cell-text'></span></div></td>");if(n.attr("id",e.__domid),e.__leaf||n.addClass("l-grid-hd-cell-mul"),e.columnindex==t.columns.length-1&&n.addClass("l-grid-hd-cell-last"),e.isrownumber&&(n.addClass("l-grid-hd-cell-rownumbers"),n.html("<div class='l-grid-hd-cell-inner'></div>")),e.ischeckbox&&(n.addClass("l-grid-hd-cell-checkbox"),n.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-checkbox'></div></div>")),e.isdetail&&(n.addClass("l-grid-hd-cell-detail"),n.html("<div class='l-grid-hd-cell-inner'><div class='l-grid-hd-cell-text l-grid-hd-cell-btn-detail'></div></div>")),e.heightAlign&&$(".l-grid-hd-cell-inner:first",n).css("textAlign",e.heightAlign),e.__colSpan&&n.attr("colSpan",e.__colSpan),e.__rowSpan){n.attr("rowSpan",e.__rowSpan),n.height(i.headerRowHeight*e.__rowSpan);var r=(i.headerRowHeight*e.__rowSpan-i.headerRowHeight)/2-5;$(".l-grid-hd-cell-inner:first",n).css("paddingTop",r)}else n.height(i.headerRowHeight);e.__leaf&&(n.width(e._width),n.attr("columnindex",e.__leafindex));var o=n.height();!e.__rowSpan&&o>10&&$(">div:first",n).height(o),e._hide&&n.hide(),e.name&&n.attr({columnname:e.name});var a="";return a=e.display&&""!=e.display?e.display:e.headerRender?e.headerRender(e):"&nbsp;",$(".l-grid-hd-cell-text:first",n).html(a),!e.issystem&&e.__leaf&&!1!==e.resizable&&$.fn.ligerResizable&&i.allowAdjustColWidth&&(t.colResizable[e.__id]=n.ligerResizable({handles:"e",onStartResize:function(e,i){this.proxy.hide(),t.draggingline.css({height:t.body.height(),top:0,left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}).show()},onResize:function(e,i){t.colresizing=!0,t.draggingline.css({left:i.pageX-t.grid.offset().left+parseInt(t.body[0].scrollLeft)}),$("body").add(n).css("cursor","e-resize")},onStopResize:function(i){return t.colresizing=!1,$("body").add(n).css("cursor","default"),t.draggingline.hide(),t.setColumnWidth(e,parseInt(e._width)+i.diffX),!1}})),t.trigger("headerCellBulid",[n,e]),n},_initBuildGridHeader:function(){var e=this,t=this.options;if(e.gridtablewidth=0,e.f.gridtablewidth=0,e.colResizable){for(var i in e.colResizable)e.colResizable[i].destroy();e.colResizable=null}e.colResizable={},$("tbody:first",e.gridheader).html(""),$("tbody:first",e.f.gridheader).html("");for(var n=1;n<=e._columnMaxLevel;n++){var r=e.getColumns(n),o=n==e._columnMaxLevel,a=$("<tr class='l-grid-hd-row'></tr>"),l=$("<tr class='l-grid-hd-row'></tr>");o||a.add(l).addClass("l-grid-hd-mul"),$("tbody:first",e.gridheader).append(a),$("tbody:first",e.f.gridheader).append(l),$(r).each(function(t,i){if((i.frozen?l:a).append(e._createHeaderCell(i)),i.__leaf){var n=i._width;i.frozen?e.f.gridtablewidth+=(parseInt(n)?parseInt(n):0)+1:e.gridtablewidth+=(parseInt(n)?parseInt(n):0)+1}})}if(e._columnMaxLevel>0){var s=t.headerRowHeight*e._columnMaxLevel;e.gridheader.add(e.f.gridheader).height(s),t.rownumbers&&t.frozenRownumbers&&e.f.gridheader.find("td:first").height(s)}e._updateFrozenWidth(),$("div:first",e.gridheader).width(e.gridtablewidth+40)},_initBuildPopup:function(){var e=this,t=this.options;if($(":checkbox",e.popup).unbind(),$("tbody tr",e.popup).remove(),$(e.columns).each(function(t,i){if(!i.issystem&&0!=i.isAllowHide){var n='checked="checked"';i._hide&&(n="");var r=i.display;$("tbody",e.popup).append('<tr><td class="l-column-left"><input type="checkbox" '+n+' class="l-checkbox" columnindex="'+t+'"/></td><td class="l-column-right">'+r+"</td></tr>")}}),$.fn.ligerCheckBox&&$("input:checkbox",e.popup).ligerCheckBox({onBeforeClick:function(i){return!i.checked||!($("input:checked",e.popup).length<=t.minColToggle)}}),t.allowHideColumn){$("tr",e.popup).hover(function(){$(this).addClass("l-popup-row-over")},function(){$(this).removeClass("l-popup-row-over")});var i=function(){if($("input:checked",e.popup).length+1<=t.minColToggle)return!1;e.toggleCol(parseInt($(this).attr("columnindex")),this.checked,!0)};$.fn.ligerCheckBox?$(":checkbox",e.popup).bind("change",i):$(":checkbox",e.popup).bind("click",i)}},_initHeight:function(){var e=this,t=this.options;"auto"==t.height&&(e.gridbody.height("auto"),e.f.gridbody.height("auto")),t.width&&e.grid.width(t.width),e._onResize.call(e)},_initFootbar:function(){var e=this,t=this.options;if(t.usePager){if(t.pagerRender)return void e.toolbar.html(t.pagerRender.call(e));if(t.scrollToPage)return void e.toolbar.hide();var i="",n=-1;$(t.pageSizeOptions).each(function(e,r){t.pageSize==r&&(n=e),i+="<option value='"+r+"'  >"+r+"</option>"}),$(".l-bar-selectpagesize",e.toolbar).append("<select name='rp'>"+i+"</select>"),-1!=n&&($(".l-bar-selectpagesize select",e.toolbar)[0].selectedIndex=n),t.switchPageSizeApplyComboBox&&$.fn.ligerComboBox&&$(".l-bar-selectpagesize select",e.toolbar).ligerComboBox({onBeforeSelect:function(){return!(t.url&&e.isDataChanged&&!confirm(t.isContinueByDataChanged))},width:45})}else e.toolbar.hide()},_searchData:function(e,t){for(var i=(this.options,new Array),n=0;n<e.length;n++)t(e[n],n)&&(i[i.length]=e[n]);return i},_clearGrid:function(){var e=this;this.options;e._fixRows();for(var t in e.rows){var i=$(e.getRowObj(e.rows[t]));e.enabledFrozen()&&(i=i.add(e.getRowObj(e.rows[t],!0))),i.unbind()}e.gridbody.html(""),e.f.gridbody.html(""),e.recordNumber=0,e.records={},e.rows=[],e._fixRows(),e.selected=[],e.totalNumber=0,e.editorcounter=0},_fixRows:function(){var e=this;this.options;if(e.rows)for(var t in e.rows)$.isFunction(e.rows[t])&&delete e.rows[t]},_fillGridBody:function(e,t,i){var n=this,r=this.options,o="scrollappend"==i?[]:['<div class="l-grid-body-inner"><table class="l-grid-body-table" cellpadding=0 cellspacing=0><tbody>'];if(n.enabledGroup()){var a=[],l=[];n.groups=l;for(var s in e){var d=e[s],c=d[r.groupColumnName],u=$.inArray(c,a);-1==u&&(a.push(c),u=a.length-1,l.push([])),l[u].push(d)}$(l).each(function(e,i){1==l.length&&o.push('<tr class="l-grid-grouprow l-grid-grouprow-last l-grid-grouprow-first"'),e==l.length-1?o.push('<tr class="l-grid-grouprow l-grid-grouprow-last"'):0==e?o.push('<tr class="l-grid-grouprow l-grid-grouprow-first"'):o.push('<tr class="l-grid-grouprow"'),o.push(' groupindex"='+e+'" >'),o.push('<td colSpan="'+n.columns.length+'" class="l-grid-grouprow-cell">'),o.push('<span class="l-grid-group-togglebtn">&nbsp;&nbsp;&nbsp;&nbsp;</span>'),r.groupRender?o.push(r.groupRender(a[e],i,r.groupColumnDisplay)):o.push(r.groupColumnDisplay+":"+a[e]),o.push("</td>"),o.push("</tr>"),o.push(n._getHtmlFromData(i,t)),n.isTotalSummary()&&o.push(n._getTotalSummaryHtml(i,"l-grid-totalsummary-group",t))})}else o.push(n._getHtmlFromData(e,t));if("scrollappend"==!i&&o.push("</tbody></table></div>"),"scrollappend"==i?(t?n.f.gridbody:n.gridbody).find("tbody:first").append(o.join("")):(t?n.f.gridbody:n.gridbody).html(o.join("")),t&&(n.f.gridbody.find(">l-jplace").remove(),n.f.gridbody.append('<div class="l-jplace"></div>')),r.usePager&&r.scrollToPage&&!r.scrollToAppend){var h=t?n.f.gridbody.find("> .l-grid-body-inner"):n.gridbody.find("> .l-grid-body-inner"),p=h.find("> .l-scrollreplacetop");p=p.length?p:$('<div class="l-scrollreplacetop"></div>').prependTo(h),p.css("width","80%").height(n.lastScrollTop),p=h.find("> .l-scrollreplacebottom"),p=p.length?p:$('<div class="l-scrollreplacebottom"></div>').appendTo(h),p.css("width","80%").height((r.pageCount-r.newPage)*n._getOnePageHeight())}n.enabledGroup()||n._bulidTotalSummary(t),$("> div:first",n.gridbody).width(n.gridtablewidth),n._onResize()},_showData:function(e){var t=this,i=this.options;t.changedCells={};var n=t.currentData[i.root];if(i.usePager&&("server"==i.dataAction&&t.data&&t.data[i.record]?i.total=t.data[i.record]:t.filteredData&&t.filteredData[i.root]?i.total=t.filteredData[i.root].length:t.data&&t.data[i.root]?i.total=t.data[i.root].length:n&&(i.total=n.length),i.page=i.newPage,i.total||(i.total=0),i.page||(i.page=1),i.pageCount=Math.ceil(i.total/i.pageSize),i.pageCount||(i.pageCount=1),i.scrollToPage||t._buildPager()),$(".l-bar-btnloading:first",t.toolbar).removeClass("l-bar-btnloading"),0!=t.trigger("beforeShowData",[t.currentData])){if("scrollappend"!=e&&t._clearGrid(),t.isDataChanged=!1,!n||!n.length)return t.gridview.addClass("l-grid-empty"),$(t.element).addClass("l-empty"),$("<div></div>").addClass("l-grid-body-inner").appendTo(t.gridbody).css({width:t.gridheader.find(">div:first").width(),height:t.gridbody.height()}),i.pagerRender?void t.toolbar.html(i.pagerRender.call(t)):void t._onResize.ligerDefer(t,50);if(t.gridview.removeClass("l-grid-empty"),$(t.element).removeClass("l-empty"),$(".l-bar-btnload:first span",t.toolbar).removeClass("l-disabled"),t._updateGridData(),t.enabledFrozen()&&t._fillGridBody(t.rows,!0,e),t._fillGridBody(t.rows,!1,e),t.trigger("SysGridHeightChanged"),"scroll"==e&&t.trigger("sysScrollLoaded"),i.totalRender&&($(".l-panel-bar-total",t.element).remove(),$(".l-panel-bar",t.element).before('<div class="l-panel-bar-total">'+i.totalRender(t.data,t.filteredData)+"</div>")),i.mouseoverRowCssClass)for(var r in t.rows){var o=$(t.getRowObj(t.rows[r]));t.enabledFrozen()&&(o=o.add(t.getRowObj(t.rows[r],!0))),o.bind("mouseover.gridrow",function(){t._onRowOver(this,!0)}).bind("mouseout.gridrow",function(){t._onRowOver(this,!1)})}if(t._fixHeight(),i.pagerRender)return void t.toolbar.html(i.pagerRender.call(t));t.gridbody.trigger("scroll.grid"),t.trigger("afterShowData",[t.currentData])}},_fixHeight:function(){var e=this,t=this.options;if(!t.fixedCellHeight&&t.frozen){var i,n;for(var r in e.columns){var o=e.columns[r];if(i&&n)break;!o.frozen||i?o.frozen||n||(n=o):i=o}if(i&&n)for(var a in e.records){var l=e.getCellObj(a,i),s=e.getCellObj(a,n),d=Math.max($(l).height(),$(s).height());$(l).add(s).height(d)}}},_getRowDomId:function(e,t){return this.id+"|"+(t?"1":"2")+"|"+e.__id},_getCellDomId:function(e,t){return this._getRowDomId(e,t.frozen)+"|"+t.__id},_getHtmlFromData:function(e,t){if(!e)return"";for(var i=this,n=this.options,r=[],o=0,a=e.length;o<a;o++){var l=e[o],s=l.__id;if(l){if(r.push("<tr"),r.push(' id="'+i._getRowDomId(l,t)+'"'),r.push(' class="l-grid-row'),!t&&i.enabledCheckbox()&&n.isChecked&&n.isChecked(l)?(i.select(l),r.push(" l-selected")):i.isSelected(l)?r.push(" l-selected"):n.isSelected&&n.isSelected(l)&&(i.select(l),r.push(" l-selected")),l.__index%2==1&&n.alternatingRow&&r.push(" l-grid-row-alt"),n.rowClsRender){var d=n.rowClsRender(l,s);d&&r.push(" "+d)}if(r.push('" '),n.rowAttrRender&&r.push(n.rowAttrRender(l,s)),n.tree&&i.collapsedRows&&i.collapsedRows.length){var c=function(){for(var e=i.getParent(l);e;){if(-1!=$.inArray(e,i.collapsedRows))return!0;e=i.getParent(e)}return!1};c()&&r.push(' style="display:none;" ')}else if(n.tree&&n.tree.isExtend){var c=function(){for(var e=i.getParent(l);e;){if(0==n.tree.isExtend(e))return!0;e=i.getParent(e)}return!1};c()&&r.push(' style="display:none;" ')}r.push(">"),$(i.columns).each(function(e,o){if(t==o.frozen){if(r.push("<td"),r.push(' id="'+i._getCellDomId(l,this)+'"'),this.isrownumber)return r.push(' class="l-grid-row-cell l-grid-row-cell-rownumbers" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),n.fixedCellHeight?r.push(' style = "height:'+n.rowHeight+'px;" '):r.push(' style = "min-height:'+n.rowHeight+'px;" '),void r.push(">"+(parseInt(l.__index)+1)+"</div></td>");if(this.ischeckbox)return r.push(' class="l-grid-row-cell l-grid-row-cell-checkbox" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),n.fixedCellHeight?r.push(' style = "height:'+n.rowHeight+'px;" '):r.push(' style = "min-height:'+n.rowHeight+'px;" '),r.push(">"),r.push('<span class="l-grid-row-cell-btn-checkbox"></span>'),void r.push("</div></td>");if(this.isdetail)return r.push(' class="l-grid-row-cell l-grid-row-cell-detail" style="width:'+this.width+'px"><div class="l-grid-row-cell-inner"'),n.fixedCellHeight?r.push(' style = "height:'+n.rowHeight+'px;" '):r.push(' style = "min-height:'+n.rowHeight+'px;" '),r.push(">"),n.isShowDetailToggle&&!n.isShowDetailToggle(l)||r.push('<span class="l-grid-row-cell-detailbtn"></span>'),void r.push("</div></td>");var a=this._width;r.push(' class="l-grid-row-cell '),i.changedCells[s+"_"+this.__id]&&r.push("l-grid-row-cell-edited "),this.islast&&r.push("l-grid-row-cell-last "),r.push('"'),r.push(' style = "'),r.push("width:"+a+"px; "),o._hide&&r.push("display:none;"),r.push(' ">'),r.push(i._getCellHtml(l,o)),r.push("</td>")}}),r.push("</tr>")}}return r.join("")},_getCellHtml:function(e,t){var i=this,n=this.options;if(t.isrownumber)return'<div class="l-grid-row-cell-inner">'+(parseInt(e.__index)+1)+"</div>";var r=[];r.push('<div class="l-grid-row-cell-inner"'),r.push(' style = "width:'+parseInt(t._width-8)+"px;"),n.fixedCellHeight&&r.push("height:"+n.rowHeight+"px;"),r.push("min-height:"+n.rowHeight+"px; "),t.align&&r.push("text-align:"+t.align+";");var o=i._getCellContent(e,t);return r.push('">'+o+"</div>"),r.join("")},_setValueByName:function(e,t,i){if(!e||!t)return null;if(-1==t.indexOf("."))e[t]=i;else try{new Function("data,value","data."+t+"=value;")(e,i)}catch(e){}},_getValueByName:function(e,t){if(!e||!t)return null;if(-1==t.indexOf("."))return e[t];try{return new Function("data","return data."+t+";")(e)}catch(e){return null}},_getCellContent:function(e,t){var i=this,n=this.options;if(!e||!t)return"";if(t.isrownumber)return parseInt(e.__index)+1;var r=(e.__id,e.__index),o=i._getValueByName(e,t.name),a=i._getValueByName(e,t.textField),l="";return t.render?l=t.render.call(i,e,r,o,t):n.formatters[t.type]?l=n.formatters[t.type].call(i,o,t):null!=a?l=a.toString():null!=o&&(l=o.toString()),n.tree&&(null!=n.tree.columnName&&n.tree.columnName==t.name||null!=n.tree.columnId&&n.tree.columnId==t.id)&&(l=i._getTreeCellHtml(l,e)),l||""},_getTreeCellHtml:function(e,t){var i=t.__level,n=this,r=this.options,o=null==n.collapsedRows?r.tree.isExtend(t):-1==$.inArray(t,n.collapsedRows||[]),a=r.tree.isParent(t),l="";i=parseInt(i)||1;for(var s=1;s<i;s++)l+="<div class='l-grid-tree-space'></div>";return l+=o&&a?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-open'></div>":a?"<div class='l-grid-tree-space l-grid-tree-link l-grid-tree-link-close'></div>":"<div class='l-grid-tree-space'></div>",l+="<span class='l-grid-tree-content'>"+e+"</span>"},_applyEditor:function(e){var t=this,i=this.options,n=e,r=n.id.split("|"),o=r[r.length-1],a=t._columns[o],l=$(n).parent(),s=t.getRow(l[0]),d=s.__id,c=s.__index;if(a&&a.editor){var u=a.name;a.columnindex;if(a.editor.type&&i.editors[a.editor.type]){var h=t._getValueByName(s,u),p={record:s,value:h,column:a,rowindex:c};if(a.textField&&(p.text=t._getValueByName(s,a.textField)),0==t.trigger("beforeEdit",[p]))return!1;t.lastEditRow=s,liger.lastEditGrid=t;var g=i.editors[a.editor.type],f=$(n),v=($(n).offset(),$(n).width()),m=$(n).height(),b=$("<div class='l-grid-editor'></div>").appendTo(t.grid),y=0,w=0,x=f.position(),C=t.gridbody.position(),_=t.gridview2.position(),D=(i.toolbar?t.topbar.parent().outerHeight():0)+(i.title?t.header.outerHeight():0),y=x.left+C.left+_.left,w=x.top+C.top+_.top+D;f.html(""),t.setCellEditing(s,a,!0);var T=!!(window.ActiveXObject||"ActiveXObject"in window),k=0==$.browser.version.indexOf("8");T?(m-=k?1:2,w-=1,y-=1):$.browser.mozilla?(m-=1,w-=1,y-=1):$.browser.safari?w-=1:m-=1,y+=i.editorLeftDiff||0,w+=i.editorTopDiff||0,m+=i.editorHeightDiff||0,b.css({left:y,top:w}).show(),a.textField&&(p.text=t._getValueByName(s,a.textField));var S=t._createEditor(g,b,p,v,m-1);t.editor={editing:!0,editor:g,input:S,editParm:p,container:b},t.unbind("sysEndEdit"),t.bind("sysEndEdit",function(){var e=g.getValue(S,p);a.textField&&g.getText&&(p.text=g.getText(S,p)),g.getSelected&&(p.selected=g.getSelected(S,p)),e!=h&&($(n).addClass("l-grid-row-cell-edited"),t.changedCells[d+"_"+a.__id]=!0,p.value=e),a.editor.onChange&&a.editor.onChange.call(S,p),t._checkEditAndUpdateCell(p)&&a.editor.onChanged&&a.editor.onChanged.call(S,p)})}}},_checkEditAndUpdateCell:function(e){var t=this;this.options;if(0==t.trigger("beforeSubmitEdit",[e]))return!1;var i=e.column;return e.text&&i.textField&&t._setValueByName(e.record,i.textField,e.text),t.updateCell(i,e.value,e.record),(i.render||t.enabledTotal())&&t.reRender({column:i}),t.reRender({rowdata:e.record}),!0},_getCurrentPageData:function(e){var t=this.options,n={};if(n[t.root]=[],!e||!e[t.root]||!e[t.root].length)return n[t.record]=0,n;for(n[t.record]=e[t.root].length,t.newPage||(t.newPage=1),i=(t.newPage-1)*t.pageSize;i<e[t.root].length&&i<t.newPage*t.pageSize;i++)n[t.root].push(e[t.root][i]);return n},_compareData:function(e,t,i,n){var r=this,o=this.options,a=e[i],l=t[i];return null==a&&null!=l?1:null==a&&null==l?0:null!=a&&null==l?-1:o.sorters[n]?o.sorters[n].call(r,a,l):a<l?-1:a>l?1:0},_getTotalInfo:function(e,t){var i=this.options;try{if(!e.totalSummary)return null;var n=0,r=0,o=0,a=0,l=0;if(t&&t.length){l=parseFloat(t[0][e.name]),a=parseFloat(t[0][e.name]);for(var s=0;s<t.length;s++)if("delete"!=t[s][i.statusName]){r+=1;var d=t[s][e.name];"string"==typeof d&&(d=d.replace(/\$|\,/g,"")),d=parseFloat(d),d&&(n+=d,d>l&&(l=d),d<a&&(a=d))}o=1*n/t.length}return{sum:n,count:r,avg:o,min:a,max:l}}catch(e){return{}}},_getTotalCellContent:function(e,t){var i=this,n=(this.options,[]);if(e.totalSummary){var r=function(e){for(var t=0;t<l.length;t++)if(l[t].toLowerCase()==e.toLowerCase())return!0;return!1},o=i._getTotalInfo(e,t);if(e.totalSummary.render){var a=e.totalSummary.render(o,e,i.data);n.push(a)}else if(e.totalSummary.type&&o){var l=e.totalSummary.type.split(",");r("sum")&&n.push("<div>Sum="+o.sum.toFixed(2)+"</div>"),r("tsum")&&n.push("<div>"+sum.toFixed(0)+"</div>"),r("count")&&n.push("<div>Count="+o.count+"</div>"),r("max")&&n.push("<div>Max="+o.max.toFixed(2)+"</div>"),r("min")&&n.push("<div>Min="+o.min.toFixed(2)+"</div>"),r("avg")&&n.push("<div>Avg="+o.avg.toFixed(2)+"</div>")}}return n.join("")},_getTotalSummaryHtml:function(e,t,i){var n=this,r=(this.options,[]);return t?r.push('<tr class="l-grid-totalsummary '+t+'">'):r.push('<tr class="l-grid-totalsummary">'),$(n.columns).each(function(t,o){if(this.frozen==i){if(this.isrownumber)return void r.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-rownumbers" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.ischeckbox)return void r.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-checkbox" style="width:'+this.width+'px"><div>&nbsp;</div></td>');if(this.isdetail)return void r.push('<td class="l-grid-totalsummary-cell l-grid-totalsummary-cell-detail" style="width:'+this.width+'px"><div>&nbsp;</div></td>');r.push('<td class="l-grid-totalsummary-cell'),this.islast&&r.push(" l-grid-totalsummary-cell-last"),r.push('" '),r.push('id="'+n.id+"|total"+n.totalNumber+"|"+o.__id+'" '),r.push('width="'+this._width+'" '),columnname=this.columnname,columnname&&r.push('columnname="'+columnname+'" '),r.push('columnindex="'+t+'" '),r.push('><div class="l-grid-totalsummary-cell-inner"'),o.align&&r.push(' style="text-Align:'+o.align+';"'),r.push(">"),r.push(n._getTotalCellContent(o,e)),r.push("</div></td>")}}),r.push("</tr>"),i||n.totalNumber++,r.join("")},_bulidTotalSummary:function(e){var t=this,i=this.options;if(!t.isTotalSummary())return!1;if(!t.currentData||0==t.currentData[i.root].length)return!1
;var n=$(t._getTotalSummaryHtml(t.currentData[i.root],null,e));$("tbody:first",e?t.f.gridbody:t.gridbody).append(n),e?t.totalRow1=n:t.totalRow2=n},updateTotalSummary:function(){var e=this;this.options;e.reRender({totalOnly:!0})},_buildPager:function(){var e=this,t=this.options;if(!t.pagerRender){$(".pcontrol input",e.toolbar).val(t.page),t.pageCount||(t.pageCount=1),$(".pcontrol span",e.toolbar).html(t.pageCount);var i=parseInt((t.page-1)*t.pageSize)+1,n=parseInt(i)+parseInt(t.pageSize)-1;t.total||(t.total=0),t.total<n&&(n=t.total),t.total||(i=n=0),i<0&&(i=0),n<0&&(n=0);var r=t.pageStatMessage;r=r.replace(/{from}/,i),r=r.replace(/{to}/,n),r=r.replace(/{total}/,t.total),r=r.replace(/{pagesize}/,t.pageSize),$(".l-bar-text",e.toolbar).html(r),t.total||$(".l-bar-btnfirst span,.l-bar-btnprev span,.l-bar-btnnext span,.l-bar-btnlast span",e.toolbar).addClass("l-disabled"),t.hideLoadButton&&($(".l-bar-btnload:first",e.toolbar).parent().hide(),$(".l-bar-btnload:first",e.toolbar).parent().next().hide()),1==t.page?($(".l-bar-btnfirst span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).addClass("l-disabled")):t.page>t.pageCount&&t.pageCount>0&&($(".l-bar-btnfirst span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnprev span",e.toolbar).removeClass("l-disabled")),t.page==t.pageCount?($(".l-bar-btnlast span",e.toolbar).addClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).addClass("l-disabled")):t.page<t.pageCount&&t.pageCount>0&&($(".l-bar-btnlast span",e.toolbar).removeClass("l-disabled"),$(".l-bar-btnnext span",e.toolbar).removeClass("l-disabled"))}},_getRowIdByDomId:function(e){return e.split("|")[2]},_getRowByDomId:function(e){return this.records[this._getRowIdByDomId(e)]},_isEditing:function(e){var t=this;if(e.hasClass("l-box-dateeditor")||e.hasClass("l-box-select"))return!0;if(e.hasClass("l-dialog")){var i=[];if(e.find(".l-dialog").each(function(){var e=$(this).attr("ligeruiid");e&&i.push(e)}),t._editorIncludeCotrols(i))return!0}return!1},_getSrcElementByEvent:function(e){var t=this,i=e.target||e.srcElement,n=$(i).parents().add(i),r=function(e){for(var t=0,i=n.length;t<i;t++)if("string"==typeof e){if($(n[t]).hasClass(e))return n[t]}else if("object"==typeof e&&n[t]==e)return n[t];return null};if(r("l-grid-editor"))return{editing:!0,editor:r("l-grid-editor")};if(-1==n.index(this.element))return t._isEditing(n)?{editing:!0}:{out:!0};var o=!1;if(n.hasClass("l-grid-detailpanel")&&t.detailrows)for(var a=0,l=t.detailrows.length;a<l;a++)if(-1!=n.index(t.detailrows[a])){o=!0;break}var s={grid:r("l-panel"),indetail:o,frozen:!!r(t.gridview1[0]),header:r("l-panel-header"),gridheader:r("l-grid-header"),gridbody:r("l-grid-body"),total:r("l-panel-bar-total"),popup:r("l-grid-popup"),toolbar:r("l-panel-bar")};if(s.gridheader&&(s.hrow=r("l-grid-hd-row"),s.hcell=r("l-grid-hd-cell"),s.hcelltext=r("l-grid-hd-cell-text"),s.checkboxall=r("l-grid-hd-cell-checkbox"),s.hcell)){var d=s.hcell.id.split("|")[2];s.column=t._columns[d]}return s.gridbody&&(s.row=r("l-grid-row"),s.cell=r("l-grid-row-cell"),s.checkbox=r("l-grid-row-cell-btn-checkbox"),s.groupbtn=r("l-grid-group-togglebtn"),s.grouprow=r("l-grid-grouprow"),s.detailbtn=r("l-grid-row-cell-detailbtn"),s.detailrow=r("l-grid-detailpanel"),s.totalrow=r("l-grid-totalsummary"),s.totalcell=r("l-grid-totalsummary-cell"),s.rownumberscell=$(s.cell).hasClass("l-grid-row-cell-rownumbers")?s.cell:null,s.detailcell=$(s.cell).hasClass("l-grid-row-cell-detail")?s.cell:null,s.checkboxcell=$(s.cell).hasClass("l-grid-row-cell-checkbox")?s.cell:null,s.treelink=r("l-grid-tree-link"),s.editor=r("l-grid-editor"),s.row&&(s.data=this._getRowByDomId(s.row.id)),s.cell&&(s.editing=$(s.cell).hasClass("l-grid-row-cell-editing")),s.editor&&(s.editing=!0),s.editing&&(s.out=!1)),s.toolbar&&(s.first=r("l-bar-btnfirst"),s.last=r("l-bar-btnlast"),s.next=r("l-bar-btnnext"),s.prev=r("l-bar-btnprev"),s.load=r("l-bar-btnload"),s.button=r("l-bar-button")),s},_editorIncludeCotrols:function(e){var t=this;this.options;if(!e||!e.length)return!1;if(t.editor&&t.editor.input){if(t._controlIncludeCotrols(t.editor.input,e))return!0}else if(t.editors)for(var i in t.editors)if(t.editors[i])for(var n in t.editors[i]){var r=t.editors[i][n];if(r&&r.input&&t._controlIncludeCotrols(r.input,e))return!0}return!1},_controlIncludeCotrols:function(e,t){this.options;if(!e||!e.includeControls||!e.includeControls.length)return!1;for(var i=0;i<e.includeControls.length;i++){var n=e.includeControls[i];if(-1!=$.inArray(n.id,t))return!0}return!1},_getOnePageHeight:function(){var e=this.options;return(parseFloat(e.rowHeight||24)+1)*parseInt(e.pageSize)},_setEvent:function(){var e=this,t=this.options;e.grid.bind("mousedown.grid",function(t){e._onMouseDown.call(e,t)}),e.grid.bind("dblclick.grid",function(t){e._onDblClick.call(e,t)}),e.grid.bind("contextmenu.grid",function(t){return e._onContextmenu.call(e,t)}),$(document).bind("mouseup.grid",function(t){e._onMouseUp.call(e,t)}),$(document).bind("click.grid",function(t){e._onClick.call(e,t)}),$(window).bind("resize.grid",function(t){e._onResize.call(e)}),$(document).bind("keydown.grid",function(t){t.ctrlKey&&(e.ctrlKey=!0)}),$(document).bind("keyup.grid",function(t){delete e.ctrlKey}),e.gridbody.bind("scroll.grid",function(){var i=e.gridbody.scrollLeft(),n=e.gridbody.scrollTop();if(null!=i&&(e.gridheader[0].scrollLeft=i),null!=n&&(e.f.gridbody[0].scrollTop=n),t.scrollToPage&&t.usePager&&!e.loading){var r=e.gridbody.find(".l-grid-body-inner:first").height(),o=n+e.gridbody.height();if(t.scrollToAppend)t.newPage!=t.pageCount&&o>=r&&e.reload(t.newPage+1,"scrollappend");else{var a=o>=r?t.pageCount:Math.ceil(o/e._getOnePageHeight());e.scrollLoading||(e.scrollLoading=!0,e.lastScrollTop=n,e.unbind("sysScrollLoaded"),e.bind("sysScrollLoaded",function(){e.gridbody.scrollTop(n),setTimeout(function(){e.scrollLoading=!1},500)}),e.scrollLoading=!0,e.reload(a,"scroll"))}}e.trigger("SysGridHeightChanged")}),$("select",e.toolbar).change(function(){if(e.isDataChanged&&"local"!=t.dataAction&&!confirm(t.isContinueByDataChanged))return!1;t.newPage=1,t.pageSize=this.value,e.loadData("local"!=t.dataAction&&t.where)}),$("span.pcontrol :text",e.toolbar).blur(function(t){e.changePage("input")}),$("div.l-bar-button",e.toolbar).hover(function(){$(this).addClass("l-bar-button-over")},function(){$(this).removeClass("l-bar-button-over")}),$.fn.ligerDrag&&t.colDraggable&&(e.colDroptip=$("<div class='l-drag-coldroptip' style='display:none'><div class='l-drop-move-up'></div><div class='l-drop-move-down'></div></div>").appendTo("body"),e.gridheader.add(e.f.gridheader).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(t,i){var n=e._getSrcElementByEvent(i);if(n.hcell&&n.column){var r=$(".l-grid-hd-cell-text:first",n.hcell).html(),o=$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div></div>").appendTo("body");return o.append(r),o}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;this.set("cursor","default");var n=e._getSrcElementByEvent(i);if(!n.hcell||!n.column||n.column.issystem||n.hcelltext)return!1;if(-1!=$(n.hcell).css("cursor").indexOf("resize"))return!1;this.draggingColumn=n.column,e.coldragging=!0;var r=e.grid.offset();this.validRange={top:r.top,bottom:r.top+e.gridheader.height(),left:r.left-10,right:r.left+e.grid.width()+10}},onDrag:function(i,n){this.set("cursor","default");var r=this.draggingColumn;if(!r)return!1;if(e.colresizing)return!1;null==e.colDropIn&&(e.colDropIn=-1);var o=n.pageX,a=n.pageY,l=!1,s=(e.grid.offset(),this.validRange);if(o<s.left||o>s.right||a>s.bottom||a<s.top)return e.colDropIn=-1,e.colDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no");for(var d in e._columns){var c=e._columns[d];if(r!=c){if(!c.issystem){var u=c.__level==r.__level,h=!!u&&!!l;if(r.frozen!=c.frozen&&(h=!c.frozen),-1==e.colDropIn||e.colDropIn==d){var p=document.getElementById(c.__domid),g=$(p).offset(),f={top:g.top,bottom:g.top+$(p).height(),left:g.left-10,right:g.left+10};if(h){var v=$(p).width();f.left+=v,f.right+=v}if(o>f.left&&o<f.right&&a>f.top&&a<f.bottom){var m=t.headerRowHeight;c.__rowSpan&&(m*=c.__rowSpan),e.colDroptip.css({left:f.left+5,top:f.top-9,height:m+18}).show(),e.colDropIn=d,e.colDropDir=h?"right":"left",this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no").addClass("l-drop-yes");break}-1!=e.colDropIn&&(e.colDropIn=-1,e.colDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes").addClass("l-drop-no"))}}}else l=!0}},onStopDrag:function(t,i){var n=this.draggingColumn;e.coldragging=!1,-1!=e.colDropIn&&(e.changeCol.ligerDefer(e,0,[n,e.colDropIn,"right"==e.colDropDir]),e.colDropIn=-1),e.colDroptip.hide(),this.set("cursor","default")}})),$.fn.ligerDrag&&t.rowDraggable&&(e.rowDroptip=$("<div class='l-drag-rowdroptip' style='display:none'></div>").appendTo("body"),e.gridbody.add(e.f.gridbody).ligerDrag({revert:!0,animate:!1,proxyX:0,proxyY:0,proxy:function(i,n){if(e._getSrcElementByEvent(n).row){var r=t.draggingMessage.replace(/{count}/,i.draggingRows?i.draggingRows.length:1);return t.rowDraggingRender&&(r=t.rowDraggingRender(i.draggingRows,i,e)),$("<div class='l-drag-proxy' style='display:none'><div class='l-drop-icon l-drop-no'></div>"+r+"</div>").appendTo("body")}},onRevert:function(){return!1},onRendered:function(){this.set("cursor","default"),e.children[this.id]=this},onStartDrag:function(t,i){if(2==i.button)return!1;if(e.colresizing)return!1;if(!e.columns.length)return!1;this.set("cursor","default");var n=e._getSrcElementByEvent(i);if(!n.cell||!n.data||n.checkbox)return!1;var r=n.cell.id.split("|"),o=e._columns[r[r.length-1]];if(!(n.rownumberscell||n.detailcell||n.checkboxcell||o==e.columns[0]))return!1;if(e.enabledCheckbox()){if(this.draggingRows=e.getSelecteds(),!this.draggingRows||!this.draggingRows.length)return!1}else this.draggingRows=[n.data];this.draggingRow=n.data,this.set("cursor","move"),e.rowdragging=!0,this.validRange={top:e.gridbody.offset().top,bottom:e.gridbody.offset().top+e.gridbody.height(),left:e.grid.offset().left-10,right:e.grid.offset().left+e.grid.width()+10}},onDrag:function(i,n){var r=this.draggingRow;if(!r)return!1;var o=this.draggingRows?this.draggingRows:[r];if(e.colresizing)return!1;null==e.rowDropIn&&(e.rowDropIn=-1);var a=n.pageX,l=n.pageY,s=!1,d=this.validRange;if(a<d.left||a>d.right||l>d.bottom||l<d.top)return e.rowDropIn=-1,e.rowDroptip.hide(),void this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes l-drop-add").addClass("l-drop-no");for(var c in e.rows){var u=e.rows[c],h=u.__id;if(r==u&&(s=!0),-1==$.inArray(u,o)){var p=!!s;if(-1==e.rowDropIn||e.rowDropIn==h){var g=e.getRowObj(h),f=$(g).offset(),v={top:f.top-4,bottom:f.top+$(g).height()+4,left:e.grid.offset().left,right:e.grid.offset().left+e.grid.width()};if(a>v.left&&a<v.right&&l>v.top&&l<v.bottom){var m=f.top;p&&(m+=$(g).height()),e.rowDroptip.css({left:v.left,top:m,width:v.right-v.left}).show(),e.rowDropIn=h,e.rowDropDir=p?"bottom":"top",t.tree&&l>v.top+5&&l<v.bottom-5?(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-yes").addClass("l-drop-add"),e.rowDroptip.hide(),e.rowDropInParent=!0):(this.proxy.find(".l-drop-icon:first").removeClass("l-drop-no l-drop-add").addClass("l-drop-yes"),e.rowDroptip.show(),e.rowDropInParent=!1);break}-1!=e.rowDropIn&&(e.rowDropIn=-1,e.rowDropInParent=!1,e.rowDroptip.hide(),this.proxy.find(".l-drop-icon:first").removeClass("l-drop-yes  l-drop-add").addClass("l-drop-no"))}}}},onStopDrag:function(i,n){var r=this.draggingRows;e.rowdragging=!1;for(var o=0;o<r.length;o++){var a=r[o].children;a&&(r=$.grep(r,function(e,t){return-1==$.inArray(e,a)}))}if(-1!=e.rowDropIn){if(t.tree){var l,s;e.rowDropInParent?s=e.getRow(e.rowDropIn):(l=e.getRow(e.rowDropIn),s=e.getParent(l)),e.appendRange(r,s,l,"bottom"!=e.rowDropDir),e.trigger("rowDragDrop",{rows:r,parent:s,near:l,after:"bottom"==e.rowDropDir})}else e.moveRange(r,e.rowDropIn,"bottom"==e.rowDropDir),e.trigger("rowDragDrop",{rows:r,parent:s,near:e.getRow(e.rowDropIn),after:"bottom"==e.rowDropDir});e.rowDropIn=-1}e.rowDroptip.hide(),this.set("cursor","default")}}))},_onRowOver:function(e,t){if(!l.draggable.dragging){var i=this,n=this.options,r=i.getRow(e),o=t?"addClass":"removeClass";t&&i.editor.editing&&$("tr."+n.mouseoverRowCssClass,i.gridview).removeClass(n.mouseoverRowCssClass),i.enabledFrozen()&&$(i.getRowObj(r,!0))[o](n.mouseoverRowCssClass),$(i.getRowObj(r,!1))[o](n.mouseoverRowCssClass)}},_onMouseUp:function(e){var t=this;this.options;if(l.draggable.dragging){var i=t._getSrcElementByEvent(e);i.hcell&&i.column?t.trigger("dragdrop",[{type:"header",column:i.column,cell:i.hcell},e]):i.row&&t.trigger("dragdrop",[{type:"row",record:i.data,row:i.row},e])}},_onMouseDown:function(e){this.options},_onContextmenu:function(e){var t=this,i=this.options,n=t._getSrcElementByEvent(e);if(n.row){if(i.whenRClickToSelect&&t.select(n.data),t.hasBind("contextmenu"))return t.trigger("contextmenu",[{data:n.data,rowindex:n.data.__index,row:n.row},e])}else if(n.hcell){if(!i.allowHideColumn)return!0;var r=$(n.hcell).attr("columnindex");if(void 0==r)return!0;var o=e.pageX-t.body.offset().left+parseInt(t.body[0].scrollLeft);return r==t.columns.length-1&&(o-=50),t.popup.css({left:o,top:t.gridheader.height()+1}),t.popup.toggle(),!1}},_onDblClick:function(e){var t=this,i=(this.options,t._getSrcElementByEvent(e));i.row&&t.trigger("dblClickRow",[i.data,i.data.__id,i.row])},_onClick:function(e){var t=e.target||e.srcElement,i=this,n=this.options,r=i._getSrcElementByEvent(e);if(r.out)return i.editor.editing&&!$.ligerui.win.masking&&i.endEdit(),void(n.allowHideColumn&&i.popup.hide());if(!r.indetail&&!r.editing)if(i.editor.editing&&i.endEdit(),n.allowHideColumn&&(r.popup||i.popup.hide()),r.checkboxall){var o=$(r.hrow),a=o.hasClass("l-checked");if(0==i.trigger("beforeCheckAllRow",[!a,i.element]))return!1;a?o.removeClass("l-checked"):o.addClass("l-checked"),i.selected=[];for(var l in i.records)a?i.unselect(i.records[l]):i.select(i.records[l]);i.trigger("checkAllRow",[!a,i.element])}else if(r.hcelltext){var s=$(r.hcelltext).parent().parent();if(!n.enabledSort||!r.column)return;if(0==r.column.isSort)return;if(n.url&&"local"!=n.dataAction&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return;var d=$(".l-grid-hd-cell-sort:first",s),c=r.column.name;if(!c)return;d.length>0?d.hasClass("l-grid-hd-cell-sort-asc")?(d.removeClass("l-grid-hd-cell-sort-asc").addClass("l-grid-hd-cell-sort-desc"),s.removeClass("l-grid-hd-cell-asc").addClass("l-grid-hd-cell-desc"),i.trigger("ChangeSort",[c,"desc"]),i.changeSort(c,"desc")):d.hasClass("l-grid-hd-cell-sort-desc")&&(d.removeClass("l-grid-hd-cell-sort-desc").addClass("l-grid-hd-cell-sort-asc"),s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")):(s.removeClass("l-grid-hd-cell-desc").addClass("l-grid-hd-cell-asc"),$(r.hcelltext).after("<span class='l-grid-hd-cell-sort l-grid-hd-cell-sort-asc'>&nbsp;&nbsp;</span>"),i.trigger("ChangeSort",[c,"asc"]),i.changeSort(c,"asc")),$(".l-grid-hd-cell-sort",i.gridheader).add($(".l-grid-hd-cell-sort",i.f.gridheader)).not($(".l-grid-hd-cell-sort:first",s)).remove()}else if(r.detailbtn&&n.detail){var u=r.data,o=$([i.getRowObj(u,!1)]);i.enabledFrozen()&&(o=o.add(i.getRowObj(u,!0)));var l=u.__id;if($(r.detailbtn).hasClass("l-open"))n.detail.onCollapse&&n.detail.onCollapse(u,$(".l-grid-detailpanel-inner:first",h)[0]),o.next("tr.l-grid-detailpanel").hide(),$(r.detailbtn).removeClass("l-open");else{var h=o.next("tr.l-grid-detailpanel");if(h.length>0)return h.show(),n.detail.onExtend&&n.detail.onExtend(u,$(".l-grid-detailpanel-inner:first",h)[0]),$(r.detailbtn).addClass("l-open"),void i.trigger("SysGridHeightChanged");$(r.detailbtn).addClass("l-open");for(var p=0,g=0;g<i.columns.length;g++)i.columns[g].frozen&&p++;var f=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>"),v=$("<tr class='l-grid-detailpanel'><td><div class='l-grid-detailpanel-inner' style='display:none'></div></td></tr>");f.find("div:first").width(i.gridheader.find("div:first").width()-50),f.attr("id",i.id+"|detail|"+l),i.detailrows=i.detailrows||[],i.detailrows.push(f[0]),i.detailrows.push(v[0]);var m=$("div:first",f);m.parent().attr("colSpan",i.columns.length-p),o.eq(0).after(f),p>0&&(v.find("td:first").attr("colSpan",p),o.eq(1).after(v)),n.detail.onShowDetail?(n.detail.onShowDetail(u,m[0],function(){i.trigger("SysGridHeightChanged")}),$("div:first",v).add(m).show().height(n.detail.height||n.detailHeight)):n.detail.render&&(m.append(n.detail.render()),m.show()),i.trigger("SysGridHeightChanged")}}else if(r.groupbtn){var b=$(r.grouprow),y=!0;$(r.groupbtn).hasClass("l-grid-group-togglebtn-close")?($(r.groupbtn).removeClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width("auto")):(y=!1,$(r.groupbtn).addClass("l-grid-group-togglebtn-close"),b.hasClass("l-grid-grouprow-last")&&$("td:first",b).width(i.gridtablewidth));for(var w=b.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel");;){if(0==w.length)break;y?(w.show(),w.hasClass("l-grid-detailpanel")&&!w.prev().find("td.l-grid-row-cell-detail:first span.l-grid-row-cell-detailbtn:first").hasClass("l-open")&&w.hide()):w.hide(),w=w.next(".l-grid-row,.l-grid-totalsummary-group,.l-grid-detailpanel")}i.trigger(y?"groupExtend":"groupCollapse"),i.trigger("SysGridHeightChanged")}else if(r.treelink)i.toggle(r.data);else if(r.row&&i.enabledCheckbox()){var x=!!n.selectRowButtonOnly;if(n.enabledEdit&&(x=!0),"a"==t.tagName.toLowerCase())return;if((r.checkbox||!x)&&0!=n.selectable){var o=$(r.row),a=o.hasClass("l-selected");if(0==i.trigger("beforeCheckRow",[!a,r.data,r.data.__id,r.row]))return!1;var C=a?"unselect":"select";if(i[C](r.data),n.tree&&n.autoCheckChildren)for(var _=i.getChildren(r.data,!0),g=0,D=_.length;g<D;g++)i[C](_[g]);i.trigger("checkRow",[!a,r.data,r.data.__id,r.row])}!r.checkbox&&r.cell&&n.enabledEdit&&n.clickToEdit&&i._applyEditor(r.cell)}else if(r.row&&!i.enabledCheckbox()&&0!=n.selectable)if(r.cell&&n.enabledEdit&&n.clickToEdit&&i._applyEditor(r.cell),$(r.row).hasClass("l-selected")){if(!n.allowUnSelectRow)return void $(r.row).addClass("l-selected-again");i.unselect(r.data)}else i.select(r.data);else if(r.toolbar)if(r.first){if(0==i.trigger("toFirst",[i.element]))return!1;i.changePage("first")}else if(r.prev){if(0==i.trigger("toPrev",[i.element]))return!1;i.changePage("prev")}else if(r.next){if(0==i.trigger("toNext",[i.element]))return!1;i.changePage("next")}else if(r.last){if(0==i.trigger("toLast",[i.element]))return!1;i.changePage("last")}else if(r.load){if($("span",r.load).hasClass("l-disabled"))return!1;if(0==i.trigger("reload",[i.element]))return!1;if(n.url&&i.isDataChanged&&!confirm(n.isContinueByDataChanged))return!1;i.loadData(n.where)}},select:function(e){var t=this,i=this.options,n=t.getRow(e),r=n.__id,o=t.getRowObj(r);if(i.rowSelectable&&0!=t.trigger("beforeSelectRow",[n,r,o])){var a=t.getRowObj(r,!0);if(!t.enabledCheckbox()&&!t.ctrlKey||i.isSingleCheck){for(var l in t.selected){var s=t.selected[l];s.__id in t.records&&($(t.getRowObj(s)).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(t.getRowObj(s,!0)).removeClass("l-selected l-selected-again"))}t.selected=[]}o&&$(o).addClass("l-selected"),a&&$(a).addClass("l-selected"),t.selected[t.selected.length]=n,t.trigger("selectRow",[n,r,o])}},unselect:function(e){var t=this,i=(this.options,t.getRow(e)),n=i.__id,r=t.getRowObj(n),o=t.getRowObj(n,!0);$(r).removeClass("l-selected l-selected-again"),t.enabledFrozen()&&$(o).removeClass("l-selected l-selected-again"),t._removeSelected(i),t.trigger("unSelectRow",[i,n,r])},isSelected:function(e){var t=this,i=(this.options,t.getRow(e));for(var n in t.selected)if(t.selected[n]==i)return!0;return!1},arrayToTree:function(e,t,i){function n(e){return"string"==typeof e&&(e=e.replace(/[.]/g,"").toLowerCase()),e}var r=this.options,o="children";if(r.tree&&(o=r.tree.childrenName),!e||!e.length)return[];for(var a=[],l={},s=e.length,d=0;d<s;d++){var c=e[d],u=n(c[t]);l[u]=c}for(var d=0;d<s;d++){var h=e[d],u=n(h[i]),p=l[u];p?(p[o]=p[o]||[],p[o].push(h)):a.push(h)}return a},_onResize:function(){var e=this,t=this.options;if(t.height&&"auto"!=t.height){var i=$(window).height(),n=0,r=null;if("string"==typeof t.height&&t.height.indexOf("%")>0){var o=e.grid.parent();t.inWindow?(r=i,r-=parseInt($("body").css("paddingTop")),r-=parseInt($("body").css("paddingBottom"))):r=o.height(),n=r*parseInt(t.height)*.01,(t.inWindow||"body"==o[0].tagName.toLowerCase())&&(n-=e.grid.offset().top-parseInt($("body").css("paddingTop")))}else n=parseInt(t.height);n+=t.heightDiff,e.windowHeight=i,e._setHeight(n)}else e._updateHorizontalScrollStatus.ligerDefer(e,10);if(e.enabledFrozen()){var a=e.gridview1.width(),l=e.gridview.width();l-a<=0?e.gridview2.css({width:"auto"}):e.gridview2.css({width:l-a})}e.trigger("SysGridHeightChanged")},showFilter:function(){function e(){var e=o.getData();"server"==n.options.dataType?t(e):i(e)}function t(e){e&&e.rules&&e.rules.length?n.setParm("where",JSON.stringify(e)):n.removeParm("where"),n.loadData()}function i(e){n.loadData($.ligerFilter.getFilterFunction(e))}var n=this;this.options;if(n.winfilter)return void n.winfilter.show();var r=$('<div id="'+n.id+'_filtercontainer"></div>').width(380).height(120).hide(),o=r.ligerFilter({fields:function(){var e=[];return $(n.columns).each(function(){var t={name:this.name,display:this.display},i="int"==this.type||"number"==this.type||"float"==this.type,n="date"==this.type;i&&(t.type="number"),n&&(t.type="date"),this.editor&&(t.editor=this.editor),e.push(t)}),e}()});return o.addRule($(o.element.firstChild)),n.winfilter=$.ligerDialog.open({width:420,height:208,target:r,isResize:!0,top:50,buttons:[{text:"确定",onclick:function(t,i){e(),i.hide()}},{text:"取消",onclick:function(e,t){t.hide()}}]})}}),$.ligerui.controls.Grid.prototype.enabledTotal=$.ligerui.controls.Grid.prototype.isTotalSummary,$.ligerui.controls.Grid.prototype.add=$.ligerui.controls.Grid.prototype.addRow,$.ligerui.controls.Grid.prototype.update=$.ligerui.controls.Grid.prototype.updateRow,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRow,$.ligerui.controls.Grid.prototype.getSelected=$.ligerui.controls.Grid.prototype.getSelectedRow,$.ligerui.controls.Grid.prototype.getSelecteds=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRows=$.ligerui.controls.Grid.prototype.getSelectedRows,$.ligerui.controls.Grid.prototype.getCheckedRowObjs=$.ligerui.controls.Grid.prototype.getSelectedRowObjs,$.ligerui.controls.Grid.prototype.setOptions=$.ligerui.controls.Grid.prototype.set,$.ligerui.controls.Grid.prototype.reload=$.ligerui.controls.Grid.prototype.loadData,$.ligerui.controls.Grid.prototype.refreshSize=$.ligerui.controls.Grid.prototype._onResize,$.ligerui.controls.Grid.prototype.append=$.ligerui.controls.Grid.prototype.appendRange}(jQuery),define("ligerui.ligerGrid",["jquery","ligerui.all","ligerui.base","ligerui.inject","ligerui.ligerResizable","ligerui.ligerCheckBox"],function(){}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof t&&r[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.3.7",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function i(){a.detach().trigger("closed.bs.alert").remove()}var r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e("#"===o?[]:o);t&&t.preventDefault(),a.length||(a=r.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.button"),o="object"==typeof t&&t;r||n.data("bs.button",r=new i(this,o)),"toggle"==t?r.toggle():t&&r.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.7",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();t+="Text",null==o.resetText&&n.data("resetText",n[r]()),setTimeout(e.proxy(function(){n[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target).closest(".btn");t.call(n,"toggle"),e(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.carousel"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;r||n.data("bs.carousel",r=new i(this,o)),"number"==typeof t?r.to(t):a?r[a]():o.interval&&r.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n="prev"==e?-1:1,r=(i+n)%this.$items.length;return this.$items.eq(r)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(t,n){var r=this.$element.find(".item.active"),o=n||this.getItemForDirection(t,r),a=this.interval,l="next"==t?"left":"right",s=this;if(o.hasClass("active"))return this.sliding=!1;var d=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:d,direction:l});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(o)]);u&&u.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:d,direction:l});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,r.addClass(l),o.addClass(l),r.one("bsTransitionEnd",function(){o.removeClass([t,l].join(" ")).addClass("active"),r.removeClass(["active",l].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(h)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),a&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var r=function(i){var n,r=e(this),o=e(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),r.data()),l=r.attr("data-slide-to");l&&(a.interval=!1),t.call(o,a),l&&o.data("bs.carousel").to(l),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(n)}function i(t){return this.each(function(){var i=e(this),r=i.data("bs.collapse"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!r&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),
this.options.toggle&&this.toggle()};n.VERSION="3.3.7",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"))&&t.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(i.call(r,"hide"),t||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var l=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return l.call(this);var s=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(l,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[a](this.$element[0][s])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[i](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION):r.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var r=e(n);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var r=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var r=e(this);r.attr("data-target")||n.preventDefault();var o=t(r),a=o.data("bs.collapse"),l=a?"toggle":r.data();i.call(o,l)})}(jQuery),function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(r).remove(),e(o).each(function(){var n=e(this),r=t(n),o={relatedTarget:this};r.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(r[0],i.target)||(r.trigger(i=e.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new a(this)),"string"==typeof t&&n[t].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.7",a.prototype.toggle=function(n){var r=e(this);if(!r.is(".disabled, :disabled")){var o=t(r),a=o.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var l={relatedTarget:this};if(o.trigger(n=e.Event("show.bs.dropdown",l)),n.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",l))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var r=t(n),a=r.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&r.find(o).trigger("focus"),n.trigger("click");var l=r.find(".dropdown-menu li:not(.disabled):visible a");if(l.length){var s=l.index(i.target);38==i.which&&s>0&&s--,40==i.which&&s<l.length-1&&s++,~s||(s=0),l.eq(s).trigger("focus")}}}};var l=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=l,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,n){return this.each(function(){var r=e(this),o=r.data("bs.modal"),a=e.extend({},i.DEFAULTS,r.data(),"object"==typeof t&&t);o||r.data("bs.modal",o=new i(this,a)),"string"==typeof t?o[t](n):a.show&&o.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.7",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),r&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});r?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),r=n.attr("href"),o=e(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(o,a,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.tooltip"),o="object"==typeof t&&t;!r&&/destroy|hide/.test(t)||(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof t&&r[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var l="hover"==a?"mouseenter":"focusin",s="hover"==a?"mouseleave":"focusout";this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),!i.isInStateTrue())return clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,d=s.test(l);d&&(l=l.replace(s,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(l).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),u=o[0].offsetWidth,h=o[0].offsetHeight;if(d){var p=l,g=this.getPosition(this.$viewport);l="bottom"==l&&c.bottom+h>g.bottom?"top":"top"==l&&c.top-h<g.top?"bottom":"right"==l&&c.right+u>g.width?"left":"left"==l&&c.left-u<g.left?"right":l,o.removeClass(p).addClass(l)}var f=this.getCalculatedOffset(l,c,u,h);this.applyPlacement(f,l);var v=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(i.TRANSITION_DURATION):v()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,a=parseInt(n.css("margin-top"),10),l=parseInt(n.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(l)&&(l=0),t.top+=a,t.left+=l,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var s=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=o&&(t.top=t.top+o-d);var c=this.getViewportAdjustedDelta(i,t,s,d);c.left?t.left+=c.left:t.top+=c.top;var u=/top|bottom/.test(i),h=u?2*c.left-r+s:2*c.top-o+d,p=u?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][p],u)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function n(){"in"!=r.hoverState&&o.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,r=i.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=window.SVGElement&&i instanceof window.SVGElement,a=n?{top:0,left:0}:o?null:t.offset(),l={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,l,s,a)},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var l=t.top-o-a.scroll,s=t.top+o-a.scroll+n;l<a.top?r.top=a.top-l:s>a.top+a.height&&(r.top=a.top+a.height-s)}else{var d=t.left-o,c=t.left+o+i;d<a.left?r.left=a.left-d:c>a.right&&(r.left=a.left+a.width-c)}return r},i.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},i.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.popover"),o="object"==typeof t&&t;!r&&/destroy|hide/.test(t)||(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof t&&r[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.7",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new t(this,o)),"string"==typeof i&&r[i]()})}t.VERSION="3.3.7",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof t&&r[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.3.7",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=i.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var l=e(n);this.activate(t.closest("li"),i),this.activate(l,l.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},i.prototype.activate=function(t,n,r){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),l?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var a=n.find("> .active"),l=r&&e.support.transition&&(a.length&&a.hasClass("fade")||!!n.find("> .fade").length);a.length&&l?a.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),a.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var r=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.affix"),o="object"==typeof t&&t;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.7",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return r<i&&"top";if("bottom"==this.affixed)return null!=i?!(r+this.unpin<=o.top)&&"bottom":!(r+a<=e-n)&&"bottom";var l=null==this.affixed,s=l?r:o.top,d=l?a:t;return null!=i&&r<=i?"top":null!=n&&s+d>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,r=n.top,o=n.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(o=r=n),"function"==typeof r&&(r=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var l=this.getState(a,t,r,o);if(this.affixed!=l){null!=this.unpin&&this.$element.css("top","");var s="affix"+(l?"-"+l:""),d=e.Event(s+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(s).trigger(s.replace("affix","affixed")+".bs.affix")}"bottom"==l&&this.$element.offset({top:a-t-o})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),define("bootstrap.min",function(){}),define("page/score/wait_score",["jquery","Common","Constant","ligerui.ligerGrid","bootstrap.min"],function(e,t,i){var n=null,r=null,o=null,a=null,l=function(){n=e("#maingrid1").ligerGrid({columns:[{display:"姓名",name:"userName",minWidth:80},{display:"班级",name:"className",minWidth:100},{display:"学号/工号",name:"userNo",minWidth:100},{display:"所在支部",name:"teamName",minWidth:100},{display:"支部书记",name:"teamLeader",minWidth:100},{display:"辅导员",name:"teacher",minWidth:100}],url:i.waitScore.queryWaitStudent,parms:{userType:"0"},contentType:"application/json",root:"rows",record:"total",rownumbers:!1,pageParmName:"start",pagesizeParmName:"length",page:0,pageSize:10,width:"100%",height:"97%",onSuccess:function(e,i){t.gridCheck.checkedCustomer=[]},autoCheckChildren:!1}),r=e("#maingrid2").ligerGrid({checkbox:!1,columns:[{display:"姓名",name:"userName",minWidth:80},{display:"班级",name:"className",minWidth:100},{display:"学号/工号",name:"userNo",minWidth:100},{display:"所在支部",name:"teamName",minWidth:100},{display:"支部书记",name:"teamLeader",minWidth:100},{display:"辅导员",name:"teacher",minWidth:100}],url:i.waitScore.queryWaitLeader,parms:{userType:"1"},contentType:"application/json",root:"rows",record:"total",rownumbers:!1,pageParmName:"start",pagesizeParmName:"length",page:0,pageSize:10,width:"100%",height:"97%",onSuccess:function(e,i){t.gridCheck.checkedCustomer=[]},autoCheckChildren:!1}),o=e("#maingrid3").ligerGrid({checkbox:!1,columns:[{display:"姓名",name:"userName",minWidth:80},{display:"班级",name:"className",minWidth:100},{display:"学号/工号",name:"userNo",minWidth:100},{display:"所在支部",name:"teamName",minWidth:100},{display:"支部书记",name:"teamLeader",minWidth:100},{display:"辅导员",name:"teacher",minWidth:100}],url:i.waitScore.queryWaitTeacher,parms:{userType:"2"},contentType:"application/json",root:"rows",record:"total",rownumbers:!1,pageParmName:"start",pagesizeParmName:"length",page:0,pageSize:10,width:"100%",height:"97%",onSuccess:function(e,i){t.gridCheck.checkedCustomer=[]},autoCheckChildren:!1}),a=n,e.ajax({url:i.user.queryTeam,type:"POST",contentType:"application/json",cache:!1,data:{},processData:!1,dataType:"json",success:function(i){if(200==i.code){var n=i.data;e("#teamname").html(""),e("#teamname").append(e('<option value="">全部</option>'));for(var r=0;r<n.length;r++)e("#teamname").append(e('<option value="'+n[r].teamName+'">'+n[r].teamName+"</option>"))}else t.warnMsg(i.message)}}),e.ajax({url:i.user.queryClass,type:"POST",contentType:"application/json",cache:!1,data:{},processData:!1,dataType:"json",success:function(i){if(200==i.code){var n=i.data;e("#classname").html(""),e("#classname").append(e('<option value="">全部</option>'));for(var r=0;r<n.length;r++)e("#classname").append(e('<option value="'+n[r].className+'">'+n[r].className+"</option>"))}else t.warnMsg(i.message)}})};return e('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var i=e(t.target).attr("href");"#student"==i?a=n:"#leader"==i?a=r:"#teacher"==i&&(a=o),a.loadData(n.url)}),e("#bntSearch").click(function(){a.setParm("userName",e("#username").val()),a.setParm("userNo",e("#userno").val()),a.setParm("teamName",e("#teamname").val()),a.setParm("className",e("#classname").val()),a.loadData(n.url)}),e("#bntClear").click(function(){e("#username").val(""),e("#userno").val(""),e("#teamname").val(""),e("#classname").val("")}),{init:l}});