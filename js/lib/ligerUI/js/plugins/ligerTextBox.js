!function(t){function e(t,e){var l,i;if(t||(t=0),t=t.toString().replace(/\$|\,/g,"").replace(/[a-zA-Z]+/g,""),t.indexOf(".")>-1&&(t=t.replace(/[0]+$/g,"")),isNaN(t)&&(t=0),i=t==(t=Math.abs(t)),null==e)t=t.toString(),(l=-1!=t.indexOf(".")?t.substr(t.indexOf(".")+1):"")&&(t=Math.floor(1*t),t=t.toString());else{e=parseInt(e);var r=Math.pow(10,e);for(t=Math.floor(t*r+.50000000001),l=t%100,t=Math.floor(t/r).toString();l.toString().length<e;)l="0"+l}for(var n=0;n<Math.floor((t.length-(1+n))/3);n++)t=t.substring(0,t.length-(4*n+3))+","+t.substring(t.length-(4*n+3));var a=(i?"":"-")+t;return l&&(a+="."+l),a}t.fn.ligerTextBox=function(){return t.ligerui.run.call(this,"ligerTextBox",arguments)},t.fn.ligerGetTextBoxManager=function(){return t.ligerui.run.call(this,"ligerGetTextBoxManager",arguments)},t.ligerDefaults.TextBox={onChangeValue:null,onMouseOver:null,onMouseOut:null,onBlur:null,onFocus:null,width:null,disabled:!1,initSelect:!1,value:null,precision:2,nullText:null,digits:!1,number:!1,currency:!1,readonly:!1},t.ligerui.controls.TextBox=function(e,l){t.ligerui.controls.TextBox.base.constructor.call(this,e,l)},t.ligerui.controls.TextBox.ligerExtend(t.ligerui.controls.Input,{__getType:function(){return"TextBox"},__idPrev:function(){return"TextBox"},_init:function(){t.ligerui.controls.TextBox.base._init.call(this);var e=this,l=this.options;l.width||(l.width=t(e.element).width()),t(this.element).attr("readonly")?l.readonly=!0:l.readonly&&t(this.element).attr("readonly",!0)},_render:function(){var e=this,l=this.options;e.inputText=t(this.element),e.wrapper=e.inputText.wrap('<div class="l-text"></div>').parent(),e.wrapper.append('<div class="l-text-l"></div><div class="l-text-r"></div>'),e.inputText.hasClass("l-text-field")||e.inputText.addClass("l-text-field"),this._setEvent(),(l.digits||l.number||l.currency)&&e.inputText.addClass("l-text-field-number"),e.set(l),e.formatValue()},destroy:function(){var t=this;t.wrapper&&t.wrapper.remove(),t.options=null,liger.remove(this)},_getValue:function(){var t=this,e=this.options;return t.inputText.hasClass("l-text-field-null")?"":e.digits||e.number||e.currency?t.parseNumber():t.inputText.val()},_setNullText:function(){this.checkNotNull()},formatValue:function(){var t=this,l=this.options,i=t.inputText.val()||"";if(""==i)return"";if(l.currency)t.inputText.val(e(i,l.precision));else if(l.number&&l.precision&&i){var r=parseFloat(t.inputText.val()).toFixed(l.precision);t.inputText.val(r)}},checkNotNull:function(){var t=this,e=this.options;if(!e.nullText||"null"==e.nullText||e.disabled||e.readonly)t.inputText.removeClass("l-text-field-null");else if(!t.inputText.val())return void t.inputText.addClass("l-text-field-null").val(e.nullText)},_setEvent:function(){function e(){var t=i.inputText.val();return!t||"-"==t||(r.digits?/^-?\d+$/:/^(-?\d+)(\.)?(\d+)?$/).test(t)}function l(){e()||i.inputText.val(i.parseNumber())}var i=this,r=this.options;(r.digits||r.number||r.currency)&&i.inputText.keyup(l).bind("paste",l),i.inputText.bind("blur.textBox",function(){i.trigger("blur"),i.checkNotNull(),i.formatValue(),i.wrapper.removeClass("l-text-focus")}).bind("focus.textBox",function(){r.readonly||(i.trigger("focus"),r.nullText&&t(this).hasClass("l-text-field-null")&&t(this).removeClass("l-text-field-null").val(""),i.wrapper.addClass("l-text-focus"),(r.digits||r.number||r.currency)&&(t(this).val(i.parseNumber()),r.initSelect&&setTimeout(function(){i.inputText.select()},150)))}).change(function(){i.trigger("changeValue",[this.value])}),i.wrapper.hover(function(){i.trigger("mouseOver"),i.wrapper.addClass("l-text-over")},function(){i.trigger("mouseOut"),i.wrapper.removeClass("l-text-over")})},parseNumber:function(t){var e=this,l=this.options,i=!!l.digits;if(null==(t=t||e.inputText.val())||""==t)return"";if(!(l.digits||l.number||l.currency))return t;"string"!=typeof t&&(t=(t||"").toString());var r=/^\-/.test(t);if(i){if("0"==t)return t;t=t.replace(/\D+|^[0]+/g,"")}else t=t.replace(/[^0-9.]/g,""),/^[0]+[1-9]+/.test(t)&&(t=t.replace(/^[0]+/,""));return!i&&l.precision&&"NaN"==(t=parseFloat(t).toFixed(l.precision))?"0":(r&&(t="-"+t),t)},_setDisabled:function(t){var e=this.options;t?(this.inputText.attr("readonly","readonly"),this.wrapper.addClass("l-text-disabled")):e.readonly||(this.inputText.removeAttr("readonly"),this.wrapper.removeClass("l-text-disabled"))},_setWidth:function(t){t>20&&(this.wrapper.css({width:t}),this.inputText.css({width:t-4}))},_setHeight:function(t){t>10&&(this.wrapper.height(t),this.inputText.height(t-2))},_setValue:function(t){null!=t&&this.inputText.val(t),this.checkNotNull()},_setLabel:function(e){var l=this,i=this.options;if(l.labelwrapper)l.labelwrapper.find(".l-text-label").html(e+":&nbsp");else{l.labelwrapper=l.wrapper.wrap('<div class="l-labeltext"></div>').parent();var r=t('<div class="l-text-label" style="float:left;">'+e+":&nbsp</div>");l.labelwrapper.prepend(r),l.wrapper.css("float","left"),i.labelWidth?l._setLabelWidth(i.labelWidth):i.labelWidth=r.width(),r.height(l.wrapper.height()),i.labelAlign&&l._setLabelAlign(i.labelAlign),l.labelwrapper.append('<br style="clear:both;" />'),l.labelwrapper.width(i.labelWidth+i.width+2)}},_setLabelWidth:function(t){var e=this;this.options;e.labelwrapper&&e.labelwrapper.find(".l-text-label").width(t)},_setLabelAlign:function(t){var e=this;this.options;e.labelwrapper&&e.labelwrapper.find(".l-text-label").css("text-align",t)},updateStyle:function(){var t=this,e=this.options;t.inputText.attr("readonly")?(t.wrapper.addClass("l-text-readonly"),e.disabled=!0):(t.wrapper.removeClass("l-text-readonly"),e.disabled=!1),t.inputText.attr("disabled")?(t.wrapper.addClass("l-text-disabled"),e.disabled=!0):(t.wrapper.removeClass("l-text-disabled"),e.disabled=!1),t.inputText.hasClass("l-text-field-null")&&t.inputText.val()!=e.nullText&&t.inputText.removeClass("l-text-field-null"),t.formatValue()},setValue:function(t){this._setValue(t),this.trigger("changeValue",[t])}})}(jQuery);