!function($){if(Function.prototype.ligerExtend=function(t,e){if("function"!=typeof t)return this;this.base=t.prototype,this.base.constructor=t;var i=function(){};i.prototype=t.prototype,this.prototype=new i,this.prototype.constructor=this,e&&$.extend(this.prototype,e)},Function.prototype.ligerDefer=function(t,e,i){var r=this;return setTimeout(function(){r.apply(t,i||[])},e)},window.liger=$.ligerui={version:"V1.3.2",managerCount:0,managers:{},managerIdPrev:"ligerui",autoNewId:!0,error:{managerIsExist:"管理器id已经存在"},pluginPrev:"liger",attrPrev:"data",getId:function(t){t=t||this.managerIdPrev;var e=t+(1e3+this.managerCount);return this.managerCount++,e},add:function(t){if(2==arguments.length){var e=arguments[1];return e.id=e.id||e.options.id||arguments[0].id,void this.addManager(e)}t.id||(t.id=this.getId(t.__idPrev())),this.managers[t.id]=t},remove:function(t){if("string"==typeof t||"number"==typeof t)delete liger.managers[t];else if("object"==typeof t)if(t instanceof liger.core.Component)delete liger.managers[t.id];else{if(!$(t).attr(this.idAttrName))return!1;delete liger.managers[$(t).attr(this.idAttrName)]}},get:function(t,e){if(e=e||"ligeruiid","string"==typeof t||"number"==typeof t)return liger.managers[t];if("object"==typeof t){var i=t.length?t[0]:t,r=i[e]||$(i).attr(e);return r?liger.managers[r]:null}return null},find:function(t){var e=[];for(var i in this.managers){var r=this.managers[i];t instanceof Function?r instanceof t&&e.push(r):t instanceof Array?-1!=$.inArray(r.__getType(),t)&&e.push(r):r.__getType()==t&&e.push(r)}return e},run:function(t,e,i){if(t){if(i=$.extend({defaultsNamespace:"ligerDefaults",methodsNamespace:"ligerMethods",controlNamespace:"controls",idAttrName:"ligeruiid",isStatic:!1,hasElement:!0,propertyToElemnt:null},i||{}),t=t.replace(/^ligerGet/,""),t=t.replace(/^liger/,""),null==this||this==window||i.isStatic)return liger.plugins[t]||(liger.plugins[t]={fn:$[liger.pluginPrev+t],isStatic:!0}),new $.ligerui[i.controlNamespace][t]($.extend({},$[i.defaultsNamespace][t]||{},$[i.defaultsNamespace][t+"String"]||{},e.length>0?e[0]:{}));if(liger.plugins[t]||(liger.plugins[t]={fn:$.fn[liger.pluginPrev+t],isStatic:!1}),/Manager$/.test(t))return liger.get(this,i.idAttrName);if(this.each(function(){if(this[i.idAttrName]||$(this).attr(i.idAttrName)){var r=liger.get(this[i.idAttrName]||$(this).attr(i.idAttrName));return void(r&&e.length>0&&r.set(e[0]))}if(!(e.length>=1&&"string"==typeof e[0])){var n=e.length>0?e[0]:null,s=$.extend({},$[i.defaultsNamespace][t],$[i.defaultsNamespace][t+"String"],n);i.propertyToElemnt&&(s[i.propertyToElemnt]=this),i.hasElement?new $.ligerui[i.controlNamespace][t](this,s):new $.ligerui[i.controlNamespace][t](s)}}),0==this.length)return null;if(0==e.length)return liger.get(this,i.idAttrName);if("object"==typeof e[0])return liger.get(this,i.idAttrName);if("string"==typeof e[0]){var r=liger.get(this,i.idAttrName);if(null==r)return;if("option"!=e[0]){var n=e[0];if(!r[n])return;var s=Array.apply(null,e);return s.shift(),r[n].apply(r,s)}if(2==e.length)return r.get(e[1]);if(e.length>=3)return r.set(e[1],e[2])}return null}},defaults:{},methods:{},core:{},controls:{},plugins:{}},$.ligerDefaults={},$.ligerMethos={},liger.defaults=$.ligerDefaults,liger.methods=$.ligerMethos,$.fn.liger=function(t){return t?liger.run.call(this,t,arguments):liger.get(this)},liger.core.Component=function(t){this.events=this.events||{},this.options=t||{},this.children={}},$.extend(liger.core.Component.prototype,{__getType:function(){return"liger.core.Component"},__idPrev:function(){return"ligerui"},set:function(t,e,i){if(t)if("object"!=typeof t){var r=t;if(0==r.indexOf("on"))return void("function"==typeof e&&this.bind(r.substr(2),e));if(this.options||(this.options={}),0!=this.trigger("propertychange",[t,e])){this.options[r]=e;var n="_set"+r.substr(0,1).toUpperCase()+r.substr(1);this[n]&&this[n].call(this,e,i),this.trigger("propertychanged",[t,e])}}else{var s;if(this.options!=t?($.extend(this.options,t),s=t):s=$.extend({},t),void 0==e||1==e)for(var o in s)0==o.indexOf("on")&&this.set(o,s[o]);if(void 0==e||0==e)for(var o in s)0!=o.indexOf("on")&&this.set(o,s[o],i)}},get:function(t){var e="_get"+t.substr(0,1).toUpperCase()+t.substr(1);return this[e]?this[e].call(this,t):this.options[t]},hasBind:function(t){var e=t.toLowerCase(),i=this.events[e];return!(!i||!i.length)},trigger:function(t,e){if(t){var i=t.toLowerCase(),r=this.events[i];if(r){e=e||[],e instanceof Array==0&&(e=[e]);for(var n=0;n<r.length;n++){var s=r[n];if(0==s.handler.apply(s.context,e))return!1}}}},bind:function(t,e,i){if("object"!=typeof t){if("function"!=typeof e)return!1;var r=t.toLowerCase(),n=this.events[r]||[];i=i||this,n.push({handler:e,context:i}),this.events[r]=n}else for(var s in t)this.bind(s,t[s])},unbind:function(t,e){if(!t)return void(this.events={});var i=t.toLowerCase(),r=this.events[i];if(r&&r.length)if(e){for(var n=0,s=r.length;n<s;n++)if(r[n].handler==e){r.splice(n,1);break}}else delete this.events[i]},destroy:function(){liger.remove(this)}}),liger.core.UIComponent=function(t,e){liger.core.UIComponent.base.constructor.call(this,e);var i=this._extendMethods();i&&$.extend(this,i),this.element=t,this._init(),this._preRender(),this.trigger("render"),this._render(),this.trigger("rendered"),this._rendered()},liger.core.UIComponent.ligerExtend(liger.core.Component,{__getType:function(){return"liger.core.UIComponent"},_extendMethods:function(){},_init:function(){function loadDataOp(t,e){var i={};if(!t||-1!=t.indexOf("."))return i;var r=liger.defaults[t];if(!r)return i;for(var n in r)if(e.attr(liger.attrPrev+"-"+n)){var s=e.attr(liger.attrPrev+"-"+n);"boolean"==typeof r[n]?i[n]="true"==s||"1"==s:i[n]=s}return i}if(this.type=this.__getType(),this.element?this.id=this.options.id||this.element.id||liger.getId(this.__idPrev()):this.id=this.options.id||liger.getId(this.__idPrev()),liger.add(this),this.element){var attributes=this.attr();if(attributes&&attributes instanceof Array)for(var i=0;i<attributes.length;i++){var name=attributes[i];$(this.element).attr(name)&&(this.options[name]=$(this.element).attr(name))}var p=this.options;if($(this.element).attr("ligerui"))try{var attroptions=$(this.element).attr("ligerui");0!=attroptions.indexOf("{")&&(attroptions="{"+attroptions+"}"),eval("attroptions = "+attroptions+";"),attroptions&&$.extend(p,attroptions)}catch(t){}$.extend(p,loadDataOp(this.__getType(),$(this.element)))}},_preRender:function(){},_render:function(){},_rendered:function(){this.element&&$(this.element).attr("ligeruiid",this.id)},_setCls:function(t){this.element&&t&&$(this.element).addClass(t)},attr:function(){return[]},destroy:function(){this.element&&$(this.element).remove(),this.options=null,liger.remove(this)}}),liger.controls.Input=function(t,e){liger.controls.Input.base.constructor.call(this,t,e)},liger.controls.Input.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Input"},attr:function(){return["nullText"]},setValue:function(t){return this.set("value",t)},getValue:function(){return this.get("value")},_setReadonly:function(t){var e=this.wrapper||this.text;if(e&&e.hasClass("l-text")){var i=this.inputText;t?(i&&i.attr("readonly","readonly"),e.addClass("l-text-readonly")):(i&&i.removeAttr("readonly"),e.removeClass("l-text-readonly"))}},setReadonly:function(t){return this.set("readonly",t)},setEnabled:function(){return this.set("disabled",!1)},setDisabled:function(){return this.set("disabled",!0)},updateStyle:function(){},resize:function(t,e){this.set({width:t,height:e+2})}}),liger.win={top:!1,mask:function(t){function e(){if(liger.win.windowMask){var t=$(window).height()+$(window).scrollTop();liger.win.windowMask.height(t)}}this.windowMask||(this.windowMask=$("<div class='l-window-mask' style='display: block;'></div>").appendTo("body"),$(window).bind("resize.ligeruiwin",e),$(window).bind("scroll",e)),this.windowMask.show(),e(),this.masking=!0},unmask:function(t){for(var e=$("body > .l-dialog:visible,body > .l-window:visible"),i=0,r=e.length;i<r;i++){var n=e.eq(i).attr("ligeruiid");if(!t||t.id!=n){var s=liger.get(n);if(s){if(s.get("modal"))return}}}this.windowMask&&this.windowMask.hide(),this.masking=!1},createTaskbar:function(){return this.taskbar||(this.taskbar=$('<div class="l-taskbar"><div class="l-taskbar-tasks"></div><div class="l-clear"></div></div>').appendTo("body"),this.top&&this.taskbar.addClass("l-taskbar-top"),this.taskbar.tasks=$(".l-taskbar-tasks:first",this.taskbar),this.tasks={}),this.taskbar.show(),this.taskbar.animate({bottom:0}),this.taskbar},removeTaskbar:function(){var t=this;t.taskbar.animate({bottom:-32},function(){t.taskbar.remove(),t.taskbar=null})},activeTask:function(t){for(var e in this.tasks){var i=this.tasks[e];e==t.id?i.addClass("l-taskbar-task-active"):i.removeClass("l-taskbar-task-active")}},getTask:function(t){var e=this;if(e.taskbar)return e.tasks[t.id]?e.tasks[t.id]:null},addTask:function(t){var e=this;if(e.taskbar||e.createTaskbar(),e.tasks[t.id])return e.tasks[t.id];var i=t.get("title"),r=e.tasks[t.id]=$('<div class="l-taskbar-task"><div class="l-taskbar-task-icon"></div><div class="l-taskbar-task-content">'+i+"</div></div>");return e.taskbar.tasks.append(r),e.activeTask(t),r.bind("click",function(){e.activeTask(t),t.actived?t.min():t.active()}).hover(function(){$(this).addClass("l-taskbar-task-over")},function(){$(this).removeClass("l-taskbar-task-over")}),r},hasTask:function(){for(var t in this.tasks)if(this.tasks[t])return!0;return!1},removeTask:function(t){var e=this;e.taskbar&&(e.tasks[t.id]&&(e.tasks[t.id].unbind(),e.tasks[t.id].remove(),delete e.tasks[t.id]),e.hasTask()||e.removeTaskbar())},setFront:function(t){var e=liger.find(liger.core.Win);for(var i in e){var r=e[i];r==t?($(r.element).css("z-index","9200"),this.activeTask(r)):$(r.element).css("z-index","9100")}}},liger.core.Win=function(t,e){liger.core.Win.base.constructor.call(this,t,e)},liger.core.Win.ligerExtend(liger.core.UIComponent,{__getType:function(){return"liger.controls.Win"},mask:function(){this.options.modal&&liger.win.mask(this)},unmask:function(){this.options.modal&&liger.win.unmask(this)},min:function(){},max:function(){},active:function(){}}),liger.draggable={dragging:!1},liger.resizable={reszing:!1},liger.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(t){var e=function(t){return t<10?"0"+t:t},i=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=function(t){return i.lastIndex=0,i.test(t)?'"'+t.replace(i,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'};if(null===t)return"null";var n=typeof t;if("undefined"!==n){if("string"===n)return r(t);if("number"===n||"boolean"===n)return""+t;if("object"===n){if("function"==typeof t.toJSON)return liger.toJSON(t.toJSON());if(t.constructor===Date)return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null;var s=[];if(t.constructor===Array){for(var o=0,a=t.length;o<a;o++)s.push(liger.toJSON(t[o])||"null");return"["+s.join(",")+"]"}var l,d;for(var u in t){if("number"===(n=typeof u))l='"'+u+'"';else{if("string"!==n)continue;l=r(u)}n=typeof t[u],"function"!==n&&"undefined"!==n&&(d=liger.toJSON(t[u]),s.push(l+":"+d))}return"{"+s.join(",")+"}"}}},liger.getEditor=function(t){var e=t.type,i=t.control,r=t.master;if(!e)return null;var n=0;i&&(i=i.substr(0,1).toUpperCase()+i.substr(1));var s={create:function(s,o,a){var l=o.field||o.column,d=a||{},u=!!o.column,f=$.extend({},t.options),c="text";-1!=$.inArray(e,["password","file","checkbox","radio"])&&(c=e),t.password&&(c="password");var g=$("<input type='"+c+"'/>");if(t.body&&(g=t.body.clone()),g.appendTo(s),o.field){var h=l.name,p=$.isFunction(d.prefixID)?d.prefixID(r):d.prefixID||"";if(f.id=l.id||p+l.name,-1!=$.inArray(e,["select","combobox","autocomplete","popup"])&&(h=l.textField||l.comboboxName,l.comboboxName&&!l.id&&(f.id=(d.prefixID||"")+l.comboboxName)),-1!=$.inArray(e,["select","combobox","autocomplete","popup","radiolist","checkboxlist","listbox"])&&(f.valueFieldID=p+l.name),!t.body){var v=p+h,m=(new Date).getTime()+"_"+ ++n+"_"+l.name;g.attr($.extend({id:m,name:v},l.attr)),l.cssClass&&g.addClass(l.cssClass),l.validate&&!r.options.unSetValidateAttr&&g.attr("validate",liger.toJSON(l.validate))}$.extend(f,l.options)}if(l.dictionary&&(l.editor=l.editor||{},!l.editor.data)){var b=[],y=l.dictionary.split("|");$(y).each(function(t,e){var i=e.split(","),r=i[0],n=i.length>=2?i[1]:i[0];b.push({id:r,value:r,text:n})}),l.editor.data=b}if(l.editor){l.editor.options&&($.extend(f,l.editor.options),delete l.editor.options),l.editor.valueColumnName&&(f.valueField=l.editor.valueColumnName,delete l.editor.valueColumnName),l.editor.displayColumnName&&(f.textField=l.editor.displayColumnName,delete l.editor.displayColumnName);var x=l.editor.p||l.editor.ext;x&&(x="function"==typeof x?x(o):x,$.extend(f,x),delete l.editor.p,delete l.editor.ext),$.extend(f,l.editor)}u?(f.host_grid=this,f.host_grid_row=o.record,f.host_grid_column=o.column):(f.host_form=this,(l.readonly||f.host_form.get("readonly"))&&(f.readonly=!0));var k=g["liger"+i](f);return u&&setTimeout(function(){g.focus()},100),k},getValue:function(t,e){var i=e.field||e.column;if(t.getValue){var r=t.getValue(),n=e.column?e.column.editor.type:e.field.type;if(i&&i.editor&&i.editor.isArrayValue&&r&&(r=r.split(";")),i&&i.editor&&i.editor.isRef&&t.getText&&(r=[r,t.getText()]),i&&i.editor&&i.editor.isRefMul&&t.getText){var s=r.split(";"),o=t.getText().split(";");r=[];for(var a=0;a<s.length;a++)r.push([s[a],o[a]])}return"int"==n||"digits"==n?r=r?parseInt(r,10):0:"float"!=n&&"number"!=n||(r=r?parseFloat(r):0),r}},setValue:function(t,e,i){var r=i.field||i.column;if(t.setValue){if(r&&r.editor&&r.editor.isArrayValue&&e&&(e=e.join(";")),r&&r.editor&&r.editor.isRef&&$.isArray(e)&&(e=e[0]),r&&r.editor&&r.editor.isRefMul&&$.isArray(e)){for(var n=[],s=0;s<e.length;s++)n.push(e[s].length>1?e[s][1]:e[s][0]);e=n.join(";")}t.setValue(e)}},getText:function(t,e){e.field||e.column;if(t.getText){var i=t.getText();if(i)return i}},setText:function(t,e,i){if(e&&t.setText)t.setText(e);else{var r=i.field||i.column;if(e=t.setValue()||i.value||"",r&&r.editor&&r.editor.isRef&&$.isArray(e)&&e.length>1&&(e=e[1]),r&&r.editor&&r.editor.isRefMul&&$.isArray(e)&&e.length>1){for(var n=[],s=0;s<e.length;s++)n.push(e[1]);e=n.join(";")}t.setText&&t.setText(e)}},getSelected:function(t,e){if(t.getSelected)return t.getSelected()},resize:function(t,e,i,r){r.field&&(e-=2),t.resize&&t.resize(e,i)},setEnabled:function(t,e){e?t.setEnabled&&t.setEnabled():t.setDisabled&&t.setDisabled()},destroy:function(t,e){t.destroy&&t.destroy()}};return $.extend({},s,liger.editorCreatorDefaults||{},t)},liger.editors={text:{control:"TextBox"},date:{control:"DateEditor",setValue:function(editor,value,editParm){"string"==typeof value&&/^\/Date/.test(value)&&(value=value.replace(/^\//,"new ").replace(/\/$/,""),eval("value = "+value)),editor.setValue(value)}},combobox:{control:"ComboBox"},spinner:{control:"Spinner"},checkbox:{control:"CheckBox"},checkboxlist:{control:"CheckBoxList",body:$("<div></div>"),resize:function(t,e,i,r){t.set("width",e-2)}},radiolist:{control:"RadioList",body:$("<div></div>"),resize:function(t,e,i,r){t.set("width",e-2)}},listbox:{control:"ListBox",body:$("<div></div>"),resize:function(t,e,i,r){t.set("width",e-2)}},popup:{control:"PopupEdit"},number:{control:"TextBox",options:{number:!0}},currency:{control:"TextBox",options:{currency:!0}},digits:{control:"TextBox",options:{digits:!0}},password:{control:"TextBox",password:!0}},liger.editors.string=liger.editors.text,liger.editors.select=liger.editors.combobox,liger.editors.int=liger.editors.digits,liger.editors.float=liger.editors.number,liger.editors.chk=liger.editors.checkbox,liger.editors.popupedit=liger.editors.popup,$.fn.live=$.fn.on?$.fn.on:$.fn.live,!$.browser){var userAgent=navigator.userAgent.toLowerCase();$.browser={version:(userAgent.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(userAgent),opera:/opera/.test(userAgent),msie:/msie/.test(userAgent)&&!/opera/.test(userAgent),mozilla:/mozilla/.test(userAgent)&&!/(compatible|webkit)/.test(userAgent)}}}(jQuery);